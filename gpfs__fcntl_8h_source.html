<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>nfs-ganesha: gpfs_fcntl.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nfs-ganesha&#160;<span id="projectnumber">1.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>gpfs_fcntl.h</h1>  </div>
</div>
<div class="contents">
<a href="gpfs__fcntl_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* Copyright (C) 2001 International Business Machines</span>
<a name="l00002"></a>00002 <span class="comment"> * All rights reserved.                                                         </span>
<a name="l00003"></a>00003 <span class="comment"> *                                                                              </span>
<a name="l00004"></a>00004 <span class="comment"> * This file is part of the GPFS user library.                                  </span>
<a name="l00005"></a>00005 <span class="comment"> *                                                                              </span>
<a name="l00006"></a>00006 <span class="comment"> * Redistribution and use in source and binary forms, with or without           </span>
<a name="l00007"></a>00007 <span class="comment"> * modification, are permitted provided that the following conditions           </span>
<a name="l00008"></a>00008 <span class="comment"> * are met:                                                                     </span>
<a name="l00009"></a>00009 <span class="comment"> *                                                                              </span>
<a name="l00010"></a>00010 <span class="comment"> *  1. Redistributions of source code must retain the above copyright notice,   </span>
<a name="l00011"></a>00011 <span class="comment"> *     this list of conditions and the following disclaimer.                    </span>
<a name="l00012"></a>00012 <span class="comment"> *  2. Redistributions in binary form must reproduce the above copyright        </span>
<a name="l00013"></a>00013 <span class="comment"> *     notice, this list of conditions and the following disclaimer in the      </span>
<a name="l00014"></a>00014 <span class="comment"> *     documentation and/or other materials provided with the distribution.     </span>
<a name="l00015"></a>00015 <span class="comment"> *  3. The name of the author may not be used to endorse or promote products    </span>
<a name="l00016"></a>00016 <span class="comment"> *     derived from this software without specific prior written                </span>
<a name="l00017"></a>00017 <span class="comment"> *     permission.                                                              </span>
<a name="l00018"></a>00018 <span class="comment"> *                                                                              </span>
<a name="l00019"></a>00019 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS&#39;&#39; AND ANY EXPRESS OR         </span>
<a name="l00020"></a>00020 <span class="comment"> * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES    </span>
<a name="l00021"></a>00021 <span class="comment"> * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.      </span>
<a name="l00022"></a>00022 <span class="comment"> * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, </span>
<a name="l00023"></a>00023 <span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, </span>
<a name="l00024"></a>00024 <span class="comment"> * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;  </span>
<a name="l00025"></a>00025 <span class="comment"> * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,     </span>
<a name="l00026"></a>00026 <span class="comment"> * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR      </span>
<a name="l00027"></a>00027 <span class="comment"> * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF       </span>
<a name="l00028"></a>00028 <span class="comment"> * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                                   </span>
<a name="l00029"></a>00029 <span class="comment"> *                                                                              </span>
<a name="l00030"></a>00030 <span class="comment"> */</span>
<a name="l00031"></a>00031 <span class="comment">/* @(#)51       1.38  src/avs/fs/mmfs/ts/kernext/gpfs_fcntl.h, mmfs, avs_rhrz 1/27/12 09:58:58 */</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="comment">/*</span>
<a name="l00034"></a>00034 <span class="comment"> * GPFS interface definitions for supporting I/O hints and directives.</span>
<a name="l00035"></a>00035 <span class="comment"> *</span>
<a name="l00036"></a>00036 <span class="comment"> * Usage: The argument to gpfs_fcntl is composed of the concatenation of</span>
<a name="l00037"></a>00037 <span class="comment"> * structures defined in this file.  The first structure must be of type</span>
<a name="l00038"></a>00038 <span class="comment"> * gpfsFcntlHeader_t.  This is immediately followed by additional</span>
<a name="l00039"></a>00039 <span class="comment"> * structures, one for each hint or directive supplied.  The totalLength</span>
<a name="l00040"></a>00040 <span class="comment"> * field of the header contains the length of all of the structures,</span>
<a name="l00041"></a>00041 <span class="comment"> * including the header itself.  Each structure is defined to be a multiple</span>
<a name="l00042"></a>00042 <span class="comment"> * of 8 bytes in length, and the highest alignment requirement of any of the</span>
<a name="l00043"></a>00043 <span class="comment"> * data types is also 8 bytes, so the compiler will not insert padding when</span>
<a name="l00044"></a>00044 <span class="comment"> * several structures are declared within an outer structure.  This makes</span>
<a name="l00045"></a>00045 <span class="comment"> * it easier to build up the necessary area before calling gpfs_fcntl.</span>
<a name="l00046"></a>00046 <span class="comment"> *</span>
<a name="l00047"></a>00047 <span class="comment"> * For example, the following code fragment first releases all cached data</span>
<a name="l00048"></a>00048 <span class="comment"> * held on behalf of a file, then tells GPFS that this node will write</span>
<a name="l00049"></a>00049 <span class="comment"> * the portion of the file with file offsets between 2G and 3G-1:</span>
<a name="l00050"></a>00050 <span class="comment"> *   struct</span>
<a name="l00051"></a>00051 <span class="comment"> *   {</span>
<a name="l00052"></a>00052 <span class="comment"> *     gpfsFcntlHeader_t hdr;</span>
<a name="l00053"></a>00053 <span class="comment"> *     gpfsClearFileCache_t rel;</span>
<a name="l00054"></a>00054 <span class="comment"> *     gpfsAccessRange_t acc;</span>
<a name="l00055"></a>00055 <span class="comment"> *   } arg;</span>
<a name="l00056"></a>00056 <span class="comment"> *</span>
<a name="l00057"></a>00057 <span class="comment"> *   arg.hdr.totalLength = sizeof(arg);</span>
<a name="l00058"></a>00058 <span class="comment"> *   arg.hdr.fcntlVersion = GPFS_FCNTL_CURRENT_VERSION;</span>
<a name="l00059"></a>00059 <span class="comment"> *   arg.hdr.fcntlReserved = 0;</span>
<a name="l00060"></a>00060 <span class="comment"> *   arg.rel.structLen = sizeof(arg.rel);</span>
<a name="l00061"></a>00061 <span class="comment"> *   arg.rel.structType = GPFS_CLEAR_FILE_CACHE;</span>
<a name="l00062"></a>00062 <span class="comment"> *   arg.acc.structLen = sizeof(arg.acc);</span>
<a name="l00063"></a>00063 <span class="comment"> *   arg.acc.structType = GPFS_ACCESS_RANGE;</span>
<a name="l00064"></a>00064 <span class="comment"> *   arg.acc.start = 2LL * 1024LL * 1024LL * 1024LL;</span>
<a name="l00065"></a>00065 <span class="comment"> *   arg.acc.length = 1024 * 1024 * 1024;</span>
<a name="l00066"></a>00066 <span class="comment"> *   arg.acc.isWrite = 1;</span>
<a name="l00067"></a>00067 <span class="comment"> *   rc = gpfs_fcntl(handle, &amp;arg);</span>
<a name="l00068"></a>00068 <span class="comment"> *</span>
<a name="l00069"></a>00069 <span class="comment"> * If gpfs_fcntl returns an error (rc -1), errno will contain the error</span>
<a name="l00070"></a>00070 <span class="comment"> * reason, and the errorOffset field of the header will contain the offset</span>
<a name="l00071"></a>00071 <span class="comment"> * of the offending structure within the argument area.</span>
<a name="l00072"></a>00072 <span class="comment"> *</span>
<a name="l00073"></a>00073 <span class="comment"> * In general, the structures within the argument are processed in order,</span>
<a name="l00074"></a>00074 <span class="comment"> * except that data shipping directives are performed after all other hints</span>
<a name="l00075"></a>00075 <span class="comment"> * and directives.</span>
<a name="l00076"></a>00076 <span class="comment"> */</span>
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="preprocessor">#ifndef _h_gpfs_fcntl</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span><span class="preprocessor">#define _h_gpfs_fcntl</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span>
<a name="l00081"></a>00081 <span class="comment">/* open source interfaces */</span>
<a name="l00082"></a>00082 <span class="preprocessor">#include &lt;<a class="code" href="gpfs_8h.html">gpfs.h</a>&gt;</span>
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00085"></a>00085 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span>
<a name="l00086"></a>00086 {
<a name="l00087"></a>00087 <span class="preprocessor">#endif</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span>
<a name="l00089"></a>00089 <span class="comment">/* Header of the parameter area passed to gpfs_fcntl */</span>
<a name="l00090"></a><a class="code" href="structgpfsFcntlHeader__t.html">00090</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00091"></a>00091 {
<a name="l00092"></a><a class="code" href="structgpfsFcntlHeader__t.html#a622a7f9c19ad06a7030c903e89b33f81">00092</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsFcntlHeader__t.html#a622a7f9c19ad06a7030c903e89b33f81">totalLength</a>;    <span class="comment">/* length of this structure plus the sum of</span>
<a name="l00093"></a>00093 <span class="comment">                                   the lengths of all structures in this</span>
<a name="l00094"></a>00094 <span class="comment">                                   gpfs_fcntl argument */</span>
<a name="l00095"></a><a class="code" href="structgpfsFcntlHeader__t.html#a5850939cfabb18c97b107f3edc554da2">00095</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsFcntlHeader__t.html#a5850939cfabb18c97b107f3edc554da2">fcntlVersion</a>;   <span class="comment">/* version number: GPFS_FCNTL_CURRENT_VERSION */</span>
<a name="l00096"></a><a class="code" href="structgpfsFcntlHeader__t.html#aa2af9cd865e2c91db2121abb11ea4d9b">00096</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsFcntlHeader__t.html#aa2af9cd865e2c91db2121abb11ea4d9b">errorOffset</a>;    <span class="comment">/* Returned value giving offset into parameter</span>
<a name="l00097"></a>00097 <span class="comment">                                   area of the structure to which errno</span>
<a name="l00098"></a>00098 <span class="comment">                                   pertains.  Only set if errno is set. */</span>
<a name="l00099"></a><a class="code" href="structgpfsFcntlHeader__t.html#a1f44e4b8fda77552d01ea1490b749d0f">00099</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsFcntlHeader__t.html#a1f44e4b8fda77552d01ea1490b749d0f">fcntlReserved</a>;  <span class="comment">/* not used, should be set to 0 */</span>
<a name="l00100"></a>00100 } <a class="code" href="structgpfsFcntlHeader__t.html">gpfsFcntlHeader_t</a>;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <span class="comment">/* Moved it here from tshints.C, since function tschattr also uses it while </span>
<a name="l00103"></a>00103 <span class="comment"> * filling in errReason into argument structure. */</span>
<a name="l00104"></a><a class="code" href="structgenericStruct__t.html">00104</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00105"></a>00105 {
<a name="l00106"></a><a class="code" href="structgenericStruct__t.html#a45927f00acde62a2616ed185402590e6">00106</a>     <span class="keywordtype">int</span> <a class="code" href="structgenericStruct__t.html#a45927f00acde62a2616ed185402590e6">structLen</a>;    <span class="comment">/* length of the entire argument */</span>
<a name="l00107"></a><a class="code" href="structgenericStruct__t.html#a8b0fd6264927fc3a7717c4eb48eceb33">00107</a>     <span class="keywordtype">int</span> <a class="code" href="structgenericStruct__t.html#a8b0fd6264927fc3a7717c4eb48eceb33">structType</a>;   <span class="comment">/* identifier of the hint */</span>
<a name="l00108"></a>00108 } <a class="code" href="structgenericStruct__t.html">genericStruct_t</a>;
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 
<a name="l00111"></a>00111 <span class="comment">/* Interface version number (fcntlVersion field of gpfsFcntlHeader_t) */</span>
<a name="l00112"></a><a class="code" href="gpfs__fcntl_8h.html#a67095461d4f4a64d8a6e4ac19f6d2724">00112</a> <span class="preprocessor">#define GPFS_FCNTL_CURRENT_VERSION      1</span>
<a name="l00113"></a>00113 <span class="preprocessor"></span>
<a name="l00114"></a>00114 <span class="comment">/* Maximum length of argument to gpfs_fcntl */</span>
<a name="l00115"></a><a class="code" href="gpfs__fcntl_8h.html#a0fa7bb7755394d273aefa8e7c9479aaa">00115</a> <span class="preprocessor">#define GPFS_MAX_FCNTL_LENGTH       65536</span>
<a name="l00116"></a>00116 <span class="preprocessor"></span>
<a name="l00117"></a>00117 <span class="comment">/* Maximum length of a name arguement passed to or returned from gpfs_fcntl.</span>
<a name="l00118"></a>00118 <span class="comment">   Length of buffer must be a multiple of 8. */</span>
<a name="l00119"></a><a class="code" href="gpfs__fcntl_8h.html#a27dfa9148c5b1b6a68a0ce55a89eaefc">00119</a> <span class="preprocessor">#define GPFS_FCNTL_MAX_NAME_BUFFER  1024 </span>
<a name="l00120"></a><a class="code" href="gpfs__fcntl_8h.html#ab97d0dc149a9ebcf321a0207f45097a2">00120</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_MIN_NAME_BUFFER  8</span>
<a name="l00121"></a>00121 <span class="preprocessor"></span>
<a name="l00122"></a>00122 
<a name="l00123"></a>00123 <span class="comment">/* Definitions of structType fields for GPFS hints.  Hints can be ignored</span>
<a name="l00124"></a>00124 <span class="comment">   by GPFS without affecting correct operation, although performance might</span>
<a name="l00125"></a>00125 <span class="comment">   suffer. */</span>
<a name="l00126"></a><a class="code" href="gpfs__fcntl_8h.html#a740795335659fa252c88b5aecdec95c5">00126</a> <span class="preprocessor">#define GPFS_ACCESS_RANGE            1001</span>
<a name="l00127"></a><a class="code" href="gpfs__fcntl_8h.html#ab50c38268f664c7d9f29a30730a88951">00127</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FREE_RANGE              1002</span>
<a name="l00128"></a><a class="code" href="gpfs__fcntl_8h.html#ab7ced2cfda382cfaaa92356f410ba01c">00128</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_MULTIPLE_ACCESS_RANGE   1003</span>
<a name="l00129"></a><a class="code" href="gpfs__fcntl_8h.html#a4cfb629e81893aebe2dac04daf202cdf">00129</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_CLEAR_FILE_CACHE        1004</span>
<a name="l00130"></a>00130 <span class="preprocessor"></span>
<a name="l00131"></a>00131 <span class="comment">/* Definitions of structType fields for GPFS directives.  GPFS must honor</span>
<a name="l00132"></a>00132 <span class="comment">   directives, or return an error saying why a directive could not be</span>
<a name="l00133"></a>00133 <span class="comment">   honored. */</span>
<a name="l00134"></a><a class="code" href="gpfs__fcntl_8h.html#a83c5ed257229e3ab0c50d5a103c6eb97">00134</a> <span class="preprocessor">#define GPFS_CANCEL_HINTS            2001</span>
<a name="l00135"></a><a class="code" href="gpfs__fcntl_8h.html#a9bdbd4c30429f9cb99efe5578bbfa7fa">00135</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_DATA_SHIP_START         2002</span>
<a name="l00136"></a><a class="code" href="gpfs__fcntl_8h.html#a5e0d836d213169fa4bc2fd48f742e0ff">00136</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_DATA_SHIP_MAP           2003</span>
<a name="l00137"></a><a class="code" href="gpfs__fcntl_8h.html#a870311b26758dc3994d3119321988b0b">00137</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_DATA_SHIP_STOP          2004</span>
<a name="l00138"></a><a class="code" href="gpfs__fcntl_8h.html#a9ad5c2b2a521dc2f50e7f93126fa732e">00138</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_SET_REPLICATION   2005</span>
<a name="l00139"></a><a class="code" href="gpfs__fcntl_8h.html#a6e32d177fbea9ed216f52daf51c57cb7">00139</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_SET_STORAGEPOOL   2006</span>
<a name="l00140"></a><a class="code" href="gpfs__fcntl_8h.html#aee059140787d27cb683216626bb1a9f9">00140</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_RESTRIPE_DATA     2007</span>
<a name="l00141"></a><a class="code" href="gpfs__fcntl_8h.html#a65c24070be3e35e2c92212f850e05122">00141</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_RESTRIPE_RANGE    2008</span>
<a name="l00142"></a>00142 <span class="preprocessor"></span>
<a name="l00143"></a>00143 
<a name="l00144"></a>00144 <span class="comment">/* Definitions of structType fileds for GPFS inquiries. Inquiries merely</span>
<a name="l00145"></a>00145 <span class="comment">   return GPFS attributes of existing files. */</span>
<a name="l00146"></a><a class="code" href="gpfs__fcntl_8h.html#a6f8b606e2e309b4b46646c6be6425079">00146</a> <span class="preprocessor">#define GPFS_FCNTL_GET_REPLICATION       3001</span>
<a name="l00147"></a><a class="code" href="gpfs__fcntl_8h.html#ae2e9811f2118696686a3b4e47b03b89a">00147</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_GET_STORAGEPOOL       3002</span>
<a name="l00148"></a><a class="code" href="gpfs__fcntl_8h.html#a711fd2dbd86c16203acaba116e1cd81c">00148</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_GET_FILESETNAME       3003</span>
<a name="l00149"></a><a class="code" href="gpfs__fcntl_8h.html#aad76b5e03cfb97d63917575084adb686">00149</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_GET_SNAPSHOTNAME      3004</span>
<a name="l00150"></a><a class="code" href="gpfs__fcntl_8h.html#a2027cb51996de3028473b62ecccbf07c">00150</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_GET_DATABLKDISKIDX    3005</span>
<a name="l00151"></a>00151 <span class="preprocessor"></span>
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 <span class="comment">/* Structures for specifying the various gpfs_fnctl hints */</span>
<a name="l00154"></a>00154 
<a name="l00155"></a>00155 <span class="comment">/* Access range hint:  The application will soon access file offsets within</span>
<a name="l00156"></a>00156 <span class="comment">   the given range, and will not access offsets outside the range.  Violating</span>
<a name="l00157"></a>00157 <span class="comment">   this hint may produce worse performance than if no hint was specified. */</span>
<a name="l00158"></a><a class="code" href="structgpfsAccessRange__t.html">00158</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00159"></a>00159 {
<a name="l00160"></a><a class="code" href="structgpfsAccessRange__t.html#a550ad9aaa3504c03b0587f5a2e1bbefe">00160</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsAccessRange__t.html#a550ad9aaa3504c03b0587f5a2e1bbefe">structLen</a>;      <span class="comment">/* length of this structure */</span>
<a name="l00161"></a><a class="code" href="structgpfsAccessRange__t.html#ab15c1ee7ee4218420024a66eba8ab6ea">00161</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsAccessRange__t.html#ab15c1ee7ee4218420024a66eba8ab6ea">structType</a>;     <span class="comment">/* hint identifier: GPFS_ACCESS_RANGE */</span>
<a name="l00162"></a><a class="code" href="structgpfsAccessRange__t.html#a780633a088eca91710dcd5488538d924">00162</a>   <span class="keywordtype">long</span> <span class="keywordtype">long</span>     <a class="code" href="structgpfsAccessRange__t.html#a780633a088eca91710dcd5488538d924">start</a>;          <span class="comment">/* start offset in bytes from beginning of file */</span>
<a name="l00163"></a><a class="code" href="structgpfsAccessRange__t.html#a867e023740bdf7c24ccc746254fc11d0">00163</a>   <span class="keywordtype">long</span> <span class="keywordtype">long</span>     <a class="code" href="structgpfsAccessRange__t.html#a867e023740bdf7c24ccc746254fc11d0">length</a>;         <span class="comment">/* length of range; 0 indicates to end of file */</span>
<a name="l00164"></a><a class="code" href="structgpfsAccessRange__t.html#a30414906541d93359bb243bc1d0fec6f">00164</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsAccessRange__t.html#a30414906541d93359bb243bc1d0fec6f">isWrite</a>;        <span class="comment">/* 0 - read access, 1 - write access */</span>
<a name="l00165"></a><a class="code" href="structgpfsAccessRange__t.html#a0ee05b7840322f5f1ce49b4387a523ee">00165</a>   <span class="keywordtype">char</span>          padding[4];
<a name="l00166"></a>00166 } <a class="code" href="structgpfsAccessRange__t.html">gpfsAccessRange_t</a>;
<a name="l00167"></a>00167 
<a name="l00168"></a>00168 
<a name="l00169"></a>00169 <span class="comment">/* Free range hint: the application will no longer access file offsets</span>
<a name="l00170"></a>00170 <span class="comment">   within the given range, so GPFS is free to flush those file offsets from</span>
<a name="l00171"></a>00171 <span class="comment">   its cache. */</span>
<a name="l00172"></a><a class="code" href="structgpfsFreeRange__t.html">00172</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00173"></a>00173 {
<a name="l00174"></a><a class="code" href="structgpfsFreeRange__t.html#a512d5de9a4c5087990601fea4ac02620">00174</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsFreeRange__t.html#a512d5de9a4c5087990601fea4ac02620">structLen</a>;      <span class="comment">/* length of this structure */</span>
<a name="l00175"></a><a class="code" href="structgpfsFreeRange__t.html#ad9f738949acdf3825a6f2db60bada5ad">00175</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsFreeRange__t.html#ad9f738949acdf3825a6f2db60bada5ad">structType</a>;     <span class="comment">/* hint identifier: GPFS_FREE_RANGE */</span>
<a name="l00176"></a><a class="code" href="structgpfsFreeRange__t.html#abe7a8b222ac395239488b4539d5037e0">00176</a>   <span class="keywordtype">long</span> <span class="keywordtype">long</span>     <a class="code" href="structgpfsFreeRange__t.html#abe7a8b222ac395239488b4539d5037e0">start</a>;          <span class="comment">/* start offset in bytes from beginning of file */</span>
<a name="l00177"></a><a class="code" href="structgpfsFreeRange__t.html#ad797ea0e4061dd3ddece5cd1b12c704b">00177</a>   <span class="keywordtype">long</span> <span class="keywordtype">long</span>     <a class="code" href="structgpfsFreeRange__t.html#ad797ea0e4061dd3ddece5cd1b12c704b">length</a>;         <span class="comment">/* length of range; 0 indicates to end of file */</span>
<a name="l00178"></a>00178 } <a class="code" href="structgpfsFreeRange__t.html">gpfsFreeRange_t</a>;
<a name="l00179"></a>00179 
<a name="l00180"></a>00180 
<a name="l00181"></a>00181 <span class="comment">/* Format of accRangeArray and relRangeArray entries used by</span>
<a name="l00182"></a>00182 <span class="comment">   GPFS_MULTIPLE_ACCESS_RANGE hint */</span>
<a name="l00183"></a><a class="code" href="structgpfsRangeArray__t.html">00183</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00184"></a>00184 {
<a name="l00185"></a><a class="code" href="structgpfsRangeArray__t.html#a1cf2ecc8daeb9081f406f778a4038845">00185</a>   <span class="keywordtype">long</span> <span class="keywordtype">long</span>     <a class="code" href="structgpfsRangeArray__t.html#a1cf2ecc8daeb9081f406f778a4038845">blockNumber</a>;    <span class="comment">/* data block number to access */</span>
<a name="l00186"></a><a class="code" href="structgpfsRangeArray__t.html#a0e2175a012c97776166becaba32ddd0e">00186</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsRangeArray__t.html#a0e2175a012c97776166becaba32ddd0e">start</a>;          <span class="comment">/* start of range (from beginning of block) */</span>
<a name="l00187"></a><a class="code" href="structgpfsRangeArray__t.html#a68a577dde78840850acf78c3a8a5fecf">00187</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsRangeArray__t.html#a68a577dde78840850acf78c3a8a5fecf">length</a>;         <span class="comment">/* number of bytes in the range  */</span>
<a name="l00188"></a><a class="code" href="structgpfsRangeArray__t.html#aa1f7a4d0da45b828d0815d634d5c4a34">00188</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsRangeArray__t.html#aa1f7a4d0da45b828d0815d634d5c4a34">isWrite</a>;        <span class="comment">/* 0 - read access, 1 - write access */</span>
<a name="l00189"></a><a class="code" href="structgpfsRangeArray__t.html#a10415a13dbd90e881222123284cb1657">00189</a>   <span class="keywordtype">char</span>          padding[4];
<a name="l00190"></a>00190 } <a class="code" href="structgpfsRangeArray__t.html">gpfsRangeArray_t</a>;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192 <span class="comment">/* Multiple access range hint: This hint is used to drive application-defined</span>
<a name="l00193"></a>00193 <span class="comment">   prefetching and writebehind.  The application will soon access the</span>
<a name="l00194"></a>00194 <span class="comment">   portions of the blocks specified in accRangeArray, and has finished</span>
<a name="l00195"></a>00195 <span class="comment">   accessing the ranges listed in relRangeArray.  The size of a block is</span>
<a name="l00196"></a>00196 <span class="comment">   returned by stat in the st_blksize field, so offset OFF of a file is in</span>
<a name="l00197"></a>00197 <span class="comment">   block OFF/st_blksize.  Up to GPFS_MAX_RANGE_COUNT blocks may be given in</span>
<a name="l00198"></a>00198 <span class="comment">   one multiple access range hint.  Depending on the current load, GPFS may</span>
<a name="l00199"></a>00199 <span class="comment">   initiate prefetching of some or all of these.  Each range named in</span>
<a name="l00200"></a>00200 <span class="comment">   accRangeArray that is accepted for prefetching should eventually be</span>
<a name="l00201"></a>00201 <span class="comment">   released via relRangeArray, or else GPFS will stop prefetching blocks</span>
<a name="l00202"></a>00202 <span class="comment">   for this file. */</span>
<a name="l00203"></a><a class="code" href="gpfs__fcntl_8h.html#a8e316aa6e85bf886c9b7380d08b3cc10">00203</a> <span class="preprocessor">#define GPFS_MAX_RANGE_COUNT 8</span>
<a name="l00204"></a><a class="code" href="structgpfsMultipleAccessRange__t.html">00204</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00205"></a>00205 {
<a name="l00206"></a><a class="code" href="structgpfsMultipleAccessRange__t.html#a08e83d794095d42652871037ea22dc72">00206</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsMultipleAccessRange__t.html#a08e83d794095d42652871037ea22dc72">structLen</a>;      <span class="comment">/* length of this structure */</span>
<a name="l00207"></a><a class="code" href="structgpfsMultipleAccessRange__t.html#a89e1d6b59f2f4236b04f40671f7f9b7a">00207</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsMultipleAccessRange__t.html#a89e1d6b59f2f4236b04f40671f7f9b7a">structType</a>;     <span class="comment">/* hint identifier: GPFS_MULTIPLE_ACCESS_RANGE */</span>
<a name="l00208"></a><a class="code" href="structgpfsMultipleAccessRange__t.html#a4c127e1d1d1601515138bc8f9cf15ca0">00208</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsMultipleAccessRange__t.html#a4c127e1d1d1601515138bc8f9cf15ca0">accRangeCnt</a>;    <span class="comment">/* on input, number of ranges in accRangeArray</span>
<a name="l00209"></a>00209 <span class="comment">                                   on output, number of processed ranges (the</span>
<a name="l00210"></a>00210 <span class="comment">                                   first n of the given ranges) */</span>
<a name="l00211"></a><a class="code" href="structgpfsMultipleAccessRange__t.html#a961203004f0236318842b9281e2b4b24">00211</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsMultipleAccessRange__t.html#a961203004f0236318842b9281e2b4b24">relRangeCnt</a>;    <span class="comment">/* number of ranges in relRangeArray */</span>
<a name="l00212"></a><a class="code" href="structgpfsMultipleAccessRange__t.html#a0c543c1f4e90bd0a17281c2da8a57e1f">00212</a>   <a class="code" href="structgpfsRangeArray__t.html">gpfsRangeArray_t</a> accRangeArray[<a class="code" href="gpfs__fcntl_8h.html#a8e316aa6e85bf886c9b7380d08b3cc10">GPFS_MAX_RANGE_COUNT</a>]; <span class="comment">/* requested ranges */</span>
<a name="l00213"></a><a class="code" href="structgpfsMultipleAccessRange__t.html#a2f25c0d81b5d706dce22d92b1dc329ed">00213</a>   <a class="code" href="structgpfsRangeArray__t.html">gpfsRangeArray_t</a> relRangeArray[<a class="code" href="gpfs__fcntl_8h.html#a8e316aa6e85bf886c9b7380d08b3cc10">GPFS_MAX_RANGE_COUNT</a>]; <span class="comment">/* ranges to release */</span>
<a name="l00214"></a>00214 } <a class="code" href="structgpfsMultipleAccessRange__t.html">gpfsMultipleAccessRange_t</a>;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 
<a name="l00217"></a>00217 <span class="comment">/* Clear file cache hint: the application expects to no longer access any</span>
<a name="l00218"></a>00218 <span class="comment">   portion of the file, so GPFS should flush and invalidate any cached</span>
<a name="l00219"></a>00219 <span class="comment">   data belonging to this file.  This may avoid synchronous cache invalidations</span>
<a name="l00220"></a>00220 <span class="comment">   on later uses of the file by other nodes. */</span>
<a name="l00221"></a><a class="code" href="structgpfsClearFileCache__t.html">00221</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00222"></a>00222 {
<a name="l00223"></a><a class="code" href="structgpfsClearFileCache__t.html#ab3aa72ae214a3da4b35ef89711e10f0d">00223</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsClearFileCache__t.html#ab3aa72ae214a3da4b35ef89711e10f0d">structLen</a>;      <span class="comment">/* length of this structure */</span>
<a name="l00224"></a><a class="code" href="structgpfsClearFileCache__t.html#a636c2c41769b547e965c00ab5082b5b4">00224</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsClearFileCache__t.html#a636c2c41769b547e965c00ab5082b5b4">structType</a>;     <span class="comment">/* hint identifier: GPFS_CLEAR_FILE_CACHE */</span>
<a name="l00225"></a>00225 } <a class="code" href="structgpfsClearFileCache__t.html">gpfsClearFileCache_t</a>;
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 <span class="comment">/* Structures for specifying the various gpfs_fnctl directives */</span>
<a name="l00230"></a>00230 
<a name="l00231"></a>00231 <span class="comment">/* Cancel all hints: GPFS removes any hints that may have been issued</span>
<a name="l00232"></a>00232 <span class="comment">   against this file.  Does not affect the contents of the GPFS file cache.</span>
<a name="l00233"></a>00233 <span class="comment">   Note that this directive does not cancel the effect of other directives,</span>
<a name="l00234"></a>00234 <span class="comment">   such as GPFS_DATA_SHIP_START. */</span>
<a name="l00235"></a><a class="code" href="structgpfsCancelHints__t.html">00235</a> <span class="keyword">typedef</span> <span class="keyword">struct  </span><span class="comment">/* cancelAccessHints hint */</span>
<a name="l00236"></a>00236 {
<a name="l00237"></a><a class="code" href="structgpfsCancelHints__t.html#a8ea5a8a33c4ad4e9f3bb7187d13b3c7b">00237</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsCancelHints__t.html#a8ea5a8a33c4ad4e9f3bb7187d13b3c7b">structLen</a>;      <span class="comment">/* length of this structure */</span>
<a name="l00238"></a><a class="code" href="structgpfsCancelHints__t.html#ae5fc550e130bf749cbf5f4e327ac166c">00238</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsCancelHints__t.html#ae5fc550e130bf749cbf5f4e327ac166c">structType</a>;     <span class="comment">/* hint identifier: GPFS_CANCEL_HINTS */</span>
<a name="l00239"></a>00239 } <a class="code" href="structgpfsCancelHints__t.html">gpfsCancelHints_t</a>;
<a name="l00240"></a>00240 
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 <span class="comment">/* Initiate data shipping mode: once all participating threads have issued</span>
<a name="l00243"></a>00243 <span class="comment">   this hint for a file, GPFS enters a mode where it partitions the blocks</span>
<a name="l00244"></a>00244 <span class="comment">   of the file among a group of agent nodes.  In data shipping mode, all</span>
<a name="l00245"></a>00245 <span class="comment">   file accesses result in GPFS messages to the appropriate agent(s) to read</span>
<a name="l00246"></a>00246 <span class="comment">   or write the requested data.  Applications that perform fine-grained</span>
<a name="l00247"></a>00247 <span class="comment">   write sharing should benefit most from data shipping, since GPFS cache</span>
<a name="l00248"></a>00248 <span class="comment">   invalidations will be avoided.  Because an application level read or</span>
<a name="l00249"></a>00249 <span class="comment">   write may be split across several agents, Posix read/write file atomicity</span>
<a name="l00250"></a>00250 <span class="comment">   is not enforced while in data shipping mode. */</span>
<a name="l00251"></a><a class="code" href="structgpfsDataShipStart__t.html">00251</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00252"></a>00252 {
<a name="l00253"></a><a class="code" href="structgpfsDataShipStart__t.html#aea1685e9ac8e64586c242b89fba32b9e">00253</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsDataShipStart__t.html#aea1685e9ac8e64586c242b89fba32b9e">structLen</a>;      <span class="comment">/* length of this structure */</span>
<a name="l00254"></a><a class="code" href="structgpfsDataShipStart__t.html#a5bee7021fc4e7ba057b3112f17565929">00254</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsDataShipStart__t.html#a5bee7021fc4e7ba057b3112f17565929">structType</a>;     <span class="comment">/* directive identifier: GPFS_DATA_SHIP_START */</span>
<a name="l00255"></a><a class="code" href="structgpfsDataShipStart__t.html#a8afbdb53ad477cb29e9f5c462547106b">00255</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsDataShipStart__t.html#a8afbdb53ad477cb29e9f5c462547106b">numInstances</a>;   <span class="comment">/* number of open file instances collaborating</span>
<a name="l00256"></a>00256 <span class="comment">                                   to operate on the file.  These may be on</span>
<a name="l00257"></a>00257 <span class="comment">                                   any number of nodes. */</span>
<a name="l00258"></a><a class="code" href="structgpfsDataShipStart__t.html#a50c6fffb4da7ff4f0e025caa9e151642">00258</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsDataShipStart__t.html#a50c6fffb4da7ff4f0e025caa9e151642">reserved</a>;       <span class="comment">/* not used, should be set to 0 */</span>
<a name="l00259"></a>00259 } <a class="code" href="structgpfsDataShipStart__t.html">gpfsDataShipStart_t</a>;
<a name="l00260"></a>00260 
<a name="l00261"></a>00261 
<a name="l00262"></a>00262 <span class="comment">/* Specify the agent mapping for data shipping: tells GPFS which agent</span>
<a name="l00263"></a>00263 <span class="comment">   nodes to use for data shipping.  This directive can only appear in a</span>
<a name="l00264"></a>00264 <span class="comment">   gpfs_fcntl call that also gives the GPFS_DATA_SHIP_START directive.  If</span>
<a name="l00265"></a>00265 <span class="comment">   this directive is not used, the agents will be exactly the nodes on which</span>
<a name="l00266"></a>00266 <span class="comment">   the GPFS_DATA_SHIP_START directive was given, and the partition will be a</span>
<a name="l00267"></a>00267 <span class="comment">   round-robin distribution of the blocks of the file to the agent nodes.</span>
<a name="l00268"></a>00268 <span class="comment">   There are two forms of this directive.  The gpfsDataShipMap_t structure</span>
<a name="l00269"></a>00269 <span class="comment">   contains enough room for up to GPFS_MAX_DS_AGENT_NODES agent nodes.  If</span>
<a name="l00270"></a>00270 <span class="comment">   this is insufficient, the variable-size structure gpfsDataShipMapVariable_t</span>
<a name="l00271"></a>00271 <span class="comment">   may be used instead.  GPFS will infer the actual size of the agentNodeNumber</span>
<a name="l00272"></a>00272 <span class="comment">   array in the gpfsDataShipMapVariable_t structure from its structLen</span>
<a name="l00273"></a>00273 <span class="comment">   field.  To build the argument to gpfs_fcntl when gpfsDataShipMapVariable_t</span>
<a name="l00274"></a>00274 <span class="comment">   is used, the application needs to dynamically allocate space for all of</span>
<a name="l00275"></a>00275 <span class="comment">   the contiguous structures to be passed to gpfs_fcntl.  The following code</span>
<a name="l00276"></a>00276 <span class="comment">   fragment illustrates how this might be done:</span>
<a name="l00277"></a>00277 <span class="comment"></span>
<a name="l00278"></a>00278 <span class="comment">     char * p;</span>
<a name="l00279"></a>00279 <span class="comment">     gpfsFcntlHeader_t * hdrP;</span>
<a name="l00280"></a>00280 <span class="comment">     gpfsDataShipStart_t * startP;</span>
<a name="l00281"></a>00281 <span class="comment">     gpfsDataShipMapVariable_t * mapP;</span>
<a name="l00282"></a>00282 <span class="comment">     int mapSize = GPFS_DATA_SHIP_MAP_VARIABLE_SIZE(nAgents);</span>
<a name="l00283"></a>00283 <span class="comment"></span>
<a name="l00284"></a>00284 <span class="comment">     p = malloc(sizeof(gpfsFcntlHeader_t) + sizeof(gpfsDataShipStart_t) + mapSize);</span>
<a name="l00285"></a>00285 <span class="comment">     hdrP = (gpfsFcntlHeader_t *) p;</span>
<a name="l00286"></a>00286 <span class="comment">     startP = (gpfsDataShipStart_t *) (p + sizeof(gpfsFcntlHeader_t));</span>
<a name="l00287"></a>00287 <span class="comment">     mapP = (gpfsDataShipMapVariable_t *) (p + sizeof(gpfsFcntlHeader_t) +</span>
<a name="l00288"></a>00288 <span class="comment">                                           sizeof(gpfsDataShipStart_t));</span>
<a name="l00289"></a>00289 <span class="comment">     hdrP-&gt;totalLength = sizeof(gpfsFcntlHeader_t) +</span>
<a name="l00290"></a>00290 <span class="comment">                         sizeof(gpfsDataShipStart_t) + mapSize;</span>
<a name="l00291"></a>00291 <span class="comment">     ... fill in other fields in *hdrP</span>
<a name="l00292"></a>00292 <span class="comment">     startP-&gt;structLen = sizeof(gpfsDataShipStart_t);</span>
<a name="l00293"></a>00293 <span class="comment">     ... fill in other fields in *startP</span>
<a name="l00294"></a>00294 <span class="comment">     mapP-&gt;structLen = mapSize;</span>
<a name="l00295"></a>00295 <span class="comment">     ... fill in other fields in mapP, including nAgents entries in the</span>
<a name="l00296"></a>00296 <span class="comment">       mapP-&gt;agentNodeNumber array</span>
<a name="l00297"></a>00297 <span class="comment">     rc = gpfs_fcntl(handle, hdrP);</span>
<a name="l00298"></a>00298 <span class="comment">     free(p);</span>
<a name="l00299"></a>00299 <span class="comment"></span>
<a name="l00300"></a>00300 <span class="comment">  As the example code shows, using gpfsDataShipMapVariable_t is more awkward</span>
<a name="l00301"></a>00301 <span class="comment">  than using gpfsDataShipMap_t, since the latter can simply be embedded</span>
<a name="l00302"></a>00302 <span class="comment">  within a larger structure that contains the necessary gpfsFcntlHeader_t</span>
<a name="l00303"></a>00303 <span class="comment">  and gpfsDataShipStart_t structures. */</span>
<a name="l00304"></a><a class="code" href="gpfs__fcntl_8h.html#adc8ac438ee2b8cb28cdd674a33ef6fcb">00304</a> <span class="preprocessor">#define GPFS_MAX_DS_AGENT_NODES 2048</span>
<a name="l00305"></a><a class="code" href="structgpfsDataShipMap__t.html">00305</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00306"></a>00306 {
<a name="l00307"></a><a class="code" href="structgpfsDataShipMap__t.html#a6a9c80132780b4facdba7610d005f5e2">00307</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsDataShipMap__t.html#a6a9c80132780b4facdba7610d005f5e2">structLen</a>;      <span class="comment">/* length of this structure */</span>
<a name="l00308"></a><a class="code" href="structgpfsDataShipMap__t.html#a3e82912ec1d3abbba110f46251cefd55">00308</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsDataShipMap__t.html#a3e82912ec1d3abbba110f46251cefd55">structType</a>;     <span class="comment">/* directive identifier: GPFS_DATA_SHIP_MAP */</span>
<a name="l00309"></a><a class="code" href="structgpfsDataShipMap__t.html#a8560dd06adc19db9eb3dea3f1bdc4d32">00309</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsDataShipMap__t.html#a8560dd06adc19db9eb3dea3f1bdc4d32">partitionSize</a>;  <span class="comment">/* number of contiguous bytes per server */</span>
<a name="l00310"></a><a class="code" href="structgpfsDataShipMap__t.html#af0434268a1437a5da43fe77f0596a743">00310</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsDataShipMap__t.html#af0434268a1437a5da43fe77f0596a743">agentCount</a>;     <span class="comment">/* number of entries used in the</span>
<a name="l00311"></a>00311 <span class="comment">                                   agentNodeNumber array */</span>
<a name="l00312"></a><a class="code" href="structgpfsDataShipMap__t.html#a53244e00d74e2ec8560571b43372c76b">00312</a>   <span class="keywordtype">int</span>           agentNodeNumber[<a class="code" href="gpfs__fcntl_8h.html#adc8ac438ee2b8cb28cdd674a33ef6fcb">GPFS_MAX_DS_AGENT_NODES</a>]; 
<a name="l00313"></a>00313                                 <span class="comment">/* data ship agent node numbers, using </span>
<a name="l00314"></a>00314 <span class="comment">                                   GPFS configuration data repository</span>
<a name="l00315"></a>00315 <span class="comment">                                   node numbers */</span>
<a name="l00316"></a>00316 } <a class="code" href="structgpfsDataShipMap__t.html">gpfsDataShipMap_t</a>;
<a name="l00317"></a>00317 
<a name="l00318"></a><a class="code" href="structgpfsDataShipMapVariable__t.html">00318</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00319"></a>00319 {
<a name="l00320"></a><a class="code" href="structgpfsDataShipMapVariable__t.html#ab3e3b3e2b3b3a74c84847453a7039bc9">00320</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsDataShipMapVariable__t.html#ab3e3b3e2b3b3a74c84847453a7039bc9">structLen</a>;      <span class="comment">/* length of this structure */</span>
<a name="l00321"></a><a class="code" href="structgpfsDataShipMapVariable__t.html#a314a0798d66b0fe50e66657ea52a56f7">00321</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsDataShipMapVariable__t.html#a314a0798d66b0fe50e66657ea52a56f7">structType</a>;     <span class="comment">/* directive identifier: GPFS_DATA_SHIP_MAP */</span>
<a name="l00322"></a><a class="code" href="structgpfsDataShipMapVariable__t.html#a1b977d6540084ac816e645f7e4ecaf98">00322</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsDataShipMapVariable__t.html#a1b977d6540084ac816e645f7e4ecaf98">partitionSize</a>;  <span class="comment">/* number of contiguous bytes per server */</span>
<a name="l00323"></a><a class="code" href="structgpfsDataShipMapVariable__t.html#a20231f316fad3bad4032a81ab415dc56">00323</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsDataShipMapVariable__t.html#a20231f316fad3bad4032a81ab415dc56">agentCount</a>;     <span class="comment">/* number of entries used in the</span>
<a name="l00324"></a>00324 <span class="comment">                                   agentNodeNumber array */</span>
<a name="l00325"></a><a class="code" href="structgpfsDataShipMapVariable__t.html#ad7f631dc5f1fc6269f9847f86afa7737">00325</a>   <span class="keywordtype">int</span>           agentNodeNumber[2]; 
<a name="l00326"></a>00326                                 <span class="comment">/* data ship agent node numbers, using </span>
<a name="l00327"></a>00327 <span class="comment">                                   GPFS configuration data repository</span>
<a name="l00328"></a>00328 <span class="comment">                                   node numbers.  The actual size of this</span>
<a name="l00329"></a>00329 <span class="comment">                                   array will be inferred from structLen.</span>
<a name="l00330"></a>00330 <span class="comment">                                   The number of elements in the array must</span>
<a name="l00331"></a>00331 <span class="comment">                                   be even, so that the total structure size</span>
<a name="l00332"></a>00332 <span class="comment">                                   is a multiple of 8.  The number of</span>
<a name="l00333"></a>00333 <span class="comment">                                   entries used in the array is given by</span>
<a name="l00334"></a>00334 <span class="comment">                                   agentCount, and may be any positive value</span>
<a name="l00335"></a>00335 <span class="comment">                                   less than or equal to the size of the</span>
<a name="l00336"></a>00336 <span class="comment">                                   array. */</span>
<a name="l00337"></a>00337 } <a class="code" href="structgpfsDataShipMapVariable__t.html">gpfsDataShipMapVariable_t</a>;
<a name="l00338"></a>00338 
<a name="l00339"></a>00339 <span class="comment">/* Compute the size in bytes of a gpfsDataShipMapVariable_t structure large</span>
<a name="l00340"></a>00340 <span class="comment">   enough to hold _nAgents data shipping agent node numbers */</span>
<a name="l00341"></a><a class="code" href="gpfs__fcntl_8h.html#a132392645652bbe6c385f741bddbe590">00341</a> <span class="preprocessor">#define GPFS_DATA_SHIP_MAP_VARIABLE_SIZE(_nAgents) \</span>
<a name="l00342"></a>00342 <span class="preprocessor">  ( sizeof(gpfsDataShipMapVariable_t) - 2*sizeof(int) + \</span>
<a name="l00343"></a>00343 <span class="preprocessor">    ((((_nAgents)+1)/2)*2)*sizeof(int) )</span>
<a name="l00344"></a>00344 <span class="preprocessor"></span>
<a name="l00345"></a>00345 
<a name="l00346"></a>00346 <span class="comment">/* Terminate data shipping: waits for all threads that issued the</span>
<a name="l00347"></a>00347 <span class="comment">   GPFS_DATA_SHIP_START directive to issue this directive, then leaves data</span>
<a name="l00348"></a>00348 <span class="comment">   shipping mode. */</span>
<a name="l00349"></a><a class="code" href="structgpfsDataShipStop__t.html">00349</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00350"></a>00350 {
<a name="l00351"></a><a class="code" href="structgpfsDataShipStop__t.html#ab1341016433b9538cf9731830dabe0e5">00351</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsDataShipStop__t.html#ab1341016433b9538cf9731830dabe0e5">structLen</a>;      <span class="comment">/* length of this structure */</span>
<a name="l00352"></a><a class="code" href="structgpfsDataShipStop__t.html#ae1db95aeaeabf4fda7f74bc98fabd53d">00352</a>   <span class="keywordtype">int</span>           <a class="code" href="structgpfsDataShipStop__t.html#ae1db95aeaeabf4fda7f74bc98fabd53d">structType</a>;     <span class="comment">/* directive identifier: GPFS_DATA_SHIP_STOP */</span>
<a name="l00353"></a>00353 } <a class="code" href="structgpfsDataShipStop__t.html">gpfsDataShipStop_t</a>;
<a name="l00354"></a>00354 
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 <span class="comment">/* This directive is used to set a file&#39;s replication factors. </span>
<a name="l00357"></a>00357 <span class="comment">   However, the directive does not cause the file data to be restriped </span>
<a name="l00358"></a>00358 <span class="comment">   immediately. Instead the caller must append a gpfsRestripeData_t directive</span>
<a name="l00359"></a>00359 <span class="comment">   or invoke a mmrestripefs or a mmrestripefile command. */</span>
<a name="l00360"></a><a class="code" href="structgpfsSetReplication__t.html">00360</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00361"></a>00361 {
<a name="l00362"></a><a class="code" href="structgpfsSetReplication__t.html#aa86dbe081c4002cb0a2fea83d800736e">00362</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetReplication__t.html#aa86dbe081c4002cb0a2fea83d800736e">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00363"></a><a class="code" href="structgpfsSetReplication__t.html#a6826b52ba65207f7c6077d619f7c8db4">00363</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetReplication__t.html#a6826b52ba65207f7c6077d619f7c8db4">structType</a>;              <span class="comment">/* directive identifier: </span>
<a name="l00364"></a>00364 <span class="comment">                                  GPFS_FCNTL_SET_REPLICATION */</span>
<a name="l00365"></a><a class="code" href="structgpfsSetReplication__t.html#a1b704e2c012f25320e848fb318d3bcd9">00365</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetReplication__t.html#a1b704e2c012f25320e848fb318d3bcd9">metadataReplicas</a>;        <span class="comment">/* Set the number of copies of the file&#39;s </span>
<a name="l00366"></a>00366 <span class="comment">                                  indirect blocks. Valid values are 1 or 2,</span>
<a name="l00367"></a>00367 <span class="comment">                                  but not greater than the value of </span>
<a name="l00368"></a>00368 <span class="comment">                                  maxMetadataReplicas. A value of 0 indicates</span>
<a name="l00369"></a>00369 <span class="comment">                                  not to change the current value. */</span>  
<a name="l00370"></a><a class="code" href="structgpfsSetReplication__t.html#a1476db19b95fb6ea04a87d2d3654f643">00370</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetReplication__t.html#a1476db19b95fb6ea04a87d2d3654f643">maxMetadataReplicas</a>;     <span class="comment">/* Set the maximum number of copies of a file&#39;s</span>
<a name="l00371"></a>00371 <span class="comment">                                  indirect blocks. Space in the file&#39;s inode</span>
<a name="l00372"></a>00372 <span class="comment">                                  and indirect blocks is reserved for the</span>
<a name="l00373"></a>00373 <span class="comment">                                  maximum number of copies, regardless of the</span>
<a name="l00374"></a>00374 <span class="comment">                                  current value. Valid values are 1 or 2.</span>
<a name="l00375"></a>00375 <span class="comment">                                  A value of 0 indicates not to change the </span>
<a name="l00376"></a>00376 <span class="comment">                                  current value. */</span>
<a name="l00377"></a><a class="code" href="structgpfsSetReplication__t.html#a7d4763d31ad3a42fa15017c262fdb3d2">00377</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetReplication__t.html#a7d4763d31ad3a42fa15017c262fdb3d2">dataReplicas</a>;            <span class="comment">/* Set the number of copies of the file&#39;s</span>
<a name="l00378"></a>00378 <span class="comment">                                  data blocks. Valid values are 1 or 2,</span>
<a name="l00379"></a>00379 <span class="comment">                                  but cannot be greater than the value of</span>
<a name="l00380"></a>00380 <span class="comment">                                  maxDataReplicas. A value of 0 indicates</span>
<a name="l00381"></a>00381 <span class="comment">                                  not to change the current value. */</span>
<a name="l00382"></a><a class="code" href="structgpfsSetReplication__t.html#acb60919f29d5b3aae9fff0055e39899f">00382</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetReplication__t.html#acb60919f29d5b3aae9fff0055e39899f">maxDataReplicas</a>;         <span class="comment">/* Set the maximum number of copies of a file&#39;s</span>
<a name="l00383"></a>00383 <span class="comment">                                  data blocks. Space in the file&#39;s inode</span>
<a name="l00384"></a>00384 <span class="comment">                                  and indirect blocks is reserved for the</span>
<a name="l00385"></a>00385 <span class="comment">                                  maximum number of copues, regardless of the</span>
<a name="l00386"></a>00386 <span class="comment">                                  current value. Valid values are 1 or 2. </span>
<a name="l00387"></a>00387 <span class="comment">                                  A value of 0 indicates not the change the</span>
<a name="l00388"></a>00388 <span class="comment">                                  current value. */</span>
<a name="l00389"></a><a class="code" href="structgpfsSetReplication__t.html#a9fd199a4a5fc75aed022db66a34746f1">00389</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetReplication__t.html#a9fd199a4a5fc75aed022db66a34746f1">errReason</a>;               <span class="comment">/* returned reason request failed.</span>
<a name="l00390"></a>00390 <span class="comment">                                  Defined below. */</span>
<a name="l00391"></a><a class="code" href="structgpfsSetReplication__t.html#a155472b6be983180a7572e1304c2b60c">00391</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetReplication__t.html#a155472b6be983180a7572e1304c2b60c">errValue1</a>;               <span class="comment">/* returned value depending upon errReason */</span>
<a name="l00392"></a><a class="code" href="structgpfsSetReplication__t.html#ad287db55859dfb8ebd6776084253f46f">00392</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetReplication__t.html#ad287db55859dfb8ebd6776084253f46f">errValue2</a>;               <span class="comment">/* returned value depending upon errReason */</span>
<a name="l00393"></a><a class="code" href="structgpfsSetReplication__t.html#aad91e14c7c37aebd0bf8367d96b64e30">00393</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetReplication__t.html#aad91e14c7c37aebd0bf8367d96b64e30">reserved</a>;                <span class="comment">/* unused, but should be set to 0 */</span>
<a name="l00394"></a>00394 } <a class="code" href="structgpfsSetReplication__t.html">gpfsSetReplication_t</a>;
<a name="l00395"></a>00395 
<a name="l00396"></a>00396 
<a name="l00397"></a>00397 
<a name="l00398"></a>00398 <span class="comment">/* Values that may be returned by errReason */</span>
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 <span class="comment">/* No reason information was returned. */</span>
<a name="l00401"></a><a class="code" href="gpfs__fcntl_8h.html#a6af0a9b163a7f67f99dd3b602e05f433">00401</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_NONE                       0</span>
<a name="l00402"></a>00402 <span class="preprocessor"></span>
<a name="l00403"></a>00403 <span class="comment">/* MetadataReplicas is out of range.</span>
<a name="l00404"></a>00404 <span class="comment">   errValue1 and errValue2 contain the valid lower and upper range boundaries. */</span>
<a name="l00405"></a><a class="code" href="gpfs__fcntl_8h.html#ad8c3b83493f82331cd104eb3103be69e">00405</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_METADATA_REPLICAS_RANGE    1</span>
<a name="l00406"></a>00406 <span class="preprocessor"></span>
<a name="l00407"></a>00407 <span class="comment">/* MaxMetadataReplicas is out of range.</span>
<a name="l00408"></a>00408 <span class="comment">   errValue1 and errValue2 contain the valid lower and upper range boundaries. */</span>
<a name="l00409"></a><a class="code" href="gpfs__fcntl_8h.html#a8e94e721f374ded9b0bba744ef24d2dc">00409</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_MAXMETADATA_REPLICAS_RANGE 2</span>
<a name="l00410"></a>00410 <span class="preprocessor"></span>
<a name="l00411"></a>00411 <span class="comment">/* DataReplicas is out of range.</span>
<a name="l00412"></a>00412 <span class="comment">   errValue1 and errValue2 contain the valid lower and upper range boundaries. */</span>
<a name="l00413"></a><a class="code" href="gpfs__fcntl_8h.html#a6aa65106831ef7934ac524974a9fdd2a">00413</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_DATA_REPLICAS_RANGE        3</span>
<a name="l00414"></a>00414 <span class="preprocessor"></span>
<a name="l00415"></a>00415 <span class="comment">/* MaxDataReplicas is out of range.</span>
<a name="l00416"></a>00416 <span class="comment">   errValue1 and errValue2 contain the valid lower and upper range boundaries. */</span>
<a name="l00417"></a><a class="code" href="gpfs__fcntl_8h.html#a107b96272c2e29e659f5274e36746963">00417</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_MAXDATA_REPLICAS_RANGE     4</span>
<a name="l00418"></a>00418 <span class="preprocessor"></span>
<a name="l00419"></a>00419 <span class="comment">/* An attempt to change maxMetadataReplicas or maxDataReplicas or both</span>
<a name="l00420"></a>00420 <span class="comment">   was made on a file that is not empty. */</span>
<a name="l00421"></a><a class="code" href="gpfs__fcntl_8h.html#a8f6b87703d75142ea228827923a681e5">00421</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_FILE_NOT_EMPTY             5</span>
<a name="l00422"></a>00422 <span class="preprocessor"></span>
<a name="l00423"></a>00423 <span class="comment">/* MetadataReplicas or dataReplicas or both exceed the number of failure groups.</span>
<a name="l00424"></a>00424 <span class="comment">   errValue1 contains the maximum number of metadata failure groups.</span>
<a name="l00425"></a>00425 <span class="comment">   errValue2 contains the maximum number of data failure groups. */</span>
<a name="l00426"></a><a class="code" href="gpfs__fcntl_8h.html#a6b5f431d0c05205f1912f5dfc534f76f">00426</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_REPLICAS_EXCEED_FGMAX      6</span>
<a name="l00427"></a>00427 <span class="preprocessor"></span>
<a name="l00428"></a>00428 
<a name="l00429"></a>00429 <span class="comment">/* This directive is used to set a file&#39;s assigned storage pool. </span>
<a name="l00430"></a>00430 <span class="comment">   However, the directive does not cause the file data to be migrated </span>
<a name="l00431"></a>00431 <span class="comment">   immediately. Instead the caller must append a gpfsRestripeData_t </span>
<a name="l00432"></a>00432 <span class="comment">   directive or invoke a mmrestripefs or mmrestripefile command. </span>
<a name="l00433"></a>00433 <span class="comment">   The caller must have root privileges to change a file&#39;s storage pool. */</span>
<a name="l00434"></a><a class="code" href="structgpfsSetStoragePool__t.html">00434</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00435"></a>00435 {
<a name="l00436"></a><a class="code" href="structgpfsSetStoragePool__t.html#a59ef1bc9e19b9ce84a494db5fca2e74d">00436</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetStoragePool__t.html#a59ef1bc9e19b9ce84a494db5fca2e74d">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00437"></a><a class="code" href="structgpfsSetStoragePool__t.html#a68e84adf991b7c432d775d48c90e60bb">00437</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetStoragePool__t.html#a68e84adf991b7c432d775d48c90e60bb">structType</a>;              <span class="comment">/* directive identifier: </span>
<a name="l00438"></a>00438 <span class="comment">                                  GPFS_FCNTL_SET_STORAGEPOOL */</span>
<a name="l00439"></a><a class="code" href="structgpfsSetStoragePool__t.html#adbb5c0f6a307016f10d18aee9fa48f7e">00439</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetStoragePool__t.html#adbb5c0f6a307016f10d18aee9fa48f7e">errReason</a>;               <span class="comment">/* returned reason request failed.</span>
<a name="l00440"></a>00440 <span class="comment">                                  Defined below. */</span>
<a name="l00441"></a><a class="code" href="structgpfsSetStoragePool__t.html#a1f8794a3798ac3e64b66430f6533826c">00441</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetStoragePool__t.html#a1f8794a3798ac3e64b66430f6533826c">errValue1</a>;               <span class="comment">/* returned value depending upon errReason */</span>
<a name="l00442"></a><a class="code" href="structgpfsSetStoragePool__t.html#abd8ed27844dc15d77b370169f450be75">00442</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetStoragePool__t.html#abd8ed27844dc15d77b370169f450be75">errValue2</a>;               <span class="comment">/* returned value depending upon errReason */</span>
<a name="l00443"></a><a class="code" href="structgpfsSetStoragePool__t.html#a18691762358204baba7533affb7686e9">00443</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetStoragePool__t.html#a18691762358204baba7533affb7686e9">reserved</a>;                <span class="comment">/* unused, but should be set to 0 */</span>
<a name="l00444"></a><a class="code" href="structgpfsSetStoragePool__t.html#aa37fb6f23105a0d19e8e61db660232d2">00444</a>   <span class="keywordtype">char</span> buffer[<a class="code" href="gpfs__fcntl_8h.html#a27dfa9148c5b1b6a68a0ce55a89eaefc">GPFS_FCNTL_MAX_NAME_BUFFER</a>]; <span class="comment">/* Null-terminated name of </span>
<a name="l00445"></a>00445 <span class="comment">                                              storage pool to be assigned */</span>
<a name="l00446"></a>00446 } <a class="code" href="structgpfsSetStoragePool__t.html">gpfsSetStoragePool_t</a>;
<a name="l00447"></a>00447 
<a name="l00448"></a>00448 
<a name="l00449"></a>00449 <span class="comment">/* Values that may be returned by errReason */</span>
<a name="l00450"></a>00450 
<a name="l00451"></a>00451 <span class="comment">/* Invalid storage pool name was given. */</span>
<a name="l00452"></a><a class="code" href="gpfs__fcntl_8h.html#a2e6000cbd637c0e4ffb7a0020b04ac76">00452</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_INVALID_STORAGE_POOL       7</span>
<a name="l00453"></a>00453 <span class="preprocessor"></span>
<a name="l00454"></a>00454 <span class="comment">/* Invalid storage pool. File cannot be assigned to given pool. */</span>
<a name="l00455"></a><a class="code" href="gpfs__fcntl_8h.html#ac5befd8dd0a1b3cdb01d49b6a90e96af">00455</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_INVALID_STORAGE_POOL_TYPE  8</span>
<a name="l00456"></a>00456 <span class="preprocessor"></span>
<a name="l00457"></a>00457 <span class="comment">/* Invalid storage pool. Directories cannot be assigned to given pool. */</span>
<a name="l00458"></a><a class="code" href="gpfs__fcntl_8h.html#ad5f6f01e6b27f1393c9a2d05133587e9">00458</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_INVALID_STORAGE_POOL_ISDIR 9</span>
<a name="l00459"></a>00459 <span class="preprocessor"></span>
<a name="l00460"></a>00460 <span class="comment">/* Invalid storage pool. System files cannot be assigned to given pool. */</span>
<a name="l00461"></a><a class="code" href="gpfs__fcntl_8h.html#aebc784848bde470b65abb85d035b069c">00461</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_INVALID_STORAGE_POOL_ISLNK 10</span>
<a name="l00462"></a>00462 <span class="preprocessor"></span>
<a name="l00463"></a>00463 <span class="comment">/* Invalid storage pool. System files cannot be assigned to given pool. */</span>
<a name="l00464"></a><a class="code" href="gpfs__fcntl_8h.html#a40cb24edc66d074a7407d2ae0d0f22bf">00464</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_INVALID_STORAGE_POOL_ISSYS 11</span>
<a name="l00465"></a>00465 <span class="preprocessor"></span>
<a name="l00466"></a>00466 <span class="comment">/* File system has not been upgraded to support storage pools */</span>
<a name="l00467"></a><a class="code" href="gpfs__fcntl_8h.html#acb0e48472f91c01bdcfeef2eaa6893c5">00467</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_STORAGE_POOL_NOTENABLED    12</span>
<a name="l00468"></a>00468 <span class="preprocessor"></span>
<a name="l00469"></a>00469 <span class="comment">/* User does not have permission to perform the requested operation */</span>
<a name="l00470"></a><a class="code" href="gpfs__fcntl_8h.html#a8e26786c62140f23112a6499b5a97c0f">00470</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_NOPERM                     13</span>
<a name="l00471"></a>00471 <span class="preprocessor"></span>
<a name="l00472"></a>00472 
<a name="l00473"></a>00473 
<a name="l00474"></a>00474 
<a name="l00475"></a>00475 <span class="comment">/* This directive is used to restripe a file&#39;s data blocks to update </span>
<a name="l00476"></a>00476 <span class="comment">   its replication and/or migrate its data. The data movement is always </span>
<a name="l00477"></a>00477 <span class="comment">   done immediately. */</span>
<a name="l00478"></a>00478 
<a name="l00479"></a><a class="code" href="structgpfsByteRange__t.html">00479</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>
<a name="l00480"></a>00480 {
<a name="l00481"></a><a class="code" href="structgpfsByteRange__t.html#a30bd5d108581450892bfef071352ce07">00481</a>   <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="structgpfsByteRange__t.html#a30bd5d108581450892bfef071352ce07">startOffset</a>;
<a name="l00482"></a><a class="code" href="structgpfsByteRange__t.html#ac6cd3f707eb7bde6430d4a7541ce83a2">00482</a>   <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="structgpfsByteRange__t.html#ac6cd3f707eb7bde6430d4a7541ce83a2">numOfBlks</a>;
<a name="l00483"></a>00483 } <a class="code" href="structgpfsByteRange__t.html">gpfsByteRange_t</a>;
<a name="l00484"></a>00484 
<a name="l00485"></a><a class="code" href="structgpfsRestripeData__t.html">00485</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>
<a name="l00486"></a>00486 {
<a name="l00487"></a><a class="code" href="structgpfsRestripeData__t.html#aa26f849ff3ddb1e266108d6b038be705">00487</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeData__t.html#aa26f849ff3ddb1e266108d6b038be705">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00488"></a><a class="code" href="structgpfsRestripeData__t.html#a36914ef62b0ee2de14f1fa144d5449ef">00488</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeData__t.html#a36914ef62b0ee2de14f1fa144d5449ef">structType</a>;              <span class="comment">/* directive identifier: </span>
<a name="l00489"></a>00489 <span class="comment">                                  GPFS_FCNTL_RESTRIPE_FILE */</span>
<a name="l00490"></a><a class="code" href="structgpfsRestripeData__t.html#ae7889ff385ba023cb45eae5dda073d93">00490</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeData__t.html#ae7889ff385ba023cb45eae5dda073d93">options</a>;                 <span class="comment">/* options for restripe command. Defined below.</span>
<a name="l00491"></a>00491 <span class="comment">                                  See mmrestripefs command for details. */</span>
<a name="l00492"></a><a class="code" href="structgpfsRestripeData__t.html#a6313a2e6954485e5c5b734cd05fbae67">00492</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeData__t.html#a6313a2e6954485e5c5b734cd05fbae67">errReason</a>;               <span class="comment">/* returned reason request failed.</span>
<a name="l00493"></a>00493 <span class="comment">                                  Defined below. */</span>
<a name="l00494"></a><a class="code" href="structgpfsRestripeData__t.html#a565c20d281a1ee0369b6e16dc64d1b7b">00494</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeData__t.html#a565c20d281a1ee0369b6e16dc64d1b7b">errValue1</a>;               <span class="comment">/* returned value depending upon errReason */</span>
<a name="l00495"></a><a class="code" href="structgpfsRestripeData__t.html#a84804e1af4bf17b4698b89412bba7ec7">00495</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeData__t.html#a84804e1af4bf17b4698b89412bba7ec7">errValue2</a>;               <span class="comment">/* returned value depending upon errReason */</span>
<a name="l00496"></a><a class="code" href="structgpfsRestripeData__t.html#acc4db35d3404ff7f8413ecfd056a3315">00496</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeData__t.html#acc4db35d3404ff7f8413ecfd056a3315">reserved1</a>;               <span class="comment">/* unused, but should be set to 0 */</span>  
<a name="l00497"></a><a class="code" href="structgpfsRestripeData__t.html#acefd065e0fcf7b9b227e50de49819d48">00497</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeData__t.html#acefd065e0fcf7b9b227e50de49819d48">reserved2</a>;               <span class="comment">/* unused, but should be set to 0 */</span>  
<a name="l00498"></a>00498 } <a class="code" href="structgpfsRestripeData__t.html">gpfsRestripeData_t</a>;
<a name="l00499"></a>00499 
<a name="l00500"></a><a class="code" href="structgpfsRestripeRange__t.html">00500</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>
<a name="l00501"></a>00501 {
<a name="l00502"></a><a class="code" href="structgpfsRestripeRange__t.html#a7e70d3169661d0e4e0982bcbf60ed079">00502</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeRange__t.html#a7e70d3169661d0e4e0982bcbf60ed079">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00503"></a><a class="code" href="structgpfsRestripeRange__t.html#a9dc8a8886636e1560274bef787a398ee">00503</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeRange__t.html#a9dc8a8886636e1560274bef787a398ee">structType</a>;              <span class="comment">/* directive identifier: </span>
<a name="l00504"></a>00504 <span class="comment">                                  GPFS_FCNTL_RESTRIPE_FILE */</span>
<a name="l00505"></a><a class="code" href="structgpfsRestripeRange__t.html#af00439abd589a527f6c15a7114bee316">00505</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeRange__t.html#af00439abd589a527f6c15a7114bee316">options</a>;                 <span class="comment">/* options for restripe command. Defined below.</span>
<a name="l00506"></a>00506 <span class="comment">                                  See mmrestripefs command for details. */</span>
<a name="l00507"></a><a class="code" href="structgpfsRestripeRange__t.html#afec0821c1ee9c1b9dee5dffa44db74d5">00507</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeRange__t.html#afec0821c1ee9c1b9dee5dffa44db74d5">errReason</a>;               <span class="comment">/* returned reason request failed.</span>
<a name="l00508"></a>00508 <span class="comment">                                  Defined below. */</span>
<a name="l00509"></a><a class="code" href="structgpfsRestripeRange__t.html#affddec8d6ca82ee7f6b0b5aab372894b">00509</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeRange__t.html#affddec8d6ca82ee7f6b0b5aab372894b">errValue1</a>;               <span class="comment">/* returned value depending upon errReason */</span>
<a name="l00510"></a><a class="code" href="structgpfsRestripeRange__t.html#ae954e119e35157199a9f5ec51d9867cb">00510</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeRange__t.html#ae954e119e35157199a9f5ec51d9867cb">errValue2</a>;               <span class="comment">/* returned value depending upon errReason */</span>
<a name="l00511"></a><a class="code" href="structgpfsRestripeRange__t.html#a9a1bc3af95d0150c977de1489b427464">00511</a>   <a class="code" href="structgpfsByteRange__t.html">gpfsByteRange_t</a> <a class="code" href="structgpfsRestripeRange__t.html#a9a1bc3af95d0150c977de1489b427464">range</a>;       <span class="comment">/* Should be zero when GPFS_FCNTL_RESTRIPE_RANGE</span>
<a name="l00512"></a>00512 <span class="comment">                                  is not set */</span>
<a name="l00513"></a><a class="code" href="structgpfsRestripeRange__t.html#ab6e59d82109827d8f7013174ff8b2a5f">00513</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeRange__t.html#ab6e59d82109827d8f7013174ff8b2a5f">reserved1</a>;               <span class="comment">/* unused, but should be set to 0 */</span>  
<a name="l00514"></a><a class="code" href="structgpfsRestripeRange__t.html#aedbb35f913eea2661aee613225471b9d">00514</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsRestripeRange__t.html#aedbb35f913eea2661aee613225471b9d">reserved2</a>;               <span class="comment">/* unused, but should be set to 0 */</span>  
<a name="l00515"></a>00515 } <a class="code" href="structgpfsRestripeRange__t.html">gpfsRestripeRange_t</a>;
<a name="l00516"></a>00516 
<a name="l00517"></a>00517 
<a name="l00518"></a>00518 <span class="comment">/* Define values for restripe options.</span>
<a name="l00519"></a>00519 <span class="comment">   See mmrestripefs command for complete definitions. */</span>
<a name="l00520"></a>00520 
<a name="l00521"></a>00521 <span class="comment">/* Migrate critical data off of suspended disks. */</span>
<a name="l00522"></a><a class="code" href="gpfs__fcntl_8h.html#a17703f51f3af89f4c0dae833304b34db">00522</a> <span class="preprocessor">#define GPFS_FCNTL_RESTRIPE_M   0x0001</span>
<a name="l00523"></a>00523 <span class="preprocessor"></span>
<a name="l00524"></a>00524 <span class="comment">/* Replicate data against subsequent failure. */</span>
<a name="l00525"></a><a class="code" href="gpfs__fcntl_8h.html#aa9d0684974e804ac1dc0dd13eaa0ad8c">00525</a> <span class="preprocessor">#define GPFS_FCNTL_RESTRIPE_R   0x0002</span>
<a name="l00526"></a>00526 <span class="preprocessor"></span>
<a name="l00527"></a>00527 <span class="comment">/* Place file data in assigned storage pool. */</span>
<a name="l00528"></a><a class="code" href="gpfs__fcntl_8h.html#a0940ce2b39703952e53f0628e7649baf">00528</a> <span class="preprocessor">#define GPFS_FCNTL_RESTRIPE_P   0x0004</span>
<a name="l00529"></a>00529 <span class="preprocessor"></span>
<a name="l00530"></a>00530 <span class="comment">/* Rebalance file data */</span>
<a name="l00531"></a><a class="code" href="gpfs__fcntl_8h.html#a2e269132b6180701ad9661969c485ab8">00531</a> <span class="preprocessor">#define GPFS_FCNTL_RESTRIPE_B   0x0008</span>
<a name="l00532"></a>00532 <span class="preprocessor"></span>
<a name="l00533"></a>00533 <span class="comment">/* Restripe a range if file data */</span>
<a name="l00534"></a><a class="code" href="gpfs__fcntl_8h.html#aa33860d4682f89a2171db6322bcc46ea">00534</a> <span class="preprocessor">#define GPFS_FCNTL_RESTRIPE_RANGE_R  0x0010</span>
<a name="l00535"></a>00535 <span class="preprocessor"></span>
<a name="l00536"></a>00536 <span class="comment">/* Values that may be returned by errReason */</span>
<a name="l00537"></a>00537 
<a name="l00538"></a>00538 <span class="comment">/* Not enough replicas could be created because the desired degree </span>
<a name="l00539"></a>00539 <span class="comment">   of replication is larger than the number of failure groups. */</span>
<a name="l00540"></a><a class="code" href="gpfs__fcntl_8h.html#a94d537c1f79aad48c8852d6fb6c1f218">00540</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_NO_REPLICA_GROUP          14</span>
<a name="l00541"></a>00541 <span class="preprocessor"></span>
<a name="l00542"></a>00542 <span class="comment">/* Not enough replicas could be created because there was not </span>
<a name="l00543"></a>00543 <span class="comment">   enough space left in one of the failure groups. */</span>
<a name="l00544"></a><a class="code" href="gpfs__fcntl_8h.html#a31d41a609c62320a3ce710959ba02786">00544</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_NO_REPLICA_SPACE          15</span>
<a name="l00545"></a>00545 <span class="preprocessor"></span>
<a name="l00546"></a>00546 <span class="comment">/* There was not enough space left on one of the disks to properly </span>
<a name="l00547"></a>00547 <span class="comment">   balance the file according to the current stripe method. */</span>
<a name="l00548"></a><a class="code" href="gpfs__fcntl_8h.html#a41168157672414a60e5d256233a845bd">00548</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_NO_BALANCE_SPACE          16</span>
<a name="l00549"></a>00549 <span class="preprocessor"></span>
<a name="l00550"></a>00550 <span class="comment">/* The file could not be properly balanced because one or more </span>
<a name="l00551"></a>00551 <span class="comment">   disks are unavailable. */</span>
<a name="l00552"></a><a class="code" href="gpfs__fcntl_8h.html#ae79099632f05c0ba437f5624f54929e3">00552</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_NO_BALANCE_AVAILABLE      17</span>
<a name="l00553"></a>00553 <span class="preprocessor"></span>
<a name="l00554"></a>00554 <span class="comment">/* All replicas were on disks that have since been deleted </span>
<a name="l00555"></a>00555 <span class="comment">   from the stripe group. */</span>
<a name="l00556"></a><a class="code" href="gpfs__fcntl_8h.html#a88c1f8fe19a10f9631cd34ff1497f021">00556</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_ADDR_BROKEN               18</span>
<a name="l00557"></a>00557 <span class="preprocessor"></span>
<a name="l00558"></a>00558 <span class="comment">/* No immutable attribute on directorys */</span>
<a name="l00559"></a><a class="code" href="gpfs__fcntl_8h.html#a1621d0a39bdcb7ed0e81085fda990296">00559</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_NO_IMMUTABLE_DIR          19</span>
<a name="l00560"></a>00560 <span class="preprocessor"></span>
<a name="l00561"></a>00561 <span class="comment">/* No immutable attribute on system files */</span>
<a name="l00562"></a><a class="code" href="gpfs__fcntl_8h.html#a584964eb612640306e72deb05f736079">00562</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_NO_IMMUTABLE_SYSFILE      20</span>
<a name="l00563"></a>00563 <span class="preprocessor"></span>
<a name="l00564"></a>00564 <span class="comment">/* Immutable and indefinite retension flag wrong */</span>
<a name="l00565"></a><a class="code" href="gpfs__fcntl_8h.html#a8c7b0a616fb870f753d8ad20c7f354cb">00565</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_IMMUTABLE_FLAG            21</span>
<a name="l00566"></a>00566 <span class="preprocessor"></span>
<a name="l00567"></a>00567 <span class="comment">/* Immutable and indefinite retension flag wrong */</span>
<a name="l00568"></a><a class="code" href="gpfs__fcntl_8h.html#a9bccf0a294a69f46ccffc58167299d51">00568</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_IMMUTABLE_PERM            22</span>
<a name="l00569"></a>00569 <span class="preprocessor"></span>
<a name="l00570"></a>00570 <span class="comment">/* AppendOnly flag should be set separetly */</span>
<a name="l00571"></a><a class="code" href="gpfs__fcntl_8h.html#ad08c766630ae6647212ae27d80baf110">00571</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_APPENDONLY_CONFLICT       23</span>
<a name="l00572"></a>00572 <span class="preprocessor"></span>
<a name="l00573"></a>00573 <span class="comment">/* Should not set immutable or appendOnly on snapshots */</span>
<a name="l00574"></a><a class="code" href="gpfs__fcntl_8h.html#a9d7caff30fa606ee59160ae87354823b">00574</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_NOIMMUTABLE_ONSNAP        24</span>
<a name="l00575"></a>00575 <span class="preprocessor"></span>
<a name="l00576"></a>00576 <span class="comment">/* An attempt to change maxDataReplicas or maxMetadataReplicas </span>
<a name="l00577"></a>00577 <span class="comment">   was made on a file that has extended attributes. */</span>
<a name="l00578"></a><a class="code" href="gpfs__fcntl_8h.html#a379f07a22c38bdb36b797d9b48c878d0">00578</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_FILE_HAS_XATTRS           25</span>
<a name="l00579"></a>00579 <span class="preprocessor"></span>
<a name="l00580"></a>00580 <span class="comment">/* Give reason that it&#39;s not GPFS file*/</span>
<a name="l00581"></a><a class="code" href="gpfs__fcntl_8h.html#af3b313198f0b890bff792f7ebf4a2ccd">00581</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_NOT_GPFS_FILE             26</span>
<a name="l00582"></a>00582 <span class="preprocessor"></span>
<a name="l00583"></a>00583 
<a name="l00584"></a>00584 
<a name="l00585"></a>00585 
<a name="l00586"></a>00586 
<a name="l00587"></a>00587 
<a name="l00588"></a>00588 <span class="comment">/* Values that may be returned by errValue1 */</span>
<a name="l00589"></a>00589 
<a name="l00590"></a>00590 <span class="comment">/* Strict replica allocation option set to be yes */</span>
<a name="l00591"></a><a class="code" href="gpfs__fcntl_8h.html#a33a46f5e5dc77f528336d962d5cd3add">00591</a> <span class="preprocessor">#define GPFS_FCNTL_STATUS_STRICT_REPLICA_YES           0x0010</span>
<a name="l00592"></a>00592 <span class="preprocessor"></span>
<a name="l00593"></a>00593 <span class="comment">/* Strict replica allocation option set to be no */</span>
<a name="l00594"></a><a class="code" href="gpfs__fcntl_8h.html#abaaf5e5948905d2c6584d1332c9b791a">00594</a> <span class="preprocessor">#define GPFS_FCNTL_STATUS_STRICT_REPLICA_NO            0x0020</span>
<a name="l00595"></a>00595 <span class="preprocessor"></span>
<a name="l00596"></a>00596 <span class="comment">/* Strict replica allocation option set to be whenpossible */</span>
<a name="l00597"></a><a class="code" href="gpfs__fcntl_8h.html#a3365d2d333fdba659d0a5d4942d98a05">00597</a> <span class="preprocessor">#define GPFS_FCNTL_STATUS_STRICT_REPLICA_WHENPOSSIBLE  0x0040</span>
<a name="l00598"></a>00598 <span class="preprocessor"></span>
<a name="l00599"></a>00599 <span class="comment">/* Structures for specifying the various gpfs_fnctl inquiries.</span>
<a name="l00600"></a>00600 <span class="comment">   The inquiry directives may be used to obtain attributes of a files</span>
<a name="l00601"></a>00601 <span class="comment">   such as the file&#39;s replication factors, storage pool name, </span>
<a name="l00602"></a>00602 <span class="comment">   fileset name or snapshot name. */</span>
<a name="l00603"></a>00603 
<a name="l00604"></a>00604 <span class="comment">/* This inquiry is used to obtain a file&#39;s replication factors. */</span>
<a name="l00605"></a><a class="code" href="structgpfsGetReplication__t.html">00605</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00606"></a>00606  {
<a name="l00607"></a><a class="code" href="structgpfsGetReplication__t.html#ab9a32f92a894ea6540502b14319fff33">00607</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetReplication__t.html#ab9a32f92a894ea6540502b14319fff33">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00608"></a><a class="code" href="structgpfsGetReplication__t.html#a45b76d84cc0a7c6a8b39ea80386ec769">00608</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetReplication__t.html#a45b76d84cc0a7c6a8b39ea80386ec769">structType</a>;              <span class="comment">/* inquiry identifier: </span>
<a name="l00609"></a>00609 <span class="comment">                                   GPFS_FCNTL_GET_REPLICATION */</span>
<a name="l00610"></a><a class="code" href="structgpfsGetReplication__t.html#a82f99c7a21419d15f88919af731bd149">00610</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetReplication__t.html#a82f99c7a21419d15f88919af731bd149">metadataReplicas</a>;        <span class="comment">/* returns the current number of copies </span>
<a name="l00611"></a>00611 <span class="comment">                                   of indirect blocks for the file. */</span>
<a name="l00612"></a><a class="code" href="structgpfsGetReplication__t.html#a07639d2732aec1c48f31e045abf2dcba">00612</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetReplication__t.html#a07639d2732aec1c48f31e045abf2dcba">maxMetadataReplicas</a>;     <span class="comment">/* returns the maximum number of copies</span>
<a name="l00613"></a>00613 <span class="comment">                                   of indirect blocks for the file. */</span>
<a name="l00614"></a><a class="code" href="structgpfsGetReplication__t.html#ace532ef5711ef5159572c1fecc02321e">00614</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetReplication__t.html#ace532ef5711ef5159572c1fecc02321e">dataReplicas</a>;            <span class="comment">/* returns the current number of copies</span>
<a name="l00615"></a>00615 <span class="comment">                                   of data blocks for the file. */</span>
<a name="l00616"></a><a class="code" href="structgpfsGetReplication__t.html#a711fc1d9ca6dd2444009c6c9defadbd7">00616</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetReplication__t.html#a711fc1d9ca6dd2444009c6c9defadbd7">maxDataReplicas</a>;         <span class="comment">/* returns the maximum number of copies</span>
<a name="l00617"></a>00617 <span class="comment">                                   of data blocks for the file. */</span>
<a name="l00618"></a><a class="code" href="structgpfsGetReplication__t.html#ac506554c2f05df87825987a0abde195c">00618</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetReplication__t.html#ac506554c2f05df87825987a0abde195c">status</a>;                 <span class="comment">/* returns the status of the file.</span>
<a name="l00619"></a>00619 <span class="comment">                                   Status values defined below. */</span>
<a name="l00620"></a><a class="code" href="structgpfsGetReplication__t.html#ab4b0e8e3997a26765c0df7ceed392fae">00620</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetReplication__t.html#ab4b0e8e3997a26765c0df7ceed392fae">reserved</a>;                <span class="comment">/* unused, but should be set to 0 */</span>
<a name="l00621"></a>00621 } <a class="code" href="structgpfsGetReplication__t.html">gpfsGetReplication_t</a>;
<a name="l00622"></a>00622 
<a name="l00623"></a>00623 
<a name="l00624"></a>00624 <span class="comment">/* Flag definitions */</span>
<a name="l00625"></a>00625 
<a name="l00626"></a>00626 <span class="comment">/* If set this file may have some data where the only replicas are </span>
<a name="l00627"></a>00627 <span class="comment">   on suspended disks; implies some data may be lost if suspended</span>
<a name="l00628"></a>00628 <span class="comment">   disks are removed. */</span>
<a name="l00629"></a><a class="code" href="gpfs__fcntl_8h.html#a27434d8128c0f99b982b25e1d316435b">00629</a> <span class="preprocessor">#define GPFS_FCNTL_STATUS_EXPOSED        0x40000000</span>
<a name="l00630"></a>00630 <span class="preprocessor"></span>
<a name="l00631"></a>00631 <span class="comment">/* If set this file may not be properly replicated, i.e. some data </span>
<a name="l00632"></a>00632 <span class="comment">   may have fewer or more than the desired number of replicas, </span>
<a name="l00633"></a>00633 <span class="comment">   or some replicas may be on suspended disks. */</span>
<a name="l00634"></a><a class="code" href="gpfs__fcntl_8h.html#a8ff296c17f7ac4c2766e8ab115e2d674">00634</a> <span class="preprocessor">#define GPFS_FCNTL_STATUS_ILLREPLICATED  0x20000000</span>
<a name="l00635"></a>00635 <span class="preprocessor"></span>
<a name="l00636"></a>00636 <span class="comment">/* If set this file may not be properly balanced. */</span>
<a name="l00637"></a><a class="code" href="gpfs__fcntl_8h.html#a07ec1bbfa4273b357adacd200b327a3d">00637</a> <span class="preprocessor">#define GPFS_FCNTL_STATUS_UNBALANCED     0x10000000</span>
<a name="l00638"></a>00638 <span class="preprocessor"></span>
<a name="l00639"></a>00639 <span class="comment">/* If set this file has stale data blocks on at least one of the disks</span>
<a name="l00640"></a>00640 <span class="comment">   that are marked as unavailable or recovering in the stripe group </span>
<a name="l00641"></a>00641 <span class="comment">   descriptor. */</span>
<a name="l00642"></a><a class="code" href="gpfs__fcntl_8h.html#a2ebdcde4a72e22c0a45532ad342c975d">00642</a> <span class="preprocessor">#define GPFS_FCNTL_STATUS_DATAUPDATEMISS 0x08000000</span>
<a name="l00643"></a>00643 <span class="preprocessor"></span>
<a name="l00644"></a>00644 <span class="comment">/* If set this file has stale indirect blocks on at least one </span>
<a name="l00645"></a>00645 <span class="comment">   unavailable or recovering disk. */</span>
<a name="l00646"></a><a class="code" href="gpfs__fcntl_8h.html#aef920c8893ad55852ffd6f509b946f8e">00646</a> <span class="preprocessor">#define GPFS_FCNTL_STATUS_METAUPDATEMISS 0x04000000</span>
<a name="l00647"></a>00647 <span class="preprocessor"></span>
<a name="l00648"></a>00648 <span class="comment">/* If set this file may not be properly placed, i.e. some data may </span>
<a name="l00649"></a>00649 <span class="comment">   be stored in an incorrect storage pool */</span>
<a name="l00650"></a><a class="code" href="gpfs__fcntl_8h.html#a4da3c3b945fe317b6704831c891a2ac9">00650</a> <span class="preprocessor">#define GPFS_FCNTL_STATUS_ILLPLACED      0x02000000</span>
<a name="l00651"></a>00651 <span class="preprocessor"></span>
<a name="l00652"></a>00652 
<a name="l00653"></a>00653 
<a name="l00654"></a>00654 <span class="comment">/* This inquiry is used to obtain the name of the storage assigned</span>
<a name="l00655"></a>00655 <span class="comment">   for the file&#39;s data. The size of the buffer may vary, but it must be </span>
<a name="l00656"></a>00656 <span class="comment">   a multiple of 8. Upon successful completion of the call, the buffer </span>
<a name="l00657"></a>00657 <span class="comment">   will contain a null-terminated character string for the name of the</span>
<a name="l00658"></a>00658 <span class="comment">   file&#39;s storage pool. */</span>
<a name="l00659"></a><a class="code" href="structgpfsGetStoragePool__t.html">00659</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00660"></a>00660 {
<a name="l00661"></a><a class="code" href="structgpfsGetStoragePool__t.html#a8133922a9be5c271cc463f18e8b9fd70">00661</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetStoragePool__t.html#a8133922a9be5c271cc463f18e8b9fd70">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00662"></a><a class="code" href="structgpfsGetStoragePool__t.html#ae2e2ecd5fa6ea683eb408435e0e5a121">00662</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetStoragePool__t.html#ae2e2ecd5fa6ea683eb408435e0e5a121">structType</a>;              <span class="comment">/* inquiry identifier: </span>
<a name="l00663"></a>00663 <span class="comment">                                   GPFS_FCNTL_GET_STORAGEPOOL */</span>
<a name="l00664"></a><a class="code" href="structgpfsGetStoragePool__t.html#adb754016100633c3e6bcb9ef26b4e6ed">00664</a>   <span class="keywordtype">char</span> buffer[<a class="code" href="gpfs__fcntl_8h.html#a27dfa9148c5b1b6a68a0ce55a89eaefc">GPFS_FCNTL_MAX_NAME_BUFFER</a>]; <span class="comment">/* returns with the file&#39;s</span>
<a name="l00665"></a>00665 <span class="comment">                                              storage pool name */</span>
<a name="l00666"></a>00666 } <a class="code" href="structgpfsGetStoragePool__t.html">gpfsGetStoragePool_t</a>;
<a name="l00667"></a>00667 
<a name="l00668"></a>00668 
<a name="l00669"></a>00669 <span class="comment">/* This inquiry is used to obtain the name of the fileset to which this </span>
<a name="l00670"></a>00670 <span class="comment">   file has been assigned. The size of the buffer may vary, but it must be </span>
<a name="l00671"></a>00671 <span class="comment">   a multiple of 8. Upon successful completion of the call, the buffer </span>
<a name="l00672"></a>00672 <span class="comment">   will contain a null-terminated character string for the name of the</span>
<a name="l00673"></a>00673 <span class="comment">   file&#39;s fileset. */</span>
<a name="l00674"></a><a class="code" href="structgpfsGetFilesetName__t.html">00674</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00675"></a>00675 {
<a name="l00676"></a><a class="code" href="structgpfsGetFilesetName__t.html#ae45b9c870083d1ac15990e91cad3f964">00676</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetFilesetName__t.html#ae45b9c870083d1ac15990e91cad3f964">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00677"></a><a class="code" href="structgpfsGetFilesetName__t.html#a7ea512dab31cfebaf82b40fd15e17d45">00677</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetFilesetName__t.html#a7ea512dab31cfebaf82b40fd15e17d45">structType</a>;              <span class="comment">/* inquiry identifier: </span>
<a name="l00678"></a>00678 <span class="comment">                                   GPFS_FCNTL_GET_FILESETNAME */</span>
<a name="l00679"></a><a class="code" href="structgpfsGetFilesetName__t.html#a7f181dfca024d4afbd098f741585f880">00679</a>   <span class="keywordtype">char</span> buffer[<a class="code" href="gpfs__fcntl_8h.html#a27dfa9148c5b1b6a68a0ce55a89eaefc">GPFS_FCNTL_MAX_NAME_BUFFER</a>]; <span class="comment">/* returns with the file&#39;s</span>
<a name="l00680"></a>00680 <span class="comment">                                              fileset name */</span>
<a name="l00681"></a>00681 } <a class="code" href="structgpfsGetFilesetName__t.html">gpfsGetFilesetName_t</a>;
<a name="l00682"></a>00682 
<a name="l00683"></a>00683 
<a name="l00684"></a>00684 <span class="comment">/* This inquiry is used to obtain the name of the snapshot that includes </span>
<a name="l00685"></a>00685 <span class="comment">   this file. If the file is not part of a snapshot, then a zero-length</span>
<a name="l00686"></a>00686 <span class="comment">   string will be returned. The size of the buffer may vary, but it must be </span>
<a name="l00687"></a>00687 <span class="comment">   a multiple of 8. Upon successful completion of the call, the buffer </span>
<a name="l00688"></a>00688 <span class="comment">   will contain a null-terminated character string for the name of the</span>
<a name="l00689"></a>00689 <span class="comment">   snapshot that includes this file. */</span>
<a name="l00690"></a><a class="code" href="structgpfsGetSnapshotName__t.html">00690</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00691"></a><a class="code" href="structgpfsGetSnapshotName__t.html#a9346c15fc2393f3c09fd52e43c5db2c1">00691</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetSnapshotName__t.html#a9346c15fc2393f3c09fd52e43c5db2c1">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00692"></a><a class="code" href="structgpfsGetSnapshotName__t.html#a69825179eadf190f040954a2a77b4358">00692</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetSnapshotName__t.html#a69825179eadf190f040954a2a77b4358">structType</a>;              <span class="comment">/* inquiry identifier: </span>
<a name="l00693"></a>00693 <span class="comment">                                   GPFS_FCNTL_GET_SNAPSHOTNAME */</span>
<a name="l00694"></a><a class="code" href="structgpfsGetSnapshotName__t.html#ae44f1491091a1a3156238e4d7b29e857">00694</a>   <span class="keywordtype">char</span> buffer[<a class="code" href="gpfs__fcntl_8h.html#a27dfa9148c5b1b6a68a0ce55a89eaefc">GPFS_FCNTL_MAX_NAME_BUFFER</a>]; <span class="comment">/* returns with the file&#39;s</span>
<a name="l00695"></a>00695 <span class="comment">                                              snapshot name */</span>
<a name="l00696"></a>00696 } <a class="code" href="structgpfsGetSnapshotName__t.html">gpfsGetSnapshotName_t</a>;
<a name="l00697"></a>00697 
<a name="l00698"></a>00698 <span class="comment">/* Allow tschattr to change file immutable attribute */</span>
<a name="l00699"></a><a class="code" href="gpfs__fcntl_8h.html#a96679335fb914c7cf19c8dbb85d35c69">00699</a> <span class="preprocessor">#define GPFS_FCNTL_SET_IMMUTABLE   5000</span>
<a name="l00700"></a>00700 <span class="preprocessor"></span>
<a name="l00701"></a><a class="code" href="structgpfsSetImmutable__t.html">00701</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00702"></a><a class="code" href="structgpfsSetImmutable__t.html#a5bac92d7833de4a545fc16ca4c088b6e">00702</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetImmutable__t.html#a5bac92d7833de4a545fc16ca4c088b6e">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00703"></a><a class="code" href="structgpfsSetImmutable__t.html#afc65d3b1ca1b2088f4653850d77f2033">00703</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetImmutable__t.html#afc65d3b1ca1b2088f4653850d77f2033">structType</a>;              <span class="comment">/* function identifier: </span>
<a name="l00704"></a>00704 <span class="comment">                                   GPFS_FCNTL_SET_IMMUTABLE */</span>
<a name="l00705"></a><a class="code" href="structgpfsSetImmutable__t.html#ad9b8c7351c8537c67b780ad01da29f53">00705</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetImmutable__t.html#ad9b8c7351c8537c67b780ad01da29f53">setImmutable</a>;            <span class="comment">/* value to set the immutable flag */</span>
<a name="l00706"></a><a class="code" href="structgpfsSetImmutable__t.html#af7d71ac2cb94e887191b8654055c5b7d">00706</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetImmutable__t.html#af7d71ac2cb94e887191b8654055c5b7d">setIndefiniteRetention</a>;  <span class="comment">/* value to set IndefiniteRetention */</span>
<a name="l00707"></a><a class="code" href="structgpfsSetImmutable__t.html#a78f29890b29f2161febe1f462b2167ac">00707</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetImmutable__t.html#a78f29890b29f2161febe1f462b2167ac">errReasonCode</a>;           <span class="comment">/* Reason code                   */</span>
<a name="l00708"></a><a class="code" href="structgpfsSetImmutable__t.html#af144ede4aac6979c2ff70de6b1570dbe">00708</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetImmutable__t.html#af144ede4aac6979c2ff70de6b1570dbe">reserved</a>;                <span class="comment">/* reserved field */</span>
<a name="l00709"></a>00709 } <a class="code" href="structgpfsSetImmutable__t.html">gpfsSetImmutable_t</a>;
<a name="l00710"></a>00710 
<a name="l00711"></a><a class="code" href="gpfs__fcntl_8h.html#a4d24c4b5519809d8e9c8e865a77459e2">00711</a> <span class="preprocessor">#define GPFS_FCNTL_GET_IMMUTABLE   5001</span>
<a name="l00712"></a>00712 <span class="preprocessor"></span>
<a name="l00713"></a><a class="code" href="structgpfsGetImmutable__t.html">00713</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00714"></a><a class="code" href="structgpfsGetImmutable__t.html#aabc80773b6ef83847ef00366b9501a19">00714</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetImmutable__t.html#aabc80773b6ef83847ef00366b9501a19">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00715"></a><a class="code" href="structgpfsGetImmutable__t.html#a69080ebdb78e436357ea5bf5ba0bba9f">00715</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetImmutable__t.html#a69080ebdb78e436357ea5bf5ba0bba9f">structType</a>;              <span class="comment">/* function identifier: </span>
<a name="l00716"></a>00716 <span class="comment">                                   GPFS_FCNTL_SET_IMMUTABLE */</span>
<a name="l00717"></a><a class="code" href="structgpfsGetImmutable__t.html#ad0b27c0936e6e0c6486423b74fad5aa2">00717</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetImmutable__t.html#ad0b27c0936e6e0c6486423b74fad5aa2">immutable</a>;               <span class="comment">/* value of the immutable flag */</span>
<a name="l00718"></a><a class="code" href="structgpfsGetImmutable__t.html#a6384cb96da48624c006049e259f467de">00718</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetImmutable__t.html#a6384cb96da48624c006049e259f467de">indefiniteRetention</a>;     <span class="comment">/* value of the indeiniteRetention flag */</span>
<a name="l00719"></a><a class="code" href="structgpfsGetImmutable__t.html#a6e753ef0197e6b2cfb3c15b56bb7b736">00719</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetImmutable__t.html#a6e753ef0197e6b2cfb3c15b56bb7b736">errReasonCode</a>;           <span class="comment">/* Reason code                   */</span>
<a name="l00720"></a><a class="code" href="structgpfsGetImmutable__t.html#afe1d0a5c749ba01fba5cae2854f28a93">00720</a>    <span class="keywordtype">int</span> <a class="code" href="structgpfsGetImmutable__t.html#afe1d0a5c749ba01fba5cae2854f28a93">reserved</a>;
<a name="l00721"></a>00721 } <a class="code" href="structgpfsGetImmutable__t.html">gpfsGetImmutable_t</a>;
<a name="l00722"></a>00722 
<a name="l00723"></a><a class="code" href="gpfs__fcntl_8h.html#a2c6a9533bcc337019da7d4f101350fe0">00723</a> <span class="preprocessor">#define GPFS_FCNTL_SET_EXPIRATION_TIME   5002</span>
<a name="l00724"></a>00724 <span class="preprocessor"></span>
<a name="l00725"></a><a class="code" href="structgpfsSetExpTime__t.html">00725</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00726"></a><a class="code" href="structgpfsSetExpTime__t.html#a9cdc18939ff9cc34180603382a5c428e">00726</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetExpTime__t.html#a9cdc18939ff9cc34180603382a5c428e">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00727"></a><a class="code" href="structgpfsSetExpTime__t.html#af6b879f652daece4dcad83f2bf9fb2d0">00727</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetExpTime__t.html#af6b879f652daece4dcad83f2bf9fb2d0">structType</a>;              <span class="comment">/* function identifier: </span>
<a name="l00728"></a>00728 <span class="comment">                                   GPFS_FCNTL_SET_IMMUTABLE */</span>
<a name="l00729"></a><a class="code" href="structgpfsSetExpTime__t.html#a0c2195be35ed26dcc79dc33aa9f41710">00729</a>   <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="structgpfsSetExpTime__t.html#a0c2195be35ed26dcc79dc33aa9f41710">expTime</a>;           <span class="comment">/* expiration Time               */</span>
<a name="l00730"></a><a class="code" href="structgpfsSetExpTime__t.html#ad9070d9df08e6c0afd416e6bc561c5f5">00730</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetExpTime__t.html#ad9070d9df08e6c0afd416e6bc561c5f5">errReasonCode</a>;           <span class="comment">/* Reason code                   */</span>
<a name="l00731"></a><a class="code" href="structgpfsSetExpTime__t.html#a9c7f221e64aeb15384db69bf7df763fe">00731</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetExpTime__t.html#a9c7f221e64aeb15384db69bf7df763fe">reserved</a>;                <span class="comment">/* reserved field */</span>
<a name="l00732"></a>00732 } <a class="code" href="structgpfsSetExpTime__t.html">gpfsSetExpTime_t</a>;
<a name="l00733"></a>00733 
<a name="l00734"></a><a class="code" href="gpfs__fcntl_8h.html#ae91810c63b592cafd7b242e173e02dcd">00734</a> <span class="preprocessor">#define GPFS_FCNTL_GET_EXPIRATION_TIME   5003</span>
<a name="l00735"></a>00735 <span class="preprocessor"></span>
<a name="l00736"></a><a class="code" href="structgpfsGetExpTime__t.html">00736</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00737"></a><a class="code" href="structgpfsGetExpTime__t.html#aea1e4587ac2644c96b5208f93b9ec594">00737</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetExpTime__t.html#aea1e4587ac2644c96b5208f93b9ec594">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00738"></a><a class="code" href="structgpfsGetExpTime__t.html#a94394b8f51c58df13410f02be9822e67">00738</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetExpTime__t.html#a94394b8f51c58df13410f02be9822e67">structType</a>;              <span class="comment">/* function identifier: </span>
<a name="l00739"></a>00739 <span class="comment">                                   GPFS_FCNTL_SET_IMMUTABLE */</span>
<a name="l00740"></a><a class="code" href="structgpfsGetExpTime__t.html#a99038bc62977afc04d85456f774c3419">00740</a>   <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="structgpfsGetExpTime__t.html#a99038bc62977afc04d85456f774c3419">expTime</a>;           <span class="comment">/* expiration Time          */</span>
<a name="l00741"></a><a class="code" href="structgpfsGetExpTime__t.html#adeeef929e00e59a3dfa587912c469701">00741</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetExpTime__t.html#adeeef929e00e59a3dfa587912c469701">errReasonCode</a>;           <span class="comment">/* Reason code                   */</span>
<a name="l00742"></a><a class="code" href="structgpfsGetExpTime__t.html#aad1466301fa9dfa6408557f837c7461b">00742</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetExpTime__t.html#aad1466301fa9dfa6408557f837c7461b">reserved</a>;                <span class="comment">/* reserved field */</span>
<a name="l00743"></a>00743 } <a class="code" href="structgpfsGetExpTime__t.html">gpfsGetExpTime_t</a>;
<a name="l00744"></a>00744 
<a name="l00745"></a>00745 
<a name="l00746"></a><a class="code" href="gpfs__fcntl_8h.html#ac3a6033c36af269f58f82f8f4a34e1c5">00746</a> <span class="preprocessor">#define GPFS_FCNTL_SET_APPENDONLY   5004</span>
<a name="l00747"></a>00747 <span class="preprocessor"></span>
<a name="l00748"></a><a class="code" href="structgpfsSetAppendOnly__t.html">00748</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00749"></a><a class="code" href="structgpfsSetAppendOnly__t.html#abad6f8d7d0ad1544c9aadd2e8c5ce28f">00749</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetAppendOnly__t.html#abad6f8d7d0ad1544c9aadd2e8c5ce28f">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00750"></a><a class="code" href="structgpfsSetAppendOnly__t.html#a97a4284ef462926db299991f13f183ce">00750</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetAppendOnly__t.html#a97a4284ef462926db299991f13f183ce">structType</a>;              <span class="comment">/* function identifier: </span>
<a name="l00751"></a>00751 <span class="comment">                                   GPFS_FCNTL_SET_IMMUTABLE */</span>
<a name="l00752"></a><a class="code" href="structgpfsSetAppendOnly__t.html#af6a0fd057329902b32720adf2f016b70">00752</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetAppendOnly__t.html#af6a0fd057329902b32720adf2f016b70">setAppendOnly</a>;           <span class="comment">/* value to set the appendOnly flag */</span>
<a name="l00753"></a><a class="code" href="structgpfsSetAppendOnly__t.html#a2de00b523c7321791a6a6c63a1dcbf93">00753</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetAppendOnly__t.html#a2de00b523c7321791a6a6c63a1dcbf93">setIndefiniteRetention</a>;  <span class="comment">/* value to set IndefiniteRetention */</span>
<a name="l00754"></a><a class="code" href="structgpfsSetAppendOnly__t.html#a5e67573c0333ba15ad5c3e5e8c70d246">00754</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetAppendOnly__t.html#a5e67573c0333ba15ad5c3e5e8c70d246">errReasonCode</a>;           <span class="comment">/* Reason code                   */</span>
<a name="l00755"></a><a class="code" href="structgpfsSetAppendOnly__t.html#adea62a46b66e66fc8517e603722606f3">00755</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsSetAppendOnly__t.html#adea62a46b66e66fc8517e603722606f3">reserved</a>;                <span class="comment">/* reserved field */</span>
<a name="l00756"></a>00756 } <a class="code" href="structgpfsSetAppendOnly__t.html">gpfsSetAppendOnly_t</a>;
<a name="l00757"></a>00757 
<a name="l00758"></a><a class="code" href="gpfs__fcntl_8h.html#a7b50c116f84029fb45238229d6afba45">00758</a> <span class="preprocessor">#define GPFS_FCNTL_GET_APPENDONLY  5005</span>
<a name="l00759"></a>00759 <span class="preprocessor"></span>
<a name="l00760"></a><a class="code" href="structgpfsGetAppendOnly__t.html">00760</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00761"></a><a class="code" href="structgpfsGetAppendOnly__t.html#a38ca11fab988a81ae51805457fd7d40b">00761</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetAppendOnly__t.html#a38ca11fab988a81ae51805457fd7d40b">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00762"></a><a class="code" href="structgpfsGetAppendOnly__t.html#a44ba40ea9ccb5e6ab2130994480fa717">00762</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetAppendOnly__t.html#a44ba40ea9ccb5e6ab2130994480fa717">structType</a>;              <span class="comment">/* function identifier: </span>
<a name="l00763"></a>00763 <span class="comment">                                  GPFS_FCNTL_SET_IMMUTABLE */</span>
<a name="l00764"></a><a class="code" href="structgpfsGetAppendOnly__t.html#a93d0dd680cc02818865ee7bf5e093563">00764</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetAppendOnly__t.html#a93d0dd680cc02818865ee7bf5e093563">appendOnly</a>;              <span class="comment">/* value of the appendOnly flag */</span>
<a name="l00765"></a><a class="code" href="structgpfsGetAppendOnly__t.html#abad84d0a9e31af0779ff5d3199bcdaae">00765</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetAppendOnly__t.html#abad84d0a9e31af0779ff5d3199bcdaae">indefiniteRetention</a>;     <span class="comment">/* value of the indeiniteRetention flag */</span>
<a name="l00766"></a><a class="code" href="structgpfsGetAppendOnly__t.html#acaaa890b45b1308cffa154be8663ade9">00766</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetAppendOnly__t.html#acaaa890b45b1308cffa154be8663ade9">errReasonCode</a>;           <span class="comment">/* Reason code                   */</span>
<a name="l00767"></a><a class="code" href="structgpfsGetAppendOnly__t.html#ade785bba5177f0beafaf99313d5fddfa">00767</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetAppendOnly__t.html#ade785bba5177f0beafaf99313d5fddfa">reserved</a>;                <span class="comment">/* reserved field */</span>
<a name="l00768"></a>00768 } <a class="code" href="structgpfsGetAppendOnly__t.html">gpfsGetAppendOnly_t</a>;
<a name="l00769"></a>00769 
<a name="l00770"></a>00770 
<a name="l00771"></a>00771 
<a name="l00772"></a>00772 <span class="comment">/* </span>
<a name="l00773"></a>00773 <span class="comment"> * Provide access to a file&#39;s extended attributes</span>
<a name="l00774"></a>00774 <span class="comment"> *</span>
<a name="l00775"></a>00775 <span class="comment"> * Extended attributes are persistent name,value pairs assigned to files or</span>
<a name="l00776"></a>00776 <span class="comment"> * directories. The name is typically a character string which is terminated </span>
<a name="l00777"></a>00777 <span class="comment"> * by a null (&#39;\0&#39;) character which is included in the name length. </span>
<a name="l00778"></a>00778 <span class="comment"> * Attributes set internally or for dmapi may follow other conventions.</span>
<a name="l00779"></a>00779 <span class="comment"> * The attributes&#39;s value is a binary string which is not interpretted</span>
<a name="l00780"></a>00780 <span class="comment"> * by this api.</span>
<a name="l00781"></a>00781 <span class="comment"> * </span>
<a name="l00782"></a>00782 <span class="comment"> * Attribute names are typically divided into namespaces, both to avoid</span>
<a name="l00783"></a>00783 <span class="comment"> * collisions and to enforce access controls. The namespaces currently</span>
<a name="l00784"></a>00784 <span class="comment"> * defined are:</span>
<a name="l00785"></a>00785 <span class="comment"> *</span>
<a name="l00786"></a>00786 <span class="comment"> * &quot;user.&quot;     -- requires permission to access file data</span>
<a name="l00787"></a>00787 <span class="comment"> * &quot;system.&quot;   -- used by kernel for access control lists</span>
<a name="l00788"></a>00788 <span class="comment"> * &quot;trusted.&quot;  -- requires admin/root privilege</span>
<a name="l00789"></a>00789 <span class="comment"> * &quot;security.&quot; -- used by Security Enhanced Linux</span>
<a name="l00790"></a>00790 <span class="comment"> * &quot;archive.&quot;  -- reserved for GPFS</span>
<a name="l00791"></a>00791 <span class="comment"> * &quot;dmapi.&quot;    -- reserved for the X/Open Data Storage Management API (XDSM)</span>
<a name="l00792"></a>00792 <span class="comment"> * &quot;gpfs.&quot;     -- reserved for GPFS</span>
<a name="l00793"></a>00793 <span class="comment"> *</span>
<a name="l00794"></a>00794 <span class="comment"> * For example, &quot;user.name1&quot; or &quot;system.posix_acl_default&quot;. </span>
<a name="l00795"></a>00795 <span class="comment"> * Additional namespaces may be defined in future releases. Users should</span>
<a name="l00796"></a>00796 <span class="comment"> * restrict the names used to a predefined namespace.</span>
<a name="l00797"></a>00797 <span class="comment"> *</span>
<a name="l00798"></a>00798 <span class="comment"> * Setting or resetting attributes reserved by GPFS or other middleware </span>
<a name="l00799"></a>00799 <span class="comment"> * services may have unintended consequences and is not recommended.</span>
<a name="l00800"></a>00800 <span class="comment"> *</span>
<a name="l00801"></a>00801 <span class="comment"> * Attributes are creating via the SET_XATTR call with a value length of</span>
<a name="l00802"></a>00802 <span class="comment"> * zero or more bytes. By default, setting an extended attribute will create</span>
<a name="l00803"></a>00803 <span class="comment"> * the attribute if it does not exist or will replace the current value if </span>
<a name="l00804"></a>00804 <span class="comment"> * it does. Using the CREATE flag causes a pure create which fails if the </span>
<a name="l00805"></a>00805 <span class="comment"> * attribute already exists. Likewise using the REPLACE flag causes a pure</span>
<a name="l00806"></a>00806 <span class="comment"> * replace which fails if the attribute does not exist. </span>
<a name="l00807"></a>00807 <span class="comment"> *</span>
<a name="l00808"></a>00808 <span class="comment"> * Attributes are deleted by calling SET_XATTR with a negative length. Using</span>
<a name="l00809"></a>00809 <span class="comment"> * the DELETE flag causes a pure delete which fails if the attribute does </span>
<a name="l00810"></a>00810 <span class="comment"> * not exist.</span>
<a name="l00811"></a>00811 <span class="comment"> * </span>
<a name="l00812"></a>00812 <span class="comment"> * By default, setting or deleting an extended attribute is done </span>
<a name="l00813"></a>00813 <span class="comment"> * asynchronously. That is to say, the update is not written to disk until</span>
<a name="l00814"></a>00814 <span class="comment"> * some time after the call completes. Using the SYNC option causes the</span>
<a name="l00815"></a>00815 <span class="comment"> * update to be committed to disk before the call completes. The update </span>
<a name="l00816"></a>00816 <span class="comment"> * to a single attribute is always done atomically, either the original value</span>
<a name="l00817"></a>00817 <span class="comment"> * is retained or the complete new value will be set. </span>
<a name="l00818"></a>00818 <span class="comment"> *</span>
<a name="l00819"></a>00819 <span class="comment"> * More than one attribute may be set or deleted within a single fcntl call.</span>
<a name="l00820"></a>00820 <span class="comment"> * The updates are applied in the order specified in the fcntl vector.</span>
<a name="l00821"></a>00821 <span class="comment"> * If the file system fails, there is no guarantee that all updates will</span>
<a name="l00822"></a>00822 <span class="comment"> * be applied, even if using the SYNC options. If sync is specified on the </span>
<a name="l00823"></a>00823 <span class="comment"> * last update in the vector, then all prior attributes updates will also</span>
<a name="l00824"></a>00824 <span class="comment"> * be written with the final update.</span>
<a name="l00825"></a>00825 <span class="comment"> *</span>
<a name="l00826"></a>00826 <span class="comment"> * In order to see an attribute via the GET_XATTR or LIST_XATTR call</span>
<a name="l00827"></a>00827 <span class="comment"> * the caller must have sufficient privilege to set the attribute. </span>
<a name="l00828"></a>00828 <span class="comment"> *</span>
<a name="l00829"></a>00829 <span class="comment"> * Errors are returned in the errReturnCode field.</span>
<a name="l00830"></a>00830 <span class="comment"> * </span>
<a name="l00831"></a>00831 <span class="comment"> * </span>
<a name="l00832"></a>00832 <span class="comment"> * Note: Extended attributes are stored as character or binary strings.</span>
<a name="l00833"></a>00833 <span class="comment"> * Care should be taken when used on mixed architectures with different</span>
<a name="l00834"></a>00834 <span class="comment"> * byte orders or word sizes to insure the attribute values are in an </span>
<a name="l00835"></a>00835 <span class="comment"> * architecture independent format. </span>
<a name="l00836"></a>00836 <span class="comment"> *</span>
<a name="l00837"></a>00837 <span class="comment"> */</span>
<a name="l00838"></a><a class="code" href="gpfs__fcntl_8h.html#af3ddb0a1e70fb4d77a8712fa4833305a">00838</a> <span class="preprocessor">#define GPFS_FCNTL_GET_XATTR  6001</span>
<a name="l00839"></a><a class="code" href="gpfs__fcntl_8h.html#ae301eaef794681abd25bd00cb80430e4">00839</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_SET_XATTR  6002</span>
<a name="l00840"></a><a class="code" href="gpfs__fcntl_8h.html#a681ea6635b5adb6083b4e00be5d35db2">00840</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_LIST_XATTR 6003</span>
<a name="l00841"></a>00841 <span class="preprocessor"></span>
<a name="l00842"></a><a class="code" href="gpfs__fcntl_8h.html#a453ec3e1e706d2eedab8edfdcbf6a594">00842</a> <span class="preprocessor">#define GPFS_FCNTL_XATTR_MAX_NAMELEN   256 </span><span class="comment">/* includes trailing null char */</span>
<a name="l00843"></a><a class="code" href="gpfs__fcntl_8h.html#a145ce107b43a7f02f1c92f5bed94584c">00843</a> <span class="preprocessor">#define GPFS_FCNTL_XATTR_MAX_VALUELEN (16 * 1024) </span>
<a name="l00844"></a>00844 <span class="preprocessor"></span>
<a name="l00845"></a><a class="code" href="gpfs__fcntl_8h.html#a392df9c319e429c20166e8bb3b70589b">00845</a> <span class="preprocessor">#define GPFS_FCNTL_XATTRFLAG_NONE      0x0000</span>
<a name="l00846"></a><a class="code" href="gpfs__fcntl_8h.html#a333490d3a68c2c02a000a9caa603142d">00846</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_XATTRFLAG_SYNC      0x0001 </span><span class="comment">/* synchronous update</span>
<a name="l00847"></a>00847 <span class="comment">                                                 All updates are committed</span>
<a name="l00848"></a>00848 <span class="comment">                                                 before the call returns */</span>
<a name="l00849"></a><a class="code" href="gpfs__fcntl_8h.html#a2a63d8d9871df5e8e984c529b852b392">00849</a> <span class="preprocessor">#define GPFS_FCNTL_XATTRFLAG_CREATE    0x0002 </span><span class="comment">/* pure create</span>
<a name="l00850"></a>00850 <span class="comment">                                                 will fail if already exists */</span>
<a name="l00851"></a><a class="code" href="gpfs__fcntl_8h.html#aed02aa562b12de0f8f4717e3b6151ec8">00851</a> <span class="preprocessor">#define GPFS_FCNTL_XATTRFLAG_REPLACE   0x0004 </span><span class="comment">/* pure replace</span>
<a name="l00852"></a>00852 <span class="comment">                                                 will fail if does not exist */</span>
<a name="l00853"></a><a class="code" href="gpfs__fcntl_8h.html#acc0b094fb93796aec07251386cd2fe2b">00853</a> <span class="preprocessor">#define GPFS_FCNTL_XATTRFLAG_DELETE    0x0008 </span><span class="comment">/* pure delete</span>
<a name="l00854"></a>00854 <span class="comment">                                                 will fail if does not exist */</span>
<a name="l00855"></a><a class="code" href="gpfs__fcntl_8h.html#a1dcd2d2abaadf25cfa1f3fb2ca46ce81">00855</a> <span class="preprocessor">#define GPFS_FCNTL_XATTRFLAG_NO_CTIME  0x0010 </span><span class="comment">/* Update will not set ctime.</span>
<a name="l00856"></a>00856 <span class="comment">                                                 Must have admin authority. */</span>
<a name="l00857"></a>00857 
<a name="l00858"></a>00858 <span class="comment">/* Define error reason codes for extended attributes */</span>
<a name="l00859"></a><a class="code" href="gpfs__fcntl_8h.html#a500dbfa83218971fb11b258874f25fd4">00859</a> <span class="preprocessor">#define GPFS_FCNTL_ERR_NO_ATTR             27</span>
<a name="l00860"></a><a class="code" href="gpfs__fcntl_8h.html#a5929c897eff4ef14e60fdc72a5424204">00860</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_ERR_ATTR_EXISTS         28</span>
<a name="l00861"></a><a class="code" href="gpfs__fcntl_8h.html#a4674f2f14c5061cde452301609dcfd0c">00861</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_ERR_BUFFER_TOO_SMALL    29</span>
<a name="l00862"></a><a class="code" href="gpfs__fcntl_8h.html#a420fad13c3f84740aa9fd7ab86b1a930">00862</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_ERR_NO_ATTR_SPACE       30</span>
<a name="l00863"></a><a class="code" href="gpfs__fcntl_8h.html#ac99f6f5e133ec3e4da390ff500c35d8a">00863</a> <span class="preprocessor"></span><span class="preprocessor">#define GPFS_FCNTL_ERR_INVAL_VALUE         31</span>
<a name="l00864"></a>00864 <span class="preprocessor"></span>
<a name="l00865"></a>00865 
<a name="l00866"></a>00866 
<a name="l00867"></a><a class="code" href="structgpfsGetSetXAttr__t.html">00867</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00868"></a><a class="code" href="structgpfsGetSetXAttr__t.html#a4f2bd652fc10ffc252a174d916f7ec6c">00868</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetSetXAttr__t.html#a4f2bd652fc10ffc252a174d916f7ec6c">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00869"></a><a class="code" href="structgpfsGetSetXAttr__t.html#a49a8e0543e65d37dcab12e5da3243aee">00869</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetSetXAttr__t.html#a49a8e0543e65d37dcab12e5da3243aee">structType</a>;              <span class="comment">/* function identifier: </span>
<a name="l00870"></a>00870 <span class="comment">                                  GPFS_FCNTL_GET_XATTR </span>
<a name="l00871"></a>00871 <span class="comment">                                  or GPFS_FCNTL_SET_XATTR */</span>
<a name="l00872"></a><a class="code" href="structgpfsGetSetXAttr__t.html#a9e523c2bd582d7ae11fae14faf728922">00872</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetSetXAttr__t.html#a9e523c2bd582d7ae11fae14faf728922">nameLen</a>;                 <span class="comment">/* length of attribute name</span>
<a name="l00873"></a>00873 <span class="comment">                                  may include trailing &#39;\0&#39; character */</span>
<a name="l00874"></a><a class="code" href="structgpfsGetSetXAttr__t.html#a875906858d99884b0af6537470fc4f44">00874</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetSetXAttr__t.html#a875906858d99884b0af6537470fc4f44">bufferLen</a>;                <span class="comment">/* </span>
<a name="l00875"></a>00875 <span class="comment">                                  for GPFS_FCNTL_GET_XATTR</span>
<a name="l00876"></a>00876 <span class="comment">                                    INPUT: length of buffer</span>
<a name="l00877"></a>00877 <span class="comment">                                    OUTPUT: length of attribute value</span>
<a name="l00878"></a>00878 <span class="comment"> </span>
<a name="l00879"></a>00879 <span class="comment">                                  for GPFS_FCNTL_SET_XATTR</span>
<a name="l00880"></a>00880 <span class="comment">                                    INPUT: length of attribute value</span>
<a name="l00881"></a>00881 <span class="comment">                                           length = -1 to delete attribute */</span>
<a name="l00882"></a><a class="code" href="structgpfsGetSetXAttr__t.html#acd8c78138b590c51293693ff80e97cd0">00882</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structgpfsGetSetXAttr__t.html#acd8c78138b590c51293693ff80e97cd0">flags</a>;          <span class="comment">/* defined above. */</span>
<a name="l00883"></a><a class="code" href="structgpfsGetSetXAttr__t.html#a5ab5a273970d7888263f89fc37516b17">00883</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsGetSetXAttr__t.html#a5ab5a273970d7888263f89fc37516b17">errReasonCode</a>;           <span class="comment">/* Reason code */</span>
<a name="l00884"></a><a class="code" href="structgpfsGetSetXAttr__t.html#a6b03310a819e6f292c1afb6a6e3fea0b">00884</a>   <span class="keywordtype">char</span> buffer[0];              <span class="comment">/* buffer for name and value.</span>
<a name="l00885"></a>00885 <span class="comment">                                  </span>
<a name="l00886"></a>00886 <span class="comment">                                  for GPFS_FCNTL_GET_XATTR</span>
<a name="l00887"></a>00887 <span class="comment"></span>
<a name="l00888"></a>00888 <span class="comment">                                    INPUT: name begins at offset 0 </span>
<a name="l00889"></a>00889 <span class="comment">                                           and must be null terminated.</span>
<a name="l00890"></a>00890 <span class="comment">                                    OUTPUT: name is returned unchanged</span>
<a name="l00891"></a>00891 <span class="comment">                                            value begins at nameLen rounded up</span>
<a name="l00892"></a>00892 <span class="comment">                                            to a multiple of 8.</span>
<a name="l00893"></a>00893 <span class="comment"></span>
<a name="l00894"></a>00894 <span class="comment">                                  for GPFS_FCNTL_SET_XATTR</span>
<a name="l00895"></a>00895 <span class="comment"></span>
<a name="l00896"></a>00896 <span class="comment">                                    INPUT: name begins at offset 0 </span>
<a name="l00897"></a>00897 <span class="comment">                                           and must be null terminated.</span>
<a name="l00898"></a>00898 <span class="comment">                                           value begins at nameLen rounded up</span>
<a name="l00899"></a>00899 <span class="comment">                                           to a multiple of 8.</span>
<a name="l00900"></a>00900 <span class="comment"></span>
<a name="l00901"></a>00901 <span class="comment">                                  actual length of buffer should be </span>
<a name="l00902"></a>00902 <span class="comment">                                  nameLen rounded up to a multiple of 8 </span>
<a name="l00903"></a>00903 <span class="comment">                                  + valueLen rounded up to a multiple of 8 </span>
<a name="l00904"></a>00904 <span class="comment"></span>
<a name="l00905"></a>00905 <span class="comment">                                  Buffer size set by caller. Maximum</span>
<a name="l00906"></a>00906 <span class="comment">                                  size is (GPFS_FCNTL_XATTR_MAX_NAMELEN +</span>
<a name="l00907"></a>00907 <span class="comment">                                  GPFS_FCNTL_XATTR_MAX_VALUELEN) */</span>
<a name="l00908"></a>00908 } <a class="code" href="structgpfsGetSetXAttr__t.html">gpfsGetSetXAttr_t</a>;
<a name="l00909"></a>00909 
<a name="l00910"></a><a class="code" href="structgpfsListXAttr__t.html">00910</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00911"></a><a class="code" href="structgpfsListXAttr__t.html#a4b1e877196567f97c5c6479f8632b6ed">00911</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsListXAttr__t.html#a4b1e877196567f97c5c6479f8632b6ed">structLen</a>;               <span class="comment">/* length of this structure */</span>
<a name="l00912"></a><a class="code" href="structgpfsListXAttr__t.html#a2f3cf9736d0e200caa01f2636fc3bb69">00912</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsListXAttr__t.html#a2f3cf9736d0e200caa01f2636fc3bb69">structType</a>;              <span class="comment">/* function identifier: </span>
<a name="l00913"></a>00913 <span class="comment">                                  GPFS_FCNTL_LIST_XATTR */</span>
<a name="l00914"></a><a class="code" href="structgpfsListXAttr__t.html#a2242d822047eb370505446bec1c9adc2">00914</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsListXAttr__t.html#a2242d822047eb370505446bec1c9adc2">bufferLen</a>;               <span class="comment">/* INPUT: length of buffer</span>
<a name="l00915"></a>00915 <span class="comment">                                  OUTPUT: length of returned list of names */</span>
<a name="l00916"></a><a class="code" href="structgpfsListXAttr__t.html#af0460f22cf78cf78dcef9fa5127b815e">00916</a>   <span class="keywordtype">int</span> <a class="code" href="structgpfsListXAttr__t.html#af0460f22cf78cf78dcef9fa5127b815e">errReasonCode</a>;           <span class="comment">/* Reason code */</span>
<a name="l00917"></a><a class="code" href="structgpfsListXAttr__t.html#a0e79cfc3b3a59c836a530049c7131788">00917</a>   <span class="keywordtype">char</span> buffer[0];
<a name="l00918"></a>00918                                <span class="comment">/* buffer for returned list of names</span>
<a name="l00919"></a>00919 <span class="comment">                                  Each attribute name is prefixed with</span>
<a name="l00920"></a>00920 <span class="comment">                                  a 1-byte name length that includes the</span>
<a name="l00921"></a>00921 <span class="comment">                                  trailing null. The next attribute name</span>
<a name="l00922"></a>00922 <span class="comment">                                  follows immediately in the buffer (and is</span>
<a name="l00923"></a>00923 <span class="comment">                                  prefixed with its own length). Following</span>
<a name="l00924"></a>00924 <span class="comment">                                  the last name a &#39;\0&#39; is appended to</span>
<a name="l00925"></a>00925 <span class="comment">                                  terminate the list. The returned bufferLen</span>
<a name="l00926"></a>00926 <span class="comment">                                  includes the final &#39;\0&#39;.</span>
<a name="l00927"></a>00927 <span class="comment">                                  </span>
<a name="l00928"></a>00928 <span class="comment">                                  \7abcdef\0\4ABC\0\10user.name\0\0</span>
<a name="l00929"></a>00929 <span class="comment">                                  </span>
<a name="l00930"></a>00930 <span class="comment">                                  The actual length of the buffer required </span>
<a name="l00931"></a>00931 <span class="comment">                                  depends on the number of attributes set on</span>
<a name="l00932"></a>00932 <span class="comment">                                  the file and the length of each attribute name.</span>
<a name="l00933"></a>00933 <span class="comment">                                  If the buffer provided is too small for all</span>
<a name="l00934"></a>00934 <span class="comment">                                  of the returned names, the errReasonCode</span>
<a name="l00935"></a>00935 <span class="comment">                                  will be set to GPFS_FCNTL_ERR_BUFFER_TOO_SMALL</span>
<a name="l00936"></a>00936 <span class="comment">                                  and bufferLen will be set to the minimum</span>
<a name="l00937"></a>00937 <span class="comment">                                  size buffer required to list all attributes.</span>
<a name="l00938"></a>00938 <span class="comment">                                  An initial buffer length of 0 may be used to</span>
<a name="l00939"></a>00939 <span class="comment">                                  query the attributes and determine the </span>
<a name="l00940"></a>00940 <span class="comment">                                  correct buffer size for this file. */</span>
<a name="l00941"></a>00941 
<a name="l00942"></a>00942 } <a class="code" href="structgpfsListXAttr__t.html">gpfsListXAttr_t</a>;
<a name="l00943"></a>00943 
<a name="l00944"></a>00944 
<a name="l00945"></a>00945 
<a name="l00946"></a>00946 
<a name="l00947"></a>00947 
<a name="l00948"></a>00948 
<a name="l00949"></a>00949 <span class="preprocessor">#ifdef GPFS_SNC_FILEMAP</span>
<a name="l00950"></a>00950 <span class="preprocessor"></span>
<a name="l00951"></a>00951 <span class="keyword">typedef</span> <span class="keyword">struct </span>OffsetLoc {
<a name="l00952"></a>00952   <span class="keywordtype">long</span> <span class="keywordtype">long</span> offset;
<a name="l00953"></a>00953   <span class="keywordtype">int</span> diskNum[3];      <span class="comment">/* array of locations based on number of replicas returned */</span>
<a name="l00954"></a>00954 } OffsetLoc;
<a name="l00955"></a>00955 
<a name="l00956"></a>00956 <span class="keyword">typedef</span> <span class="keyword">struct </span>FilemapIn {
<a name="l00957"></a>00957   <span class="keywordtype">long</span> <span class="keywordtype">long</span> startOffset;                  <span class="comment">/* start offset in bytes */</span>
<a name="l00958"></a>00958   <span class="keywordtype">long</span> <span class="keywordtype">long</span> skipfactor;              <span class="comment">/* number of bytes to skip before next offset read */</span>
<a name="l00959"></a>00959   <span class="keywordtype">long</span> <span class="keywordtype">long</span> length;                  <span class="comment">/* number of bytes (start offset + length / skipfactor = numblks returned */</span>
<a name="l00960"></a>00960   <span class="keywordtype">int</span> mreplicas;               <span class="comment">/* number of replicas user wants, 0 is all, </span>
<a name="l00961"></a>00961 <span class="comment">                                  1 primary, 2, primary and 1st replica 3 all */</span>
<a name="l00962"></a>00962   <span class="keywordtype">int</span> reserved;                  <span class="comment">/* for now to align it to the 8byte boundary */</span>
<a name="l00963"></a>00963 } FilemapIn;
<a name="l00964"></a>00964 
<a name="l00965"></a>00965 <span class="keyword">typedef</span> <span class="keyword">struct </span>FilemapOut {
<a name="l00966"></a>00966   <span class="keywordtype">int</span> numReplicasReturned;
<a name="l00967"></a>00967   <span class="keywordtype">int</span> numBlksReturned;
<a name="l00968"></a>00968   <span class="keywordtype">int</span> blockSize;
<a name="l00969"></a>00969   <span class="keywordtype">int</span> reserved;
<a name="l00970"></a>00970   <span class="keywordtype">char</span> buffer [<a class="code" href="gpfs__fcntl_8h.html#a0fa7bb7755394d273aefa8e7c9479aaa">GPFS_MAX_FCNTL_LENGTH</a>-1024]; <span class="comment">/* packs offset, disklocation1, disklocation2.... */</span>
<a name="l00971"></a>00971 } FilemapOut;
<a name="l00972"></a>00972 
<a name="l00973"></a>00973 
<a name="l00974"></a>00974 <span class="keyword">typedef</span> <span class="keyword">struct </span>GetDataBlkDiskIdx {
<a name="l00975"></a>00975   <span class="keywordtype">int</span> structLen;               <span class="comment">/* length of this structure */</span>
<a name="l00976"></a>00976   <span class="keywordtype">int</span> structType;              <span class="comment">/* function identifier: </span>
<a name="l00977"></a>00977 <span class="comment">                                  GPFS_FCNTL_GET_DATABLKDISKIDX */</span>
<a name="l00978"></a>00978   FilemapIn filemapIn;     <span class="comment">/* Input parameters specified by the user */</span>
<a name="l00979"></a>00979   FilemapOut filemapOut;   <span class="comment">/* Output data */</span>
<a name="l00980"></a>00980 } GetDataBlkDiskIdx;
<a name="l00981"></a>00981 
<a name="l00982"></a>00982 <span class="preprocessor">#endif </span><span class="comment">/* GPFS_SNC_FILEMAP */</span>
<a name="l00983"></a>00983 
<a name="l00984"></a>00984 
<a name="l00985"></a>00985 <span class="comment">/* NAME:        gpfs_fcntl()</span>
<a name="l00986"></a>00986 <span class="comment"> *</span>
<a name="l00987"></a>00987 <span class="comment"> * FUNCTION:    Pass hints and directives to GPFS on behalf of an open file</span>
<a name="l00988"></a>00988 <span class="comment"> *</span>
<a name="l00989"></a>00989 <span class="comment"> * Returns:      0      Successful</span>
<a name="l00990"></a>00990 <span class="comment"> *              -1      Failure</span>
<a name="l00991"></a>00991 <span class="comment"> *</span>
<a name="l00992"></a>00992 <span class="comment"> * Errno:       ENOSYS  Function not available</span>
<a name="l00993"></a>00993 <span class="comment"> *              EBADF   Bad file handle</span>
<a name="l00994"></a>00994 <span class="comment"> *              EINVAL  Not a GPFS file</span>
<a name="l00995"></a>00995 <span class="comment"> *              EINVAL  Not a regular file</span>
<a name="l00996"></a>00996 <span class="comment"> *              EINVAL  Ill-formed hint or directive</span>
<a name="l00997"></a>00997 <span class="comment"> *              E2BIG   Argument longer than GPFS_MAX_FCNTL_LENGTH</span>
<a name="l00998"></a>00998 <span class="comment"> */</span>
<a name="l00999"></a>00999 
<a name="l01000"></a>01000 <span class="keywordtype">int</span> <a class="code" href="gpfs_8h.html#a49355aa9d81891b853317bab921d8f30">GPFS_API</a>
<a name="l01001"></a>01001 <a class="code" href="gpfs__fcntl_8h.html#a16f269f92e54b84fc03e2a04ae59ee87">gpfs_fcntl</a>(<a class="code" href="gpfs_8h.html#abdf38b6e0527472c54afa7d35cb5708b">gpfs_file_t</a> fileDesc,   <span class="comment">/* Open file descriptor */</span>
<a name="l01002"></a>01002            <span class="keywordtype">void</span>* fcntlArgP);       <span class="comment">/* argument list */</span>
<a name="l01003"></a>01003 
<a name="l01004"></a>01004 <span class="comment">/*</span>
<a name="l01005"></a>01005 <span class="comment"> * NAME:        gpfs_restripe_file()</span>
<a name="l01006"></a>01006 <span class="comment"> *</span>
<a name="l01007"></a>01007 <span class="comment"> * FUNCTION:    Restripes a file by calling gpfs_fcntl for noBlocks</span>
<a name="l01008"></a>01008 <span class="comment"> *              from start offset. If noBlocks 0 ==&gt; use default increment size</span>
<a name="l01009"></a>01009 <span class="comment"> *</span>
<a name="l01010"></a>01010 <span class="comment"> * Returns:      0      Successful</span>
<a name="l01011"></a>01011 <span class="comment"> *              -1      Failure</span>
<a name="l01012"></a>01012 <span class="comment"> *</span>
<a name="l01013"></a>01013 <span class="comment"> * Errno:       ENOSYS  No quality of service function available</span>
<a name="l01014"></a>01014 <span class="comment"> *              ENOENT  File not found</span>
<a name="l01015"></a>01015 <span class="comment"> *              EINVAL  Not a GPFS file</span>
<a name="l01016"></a>01016 <span class="comment"> *              ESTALE  cached fs information was invalid</span>
<a name="l01017"></a>01017 <span class="comment"> */</span>
<a name="l01018"></a>01018 
<a name="l01019"></a>01019 <span class="keywordtype">int</span> <a class="code" href="gpfs_8h.html#a49355aa9d81891b853317bab921d8f30">GPFS_API</a>
<a name="l01020"></a>01020 <a class="code" href="gpfs__fcntl_8h.html#adff2548f0c651133c61c62099f6402ba">gpfs_restripe_file</a>(<a class="code" href="gpfs_8h.html#abdf38b6e0527472c54afa7d35cb5708b">gpfs_file_t</a> fileDesc, <span class="comment">/* Open file descriptor */</span>
<a name="l01021"></a>01021                    <span class="keywordtype">void</span>* fcntlArgP,      <span class="comment">/* argument list */</span>
<a name="l01022"></a>01022                    <span class="keywordtype">int</span> noBlocks);        <span class="comment">/* number of blocks used for each</span>
<a name="l01023"></a>01023 <span class="comment">                                            iteration when restriping a</span>
<a name="l01024"></a>01024 <span class="comment">                                            file */</span>
<a name="l01025"></a>01025 
<a name="l01026"></a>01026 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l01027"></a>01027 <span class="preprocessor"></span>}
<a name="l01028"></a>01028 <span class="preprocessor">#endif</span>
<a name="l01029"></a>01029 <span class="preprocessor"></span>
<a name="l01030"></a>01030 <span class="preprocessor">#endif </span><span class="comment">/* _h_gpfs_fcntl */</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 21 2012 for nfs-ganesha by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
