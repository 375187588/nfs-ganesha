<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>nfs-ganesha: cache_inode_misc.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nfs-ganesha&#160;<span id="projectnumber">1.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>cache_inode_misc.c File Reference</h1>  </div>
</div>
<div class="contents">

<p>routines for management of the cache_inode layer,  
<a href="#_details">More...</a></p>
<div class="textblock"><code>#include &quot;abstract_atomic.h&quot;</code><br/>
<code>#include &quot;log.h&quot;</code><br/>
<code>#include &quot;HashData.h&quot;</code><br/>
<code>#include &quot;HashTable.h&quot;</code><br/>
<code>#include &quot;fsal.h&quot;</code><br/>
<code>#include &quot;cache_inode.h&quot;</code><br/>
<code>#include &quot;cache_inode_avl.h&quot;</code><br/>
<code>#include &quot;cache_inode_lru.h&quot;</code><br/>
<code>#include &quot;cache_inode_weakref.h&quot;</code><br/>
<code>#include &quot;nfs4_acls.h&quot;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;sys/param.h&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;assert.h&gt;</code><br/>
</div>
<p><a href="cache__inode__misc_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#afc3c484c168ba4be4e799b77a6454ea3">cache_inode_err_str</a> (<a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> err)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#ab2ed61f21523805c300eae3d843ada57">cache_inode_compare_key_fsal</a> (<a class="el" href="structhash__buff.html">hash_buffer_t</a> *buff1, <a class="el" href="structhash__buff.html">hash_buffer_t</a> *buff2)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Compares two keys used in cache inode.  <a href="#ab2ed61f21523805c300eae3d843ada57"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#a029c96ce29eba0cd347ceee39d8bcaae">cache_inode_set_time_current</a> (<a class="el" href="structfsal__time____.html">fsal_time_t</a> *time)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the fsal_time in a pentry struct to the current time.  <a href="#a029c96ce29eba0cd347ceee39d8bcaae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#a6bc339e647145f134c4c2b01450d229d">cache_inode_new_entry</a> (<a class="el" href="structcache__inode__fsal__data____.html">cache_inode_fsal_data_t</a> *fsdata, <a class="el" href="structfsal__attrib__list____.html">fsal_attrib_list_t</a> *attr, <a class="el" href="cache__inode_8h.html#ae017962c50fe48834d8638069c7edc99">cache_inode_file_type_t</a> type, <a class="el" href="unioncache__inode__create__arg____.html">cache_inode_create_arg_t</a> *create_arg, <a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *status)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a new entry to the cache.  <a href="#a6bc339e647145f134c4c2b01450d229d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#af5ac07e9bceb51f9867005ef900441a5">cache_inode_clean_entry</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *entry)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Final cleaning of an entry.  <a href="#af5ac07e9bceb51f9867005ef900441a5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#aaa50487b9b403fd85b4a845de1a3df69">cache_inode_error_convert</a> (<a class="el" href="structfsal__status____.html">fsal_status_t</a> fsal_status)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an FSAL error to the corresponding cache_inode error.  <a href="#aaa50487b9b403fd85b4a845de1a3df69"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cache__inode_8h.html#ae017962c50fe48834d8638069c7edc99">cache_inode_file_type_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#a8f6934bbf38300379caf1342b6a63b26">cache_inode_fsal_type_convert</a> (<a class="el" href="fsal__types_8h.html#ac7b386ef9390188b635598625b481fb1">fsal_nodetype_t</a> type)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">converts an FSAL type to the corresponding cache_inode type  <a href="#a8f6934bbf38300379caf1342b6a63b26"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#a82d5fbc5e1c8796fe22378f8a7efc835">cache_inode_types_are_rename_compatible</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *src, <a class="el" href="structcache__entry__t.html">cache_entry_t</a> *dest)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Test if an entry can be overwritten during a rename.  <a href="#a82d5fbc5e1c8796fe22378f8a7efc835"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#ac01c860fa6b33b5212b274b6f78e26ec">cache_inode_print_dir</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *entry)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the content of a directory.  <a href="#ac01c860fa6b33b5212b274b6f78e26ec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#a2a029272e21a2d81fd91808dbe8ba01e">cache_inode_release_symlink</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *entry)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Release symlink content.  <a href="#a2a029272e21a2d81fd91808dbe8ba01e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#adb681e68b3e72288cbc0b4dab6aeebae">cache_inode_release_dirents</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *entry, <a class="el" href="cache__inode_8h.html#ae6e49f8c8c15b191ff9ffc007d48043e">cache_inode_avl_which_t</a> which)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Release cached directory content.  <a href="#adb681e68b3e72288cbc0b4dab6aeebae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#a0b14aaea5e11339b9b72dee2268d93c3">cache_inode_file_holds_state</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *entry)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if a file holds state.  <a href="#a0b14aaea5e11339b9b72dee2268d93c3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#a75d94c6dd8bc4aa6466faa7c71de9a66">cache_inode_check_trust</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *entry, <a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *context)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Conditionally refresh attributes.  <a href="#a75d94c6dd8bc4aa6466faa7c71de9a66"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcache__inode__gc__policy____.html">cache_inode_gc_policy_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#a10f3ba7df98a25f4b9a73e7cf1a0f33a">cache_inode_gc_policy</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcache__inode__parameter____.html">cache_inode_parameter_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpool.html">pool_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#a24017ef99ad1d02cd2d2f9981e2cd25a">cache_inode_entry_pool</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpool.html">pool_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#a0d6ecab9a98b12c2a268e3ee49de29bf">cache_inode_symlink_pool</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpool.html">pool_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__misc_8c.html#a811c5d9e902d385c085dbc4fa3992628">cache_inode_dir_entry_pool</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>routines for management of the cache_inode layer, </p>
<p>Some routines for management of the cache_inode layer, shared by other calls. </p>

<p>Definition in file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a75d94c6dd8bc4aa6466faa7c71de9a66"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_check_trust" ref="a75d94c6dd8bc4aa6466faa7c71de9a66" args="(cache_entry_t *entry, fsal_op_context_t *context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> cache_inode_check_trust </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Conditionally refresh attributes. </p>
<p>This function tests whether we should still trust the current attributes and, if not, refresh them.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>The entry to refresh </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>FSAL credentials</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>CACHE_INODE_SUCCESS or other status codes. </dd></dl>

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00929">929</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="af5ac07e9bceb51f9867005ef900441a5"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_clean_entry" ref="af5ac07e9bceb51f9867005ef900441a5" args="(cache_entry_t *entry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cache_inode_clean_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Final cleaning of an entry. </p>
<p>This function performs final cleanup of an entry before recycling or free.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>The entry to be cleaned </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00547">547</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab2ed61f21523805c300eae3d843ada57"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_compare_key_fsal" ref="ab2ed61f21523805c300eae3d843ada57" args="(hash_buffer_t *buff1, hash_buffer_t *buff2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cache_inode_compare_key_fsal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhash__buff.html">hash_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buff1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhash__buff.html">hash_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buff2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compares two keys used in cache inode. </p>
<p>Compare two keys used in cache inode. These keys are basically made from FSAL related information.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buff1</td><td>First key </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buff2</td><td>Second key </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if keys are the same, 1 otherwise</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="fsal_8h.html#a808e39546ae8080e331e6d09255d1fc8">FSAL_handlecmp</a> </dd></dl>

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00171">171</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="afc3c484c168ba4be4e799b77a6454ea3"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_err_str" ref="afc3c484c168ba4be4e799b77a6454ea3" args="(cache_inode_status_t err)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* cache_inode_err_str </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a>&#160;</td>
          <td class="paramname"><em>err</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00067">67</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="aaa50487b9b403fd85b4a845de1a3df69"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_error_convert" ref="aaa50487b9b403fd85b4a845de1a3df69" args="(fsal_status_t fsal_status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> cache_inode_error_convert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsal__status____.html">fsal_status_t</a>&#160;</td>
          <td class="paramname"><em>fsal_status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Converts an FSAL error to the corresponding cache_inode error. </p>
<p>This function converts an FSAL error to the corresponding cache_inode error.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fsal_status</td><td>FSAL error to be converted</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the result of the conversion. </dd></dl>

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00567">567</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0b14aaea5e11339b9b72dee2268d93c3"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_file_holds_state" ref="a0b14aaea5e11339b9b72dee2268d93c3" args="(cache_entry_t *entry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool_t cache_inode_file_holds_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return true if a file holds state. </p>
<p>This function returns true if state is held on the file. The state lock must be held for read when calling this function.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>The file to be checked</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>TRUE if state is held, FALSE otherwise. </dd></dl>

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00908">908</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8f6934bbf38300379caf1342b6a63b26"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_fsal_type_convert" ref="a8f6934bbf38300379caf1342b6a63b26" args="(fsal_nodetype_t type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cache__inode_8h.html#ae017962c50fe48834d8638069c7edc99">cache_inode_file_type_t</a> cache_inode_fsal_type_convert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fsal__types_8h.html#ac7b386ef9390188b635598625b481fb1">fsal_nodetype_t</a>&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>converts an FSAL type to the corresponding cache_inode type </p>
<p>This function converts an FSAL type to the corresponding cache_inode type.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>The input FSAL type</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the cache_inode type </dd></dl>

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00689">689</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6bc339e647145f134c4c2b01450d229d"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_new_entry" ref="a6bc339e647145f134c4c2b01450d229d" args="(cache_inode_fsal_data_t *fsdata, fsal_attrib_list_t *attr, cache_inode_file_type_t type, cache_inode_create_arg_t *create_arg, cache_inode_status_t *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcache__entry__t.html">cache_entry_t</a>* cache_inode_new_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__inode__fsal__data____.html">cache_inode_fsal_data_t</a> *&#160;</td>
          <td class="paramname"><em>fsdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__attrib__list____.html">fsal_attrib_list_t</a> *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cache__inode_8h.html#ae017962c50fe48834d8638069c7edc99">cache_inode_file_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncache__inode__create__arg____.html">cache_inode_create_arg_t</a> *&#160;</td>
          <td class="paramname"><em>create_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds a new entry to the cache. </p>
<p>This funcion adds a new entry to the cache. It will allocate entries of any kind.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fsdata</td><td>FSAL data for the entry to be created </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attr</td><td>Attributes to be stored in the cache entry (must not be NULL) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>Type of entry to create </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">create_arg</td><td>Type specific creation data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Returned status</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the new entry or NULL on error. </dd></dl>

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00246">246</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac01c860fa6b33b5212b274b6f78e26ec"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_print_dir" ref="ac01c860fa6b33b5212b274b6f78e26ec" args="(cache_entry_t *entry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cache_inode_print_dir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prints the content of a directory. </p>
<p>This debugging function prints the contents of a directory.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>the input pentry. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00783">783</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="adb681e68b3e72288cbc0b4dab6aeebae"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_release_dirents" ref="adb681e68b3e72288cbc0b4dab6aeebae" args="(cache_entry_t *entry, cache_inode_avl_which_t which)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cache_inode_release_dirents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cache__inode_8h.html#ae6e49f8c8c15b191ff9ffc007d48043e">cache_inode_avl_which_t</a>&#160;</td>
          <td class="paramname"><em>which</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Release cached directory content. </p>
<p>This function releases the cached directory entries on a directory cache entry.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>Directory to have entries be released </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">which</td><td>Caches to clear (dense, sparse, or both) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00840">840</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2a029272e21a2d81fd91808dbe8ba01e"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_release_symlink" ref="a2a029272e21a2d81fd91808dbe8ba01e" args="(cache_entry_t *entry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cache_inode_release_symlink </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Release symlink content. </p>
<p>This function releases an entry's symlink content, if present.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00819">819</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a029c96ce29eba0cd347ceee39d8bcaae"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_set_time_current" ref="a029c96ce29eba0cd347ceee39d8bcaae" args="(fsal_time_t *time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cache_inode_set_time_current </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsal__time____.html">fsal_time_t</a> *&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the fsal_time in a pentry struct to the current time. </p>
<p>Sets the fsal_time in a pentry struct to the current time. This function is using gettimeofday.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">time</td><td>Pointer to time to be set</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if keys if successfully build, -1 otherwise </dd></dl>

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00212">212</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a82d5fbc5e1c8796fe22378f8a7efc835"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_types_are_rename_compatible" ref="a82d5fbc5e1c8796fe22378f8a7efc835" args="(cache_entry_t *src, cache_entry_t *dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool_t cache_inode_types_are_rename_compatible </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Test if an entry can be overwritten during a rename. </p>
<p>This function checks if an existing entry can be overwritten by a rename operation.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>The source file </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dest</td><td>The destination file</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>TRUE if the rename is allowed, FALSE if not. </dd></dl>

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00747">747</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a811c5d9e902d385c085dbc4fa3992628"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_dir_entry_pool" ref="a811c5d9e902d385c085dbc4fa3992628" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpool.html">pool_t</a>* <a class="el" href="cache__inode_8h.html#a811c5d9e902d385c085dbc4fa3992628">cache_inode_dir_entry_pool</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00065">65</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a24017ef99ad1d02cd2d2f9981e2cd25a"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_entry_pool" ref="a24017ef99ad1d02cd2d2f9981e2cd25a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpool.html">pool_t</a>* <a class="el" href="cache__inode_8h.html#a24017ef99ad1d02cd2d2f9981e2cd25a">cache_inode_entry_pool</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Global memory pools for cached data </p>

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00063">63</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a10f3ba7df98a25f4b9a73e7cf1a0f33a"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_gc_policy" ref="a10f3ba7df98a25f4b9a73e7cf1a0f33a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcache__inode__gc__policy____.html">cache_inode_gc_policy_t</a> <a class="el" href="cache__inode_8h.html#a10f3ba7df98a25f4b9a73e7cf1a0f33a">cache_inode_gc_policy</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00060">60</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5a0812544a4c46658121a4df772b4114"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_params" ref="a5a0812544a4c46658121a4df772b4114" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcache__inode__parameter____.html">cache_inode_parameter_t</a> <a class="el" href="cache__inode_8h.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00061">61</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0d6ecab9a98b12c2a268e3ee49de29bf"></a><!-- doxytag: member="cache_inode_misc.c::cache_inode_symlink_pool" ref="a0d6ecab9a98b12c2a268e3ee49de29bf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpool.html">pool_t</a>* <a class="el" href="cache__inode_8h.html#a0d6ecab9a98b12c2a268e3ee49de29bf">cache_inode_symlink_pool</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode__misc_8c_source.html#l00064">64</a> of file <a class="el" href="cache__inode__misc_8c_source.html">cache_inode_misc.c</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 21 2012 for nfs-ganesha by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
