<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>nfs-ganesha: nfs_filehandle_mgmt.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nfs-ganesha&#160;<span id="projectnumber">1.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>nfs_filehandle_mgmt.c</h1>  </div>
</div>
<div class="contents">
<a href="nfs__filehandle__mgmt_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> *</span>
<a name="l00003"></a>00003 <span class="comment"> * Copyright CEA/DAM/DIF  (2008)</span>
<a name="l00004"></a>00004 <span class="comment"> * contributeur : Philippe DENIEL   philippe.deniel@cea.fr</span>
<a name="l00005"></a>00005 <span class="comment"> *                Thomas LEIBOVICI  thomas.leibovici@cea.fr</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00009"></a>00009 <span class="comment"> * modify it under the terms of the GNU Lesser General Public</span>
<a name="l00010"></a>00010 <span class="comment"> * License as published by the Free Software Foundation; either</span>
<a name="l00011"></a>00011 <span class="comment"> * version 3 of the License, or (at your option) any later version.</span>
<a name="l00012"></a>00012 <span class="comment"> * </span>
<a name="l00013"></a>00013 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00014"></a>00014 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00015"></a>00015 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00016"></a>00016 <span class="comment"> * Lesser General Public License for more details.</span>
<a name="l00017"></a>00017 <span class="comment"> * </span>
<a name="l00018"></a>00018 <span class="comment"> * You should have received a copy of the GNU Lesser General Public</span>
<a name="l00019"></a>00019 <span class="comment"> * License along with this library; if not, write to the Free Software</span>
<a name="l00020"></a>00020 <span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA</span>
<a name="l00021"></a>00021 <span class="comment"> * </span>
<a name="l00022"></a>00022 <span class="comment"> * ---------------------------------------</span>
<a name="l00023"></a>00023 <span class="comment"> */</span>
<a name="l00024"></a>00024 
<a name="l00084"></a>00084 <span class="preprocessor">#ifdef HAVE_CONFIG_H</span>
<a name="l00085"></a>00085 <span class="preprocessor"></span><span class="preprocessor">#include &quot;config.h&quot;</span>
<a name="l00086"></a>00086 <span class="preprocessor">#endif</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span>
<a name="l00088"></a>00088 <span class="preprocessor">#ifdef _SOLARIS</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span><span class="preprocessor">#include &quot;solaris_port.h&quot;</span>
<a name="l00090"></a>00090 <span class="preprocessor">#endif</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span>
<a name="l00092"></a>00092 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00093"></a>00093 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
<a name="l00094"></a>00094 <span class="preprocessor">#include &lt;ctype.h&gt;</span>              <span class="comment">/* for having isalnum */</span>
<a name="l00095"></a>00095 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>             <span class="comment">/* for having atoi */</span>
<a name="l00096"></a>00096 <span class="preprocessor">#include &lt;dirent.h&gt;</span>             <span class="comment">/* for having MAXNAMLEN */</span>
<a name="l00097"></a>00097 <span class="preprocessor">#include &lt;netdb.h&gt;</span>
<a name="l00098"></a>00098 <span class="preprocessor">#include &lt;netinet/in.h&gt;</span>
<a name="l00099"></a>00099 <span class="preprocessor">#include &lt;arpa/inet.h&gt;</span>
<a name="l00100"></a>00100 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00101"></a>00101 <span class="preprocessor">#include &lt;pthread.h&gt;</span>
<a name="l00102"></a>00102 <span class="preprocessor">#include &lt;fcntl.h&gt;</span>
<a name="l00103"></a>00103 <span class="preprocessor">#include &lt;sys/file.h&gt;</span>           <span class="comment">/* for having FNDELAY */</span>
<a name="l00104"></a>00104 <span class="preprocessor">#include &lt;pwd.h&gt;</span>
<a name="l00105"></a>00105 <span class="preprocessor">#include &lt;grp.h&gt;</span>
<a name="l00106"></a>00106 <span class="preprocessor">#include &quot;log.h&quot;</span>
<a name="l00107"></a>00107 <span class="preprocessor">#include &quot;ganesha_rpc.h&quot;</span>
<a name="l00108"></a>00108 <span class="preprocessor">#include &quot;nfs_core.h&quot;</span>
<a name="l00109"></a>00109 <span class="preprocessor">#include &quot;nfs23.h&quot;</span>
<a name="l00110"></a>00110 <span class="preprocessor">#include &quot;nfs4.h&quot;</span>
<a name="l00111"></a>00111 <span class="preprocessor">#include &quot;fsal.h&quot;</span>
<a name="l00112"></a>00112 <span class="preprocessor">#include &quot;nfs_tools.h&quot;</span>
<a name="l00113"></a>00113 <span class="preprocessor">#include &quot;nfs_exports.h&quot;</span>
<a name="l00114"></a>00114 <span class="preprocessor">#include &quot;nfs_file_handle.h&quot;</span>
<a name="l00115"></a>00115 
<a name="l00128"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a7c04885ca0eec5af44ad719daaf0622f">00128</a> <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a7c04885ca0eec5af44ad719daaf0622f">nfs4_FhandleToFSAL</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> *pfh4,
<a name="l00129"></a>00129                        <span class="keyword">struct</span> <a class="code" href="structfsal__handle__desc.html">fsal_handle_desc</a> *fh_desc,
<a name="l00130"></a>00130                        <a class="code" href="structfsal__op__context____.html">fsal_op_context_t</a> *pcontext)
<a name="l00131"></a>00131 {
<a name="l00132"></a>00132   <a class="code" href="structfsal__status____.html">fsal_status_t</a> fsal_status;
<a name="l00133"></a>00133   <a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *pfile_handle;
<a name="l00134"></a>00134 
<a name="l00135"></a>00135   <a class="code" href="fsal_8h.html#a0fc08f11f6c83dbc94a75ca49d29fae8">BUILD_BUG_ON</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structalloc__file__handle__v4.html">alloc_file_handle_v4</a>) != <a class="code" href="nfsv40_8h.html#a7fb6ca2ff4d34dd7ee96d820c5e6208e">NFS4_FHSIZE</a>);
<a name="l00136"></a>00136   <a class="code" href="nfs__file__handle_8h.html#ae7e5192be8bc0297924f4bc4f1c0efe0">print_fhandle4</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, pfh4);
<a name="l00137"></a>00137 
<a name="l00138"></a>00138   <span class="comment">/* Cast the fh as a non opaque structure */</span>
<a name="l00139"></a>00139   pfile_handle = (<a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *) (pfh4-&gt;<a class="code" href="structnfs__fh4.html#a1bac9f2eb01597339d8c037776010a09">nfs_fh4_val</a>);
<a name="l00140"></a>00140 
<a name="l00141"></a>00141   <span class="comment">/* validate the filehandle  */</span>
<a name="l00142"></a>00142   <span class="keywordflow">if</span>(pfh4-&gt;<a class="code" href="structnfs__fh4.html#a16f1d8d3eb38d12060bef0045f062f16">nfs_fh4_len</a> != nfs4_sizeof_handle(pfile_handle) ||
<a name="l00143"></a>00143      pfile_handle-&gt;<a class="code" href="structfile__handle__v4.html#ae6a0a02cdc9828888c0aae4e73361ac9">fhversion</a> != <a class="code" href="nfs__file__handle_8h.html#a282540d0776076a4da4dc4ac5fb2f019">GANESHA_FH_VERSION</a> ||
<a name="l00144"></a>00144      pfile_handle-&gt;<a class="code" href="structfile__handle__v4.html#a9f82806e4515d3a38d4c5261b6f9ccc2">pseudofs_id</a> != 0 ||
<a name="l00145"></a>00145      pfile_handle-&gt;<a class="code" href="structfile__handle__v4.html#a582649bffee8d511ddc746c141ff5681">pseudofs_flag</a> != <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00146"></a>00146     <span class="keywordflow">return</span> 0;                   <span class="comment">/* Bad FH */</span>
<a name="l00147"></a>00147 
<a name="l00148"></a>00148   <span class="comment">/* Fill in the fs opaque part */</span>
<a name="l00149"></a>00149   fh_desc-&gt;<a class="code" href="structfsal__handle__desc.html#abd5b9bc086e7fdd84b0411bbbd8f266a">start</a> = (caddr_t)&amp;pfile_handle-&gt;<a class="code" href="structfile__handle__v4.html#aa85d4714d1e45f5d824fde492a58fd25">fsopaque</a>;
<a name="l00150"></a>00150   fh_desc-&gt;<a class="code" href="structfsal__handle__desc.html#ac26d3f3266e78ecaffc1e39e937923f8">len</a> = pfile_handle-&gt;<a class="code" href="structfile__handle__v4.html#a4ebfc1746d3a770908cb6b2b51f2a409">fs_len</a>;
<a name="l00151"></a>00151   fsal_status = <a class="code" href="fsal__glue_8c.html#a7b2798e3d9d6445d1d54834f3adfaa9d">FSAL_ExpandHandle</a>(<a class="code" href="fsal_8h.html#a8ff5e5c930dcb77fbb19ab95d2350fc2">FSAL_GET_EXP_CTX</a>(pcontext),
<a name="l00152"></a>00152                                   <a class="code" href="fsal__types_8h.html#a6b861e58fd209b5146465e558f0a547fafda832e40b2b8bb5b5a1f1a0e56b9d9e">FSAL_DIGEST_NFSV4</a>,
<a name="l00153"></a>00153                                   fh_desc);
<a name="l00154"></a>00154   <span class="keywordflow">if</span>(<a class="code" href="fsal_8h.html#a7c2a97ec2fa552dea8e497c7dd8a2b86">FSAL_IS_ERROR</a>(fsal_status))
<a name="l00155"></a>00155     <span class="keywordflow">return</span> 0;                   <span class="comment">/* Corrupted (or stale) FH */</span>
<a name="l00156"></a>00156   <span class="keywordflow">return</span> 1;
<a name="l00157"></a>00157 }                               <span class="comment">/* nfs4_FhandleToFSAL */</span>
<a name="l00158"></a>00158 
<a name="l00171"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#ac4b3303a5e40600c415dab544800c996">00171</a> <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#ac4b3303a5e40600c415dab544800c996">nfs3_FhandleToFSAL</a>(<a class="code" href="structnfs__fh3.html">nfs_fh3</a> * pfh3,
<a name="l00172"></a>00172                        <span class="keyword">struct</span> <a class="code" href="structfsal__handle__desc.html">fsal_handle_desc</a> *fh_desc,
<a name="l00173"></a>00173                        <a class="code" href="structfsal__op__context____.html">fsal_op_context_t</a> * pcontext)
<a name="l00174"></a>00174 {
<a name="l00175"></a>00175   <a class="code" href="structfsal__status____.html">fsal_status_t</a> fsal_status;
<a name="l00176"></a>00176   <a class="code" href="structfile__handle__v3.html">file_handle_v3_t</a> *pfile_handle;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178   <a class="code" href="fsal_8h.html#a0fc08f11f6c83dbc94a75ca49d29fae8">BUILD_BUG_ON</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structalloc__file__handle__v3.html">alloc_file_handle_v3</a>) != <a class="code" href="nfs23_8h.html#a2b3b72f8dfb07f030c6ac7db0a86b88f">NFS3_FHSIZE</a>);
<a name="l00179"></a>00179   <a class="code" href="nfs__file__handle_8h.html#a8390da3337ec3c638c9e9e72186c1b71">print_fhandle3</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, pfh3);
<a name="l00180"></a>00180 
<a name="l00181"></a>00181   <span class="comment">/* Cast the fh as a non opaque structure */</span>
<a name="l00182"></a>00182   pfile_handle = (<a class="code" href="structfile__handle__v3.html">file_handle_v3_t</a> *) (pfh3-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#aa5864897f93ad598d7bd81537e222e86">data_val</a>);
<a name="l00183"></a>00183 
<a name="l00184"></a>00184   <span class="comment">/* validate the filehandle  */</span>
<a name="l00185"></a>00185   <span class="keywordflow">if</span>(<a class="code" href="nfs__file__handle_8h.html#adc271e9ca1c94dd6b2054546d51b5f54">nfs3_Is_Fh_Invalid</a>(pfh3) != <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l00186"></a>00186     <span class="keywordflow">return</span> 0;                   <span class="comment">/* Bad FH */</span>
<a name="l00187"></a>00187 
<a name="l00188"></a>00188   <span class="comment">/* Fill in the fs opaque part */</span>
<a name="l00189"></a>00189   fh_desc-&gt;<a class="code" href="structfsal__handle__desc.html#abd5b9bc086e7fdd84b0411bbbd8f266a">start</a> = (caddr_t) &amp;pfile_handle-&gt;<a class="code" href="structfile__handle__v3.html#a8f5d4a11f487fcb3ef3087b577400d9c">fsopaque</a>;
<a name="l00190"></a>00190   fh_desc-&gt;<a class="code" href="structfsal__handle__desc.html#ac26d3f3266e78ecaffc1e39e937923f8">len</a> = pfile_handle-&gt;<a class="code" href="structfile__handle__v3.html#a58af651be8d034cd874347538e3b3174">fs_len</a>;
<a name="l00191"></a>00191   fsal_status = <a class="code" href="fsal__glue_8c.html#a7b2798e3d9d6445d1d54834f3adfaa9d">FSAL_ExpandHandle</a>(<a class="code" href="fsal_8h.html#a8ff5e5c930dcb77fbb19ab95d2350fc2">FSAL_GET_EXP_CTX</a>(pcontext),
<a name="l00192"></a>00192                                   <a class="code" href="fsal__types_8h.html#a6b861e58fd209b5146465e558f0a547fa0e31d9da84e68e93a63194ac77dde857">FSAL_DIGEST_NFSV3</a>,
<a name="l00193"></a>00193                                   fh_desc);
<a name="l00194"></a>00194   <span class="keywordflow">if</span>(<a class="code" href="fsal_8h.html#a7c2a97ec2fa552dea8e497c7dd8a2b86">FSAL_IS_ERROR</a>(fsal_status))
<a name="l00195"></a>00195     <span class="keywordflow">return</span> 0;                   <span class="comment">/* Corrupted FH */</span>
<a name="l00196"></a>00196 
<a name="l00197"></a>00197   <span class="keywordflow">return</span> 1;
<a name="l00198"></a>00198 }                               <span class="comment">/* nfs3_FhandleToFSAL */</span>
<a name="l00199"></a>00199 
<a name="l00212"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a86930f1fe49ff73de746cff184a31b05">00212</a> <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a86930f1fe49ff73de746cff184a31b05">nfs2_FhandleToFSAL</a>(<a class="code" href="nfs23_8h.html#a4122a54677d2f66ef8a8f564b6076db2">fhandle2</a> * pfh2,
<a name="l00213"></a>00213                        <span class="keyword">struct</span> <a class="code" href="structfsal__handle__desc.html">fsal_handle_desc</a> *fh_desc,
<a name="l00214"></a>00214                        <a class="code" href="structfsal__op__context____.html">fsal_op_context_t</a> * pcontext)
<a name="l00215"></a>00215 {
<a name="l00216"></a>00216   <a class="code" href="structfsal__status____.html">fsal_status_t</a> fsal_status;
<a name="l00217"></a>00217   <a class="code" href="structfile__handle__v2.html">file_handle_v2_t</a> *pfile_handle;
<a name="l00218"></a>00218 
<a name="l00219"></a>00219   <a class="code" href="fsal_8h.html#a0fc08f11f6c83dbc94a75ca49d29fae8">BUILD_BUG_ON</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structalloc__file__handle__v2.html">alloc_file_handle_v2</a>) != <a class="code" href="nfs23_8h.html#a353d56145f91d5b1e6f9287fb7ac9f74">NFS2_FHSIZE</a>);
<a name="l00220"></a>00220   <span class="comment">/* Cast the fh as a non opaque structure */</span>
<a name="l00221"></a>00221   pfile_handle = (<a class="code" href="structfile__handle__v2.html">file_handle_v2_t</a> *) pfh2;
<a name="l00222"></a>00222   <a class="code" href="nfs__file__handle_8h.html#abdd12d3a3c3582dcc1fafe33c7420afa">print_fhandle2</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, pfh2);
<a name="l00223"></a>00223 
<a name="l00224"></a>00224   <span class="comment">/* validate the filehandle  */</span>
<a name="l00225"></a>00225   <span class="keywordflow">if</span>(pfile_handle-&gt;<a class="code" href="structfile__handle__v2.html#a0b91850b14c84b7a1d2c88cb0c9a534a">fhversion</a> != <a class="code" href="nfs__file__handle_8h.html#a282540d0776076a4da4dc4ac5fb2f019">GANESHA_FH_VERSION</a>)
<a name="l00226"></a>00226     <span class="keywordflow">return</span> 0;                   <span class="comment">/* Bad FH */</span>
<a name="l00227"></a>00227 
<a name="l00228"></a>00228   <span class="comment">/* Fill in the fs opaque part */</span>
<a name="l00229"></a>00229   fh_desc-&gt;<a class="code" href="structfsal__handle__desc.html#abd5b9bc086e7fdd84b0411bbbd8f266a">start</a> = (caddr_t) &amp; (pfile_handle-&gt;<a class="code" href="structfile__handle__v2.html#a43fa24b77c8fe1d2f91089703284c7d9">fsopaque</a>);
<a name="l00230"></a>00230   fh_desc-&gt;<a class="code" href="structfsal__handle__desc.html#ac26d3f3266e78ecaffc1e39e937923f8">len</a> = <span class="keyword">sizeof</span>(pfile_handle-&gt;<a class="code" href="structfile__handle__v2.html#a43fa24b77c8fe1d2f91089703284c7d9">fsopaque</a>);
<a name="l00231"></a>00231   fsal_status = <a class="code" href="fsal__glue_8c.html#a7b2798e3d9d6445d1d54834f3adfaa9d">FSAL_ExpandHandle</a>(<a class="code" href="fsal_8h.html#a8ff5e5c930dcb77fbb19ab95d2350fc2">FSAL_GET_EXP_CTX</a>(pcontext),
<a name="l00232"></a>00232                                   <a class="code" href="fsal__types_8h.html#a6b861e58fd209b5146465e558f0a547fa2f4c4de7fef77a02ff65ae6d1701096a">FSAL_DIGEST_NFSV2</a>,
<a name="l00233"></a>00233                                   fh_desc);
<a name="l00234"></a>00234   <span class="keywordflow">if</span>(<a class="code" href="fsal_8h.html#a7c2a97ec2fa552dea8e497c7dd8a2b86">FSAL_IS_ERROR</a>(fsal_status))
<a name="l00235"></a>00235     <span class="keywordflow">return</span> 0;                   <span class="comment">/* Corrupted FH */</span>
<a name="l00236"></a>00236 
<a name="l00237"></a>00237   <a class="code" href="nfs__file__handle_8h.html#a3d381aeccd1e8570ce7e216bc912d2ea">print_buff</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, (<span class="keywordtype">char</span> *)fh_desc-&gt;<a class="code" href="structfsal__handle__desc.html#abd5b9bc086e7fdd84b0411bbbd8f266a">start</a>, fh_desc-&gt;<a class="code" href="structfsal__handle__desc.html#ac26d3f3266e78ecaffc1e39e937923f8">len</a>);
<a name="l00238"></a>00238 
<a name="l00239"></a>00239   <span class="keywordflow">return</span> 1;
<a name="l00240"></a>00240 }                               <span class="comment">/* nfs2_FhandleToFSAL */</span>
<a name="l00241"></a>00241 
<a name="l00255"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a3c39bdd89b373290fb7050bf6faded41">00255</a> <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a3c39bdd89b373290fb7050bf6faded41">nfs4_FSALToFhandle</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> *pfh4,
<a name="l00256"></a>00256                        <a class="code" href="structfsal__handle____.html">fsal_handle_t</a> *pfsalhandle,
<a name="l00257"></a>00257                        <a class="code" href="structcompoud__data.html" title="Compound data.">compound_data_t</a> *data)
<a name="l00258"></a>00258 {
<a name="l00259"></a>00259   <a class="code" href="structfsal__status____.html">fsal_status_t</a> fsal_status;
<a name="l00260"></a>00260   <a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *file_handle;
<a name="l00261"></a>00261   <span class="keyword">struct </span><a class="code" href="structfsal__handle__desc.html">fsal_handle_desc</a> fh_desc;
<a name="l00262"></a>00262 
<a name="l00263"></a>00263   <span class="comment">/* reset the buffer to be used as handle */</span>
<a name="l00264"></a>00264   pfh4-&gt;<a class="code" href="structnfs__fh4.html#a16f1d8d3eb38d12060bef0045f062f16">nfs_fh4_len</a> = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structalloc__file__handle__v4.html">alloc_file_handle_v4</a>);
<a name="l00265"></a>00265   memset(pfh4-&gt;<a class="code" href="structnfs__fh4.html#a1bac9f2eb01597339d8c037776010a09">nfs_fh4_val</a>, 0, pfh4-&gt;<a class="code" href="structnfs__fh4.html#a16f1d8d3eb38d12060bef0045f062f16">nfs_fh4_len</a>);
<a name="l00266"></a>00266   file_handle = (<a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *)pfh4-&gt;<a class="code" href="structnfs__fh4.html#a1bac9f2eb01597339d8c037776010a09">nfs_fh4_val</a>;
<a name="l00267"></a>00267 
<a name="l00268"></a>00268   <span class="comment">/* Fill in the fs opaque part */</span>
<a name="l00269"></a>00269   fh_desc.<a class="code" href="structfsal__handle__desc.html#abd5b9bc086e7fdd84b0411bbbd8f266a">start</a> = (caddr_t) &amp;file_handle-&gt;<a class="code" href="structfile__handle__v4.html#aa85d4714d1e45f5d824fde492a58fd25">fsopaque</a>;
<a name="l00270"></a>00270   fh_desc.<a class="code" href="structfsal__handle__desc.html#ac26d3f3266e78ecaffc1e39e937923f8">len</a> = pfh4-&gt;<a class="code" href="structnfs__fh4.html#a16f1d8d3eb38d12060bef0045f062f16">nfs_fh4_len</a> - offsetof(<a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a>, fsopaque);
<a name="l00271"></a>00271   fsal_status =
<a name="l00272"></a>00272       <a class="code" href="fsal__glue_8c.html#a4c4e6ee7b7965e763c6ce8bc835a6aee">FSAL_DigestHandle</a>(&amp;data-&gt;<a class="code" href="structcompoud__data.html#aa44e02b685a675a6beb59faac8c9dc78">pexport</a>-&gt;<a class="code" href="structexportlist____.html#abbe82cf495253f375cd7f4bf47406aca">FS_export_context</a>,
<a name="l00273"></a>00273                         <a class="code" href="fsal__types_8h.html#a6b861e58fd209b5146465e558f0a547fafda832e40b2b8bb5b5a1f1a0e56b9d9e">FSAL_DIGEST_NFSV4</a>,
<a name="l00274"></a>00274                         pfsalhandle,
<a name="l00275"></a>00275                         &amp;fh_desc);
<a name="l00276"></a>00276   <span class="keywordflow">if</span>(<a class="code" href="fsal_8h.html#a7c2a97ec2fa552dea8e497c7dd8a2b86">FSAL_IS_ERROR</a>(fsal_status))
<a name="l00277"></a>00277     <span class="keywordflow">return</span> 0;
<a name="l00278"></a>00278 
<a name="l00279"></a>00279   file_handle-&gt;<a class="code" href="structfile__handle__v4.html#ae6a0a02cdc9828888c0aae4e73361ac9">fhversion</a> = <a class="code" href="nfs__file__handle_8h.html#a282540d0776076a4da4dc4ac5fb2f019">GANESHA_FH_VERSION</a>;
<a name="l00280"></a>00280   file_handle-&gt;<a class="code" href="structfile__handle__v4.html#a4ebfc1746d3a770908cb6b2b51f2a409">fs_len</a> = fh_desc.<a class="code" href="structfsal__handle__desc.html#ac26d3f3266e78ecaffc1e39e937923f8">len</a>;   <span class="comment">/* set the actual size */</span>
<a name="l00281"></a>00281   <span class="comment">/* keep track of the export id */</span>
<a name="l00282"></a>00282   file_handle-&gt;<a class="code" href="structfile__handle__v4.html#ada08d7a937cf136824188f37bb679af5">exportid</a> = data-&gt;<a class="code" href="structcompoud__data.html#aa44e02b685a675a6beb59faac8c9dc78">pexport</a>-&gt;<a class="code" href="structexportlist____.html#a6cdf6b3326db83e0af2976000c374b12">id</a>;
<a name="l00283"></a>00283 
<a name="l00284"></a>00284   <span class="comment">/* if FH expires, set it there */</span>
<a name="l00285"></a>00285   <span class="keywordflow">if</span>(<a class="code" href="nfs__core_8h.html#aeb8fc46586993cf210777049fca03969">nfs_param</a>.<a class="code" href="structnfs__param____.html#aa230a949a9346563ed093e442cc1abad">nfsv4_param</a>.<a class="code" href="structnfs__version4__parameter____.html#ab4fc8f64e6866beb660cbe3dbcceee60">fh_expire</a> == <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
<a name="l00286"></a>00286     {
<a name="l00287"></a>00287       <a class="code" href="log_8h.html#a8ca2131f27bca0bd0e870c3c2da64cb1">LogFullDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a7e3a7a2880418b153e81a9e22c33209b">COMPONENT_NFS_V4</a>, <span class="stringliteral">&quot;An expireable file handle was created.&quot;</span>);
<a name="l00288"></a>00288       file_handle-&gt;<a class="code" href="structfile__handle__v4.html#a376e0dd8ed85ecf7052e4a2318520116">srvboot_time</a> = <a class="code" href="Convert__FSAL__Handle_8c.html#a7b4df488832bc1f60082b16b51472dc5">ServerBootTime</a>;
<a name="l00289"></a>00289     }
<a name="l00290"></a>00290 
<a name="l00291"></a>00291   <span class="comment">/* Set the len */</span>
<a name="l00292"></a>00292   pfh4-&gt;<a class="code" href="structnfs__fh4.html#a16f1d8d3eb38d12060bef0045f062f16">nfs_fh4_len</a> = nfs4_sizeof_handle(file_handle); <span class="comment">/* re-adjust to as built */</span>
<a name="l00293"></a>00293 
<a name="l00294"></a>00294   <span class="keywordflow">return</span> 1;
<a name="l00295"></a>00295 }                               <span class="comment">/* nfs4_FSALToFhandle */</span>
<a name="l00296"></a>00296 
<a name="l00312"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a28ace18419e381b0bf3d17215e47f34f">00312</a> <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a28ace18419e381b0bf3d17215e47f34f">nfs3_FSALToFhandle</a>(<a class="code" href="structnfs__fh3.html">nfs_fh3</a> *pfh3,
<a name="l00313"></a>00313                        <a class="code" href="structfsal__handle____.html">fsal_handle_t</a> *pfsalhandle,
<a name="l00314"></a>00314                        <a class="code" href="structexportlist____.html">exportlist_t</a> *pexport)
<a name="l00315"></a>00315 {
<a name="l00316"></a>00316   <a class="code" href="structfsal__status____.html">fsal_status_t</a> fsal_status;
<a name="l00317"></a>00317   <a class="code" href="structfile__handle__v3.html">file_handle_v3_t</a> *file_handle;
<a name="l00318"></a>00318   <span class="keyword">struct </span><a class="code" href="structfsal__handle__desc.html">fsal_handle_desc</a> fh_desc;
<a name="l00319"></a>00319 
<a name="l00320"></a>00320   <a class="code" href="nfs__file__handle_8h.html#a3d381aeccd1e8570ce7e216bc912d2ea">print_buff</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, (<span class="keywordtype">char</span> *)pfsalhandle, <span class="keyword">sizeof</span>(<a class="code" href="structfsal__handle____.html">fsal_handle_t</a>));
<a name="l00321"></a>00321 
<a name="l00322"></a>00322   <span class="comment">/* reset the buffer to be used as handle */</span>
<a name="l00323"></a>00323   pfh3-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#ad7ae3999dc62aa245ff588171cad8dd6">data_len</a> = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structalloc__file__handle__v3.html">alloc_file_handle_v3</a>);
<a name="l00324"></a>00324   memset(pfh3-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#aa5864897f93ad598d7bd81537e222e86">data_val</a>, 0, pfh3-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#ad7ae3999dc62aa245ff588171cad8dd6">data_len</a>);
<a name="l00325"></a>00325   file_handle = (<a class="code" href="structfile__handle__v3.html">file_handle_v3_t</a> *)pfh3-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#aa5864897f93ad598d7bd81537e222e86">data_val</a>;
<a name="l00326"></a>00326 
<a name="l00327"></a>00327   <span class="comment">/* Fill in the fs opaque part */</span>
<a name="l00328"></a>00328   fh_desc.<a class="code" href="structfsal__handle__desc.html#abd5b9bc086e7fdd84b0411bbbd8f266a">start</a> = (caddr_t) &amp;file_handle-&gt;<a class="code" href="structfile__handle__v3.html#a8f5d4a11f487fcb3ef3087b577400d9c">fsopaque</a>;
<a name="l00329"></a>00329   fh_desc.<a class="code" href="structfsal__handle__desc.html#ac26d3f3266e78ecaffc1e39e937923f8">len</a> = pfh3-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#ad7ae3999dc62aa245ff588171cad8dd6">data_len</a> - offsetof(<a class="code" href="structfile__handle__v3.html">file_handle_v3_t</a>, fsopaque);
<a name="l00330"></a>00330   fsal_status =
<a name="l00331"></a>00331       <a class="code" href="fsal__glue_8c.html#a4c4e6ee7b7965e763c6ce8bc835a6aee">FSAL_DigestHandle</a>(&amp;pexport-&gt;<a class="code" href="structexportlist____.html#abbe82cf495253f375cd7f4bf47406aca">FS_export_context</a>, <a class="code" href="fsal__types_8h.html#a6b861e58fd209b5146465e558f0a547fa0e31d9da84e68e93a63194ac77dde857">FSAL_DIGEST_NFSV3</a>, pfsalhandle,
<a name="l00332"></a>00332                         &amp;fh_desc);
<a name="l00333"></a>00333   <span class="keywordflow">if</span>(<a class="code" href="fsal_8h.html#a7c2a97ec2fa552dea8e497c7dd8a2b86">FSAL_IS_ERROR</a>(fsal_status))
<a name="l00334"></a>00334     <span class="keywordflow">return</span> 0;
<a name="l00335"></a>00335 
<a name="l00336"></a>00336   file_handle-&gt;<a class="code" href="structfile__handle__v3.html#a5f7c40822da4bcbff00131bcc9bc9b1b">fhversion</a> = <a class="code" href="nfs__file__handle_8h.html#a282540d0776076a4da4dc4ac5fb2f019">GANESHA_FH_VERSION</a>;
<a name="l00337"></a>00337   file_handle-&gt;<a class="code" href="structfile__handle__v3.html#a58af651be8d034cd874347538e3b3174">fs_len</a> = fh_desc.<a class="code" href="structfsal__handle__desc.html#ac26d3f3266e78ecaffc1e39e937923f8">len</a>;   <span class="comment">/* set the actual size */</span>
<a name="l00338"></a>00338   <span class="comment">/* keep track of the export id */</span>
<a name="l00339"></a>00339   file_handle-&gt;<a class="code" href="structfile__handle__v3.html#aa1c452711fd750ce6cd1ad8a0b063ec8">exportid</a> = pexport-&gt;<a class="code" href="structexportlist____.html#a6cdf6b3326db83e0af2976000c374b12">id</a>;
<a name="l00340"></a>00340 
<a name="l00341"></a>00341   <span class="comment">/* Set the len */</span>
<a name="l00342"></a>00342   pfh3-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#ad7ae3999dc62aa245ff588171cad8dd6">data_len</a> = nfs3_sizeof_handle(file_handle); <span class="comment">/* re-adjust to as built */</span>
<a name="l00343"></a>00343 
<a name="l00344"></a>00344   <a class="code" href="nfs__file__handle_8h.html#a8390da3337ec3c638c9e9e72186c1b71">print_fhandle3</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, pfh3);
<a name="l00345"></a>00345 
<a name="l00346"></a>00346   <span class="keywordflow">return</span> 1;
<a name="l00347"></a>00347 }                               <span class="comment">/* nfs3_FSALToFhandle */</span>
<a name="l00348"></a>00348 
<a name="l00362"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a474e4d9f932d603dc25c3f49a00edbe2">00362</a> <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a474e4d9f932d603dc25c3f49a00edbe2">nfs2_FSALToFhandle</a>(<a class="code" href="nfs23_8h.html#a4122a54677d2f66ef8a8f564b6076db2">fhandle2</a> * pfh2, <a class="code" href="structfsal__handle____.html">fsal_handle_t</a> * pfsalhandle,
<a name="l00363"></a>00363                        <a class="code" href="structexportlist____.html">exportlist_t</a> * pexport)
<a name="l00364"></a>00364 {
<a name="l00365"></a>00365   <a class="code" href="structfsal__status____.html">fsal_status_t</a> fsal_status;
<a name="l00366"></a>00366   <a class="code" href="structfile__handle__v2.html">file_handle_v2_t</a> *file_handle;
<a name="l00367"></a>00367   <span class="keyword">struct </span><a class="code" href="structfsal__handle__desc.html">fsal_handle_desc</a> fh_desc;
<a name="l00368"></a>00368 
<a name="l00369"></a>00369   <a class="code" href="nfs__file__handle_8h.html#a3d381aeccd1e8570ce7e216bc912d2ea">print_buff</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, (<span class="keywordtype">char</span> *)pfsalhandle, <span class="keyword">sizeof</span>(<a class="code" href="structfsal__handle____.html">fsal_handle_t</a>));
<a name="l00370"></a>00370 
<a name="l00371"></a>00371   <span class="comment">/* zero-ification of the buffer to be used as handle */</span>
<a name="l00372"></a>00372   memset(pfh2, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structalloc__file__handle__v2.html">alloc_file_handle_v2</a>));
<a name="l00373"></a>00373   file_handle = (<a class="code" href="structfile__handle__v2.html">file_handle_v2_t</a> *)pfh2;
<a name="l00374"></a>00374 
<a name="l00375"></a>00375   <span class="comment">/* Fill in the fs opaque part */</span>
<a name="l00376"></a>00376   fh_desc.<a class="code" href="structfsal__handle__desc.html#abd5b9bc086e7fdd84b0411bbbd8f266a">start</a> = (caddr_t) &amp;file_handle-&gt;<a class="code" href="structfile__handle__v2.html#a43fa24b77c8fe1d2f91089703284c7d9">fsopaque</a>;
<a name="l00377"></a>00377   fh_desc.<a class="code" href="structfsal__handle__desc.html#ac26d3f3266e78ecaffc1e39e937923f8">len</a> = <span class="keyword">sizeof</span>(file_handle-&gt;<a class="code" href="structfile__handle__v2.html#a43fa24b77c8fe1d2f91089703284c7d9">fsopaque</a>);
<a name="l00378"></a>00378   fsal_status =
<a name="l00379"></a>00379       <a class="code" href="fsal__glue_8c.html#a4c4e6ee7b7965e763c6ce8bc835a6aee">FSAL_DigestHandle</a>(&amp;pexport-&gt;<a class="code" href="structexportlist____.html#abbe82cf495253f375cd7f4bf47406aca">FS_export_context</a>, <a class="code" href="fsal__types_8h.html#a6b861e58fd209b5146465e558f0a547fa2f4c4de7fef77a02ff65ae6d1701096a">FSAL_DIGEST_NFSV2</a>, pfsalhandle,
<a name="l00380"></a>00380                         &amp;fh_desc);
<a name="l00381"></a>00381   <span class="keywordflow">if</span>(<a class="code" href="fsal_8h.html#a7c2a97ec2fa552dea8e497c7dd8a2b86">FSAL_IS_ERROR</a>(fsal_status))
<a name="l00382"></a>00382    {
<a name="l00383"></a>00383      <span class="keywordflow">if</span>( fsal_status.<a class="code" href="structfsal__status____.html#ab12ffb4b1b65891a5dd5939fc7d543de">major</a> == <a class="code" href="err__fsal_8h.html#a5fca950e941463a0c2462761a96d20f2a7c8bdedaecff33995a0aee3c76df9fd0">ERR_FSAL_TOOSMALL</a> )
<a name="l00384"></a>00384       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>( <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, <span class="stringliteral">&quot;NFSv2 file handle is too small to manage this fsal&quot;</span> ) ;
<a name="l00385"></a>00385      <span class="keywordflow">else</span>
<a name="l00386"></a>00386       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>( <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, <span class="stringliteral">&quot;FSAL_DigestHandle return (%u,%u) when called from %s&quot;</span>, 
<a name="l00387"></a>00387                fsal_status.<a class="code" href="structfsal__status____.html#ab12ffb4b1b65891a5dd5939fc7d543de">major</a>, fsal_status.<a class="code" href="structfsal__status____.html#ac260418be3f1105f31b1663083903e83">minor</a>, __func__ ) ;
<a name="l00388"></a>00388     <span class="keywordflow">return</span> 0;
<a name="l00389"></a>00389    }
<a name="l00390"></a>00390 
<a name="l00391"></a>00391   file_handle-&gt;<a class="code" href="structfile__handle__v2.html#a0b91850b14c84b7a1d2c88cb0c9a534a">fhversion</a> = <a class="code" href="nfs__file__handle_8h.html#a282540d0776076a4da4dc4ac5fb2f019">GANESHA_FH_VERSION</a>;
<a name="l00392"></a>00392   <span class="comment">/* keep track of the export id */</span>
<a name="l00393"></a>00393   file_handle-&gt;<a class="code" href="structfile__handle__v2.html#a1f5f11ebb4688d834a96f90ade315083">exportid</a> = pexport-&gt;<a class="code" href="structexportlist____.html#a6cdf6b3326db83e0af2976000c374b12">id</a>;
<a name="l00394"></a>00394 
<a name="l00395"></a>00395   <span class="comment">/* Set the last byte */</span>
<a name="l00396"></a>00396   file_handle-&gt;<a class="code" href="structfile__handle__v2.html#a0ec3e2516638a6489d3046d115f93768">xattr_pos</a> = 0;
<a name="l00397"></a>00397 
<a name="l00398"></a>00398 <span class="comment">/*   /\* Set the data *\/ */</span>
<a name="l00399"></a>00399 <span class="comment">/*   memcpy((caddr_t) pfh2, &amp;file_handle, sizeof(file_handle_v2_t)); */</span>
<a name="l00400"></a>00400 
<a name="l00401"></a>00401   <a class="code" href="nfs__file__handle_8h.html#abdd12d3a3c3582dcc1fafe33c7420afa">print_fhandle2</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, pfh2);
<a name="l00402"></a>00402 
<a name="l00403"></a>00403   <span class="keywordflow">return</span> 1;
<a name="l00404"></a>00404 }                               <span class="comment">/* nfs2_FSALToFhandle */</span>
<a name="l00405"></a>00405 
<a name="l00417"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#abd252dd5f6d20c1b81760f8b2185e35d">00417</a> <span class="keywordtype">short</span> <a class="code" href="nfs__file__handle_8h.html#abd252dd5f6d20c1b81760f8b2185e35d">nfs4_FhandleToExportId</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh4)
<a name="l00418"></a>00418 {
<a name="l00419"></a>00419   <a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *pfile_handle = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00420"></a>00420 
<a name="l00421"></a>00421   pfile_handle = (<a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *) (pfh4-&gt;<a class="code" href="structnfs__fh4.html#a1bac9f2eb01597339d8c037776010a09">nfs_fh4_val</a>);
<a name="l00422"></a>00422 
<a name="l00423"></a>00423   <span class="keywordflow">if</span>(pfile_handle == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00424"></a>00424     <span class="keywordflow">return</span> -1;                  <span class="comment">/* Badly formed arguments */</span>
<a name="l00425"></a>00425 
<a name="l00426"></a>00426   <span class="keywordflow">return</span> pfile_handle-&gt;<a class="code" href="structfile__handle__v4.html#ada08d7a937cf136824188f37bb679af5">exportid</a>;
<a name="l00427"></a>00427 }                               <span class="comment">/* nfs4_FhandleToExportId */</span>
<a name="l00428"></a>00428 
<a name="l00440"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a8453425f543449aa0b989e06731395f3">00440</a> <span class="keywordtype">short</span> <a class="code" href="nfs__file__handle_8h.html#a8453425f543449aa0b989e06731395f3">nfs3_FhandleToExportId</a>(<a class="code" href="structnfs__fh3.html">nfs_fh3</a> * pfh3)
<a name="l00441"></a>00441 {
<a name="l00442"></a>00442   <a class="code" href="structfile__handle__v3.html">file_handle_v3_t</a> *pfile_handle;
<a name="l00443"></a>00443 
<a name="l00444"></a>00444   pfile_handle = (<a class="code" href="structfile__handle__v3.html">file_handle_v3_t</a> *) (pfh3-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#aa5864897f93ad598d7bd81537e222e86">data_val</a>);
<a name="l00445"></a>00445 
<a name="l00446"></a>00446   <span class="keywordflow">if</span>(pfile_handle == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00447"></a>00447     <span class="keywordflow">return</span> -1;                  <span class="comment">/* Badly formed argument */</span>
<a name="l00448"></a>00448 
<a name="l00449"></a>00449   <a class="code" href="nfs__file__handle_8h.html#a3d381aeccd1e8570ce7e216bc912d2ea">print_buff</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, (<span class="keywordtype">char</span> *)pfh3-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#aa5864897f93ad598d7bd81537e222e86">data_val</a>, pfh3-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#ad7ae3999dc62aa245ff588171cad8dd6">data_len</a>);
<a name="l00450"></a>00450 
<a name="l00451"></a>00451   <span class="keywordflow">return</span> pfile_handle-&gt;<a class="code" href="structfile__handle__v3.html#aa1c452711fd750ce6cd1ad8a0b063ec8">exportid</a>;
<a name="l00452"></a>00452 }                               <span class="comment">/* nfs3_FhandleToExportId */</span>
<a name="l00453"></a>00453 
<a name="l00454"></a>00454 <span class="preprocessor">#ifdef _USE_NLM</span>
<a name="l00455"></a>00455 <span class="preprocessor"></span><span class="keywordtype">short</span> nlm4_FhandleToExportId(netobj * pfh3)
<a name="l00456"></a>00456 {
<a name="l00457"></a>00457   <a class="code" href="structfile__handle__v3.html">file_handle_v3_t</a> *pfile_handle;
<a name="l00458"></a>00458 
<a name="l00459"></a>00459   <span class="keywordflow">if</span>(pfh3-&gt;n_bytes == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || pfh3-&gt;n_len &lt; <span class="keyword">sizeof</span>(<a class="code" href="structfile__handle__v3.html">file_handle_v3_t</a>))
<a name="l00460"></a>00460     <span class="keywordflow">return</span> -1;                  <span class="comment">/* Badly formed argument */</span>
<a name="l00461"></a>00461 
<a name="l00462"></a>00462   pfile_handle = (<a class="code" href="structfile__handle__v3.html">file_handle_v3_t</a> *) (pfh3-&gt;n_bytes);
<a name="l00463"></a>00463 
<a name="l00464"></a>00464   <a class="code" href="nfs__file__handle_8h.html#a3d381aeccd1e8570ce7e216bc912d2ea">print_buff</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, pfh3-&gt;n_bytes, pfh3-&gt;n_len);
<a name="l00465"></a>00465 
<a name="l00466"></a>00466   <span class="keywordflow">return</span> pfile_handle-&gt;<a class="code" href="structfile__handle__v3.html#aa1c452711fd750ce6cd1ad8a0b063ec8">exportid</a>;
<a name="l00467"></a>00467 }
<a name="l00468"></a>00468 <span class="preprocessor">#endif</span>
<a name="l00469"></a>00469 <span class="preprocessor"></span>
<a name="l00481"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a4e15ee51a5126d013954cb8ddf34b62b">00481</a> <span class="keywordtype">short</span> <a class="code" href="nfs__file__handle_8h.html#a4e15ee51a5126d013954cb8ddf34b62b">nfs2_FhandleToExportId</a>(<a class="code" href="nfs23_8h.html#a4122a54677d2f66ef8a8f564b6076db2">fhandle2</a> * pfh2)
<a name="l00482"></a>00482 {
<a name="l00483"></a>00483   <a class="code" href="structfile__handle__v2.html">file_handle_v2_t</a> *pfile_handle;
<a name="l00484"></a>00484 
<a name="l00485"></a>00485   pfile_handle = (<a class="code" href="structfile__handle__v2.html">file_handle_v2_t</a> *) (*pfh2);
<a name="l00486"></a>00486 
<a name="l00487"></a>00487   <span class="keywordflow">if</span>(pfile_handle == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00488"></a>00488     <span class="keywordflow">return</span> -1;                  <span class="comment">/* Badly formed argument */</span>
<a name="l00489"></a>00489 
<a name="l00490"></a>00490   <span class="keywordflow">return</span> pfile_handle-&gt;<a class="code" href="structfile__handle__v2.html#a1f5f11ebb4688d834a96f90ade315083">exportid</a>;
<a name="l00491"></a>00491 }                               <span class="comment">/* nfs2_FhandleToExportId */</span>
<a name="l00492"></a>00492 
<a name="l00504"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a668b574eeda3bc36c6b891636a37a82d">00504</a> <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a668b574eeda3bc36c6b891636a37a82d">nfs3_Is_Fh_Xattr</a>(<a class="code" href="structnfs__fh3.html">nfs_fh3</a> * pfh)
<a name="l00505"></a>00505 {
<a name="l00506"></a>00506   <a class="code" href="structfile__handle__v3.html">file_handle_v3_t</a> *pfhandle3;
<a name="l00507"></a>00507 
<a name="l00508"></a>00508   <span class="keywordflow">if</span>(pfh == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00509"></a>00509     <span class="keywordflow">return</span> 0;
<a name="l00510"></a>00510 
<a name="l00511"></a>00511   pfhandle3 = (<a class="code" href="structfile__handle__v3.html">file_handle_v3_t</a> *) (pfh-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#aa5864897f93ad598d7bd81537e222e86">data_val</a>);
<a name="l00512"></a>00512 
<a name="l00513"></a>00513   <span class="keywordflow">return</span> (pfhandle3-&gt;<a class="code" href="structfile__handle__v3.html#ad5294ddf155f111409fc4aed99e3b5eb">xattr_pos</a> != 0) ? 1 : 0;
<a name="l00514"></a>00514 }                               <span class="comment">/* nfs4_Is_Fh_Xattr */</span>
<a name="l00515"></a>00515 
<a name="l00527"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#aea877e7eb396fbb3c64ff2eb789cf5fc">00527</a> <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#aea877e7eb396fbb3c64ff2eb789cf5fc">nfs4_Is_Fh_Empty</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh)
<a name="l00528"></a>00528 {
<a name="l00529"></a>00529   <span class="keywordflow">if</span>(pfh == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00530"></a>00530     <span class="keywordflow">return</span> <a class="code" href="nfsv40_8h.html#aaef925ba78b4bc62effa8be298c23c0aa63c8fdb4f05114c5047f057f6717012e">NFS4ERR_NOFILEHANDLE</a>;
<a name="l00531"></a>00531 
<a name="l00532"></a>00532   <span class="keywordflow">if</span>(pfh-&gt;<a class="code" href="structnfs__fh4.html#a16f1d8d3eb38d12060bef0045f062f16">nfs_fh4_len</a> == 0)
<a name="l00533"></a>00533     <span class="keywordflow">return</span> <a class="code" href="nfsv40_8h.html#aaef925ba78b4bc62effa8be298c23c0aa63c8fdb4f05114c5047f057f6717012e">NFS4ERR_NOFILEHANDLE</a>;
<a name="l00534"></a>00534 
<a name="l00535"></a>00535   <span class="keywordflow">return</span> 0;
<a name="l00536"></a>00536 }                               <span class="comment">/* nfs4_Is_Fh_Empty */</span>
<a name="l00537"></a>00537 
<a name="l00549"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a342a0d49502947ec34dffa7b6b95f505">00549</a> <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a342a0d49502947ec34dffa7b6b95f505">nfs4_Is_Fh_Xattr</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh)
<a name="l00550"></a>00550 {
<a name="l00551"></a>00551   <a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *pfhandle4;
<a name="l00552"></a>00552 
<a name="l00553"></a>00553   <span class="keywordflow">if</span>(pfh == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00554"></a>00554     <span class="keywordflow">return</span> 0;
<a name="l00555"></a>00555 
<a name="l00556"></a>00556   pfhandle4 = (<a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *) (pfh-&gt;<a class="code" href="structnfs__fh4.html#a1bac9f2eb01597339d8c037776010a09">nfs_fh4_val</a>);
<a name="l00557"></a>00557 
<a name="l00558"></a>00558   <span class="keywordflow">return</span> (pfhandle4-&gt;<a class="code" href="structfile__handle__v4.html#a2cb2790f0eda27f030b507981996da65">xattr_pos</a> != 0) ? 1 : 0;
<a name="l00559"></a>00559 }                               <span class="comment">/* nfs4_Is_Fh_Xattr */</span>
<a name="l00560"></a>00560 
<a name="l00572"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a517dfc86532641b32ac7c178aeb30c46">00572</a> <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a517dfc86532641b32ac7c178aeb30c46">nfs4_Is_Fh_Pseudo</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh)
<a name="l00573"></a>00573 {
<a name="l00574"></a>00574   <a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *pfhandle4;
<a name="l00575"></a>00575 
<a name="l00576"></a>00576   <span class="keywordflow">if</span>(pfh == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00577"></a>00577     <span class="keywordflow">return</span> 0;
<a name="l00578"></a>00578 
<a name="l00579"></a>00579   pfhandle4 = (<a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *) (pfh-&gt;<a class="code" href="structnfs__fh4.html#a1bac9f2eb01597339d8c037776010a09">nfs_fh4_val</a>);
<a name="l00580"></a>00580 
<a name="l00581"></a>00581   <span class="keywordflow">return</span> pfhandle4-&gt;<a class="code" href="structfile__handle__v4.html#a582649bffee8d511ddc746c141ff5681">pseudofs_flag</a>;
<a name="l00582"></a>00582 }                               <span class="comment">/* nfs4_Is_Fh_Pseudo */</span>
<a name="l00583"></a>00583 
<a name="l00595"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#ad1854be7773575d29acecb8275dd7733">00595</a> <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#ad1854be7773575d29acecb8275dd7733">nfs4_Is_Fh_DSHandle</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh)
<a name="l00596"></a>00596 {
<a name="l00597"></a>00597   <a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *pfhandle4;
<a name="l00598"></a>00598 
<a name="l00599"></a>00599   <span class="keywordflow">if</span>(pfh == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00600"></a>00600     <span class="keywordflow">return</span> 0;
<a name="l00601"></a>00601 
<a name="l00602"></a>00602   pfhandle4 = (<a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *) (pfh-&gt;<a class="code" href="structnfs__fh4.html#a1bac9f2eb01597339d8c037776010a09">nfs_fh4_val</a>);
<a name="l00603"></a>00603 
<a name="l00604"></a>00604   <span class="keywordflow">return</span> pfhandle4-&gt;<a class="code" href="structfile__handle__v4.html#adca09429c49f92e96d96d69f625b9977">ds_flag</a>;
<a name="l00605"></a>00605 }                               <span class="comment">/* nfs4_Is_Fh_DSHandle */</span>
<a name="l00606"></a>00606 
<a name="l00618"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a5dd8010e82ca42c8cfb5afd636426813">00618</a> <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a5dd8010e82ca42c8cfb5afd636426813">nfs4_Is_Fh_Expired</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh)
<a name="l00619"></a>00619 {
<a name="l00620"></a>00620   <a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *pfilehandle4;
<a name="l00621"></a>00621 
<a name="l00622"></a>00622   <span class="keywordflow">if</span>(pfh == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00623"></a>00623     <span class="keywordflow">return</span> <a class="code" href="nfsv40_8h.html#aaef925ba78b4bc62effa8be298c23c0aad8e75713659423bc53b60934e6b2698f">NFS4ERR_BADHANDLE</a>;
<a name="l00624"></a>00624 
<a name="l00625"></a>00625   pfilehandle4 = (<a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *) pfh;
<a name="l00626"></a>00626 
<a name="l00627"></a>00627   <span class="keywordflow">if</span>((<a class="code" href="nfs__core_8h.html#aeb8fc46586993cf210777049fca03969">nfs_param</a>.<a class="code" href="structnfs__param____.html#aa230a949a9346563ed093e442cc1abad">nfsv4_param</a>.<a class="code" href="structnfs__version4__parameter____.html#ab4fc8f64e6866beb660cbe3dbcceee60">fh_expire</a> == <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
<a name="l00628"></a>00628      &amp;&amp; (pfilehandle4-&gt;<a class="code" href="structfile__handle__v4.html#a376e0dd8ed85ecf7052e4a2318520116">srvboot_time</a> != (<span class="keywordtype">unsigned</span> int)<a class="code" href="Convert__FSAL__Handle_8c.html#a7b4df488832bc1f60082b16b51472dc5">ServerBootTime</a>))
<a name="l00629"></a>00629     {
<a name="l00630"></a>00630       <span class="keywordflow">if</span>(<a class="code" href="nfs__core_8h.html#aeb8fc46586993cf210777049fca03969">nfs_param</a>.<a class="code" href="structnfs__param____.html#aa230a949a9346563ed093e442cc1abad">nfsv4_param</a>.<a class="code" href="structnfs__version4__parameter____.html#a67a340de6cefc638c13b7f6f610c2f98">returns_err_fh_expired</a> == <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
<a name="l00631"></a>00631         <span class="keywordflow">return</span> <a class="code" href="nfsv40_8h.html#aaef925ba78b4bc62effa8be298c23c0aaae15974e850b796ae66526327e2b81c4">NFS4ERR_FHEXPIRED</a>;
<a name="l00632"></a>00632     }
<a name="l00633"></a>00633 
<a name="l00634"></a>00634   <span class="keywordflow">return</span> <a class="code" href="nfsv40_8h.html#aaef925ba78b4bc62effa8be298c23c0aacaca462c793854dd61337cf0b54fc166">NFS4_OK</a>;
<a name="l00635"></a>00635 }                               <span class="comment">/* nfs4_Is_Fh_Expired */</span>
<a name="l00636"></a>00636 
<a name="l00648"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#ac9471373d4493abc215f5d8b86783764">00648</a> <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#ac9471373d4493abc215f5d8b86783764">nfs4_Is_Fh_Invalid</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh)
<a name="l00649"></a>00649 {
<a name="l00650"></a>00650   <a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *pfilehandle4;
<a name="l00651"></a>00651 
<a name="l00652"></a>00652   <span class="keywordflow">if</span>(pfh == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || pfh-&gt;<a class="code" href="structnfs__fh4.html#a1bac9f2eb01597339d8c037776010a09">nfs_fh4_val</a> == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00653"></a>00653   {
<a name="l00654"></a>00654     <a class="code" href="log_8h.html#a3cf3c22fac6bb9871e25007551caeb13">LogMajor</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>,
<a name="l00655"></a>00655              <span class="stringliteral">&quot;Invalid (NULL) File handle: pfh=0x%p&quot;</span>,
<a name="l00656"></a>00656              pfh);
<a name="l00657"></a>00657     <span class="keywordflow">return</span> <a class="code" href="nfsv40_8h.html#aaef925ba78b4bc62effa8be298c23c0aad8e75713659423bc53b60934e6b2698f">NFS4ERR_BADHANDLE</a>;
<a name="l00658"></a>00658   }
<a name="l00659"></a>00659 
<a name="l00660"></a>00660   pfilehandle4 = (<a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *) pfh-&gt;<a class="code" href="structnfs__fh4.html#a1bac9f2eb01597339d8c037776010a09">nfs_fh4_val</a>;
<a name="l00661"></a>00661   <span class="keywordflow">if</span>(pfh-&gt;<a class="code" href="structnfs__fh4.html#a16f1d8d3eb38d12060bef0045f062f16">nfs_fh4_len</a> &gt; <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structalloc__file__handle__v4.html">alloc_file_handle_v4</a>) ||
<a name="l00662"></a>00662      pfh-&gt;<a class="code" href="structnfs__fh4.html#a16f1d8d3eb38d12060bef0045f062f16">nfs_fh4_len</a> &lt; nfs4_sizeof_handle(pfilehandle4) ||
<a name="l00663"></a>00663      pfilehandle4-&gt;<a class="code" href="structfile__handle__v4.html#ae6a0a02cdc9828888c0aae4e73361ac9">fhversion</a> != <a class="code" href="nfs__file__handle_8h.html#a282540d0776076a4da4dc4ac5fb2f019">GANESHA_FH_VERSION</a>)
<a name="l00664"></a>00664   {
<a name="l00665"></a>00665     <a class="code" href="log_8h.html#a3cf3c22fac6bb9871e25007551caeb13">LogMajor</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>,
<a name="l00666"></a>00666              <span class="stringliteral">&quot;Invalid File handle: len=%d, version=%x&quot;</span>,
<a name="l00667"></a>00667              pfh-&gt;<a class="code" href="structnfs__fh4.html#a16f1d8d3eb38d12060bef0045f062f16">nfs_fh4_len</a>,
<a name="l00668"></a>00668              pfilehandle4-&gt;<a class="code" href="structfile__handle__v4.html#ae6a0a02cdc9828888c0aae4e73361ac9">fhversion</a>);
<a name="l00669"></a>00669     <span class="keywordflow">return</span> <a class="code" href="nfsv40_8h.html#aaef925ba78b4bc62effa8be298c23c0aad8e75713659423bc53b60934e6b2698f">NFS4ERR_BADHANDLE</a>;
<a name="l00670"></a>00670   }
<a name="l00671"></a>00671 
<a name="l00672"></a>00672   <span class="keywordflow">return</span> <a class="code" href="nfsv40_8h.html#aaef925ba78b4bc62effa8be298c23c0aacaca462c793854dd61337cf0b54fc166">NFS4_OK</a>;
<a name="l00673"></a>00673 }                               <span class="comment">/* nfs4_Is_Fh_Invalid */</span>
<a name="l00674"></a>00674 
<a name="l00686"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#adc271e9ca1c94dd6b2054546d51b5f54">00686</a> <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#adc271e9ca1c94dd6b2054546d51b5f54">nfs3_Is_Fh_Invalid</a>(<a class="code" href="structnfs__fh3.html">nfs_fh3</a> *pfh3)
<a name="l00687"></a>00687 {
<a name="l00688"></a>00688   <a class="code" href="structfile__handle__v3.html">file_handle_v3_t</a> *pfilehandle3;
<a name="l00689"></a>00689 
<a name="l00690"></a>00690   <span class="keywordflow">if</span>(pfh3 == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || pfh3-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#aa5864897f93ad598d7bd81537e222e86">data_val</a> == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00691"></a>00691   {
<a name="l00692"></a>00692     <a class="code" href="log_8h.html#a3cf3c22fac6bb9871e25007551caeb13">LogMajor</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>,
<a name="l00693"></a>00693              <span class="stringliteral">&quot;Invalid (NULL) File handle: pfh3=0x%p&quot;</span>,
<a name="l00694"></a>00694              pfh3);
<a name="l00695"></a>00695     <span class="keywordflow">return</span> <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5af51a2547c160e07a7eac20c8150a1ae1">NFS3ERR_BADHANDLE</a>;
<a name="l00696"></a>00696   }
<a name="l00697"></a>00697 
<a name="l00698"></a>00698   pfilehandle3 = (<a class="code" href="structfile__handle__v3.html">file_handle_v3_t</a> *) pfh3-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#aa5864897f93ad598d7bd81537e222e86">data_val</a>;
<a name="l00699"></a>00699   <span class="keywordflow">if</span>(pfh3-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#ad7ae3999dc62aa245ff588171cad8dd6">data_len</a> &gt; <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structalloc__file__handle__v3.html">alloc_file_handle_v3</a>) ||
<a name="l00700"></a>00700      pfh3-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#ad7ae3999dc62aa245ff588171cad8dd6">data_len</a> &lt; nfs3_sizeof_handle(pfilehandle3) ||
<a name="l00701"></a>00701      pfilehandle3-&gt;<a class="code" href="structfile__handle__v3.html#a5f7c40822da4bcbff00131bcc9bc9b1b">fhversion</a> != <a class="code" href="nfs__file__handle_8h.html#a282540d0776076a4da4dc4ac5fb2f019">GANESHA_FH_VERSION</a>)
<a name="l00702"></a>00702   {
<a name="l00703"></a>00703     <a class="code" href="log_8h.html#a3cf3c22fac6bb9871e25007551caeb13">LogMajor</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>,
<a name="l00704"></a>00704              <span class="stringliteral">&quot;Invalid File handle: len=%d, version=%x&quot;</span>,
<a name="l00705"></a>00705              pfh3-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#ad7ae3999dc62aa245ff588171cad8dd6">data_len</a>,
<a name="l00706"></a>00706              pfilehandle3-&gt;<a class="code" href="structfile__handle__v3.html#a5f7c40822da4bcbff00131bcc9bc9b1b">fhversion</a>);
<a name="l00707"></a>00707     <span class="keywordflow">return</span> <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5af51a2547c160e07a7eac20c8150a1ae1">NFS3ERR_BADHANDLE</a>;
<a name="l00708"></a>00708   }
<a name="l00709"></a>00709 
<a name="l00710"></a>00710   <span class="keywordflow">return</span> <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>;
<a name="l00711"></a>00711 }                               <span class="comment">/* nfs4_Is_Fh_Invalid */</span>
<a name="l00712"></a>00712 
<a name="l00724"></a><a class="code" href="group__NFSprocs.html#ga9c76d0dc9e953967d9ea5946495623eb">00724</a> <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a9c76d0dc9e953967d9ea5946495623eb">nfs4_Is_Fh_Referral</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh)
<a name="l00725"></a>00725 {
<a name="l00726"></a>00726   <a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *pfhandle4;
<a name="l00727"></a>00727 
<a name="l00728"></a>00728   <span class="keywordflow">if</span>(pfh == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00729"></a>00729     <span class="keywordflow">return</span> 0;
<a name="l00730"></a>00730 
<a name="l00731"></a>00731   pfhandle4 = (<a class="code" href="structfile__handle__v4.html">file_handle_v4_t</a> *) (pfh-&gt;<a class="code" href="structnfs__fh4.html#a1bac9f2eb01597339d8c037776010a09">nfs_fh4_val</a>);
<a name="l00732"></a>00732 
<a name="l00733"></a>00733   <span class="comment">/* Referrals are fh whose pseudofs_id is set without pseudofs_flag set */</span>
<a name="l00734"></a>00734   <span class="keywordflow">if</span>(pfhandle4-&gt;<a class="code" href="structfile__handle__v4.html#acb8c18edfc4d4b851d62e1a13619df34">refid</a> &gt; 0)
<a name="l00735"></a>00735     {
<a name="l00736"></a>00736       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00737"></a>00737     }
<a name="l00738"></a>00738 
<a name="l00739"></a>00739   <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00740"></a>00740 }                               <span class="comment">/* nfs4_Is_Fh_Referral */</span>
<a name="l00741"></a>00741 
<a name="l00753"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#abdd12d3a3c3582dcc1fafe33c7420afa">00753</a> <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#abdd12d3a3c3582dcc1fafe33c7420afa">print_fhandle2</a>(<a class="code" href="log_8h.html#a80c77121778df3130d72817d3d1a9451">log_components_t</a> component, <a class="code" href="nfs23_8h.html#a4122a54677d2f66ef8a8f564b6076db2">fhandle2</a> *fh)
<a name="l00754"></a>00754 {
<a name="l00755"></a>00755   <span class="keywordflow">if</span>(<a class="code" href="log_8h.html#ad2b900e4d4ae3a366d0690930c8a68aa">isFullDebug</a>(component))
<a name="l00756"></a>00756     {
<a name="l00757"></a>00757       <span class="keywordtype">char</span> str[<a class="code" href="nfs__file__handle_8h.html#add3fa684cef3f27ade6bb43b7b22e7cf">LEN_FH_STR</a>];
<a name="l00758"></a>00758 
<a name="l00759"></a>00759       <a class="code" href="nfs__file__handle_8h.html#a3a9c85d9f52b8bbdc1102925bcb320c1">sprint_fhandle2</a>(str, fh);
<a name="l00760"></a>00760       <a class="code" href="log_8h.html#a8ca2131f27bca0bd0e870c3c2da64cb1">LogFullDebug</a>(component, <span class="stringliteral">&quot;%s&quot;</span>, str);
<a name="l00761"></a>00761     }
<a name="l00762"></a>00762 }                               <span class="comment">/* print_fhandle2 */</span>
<a name="l00763"></a>00763 
<a name="l00764"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a3a9c85d9f52b8bbdc1102925bcb320c1">00764</a> <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a3a9c85d9f52b8bbdc1102925bcb320c1">sprint_fhandle2</a>(<span class="keywordtype">char</span> *str, <a class="code" href="nfs23_8h.html#a4122a54677d2f66ef8a8f564b6076db2">fhandle2</a> *fh)
<a name="l00765"></a>00765 {
<a name="l00766"></a>00766   <span class="keywordtype">char</span> *tmp = str +  sprintf(str, <span class="stringliteral">&quot;File Handle V2: &quot;</span>);
<a name="l00767"></a>00767 
<a name="l00768"></a>00768   <a class="code" href="nfs__file__handle_8h.html#a5943b0ebcd28d76e5e84618e470942c6">sprint_mem</a>(tmp, (<span class="keywordtype">char</span> *) fh, 32);
<a name="l00769"></a>00769 }                               <span class="comment">/* sprint_fhandle2 */</span>
<a name="l00770"></a>00770 
<a name="l00782"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a8390da3337ec3c638c9e9e72186c1b71">00782</a> <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a8390da3337ec3c638c9e9e72186c1b71">print_fhandle3</a>(<a class="code" href="log_8h.html#a80c77121778df3130d72817d3d1a9451">log_components_t</a> component, <a class="code" href="structnfs__fh3.html">nfs_fh3</a> *fh)
<a name="l00783"></a>00783 {
<a name="l00784"></a>00784   <span class="keywordflow">if</span>(<a class="code" href="log_8h.html#ad2b900e4d4ae3a366d0690930c8a68aa">isFullDebug</a>(component))
<a name="l00785"></a>00785     {
<a name="l00786"></a>00786       <span class="keywordtype">char</span> str[<a class="code" href="nfs__file__handle_8h.html#add3fa684cef3f27ade6bb43b7b22e7cf">LEN_FH_STR</a>];
<a name="l00787"></a>00787 
<a name="l00788"></a>00788       <a class="code" href="nfs__file__handle_8h.html#aacf77e57e01373c6e5bc261be964bb6e">sprint_fhandle3</a>(str, fh);
<a name="l00789"></a>00789       <a class="code" href="log_8h.html#a8ca2131f27bca0bd0e870c3c2da64cb1">LogFullDebug</a>(component, <span class="stringliteral">&quot;%s&quot;</span>, str);
<a name="l00790"></a>00790     }
<a name="l00791"></a>00791 }                               <span class="comment">/* print_fhandle3 */</span>
<a name="l00792"></a>00792 
<a name="l00793"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#aacf77e57e01373c6e5bc261be964bb6e">00793</a> <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#aacf77e57e01373c6e5bc261be964bb6e">sprint_fhandle3</a>(<span class="keywordtype">char</span> *str, <a class="code" href="structnfs__fh3.html">nfs_fh3</a> *fh)
<a name="l00794"></a>00794 {
<a name="l00795"></a>00795   <span class="keywordtype">char</span> *tmp = str + sprintf(str, <span class="stringliteral">&quot;File Handle V3: Len=%u &quot;</span>, fh-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#ad7ae3999dc62aa245ff588171cad8dd6">data_len</a>);
<a name="l00796"></a>00796 
<a name="l00797"></a>00797   <a class="code" href="nfs__file__handle_8h.html#a5943b0ebcd28d76e5e84618e470942c6">sprint_mem</a>(tmp, fh-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#aa5864897f93ad598d7bd81537e222e86">data_val</a>, fh-&gt;<a class="code" href="structnfs__fh3.html#ab2ae8681712f8e4d48a583f708922ca3">data</a>.<a class="code" href="structnfs__fh3.html#ad7ae3999dc62aa245ff588171cad8dd6">data_len</a>);
<a name="l00798"></a>00798 }                               <span class="comment">/* sprint_fhandle3 */</span>
<a name="l00799"></a>00799 
<a name="l00811"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#ae7e5192be8bc0297924f4bc4f1c0efe0">00811</a> <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#ae7e5192be8bc0297924f4bc4f1c0efe0">print_fhandle4</a>(<a class="code" href="log_8h.html#a80c77121778df3130d72817d3d1a9451">log_components_t</a> component, <a class="code" href="structnfs__fh4.html">nfs_fh4</a> *fh)
<a name="l00812"></a>00812 {
<a name="l00813"></a>00813   <span class="keywordflow">if</span>(<a class="code" href="log_8h.html#ad2b900e4d4ae3a366d0690930c8a68aa">isFullDebug</a>(component))
<a name="l00814"></a>00814     {
<a name="l00815"></a>00815       <span class="keywordtype">char</span> str[<a class="code" href="nfs__file__handle_8h.html#add3fa684cef3f27ade6bb43b7b22e7cf">LEN_FH_STR</a>];
<a name="l00816"></a>00816 
<a name="l00817"></a>00817       <a class="code" href="nfs__file__handle_8h.html#af7cf44dc64d6f08c15f6874adcbdd8de">sprint_fhandle4</a>(str, fh);
<a name="l00818"></a>00818       <a class="code" href="log_8h.html#a8ca2131f27bca0bd0e870c3c2da64cb1">LogFullDebug</a>(component, <span class="stringliteral">&quot;%s&quot;</span>, str);
<a name="l00819"></a>00819     }
<a name="l00820"></a>00820 }                               <span class="comment">/* print_fhandle4 */</span>
<a name="l00821"></a>00821 
<a name="l00822"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#af7cf44dc64d6f08c15f6874adcbdd8de">00822</a> <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#af7cf44dc64d6f08c15f6874adcbdd8de">sprint_fhandle4</a>(<span class="keywordtype">char</span> *str, <a class="code" href="structnfs__fh4.html">nfs_fh4</a> *fh)
<a name="l00823"></a>00823 {
<a name="l00824"></a>00824   <span class="keywordtype">char</span> *tmp = str + sprintf(str, <span class="stringliteral">&quot;File Handle V4: Len=%u &quot;</span>, fh-&gt;<a class="code" href="structnfs__fh4.html#a16f1d8d3eb38d12060bef0045f062f16">nfs_fh4_len</a>);
<a name="l00825"></a>00825 
<a name="l00826"></a>00826   <a class="code" href="nfs__file__handle_8h.html#a5943b0ebcd28d76e5e84618e470942c6">sprint_mem</a>(tmp, fh-&gt;<a class="code" href="structnfs__fh4.html#a1bac9f2eb01597339d8c037776010a09">nfs_fh4_val</a>, fh-&gt;<a class="code" href="structnfs__fh4.html#a16f1d8d3eb38d12060bef0045f062f16">nfs_fh4_len</a>);
<a name="l00827"></a>00827 }                               <span class="comment">/* sprint_fhandle4 */</span>
<a name="l00828"></a>00828 
<a name="l00840"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a966c226c749b60cf363d7a924b3ca5d6">00840</a> <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a966c226c749b60cf363d7a924b3ca5d6">print_fhandle_nlm</a>(<a class="code" href="log_8h.html#a80c77121778df3130d72817d3d1a9451">log_components_t</a> component, netobj *fh)
<a name="l00841"></a>00841 {
<a name="l00842"></a>00842   <span class="keywordflow">if</span>(<a class="code" href="log_8h.html#ad2b900e4d4ae3a366d0690930c8a68aa">isFullDebug</a>(component))
<a name="l00843"></a>00843     {
<a name="l00844"></a>00844       <span class="keywordtype">char</span> str[<a class="code" href="nfs__file__handle_8h.html#add3fa684cef3f27ade6bb43b7b22e7cf">LEN_FH_STR</a>];
<a name="l00845"></a>00845 
<a name="l00846"></a>00846       <a class="code" href="nfs__file__handle_8h.html#a51bd36d3e7fcc63f7f12569d7fd28901">sprint_fhandle_nlm</a>(str, fh);
<a name="l00847"></a>00847       <a class="code" href="log_8h.html#a8ca2131f27bca0bd0e870c3c2da64cb1">LogFullDebug</a>(component, <span class="stringliteral">&quot;%s&quot;</span>, str);
<a name="l00848"></a>00848     }
<a name="l00849"></a>00849 }                               <span class="comment">/* print_fhandle_nlm */</span>
<a name="l00850"></a>00850 
<a name="l00851"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a51bd36d3e7fcc63f7f12569d7fd28901">00851</a> <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a51bd36d3e7fcc63f7f12569d7fd28901">sprint_fhandle_nlm</a>(<span class="keywordtype">char</span> *str, netobj *fh)
<a name="l00852"></a>00852 {
<a name="l00853"></a>00853   <span class="keywordtype">char</span> *tmp = str + sprintf(str, <span class="stringliteral">&quot;File Handle V3: Len=%u &quot;</span>, fh-&gt;n_len);
<a name="l00854"></a>00854 
<a name="l00855"></a>00855   <a class="code" href="nfs__file__handle_8h.html#a5943b0ebcd28d76e5e84618e470942c6">sprint_mem</a>(tmp, fh-&gt;n_bytes, fh-&gt;n_len);
<a name="l00856"></a>00856 }                               <span class="comment">/* sprint_fhandle_nlm */</span>
<a name="l00857"></a>00857 
<a name="l00870"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a3d381aeccd1e8570ce7e216bc912d2ea">00870</a> <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a3d381aeccd1e8570ce7e216bc912d2ea">print_buff</a>(<a class="code" href="log_8h.html#a80c77121778df3130d72817d3d1a9451">log_components_t</a> component, <span class="keywordtype">char</span> *buff, <span class="keywordtype">int</span> <a class="code" href="structfsal__handle__desc.html#ac26d3f3266e78ecaffc1e39e937923f8">len</a>)
<a name="l00871"></a>00871 {
<a name="l00872"></a>00872   <span class="keywordflow">if</span>(<a class="code" href="log_8h.html#ad2b900e4d4ae3a366d0690930c8a68aa">isFullDebug</a>(component))
<a name="l00873"></a>00873     {
<a name="l00874"></a>00874       <span class="keywordtype">char</span> str[1024];
<a name="l00875"></a>00875 
<a name="l00876"></a>00876       <a class="code" href="nfs__file__handle_8h.html#a4fd593aa6e94740c4152538b3c956e3a">sprint_buff</a>(str, buff, len);
<a name="l00877"></a>00877       <a class="code" href="log_8h.html#a8ca2131f27bca0bd0e870c3c2da64cb1">LogFullDebug</a>(component, <span class="stringliteral">&quot;%s&quot;</span>, str);
<a name="l00878"></a>00878     }
<a name="l00879"></a>00879 }                               <span class="comment">/* print_buff */</span>
<a name="l00880"></a>00880 
<a name="l00881"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a4fd593aa6e94740c4152538b3c956e3a">00881</a> <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a4fd593aa6e94740c4152538b3c956e3a">sprint_buff</a>(<span class="keywordtype">char</span> *str, <span class="keywordtype">char</span> *buff, <span class="keywordtype">int</span> <a class="code" href="structfsal__handle__desc.html#ac26d3f3266e78ecaffc1e39e937923f8">len</a>)
<a name="l00882"></a>00882 {
<a name="l00883"></a>00883   <span class="keywordtype">char</span> *tmp = str + sprintf(str, <span class="stringliteral">&quot;  Len=%u Buff=%p Val: &quot;</span>, len, buff);
<a name="l00884"></a>00884 
<a name="l00885"></a>00885   <a class="code" href="nfs__file__handle_8h.html#a5943b0ebcd28d76e5e84618e470942c6">sprint_mem</a>(tmp, buff, len);
<a name="l00886"></a>00886 }                               <span class="comment">/* sprint_buff */</span>
<a name="l00887"></a>00887 
<a name="l00888"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a5943b0ebcd28d76e5e84618e470942c6">00888</a> <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a5943b0ebcd28d76e5e84618e470942c6">sprint_mem</a>(<span class="keywordtype">char</span> *str, <span class="keywordtype">char</span> *buff, <span class="keywordtype">int</span> <a class="code" href="structfsal__handle__desc.html#ac26d3f3266e78ecaffc1e39e937923f8">len</a>)
<a name="l00889"></a>00889 {
<a name="l00890"></a>00890   <span class="keywordtype">int</span> i;
<a name="l00891"></a>00891 
<a name="l00892"></a>00892   <span class="keywordflow">if</span>(buff == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00893"></a>00893     sprintf(str, <span class="stringliteral">&quot;&lt;null&gt;&quot;</span>);
<a name="l00894"></a>00894   <span class="keywordflow">else</span> <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="structfsal__handle__desc.html#ac26d3f3266e78ecaffc1e39e937923f8">len</a>; i++)
<a name="l00895"></a>00895     sprintf(str + i * 2, <span class="stringliteral">&quot;%02x&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)buff[i]);
<a name="l00896"></a>00896 }
<a name="l00897"></a>00897 
<a name="l00909"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a0b45a92580c15bfeb1a6570d875f0eec">00909</a> <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a0b45a92580c15bfeb1a6570d875f0eec">LogCompoundFH</a>(<a class="code" href="structcompoud__data.html" title="Compound data.">compound_data_t</a> * data)
<a name="l00910"></a>00910 {
<a name="l00911"></a>00911   <span class="keywordflow">if</span>(<a class="code" href="log_8h.html#ad2b900e4d4ae3a366d0690930c8a68aa">isFullDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>))
<a name="l00912"></a>00912     {
<a name="l00913"></a>00913       <span class="keywordtype">char</span> str[<a class="code" href="nfs__file__handle_8h.html#add3fa684cef3f27ade6bb43b7b22e7cf">LEN_FH_STR</a>];
<a name="l00914"></a>00914       
<a name="l00915"></a>00915       <a class="code" href="nfs__file__handle_8h.html#af7cf44dc64d6f08c15f6874adcbdd8de">sprint_fhandle4</a>(str, &amp;data-&gt;<a class="code" href="structcompoud__data.html#ab678a4d34551041e9b4ac9d2dfae4801">currentFH</a>);
<a name="l00916"></a>00916       <a class="code" href="log_8h.html#a8ca2131f27bca0bd0e870c3c2da64cb1">LogFullDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, <span class="stringliteral">&quot;Current FH  %s&quot;</span>, str);
<a name="l00917"></a>00917       
<a name="l00918"></a>00918       <a class="code" href="nfs__file__handle_8h.html#af7cf44dc64d6f08c15f6874adcbdd8de">sprint_fhandle4</a>(str, &amp;data-&gt;<a class="code" href="structcompoud__data.html#a74ed373ec0737d536716292f02226a66">savedFH</a>);
<a name="l00919"></a>00919       <a class="code" href="log_8h.html#a8ca2131f27bca0bd0e870c3c2da64cb1">LogFullDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, <span class="stringliteral">&quot;Saved FH    %s&quot;</span>, str);
<a name="l00920"></a>00920       
<a name="l00921"></a>00921       <a class="code" href="nfs__file__handle_8h.html#af7cf44dc64d6f08c15f6874adcbdd8de">sprint_fhandle4</a>(str, &amp;data-&gt;<a class="code" href="structcompoud__data.html#a01250d70ed0092f7ab4872e32c1ed46b">publicFH</a>);
<a name="l00922"></a>00922       <a class="code" href="log_8h.html#a8ca2131f27bca0bd0e870c3c2da64cb1">LogFullDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, <span class="stringliteral">&quot;Public FH   %s&quot;</span>, str);
<a name="l00923"></a>00923       
<a name="l00924"></a>00924       <a class="code" href="nfs__file__handle_8h.html#af7cf44dc64d6f08c15f6874adcbdd8de">sprint_fhandle4</a>(str, &amp;data-&gt;<a class="code" href="structcompoud__data.html#af65dc41541647ee1f4bc4b864db7c04f">rootFH</a>);
<a name="l00925"></a>00925       <a class="code" href="log_8h.html#a8ca2131f27bca0bd0e870c3c2da64cb1">LogFullDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556afb05059e688b5317f3861f11bff44505">COMPONENT_FILEHANDLE</a>, <span class="stringliteral">&quot;Root FH     %s&quot;</span>, str);
<a name="l00926"></a>00926     }
<a name="l00927"></a>00927 }                               <span class="comment">/* print_compoud_fh */</span>
<a name="l00928"></a>00928 
<a name="l00941"></a><a class="code" href="nfs__filehandle__mgmt_8c.html#a03954b5fee52c62dbcdcbc85c8f08377">00941</a> <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a03954b5fee52c62dbcdcbc85c8f08377">nfs4_sprint_fhandle</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * fh4p, <span class="keywordtype">char</span> *outstr)
<a name="l00942"></a>00942 {
<a name="l00943"></a>00943   <span class="keywordtype">char</span> *tmp = outstr + sprintf(outstr, <span class="stringliteral">&quot;File Handle V4: Len=%u &quot;</span>, fh4p-&gt;<a class="code" href="structnfs__fh4.html#a16f1d8d3eb38d12060bef0045f062f16">nfs_fh4_len</a>);
<a name="l00944"></a>00944 
<a name="l00945"></a>00945   <a class="code" href="nfs__file__handle_8h.html#a5943b0ebcd28d76e5e84618e470942c6">sprint_mem</a>(tmp, (<span class="keywordtype">char</span> *)fh4p-&gt;<a class="code" href="structnfs__fh4.html#a1bac9f2eb01597339d8c037776010a09">nfs_fh4_val</a>, fh4p-&gt;<a class="code" href="structnfs__fh4.html#a16f1d8d3eb38d12060bef0045f062f16">nfs_fh4_len</a>);
<a name="l00946"></a>00946 }                               <span class="comment">/* nfs4_sprint_fhandle */</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 21 2012 for nfs-ganesha by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
