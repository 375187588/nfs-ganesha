<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>nfs-ganesha: cmd_nfstools.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nfs-ganesha&#160;<span id="projectnumber">1.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>cmd_nfstools.c</h1>  </div>
</div>
<div class="contents">
<a href="cmd__nfstools_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * vim:expandtab:shiftwidth=8:tabstop=8:</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright CEA/DAM/DIF  (2008)</span>
<a name="l00005"></a>00005 <span class="comment"> * contributeur : Philippe DENIEL   philippe.deniel@cea.fr</span>
<a name="l00006"></a>00006 <span class="comment"> *                Thomas LEIBOVICI  thomas.leibovici@cea.fr</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00010"></a>00010 <span class="comment"> * modify it under the terms of the GNU Lesser General Public</span>
<a name="l00011"></a>00011 <span class="comment"> * License as published by the Free Software Foundation; either</span>
<a name="l00012"></a>00012 <span class="comment"> * version 3 of the License, or (at your option) any later version.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00015"></a>00015 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00016"></a>00016 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00017"></a>00017 <span class="comment"> * Lesser General Public License for more details.</span>
<a name="l00018"></a>00018 <span class="comment"> *</span>
<a name="l00019"></a>00019 <span class="comment"> * You should have received a copy of the GNU Lesser General Public</span>
<a name="l00020"></a>00020 <span class="comment"> * License along with this library; if not, write to the Free Software</span>
<a name="l00021"></a>00021 <span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> * ---------------------------------------</span>
<a name="l00024"></a>00024 <span class="comment"> */</span>
<a name="l00025"></a>00025 
<a name="l00106"></a>00106 <span class="preprocessor">#ifdef HAVE_CONFIG_H</span>
<a name="l00107"></a>00107 <span class="preprocessor"></span><span class="preprocessor">#include &quot;config.h&quot;</span>
<a name="l00108"></a>00108 <span class="preprocessor">#endif</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span>
<a name="l00110"></a>00110 <span class="preprocessor">#ifdef _SOLARIS</span>
<a name="l00111"></a>00111 <span class="preprocessor"></span><span class="preprocessor">#include &quot;solaris_port.h&quot;</span>
<a name="l00112"></a>00112 <span class="preprocessor">#ifndef _USE_SNMP</span>
<a name="l00113"></a>00113 <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> u_long;
<a name="l00114"></a>00114 <span class="preprocessor">#endif</span>
<a name="l00115"></a>00115 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00116"></a>00116 <span class="preprocessor"></span>
<a name="l00117"></a>00117 <span class="preprocessor">#include &lt;limits.h&gt;</span>
<a name="l00118"></a>00118 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00119"></a>00119 <span class="preprocessor">#include &lt;sys/stat.h&gt;</span>
<a name="l00120"></a>00120 <span class="preprocessor">#include &quot;<a class="code" href="cmd__nfstools_8h.html" title="nfs tools for ganeshell.">cmd_nfstools.h</a>&quot;</span>
<a name="l00121"></a>00121 <span class="preprocessor">#include &quot;abstract_mem.h&quot;</span>
<a name="l00122"></a>00122 <span class="preprocessor">#include &quot;nfs23.h&quot;</span>
<a name="l00123"></a>00123 <span class="preprocessor">#include &quot;nfs4.h&quot;</span>
<a name="l00124"></a>00124 <span class="preprocessor">#include &quot;mount.h&quot;</span>
<a name="l00125"></a>00125 <span class="preprocessor">#include &quot;nfs_proto_functions.h&quot;</span>
<a name="l00126"></a>00126 <span class="preprocessor">#include &quot;nfs_tools.h&quot;</span>
<a name="l00127"></a>00127 <span class="preprocessor">#include &quot;nfs_proto_tools.h&quot;</span>
<a name="l00128"></a>00128 <span class="preprocessor">#include &quot;nfs_file_handle.h&quot;</span>
<a name="l00129"></a>00129 <span class="preprocessor">#include &quot;<a class="code" href="cmd__tools_8h.html" title="Header file for functions used by several layers.">cmd_tools.h</a>&quot;</span>
<a name="l00130"></a>00130 
<a name="l00131"></a>00131 <span class="comment">/* 2 char per byte + &#39;\0&#39; */</span>
<a name="l00132"></a><a class="code" href="cmd__nfstools_8c.html#a2bd2cde26b9fb01ece8a1b19bf971c82">00132</a> <span class="preprocessor">#define SIZE_STR_NFSHANDLE2 (2 * NFS2_FHSIZE + 1)</span>
<a name="l00133"></a><a class="code" href="cmd__nfstools_8c.html#a6da0a82b146313afe68a9b4d32d5db2e">00133</a> <span class="preprocessor"></span><span class="preprocessor">#define SIZE_STR_NFSHANDLE3 (2 * NFS3_FHSIZE + 1)</span>
<a name="l00134"></a>00134 <span class="preprocessor"></span>
<a name="l00135"></a>00135 <span class="comment">/* unsolved symbols */</span>
<a name="l00136"></a><a class="code" href="cmd__nfstools_8c.html#a020ca3d9fe8881e6daf6fc69ac01b6b4">00136</a> <span class="keywordtype">int</span> <a class="code" href="nfs__core_8h.html#ae04d38ace0d9a143801c1625135d4ad7">get_rpc_xid</a>()
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138   <span class="keywordflow">return</span> 0;
<a name="l00139"></a>00139 }
<a name="l00140"></a>00140 
<a name="l00141"></a><a class="code" href="cmd__nfstools_8c.html#a7eaaf78c4a00fa69da66fb02f08c054a">00141</a> <span class="keywordtype">void</span> *<a class="code" href="nfs__core_8h.html#a7eaaf78c4a00fa69da66fb02f08c054a">rpc_tcp_socket_manager_thread</a>(<span class="keywordtype">void</span> *Arg)
<a name="l00142"></a>00142 {
<a name="l00143"></a>00143   <span class="keywordflow">return</span> <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00144"></a>00144 }
<a name="l00145"></a>00145 
<a name="l00146"></a>00146 <span class="comment">/* encoding/decoding function definitions */</span>
<a name="l00147"></a>00147 
<a name="l00148"></a><a class="code" href="cmd__nfstools_8h.html#a3bf698c297f8a7c0c3386115cc54cdca">00148</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a3bf698c297f8a7c0c3386115cc54cdca">cmdnfs_void</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00149"></a>00149                 <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00150"></a>00150                 <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00151"></a>00151 {
<a name="l00152"></a>00152   <span class="keywordflow">if</span>((encodeflag == <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>) &amp;&amp; (argc != 0))
<a name="l00153"></a>00153     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00154"></a>00154 
<a name="l00155"></a>00155   <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00156"></a>00156 }
<a name="l00157"></a>00157 
<a name="l00158"></a><a class="code" href="cmd__nfstools_8h.html#afa2a178837094076227dc6d941bfb66a">00158</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#afa2a178837094076227dc6d941bfb66a">cmdnfs_dirpath</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00159"></a>00159                    <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00160"></a>00160                    <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00161"></a>00161 {
<a name="l00162"></a>00162   <span class="keywordtype">size_t</span> len;
<a name="l00163"></a>00163   <a class="code" href="mount_8h.html#affff0e177c786096b47a253cc60692d8">dirpath</a> *p_dirpath = (<a class="code" href="mount_8h.html#affff0e177c786096b47a253cc60692d8">dirpath</a> *) p_nfs_struct;
<a name="l00164"></a>00164 
<a name="l00165"></a>00165   <span class="comment">/* sanity check */</span>
<a name="l00166"></a>00166   <span class="keywordflow">if</span>(p_dirpath == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00167"></a>00167     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169   <span class="keywordflow">switch</span> (encodeflag)
<a name="l00170"></a>00170     {
<a name="l00171"></a>00171     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l00172"></a>00172 
<a name="l00173"></a>00173       <span class="keywordflow">if</span>(argc != 1)
<a name="l00174"></a>00174         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00175"></a>00175 
<a name="l00176"></a>00176       len = strlen(argv[0]);
<a name="l00177"></a>00177       *p_dirpath = gsh_malloc(len + 1);
<a name="l00178"></a>00178 
<a name="l00179"></a>00179       <span class="keywordflow">if</span>(*p_dirpath == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00180"></a>00180         {
<a name="l00181"></a>00181           fprintf(stderr, <span class="stringliteral">&quot;Not enough memory.\n&quot;</span>);
<a name="l00182"></a>00182           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00183"></a>00183         }
<a name="l00184"></a>00184 
<a name="l00185"></a>00185       strcpy(*p_dirpath, argv[0]);
<a name="l00186"></a>00186 
<a name="l00187"></a>00187       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00188"></a>00188 
<a name="l00189"></a>00189       <span class="keywordflow">break</span>;
<a name="l00190"></a>00190     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l00191"></a>00191 
<a name="l00192"></a>00192       fprintf(out_stream, <span class="stringliteral">&quot;%*sdirpath = %s\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>, *p_dirpath);
<a name="l00193"></a>00193       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00194"></a>00194 
<a name="l00195"></a>00195       <span class="keywordflow">break</span>;
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l00198"></a>00198 
<a name="l00199"></a>00199       gsh_free(*p_dirpath);
<a name="l00200"></a>00200       <span class="keywordflow">break</span>;
<a name="l00201"></a>00201 
<a name="l00202"></a>00202     <span class="keywordflow">default</span>:
<a name="l00203"></a>00203       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00204"></a>00204     }
<a name="l00205"></a>00205   <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00206"></a>00206 }
<a name="l00207"></a>00207 
<a name="l00208"></a><a class="code" href="cmd__nfstools_8h.html#a24c153a7561ff21d6c1748861c0e32fc">00208</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a24c153a7561ff21d6c1748861c0e32fc">cmdnfs_fhandle2</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00209"></a>00209                     <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00210"></a>00210                     <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00211"></a>00211 {
<a name="l00212"></a>00212   <a class="code" href="nfs23_8h.html#a4122a54677d2f66ef8a8f564b6076db2">fhandle2</a> *p_fhandle = (<a class="code" href="nfs23_8h.html#a4122a54677d2f66ef8a8f564b6076db2">fhandle2</a> *) p_nfs_struct;
<a name="l00213"></a>00213 
<a name="l00214"></a>00214   <span class="keywordtype">char</span> *str_handle;
<a name="l00215"></a>00215   <span class="keywordtype">char</span> str_printhandle[<a class="code" href="cmd__nfstools_8c.html#a2bd2cde26b9fb01ece8a1b19bf971c82">SIZE_STR_NFSHANDLE2</a>];
<a name="l00216"></a>00216   <span class="keywordtype">int</span> rc;
<a name="l00217"></a>00217 
<a name="l00218"></a>00218   <span class="comment">/* sanity check */</span>
<a name="l00219"></a>00219   <span class="keywordflow">if</span>(p_fhandle == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00220"></a>00220     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00221"></a>00221 
<a name="l00222"></a>00222   <span class="keywordflow">switch</span> (encodeflag)
<a name="l00223"></a>00223     {
<a name="l00224"></a>00224     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l00225"></a>00225 
<a name="l00226"></a>00226       <span class="keywordflow">if</span>(argc != 1)
<a name="l00227"></a>00227         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00228"></a>00228 
<a name="l00229"></a>00229       str_handle = argv[0];
<a name="l00230"></a>00230 
<a name="l00231"></a>00231       <span class="comment">/* check that it begins with an @ */</span>
<a name="l00232"></a>00232       <span class="keywordflow">if</span>(str_handle[0] != <span class="charliteral">&#39;@&#39;</span>)
<a name="l00233"></a>00233         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00234"></a>00234 
<a name="l00235"></a>00235       <span class="comment">/* escaping the first char @ */</span>
<a name="l00236"></a>00236       str_handle++;
<a name="l00237"></a>00237 
<a name="l00238"></a>00238       rc = <a class="code" href="common__utils_8c.html#a6f09e2d1c20544d11ea2a8c8e9a7ff1a">sscanmem</a>((caddr_t) p_fhandle, <a class="code" href="nfs23_8h.html#a353d56145f91d5b1e6f9287fb7ac9f74">NFS2_FHSIZE</a>, str_handle);
<a name="l00239"></a>00239 
<a name="l00240"></a>00240       <span class="comment">/* we must have read at least the handle size */</span>
<a name="l00241"></a>00241       <span class="keywordflow">if</span>(rc &lt; 2 * (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(<a class="code" href="structfile__handle__v2.html">file_handle_v2_t</a>))
<a name="l00242"></a>00242         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00243"></a>00243 
<a name="l00244"></a>00244       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00245"></a>00245 
<a name="l00246"></a>00246       <span class="keywordflow">break</span>;
<a name="l00247"></a>00247     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l00248"></a>00248 
<a name="l00249"></a>00249       <span class="keywordflow">if</span>(<a class="code" href="common__utils_8c.html#a740458b7b08d3f69d4fd1f262793ba6c">snprintmem</a>
<a name="l00250"></a>00250          (str_printhandle, <a class="code" href="cmd__nfstools_8c.html#a2bd2cde26b9fb01ece8a1b19bf971c82">SIZE_STR_NFSHANDLE2</a>, (caddr_t) p_fhandle, <a class="code" href="nfs23_8h.html#a353d56145f91d5b1e6f9287fb7ac9f74">NFS2_FHSIZE</a>) &lt; 0)
<a name="l00251"></a>00251         {
<a name="l00252"></a>00252           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00253"></a>00253         }
<a name="l00254"></a>00254 
<a name="l00255"></a>00255       fprintf(out_stream, <span class="stringliteral">&quot;%*sfhandle2 = @%s\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>, str_printhandle);
<a name="l00256"></a>00256 
<a name="l00257"></a>00257       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00258"></a>00258 
<a name="l00259"></a>00259       <span class="keywordflow">break</span>;
<a name="l00260"></a>00260 
<a name="l00261"></a>00261     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l00262"></a>00262 
<a name="l00263"></a>00263       <span class="comment">/* nothing to do */</span>
<a name="l00264"></a>00264       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00265"></a>00265 
<a name="l00266"></a>00266       <span class="keywordflow">break</span>;
<a name="l00267"></a>00267 
<a name="l00268"></a>00268     <span class="keywordflow">default</span>:
<a name="l00269"></a>00269       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00270"></a>00270     }
<a name="l00271"></a>00271 
<a name="l00272"></a>00272 }
<a name="l00273"></a>00273 
<a name="l00274"></a><a class="code" href="cmd__nfstools_8h.html#ae00976cc553a1bdbfd40ae46133dda27">00274</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#ae00976cc553a1bdbfd40ae46133dda27">cmdnfs_fhstatus2</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00275"></a>00275                      <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00276"></a>00276                      <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00277"></a>00277 {
<a name="l00278"></a>00278   <a class="code" href="structfhstatus2.html">fhstatus2</a> *p_fhstatus = (<a class="code" href="structfhstatus2.html">fhstatus2</a> *) p_nfs_struct;
<a name="l00279"></a>00279 
<a name="l00280"></a>00280   <span class="comment">/* sanity check */</span>
<a name="l00281"></a>00281   <span class="keywordflow">if</span>(p_fhstatus == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00282"></a>00282     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00283"></a>00283 
<a name="l00284"></a>00284   <span class="keywordflow">switch</span> (encodeflag)
<a name="l00285"></a>00285     {
<a name="l00286"></a>00286     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l00287"></a>00287 
<a name="l00288"></a>00288       <span class="comment">/* it is never an input */</span>
<a name="l00289"></a>00289       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00290"></a>00290 
<a name="l00291"></a>00291       <span class="keywordflow">break</span>;
<a name="l00292"></a>00292     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l00293"></a>00293 
<a name="l00294"></a>00294       fprintf(out_stream, <span class="stringliteral">&quot;%*sfhstatus2 =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00295"></a>00295       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00296"></a>00296 
<a name="l00297"></a>00297       <span class="comment">/* Convert status to error code */</span>
<a name="l00298"></a>00298       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a0ea9754e3cf3eb6843ed71a20430b663">cmdnfs_nfsstat2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l00299"></a>00299                          (caddr_t) &amp; p_fhstatus-&gt;<a class="code" href="structfhstatus2.html#aedc900781dfa4ed706756fb4277ec89f">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00300"></a>00300         {
<a name="l00301"></a>00301           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00302"></a>00302         }
<a name="l00303"></a>00303 
<a name="l00304"></a>00304       <span class="keywordflow">if</span>(p_fhstatus-&gt;<a class="code" href="structfhstatus2.html#aedc900781dfa4ed706756fb4277ec89f">status</a> == <a class="code" href="nfs23_8h.html#a7aa4ec59cb08c181dab1f366d0c06778ab31cf3caaf8dd2ab122a66434db73c96">NFS_OK</a>)
<a name="l00305"></a>00305         {
<a name="l00306"></a>00306           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a24c153a7561ff21d6c1748861c0e32fc">cmdnfs_fhandle2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l00307"></a>00307                              (caddr_t) &amp; p_fhstatus-&gt;<a class="code" href="structfhstatus2.html#a14294c8171fd4dac7626f55fde5d5191">fhstatus2_u</a>.<a class="code" href="structfhstatus2.html#a87486626c0be61b304063d4e98d56faa">directory</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00308"></a>00308             {
<a name="l00309"></a>00309               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00310"></a>00310             }
<a name="l00311"></a>00311         }
<a name="l00312"></a>00312       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00313"></a>00313 
<a name="l00314"></a>00314       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00315"></a>00315 
<a name="l00316"></a>00316       <span class="keywordflow">break</span>;
<a name="l00317"></a>00317 
<a name="l00318"></a>00318     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l00319"></a>00319 
<a name="l00320"></a>00320       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l00321"></a>00321       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00322"></a>00322 
<a name="l00323"></a>00323       <span class="keywordflow">break</span>;
<a name="l00324"></a>00324 
<a name="l00325"></a>00325     <span class="keywordflow">default</span>:
<a name="l00326"></a>00326       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00327"></a>00327     }
<a name="l00328"></a>00328 }
<a name="l00329"></a>00329 
<a name="l00330"></a><a class="code" href="cmd__nfstools_8h.html#a478e846158a12b5b750998085b917076">00330</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a478e846158a12b5b750998085b917076">cmdnfs_STATFS2res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00331"></a>00331                       <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00332"></a>00332                       <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00333"></a>00333 {
<a name="l00334"></a>00334 
<a name="l00335"></a>00335   <a class="code" href="structSTATFS2res.html">STATFS2res</a> *p_statres = (<a class="code" href="structSTATFS2res.html">STATFS2res</a> *) p_nfs_struct;
<a name="l00336"></a>00336 
<a name="l00337"></a>00337   <span class="comment">/* sanity check */</span>
<a name="l00338"></a>00338   <span class="keywordflow">if</span>(p_statres == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00339"></a>00339     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00340"></a>00340 
<a name="l00341"></a>00341   <span class="keywordflow">switch</span> (encodeflag)
<a name="l00342"></a>00342     {
<a name="l00343"></a>00343     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l00344"></a>00344 
<a name="l00345"></a>00345       <span class="comment">/* it is never an input */</span>
<a name="l00346"></a>00346       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00347"></a>00347 
<a name="l00348"></a>00348       <span class="keywordflow">break</span>;
<a name="l00349"></a>00349     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l00350"></a>00350 
<a name="l00351"></a>00351       fprintf(out_stream, <span class="stringliteral">&quot;%*sSTATFS2res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00352"></a>00352       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00353"></a>00353 
<a name="l00354"></a>00354       <span class="comment">/* Convert status to error code */</span>
<a name="l00355"></a>00355       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a0ea9754e3cf3eb6843ed71a20430b663">cmdnfs_nfsstat2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l00356"></a>00356                          (caddr_t) &amp; p_statres-&gt;<a class="code" href="structSTATFS2res.html#ac587716b09ccd93e098b1ea61b60f90a">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00357"></a>00357         {
<a name="l00358"></a>00358           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00359"></a>00359         }
<a name="l00360"></a>00360 
<a name="l00361"></a>00361       <span class="keywordflow">if</span>(p_statres-&gt;<a class="code" href="structSTATFS2res.html#ac587716b09ccd93e098b1ea61b60f90a">status</a> == <a class="code" href="nfs23_8h.html#a7aa4ec59cb08c181dab1f366d0c06778ab31cf3caaf8dd2ab122a66434db73c96">NFS_OK</a>)
<a name="l00362"></a>00362         {
<a name="l00363"></a>00363           <span class="comment">/* print statinfo2 */</span>
<a name="l00364"></a>00364           fprintf(out_stream, <span class="stringliteral">&quot;%*sinfo =\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00365"></a>00365           fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00366"></a>00366           fprintf(out_stream, <span class="stringliteral">&quot;%*stsize  = %u\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>,
<a name="l00367"></a>00367                   p_statres-&gt;<a class="code" href="structSTATFS2res.html#a6ffcccc68ca9932b683ff13493dcb1ac">STATFS2res_u</a>.<a class="code" href="structSTATFS2res.html#ab8a678d5c5132367ab9529464d2f0979">info</a>.<a class="code" href="structstatinfo2.html#a7927e22737b50ec2e06cd8f0c86a92cb">tsize</a>);
<a name="l00368"></a>00368           fprintf(out_stream, <span class="stringliteral">&quot;%*sbsize  = %u\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>,
<a name="l00369"></a>00369                   p_statres-&gt;<a class="code" href="structSTATFS2res.html#a6ffcccc68ca9932b683ff13493dcb1ac">STATFS2res_u</a>.<a class="code" href="structSTATFS2res.html#ab8a678d5c5132367ab9529464d2f0979">info</a>.<a class="code" href="structstatinfo2.html#af38e9472c15fd19b2111acf8f7cf9858">bsize</a>);
<a name="l00370"></a>00370           fprintf(out_stream, <span class="stringliteral">&quot;%*sblocks = %u\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>,
<a name="l00371"></a>00371                   p_statres-&gt;<a class="code" href="structSTATFS2res.html#a6ffcccc68ca9932b683ff13493dcb1ac">STATFS2res_u</a>.<a class="code" href="structSTATFS2res.html#ab8a678d5c5132367ab9529464d2f0979">info</a>.<a class="code" href="structstatinfo2.html#aabf059afd4718dade55a654415099242">blocks</a>);
<a name="l00372"></a>00372           fprintf(out_stream, <span class="stringliteral">&quot;%*sbfree  = %u\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>,
<a name="l00373"></a>00373                   p_statres-&gt;<a class="code" href="structSTATFS2res.html#a6ffcccc68ca9932b683ff13493dcb1ac">STATFS2res_u</a>.<a class="code" href="structSTATFS2res.html#ab8a678d5c5132367ab9529464d2f0979">info</a>.<a class="code" href="structstatinfo2.html#a5ad29967230d194cc0e138af08b64ff5">bfree</a>);
<a name="l00374"></a>00374           fprintf(out_stream, <span class="stringliteral">&quot;%*sbavail = %u\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>,
<a name="l00375"></a>00375                   p_statres-&gt;<a class="code" href="structSTATFS2res.html#a6ffcccc68ca9932b683ff13493dcb1ac">STATFS2res_u</a>.<a class="code" href="structSTATFS2res.html#ab8a678d5c5132367ab9529464d2f0979">info</a>.<a class="code" href="structstatinfo2.html#ae5ae0d76f2effcabc92fc048fdda6e2d">bavail</a>);
<a name="l00376"></a>00376           fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00377"></a>00377 
<a name="l00378"></a>00378         }
<a name="l00379"></a>00379       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00380"></a>00380 
<a name="l00381"></a>00381       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00382"></a>00382 
<a name="l00383"></a>00383       <span class="keywordflow">break</span>;
<a name="l00384"></a>00384 
<a name="l00385"></a>00385     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l00386"></a>00386 
<a name="l00387"></a>00387       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l00388"></a>00388       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00389"></a>00389 
<a name="l00390"></a>00390       <span class="keywordflow">break</span>;
<a name="l00391"></a>00391 
<a name="l00392"></a>00392     <span class="keywordflow">default</span>:
<a name="l00393"></a>00393       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00394"></a>00394     }
<a name="l00395"></a>00395 
<a name="l00396"></a>00396 }
<a name="l00397"></a>00397 
<a name="l00398"></a><a class="code" href="cmd__nfstools_8h.html#a66fc6438425cae2dbcf4791f701c6538">00398</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a66fc6438425cae2dbcf4791f701c6538">cmdnfs_mountlist</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00399"></a>00399                      <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00400"></a>00400                      <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00401"></a>00401 {
<a name="l00402"></a>00402   <a class="code" href="structmountbody.html">mountlist</a> *p_mountlist = (<a class="code" href="structmountbody.html">mountlist</a> *) p_nfs_struct;
<a name="l00403"></a>00403 
<a name="l00404"></a>00404   <span class="comment">/* sanity check */</span>
<a name="l00405"></a>00405   <span class="keywordflow">if</span>(p_mountlist == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00406"></a>00406     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00407"></a>00407 
<a name="l00408"></a>00408   <span class="comment">/* empty list */</span>
<a name="l00409"></a>00409   <span class="keywordflow">if</span>(*p_mountlist == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00410"></a>00410     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00411"></a>00411 
<a name="l00412"></a>00412   <span class="keywordflow">switch</span> (encodeflag)
<a name="l00413"></a>00413     {
<a name="l00414"></a>00414     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l00415"></a>00415 
<a name="l00416"></a>00416       <span class="comment">/* it is never an input */</span>
<a name="l00417"></a>00417       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00418"></a>00418 
<a name="l00419"></a>00419       <span class="keywordflow">break</span>;
<a name="l00420"></a>00420     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l00421"></a>00421 
<a name="l00422"></a>00422       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00423"></a>00423       fprintf(out_stream, <span class="stringliteral">&quot;%*shostname = %s\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l00424"></a>00424               (*p_mountlist)-&gt;ml_hostname);
<a name="l00425"></a>00425       fprintf(out_stream, <span class="stringliteral">&quot;%*spathname = %s\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l00426"></a>00426               (*p_mountlist)-&gt;ml_directory);
<a name="l00427"></a>00427       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00428"></a>00428 
<a name="l00429"></a>00429       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a66fc6438425cae2dbcf4791f701c6538">cmdnfs_mountlist</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent, out_stream,
<a name="l00430"></a>00430                           (caddr_t) &amp; ((*p_mountlist)-&gt;ml_next)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00431"></a>00431         {
<a name="l00432"></a>00432           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00433"></a>00433         }
<a name="l00434"></a>00434 
<a name="l00435"></a>00435       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00436"></a>00436 
<a name="l00437"></a>00437       <span class="keywordflow">break</span>;
<a name="l00438"></a>00438 
<a name="l00439"></a>00439     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l00440"></a>00440 
<a name="l00441"></a>00441       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l00442"></a>00442       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00443"></a>00443 
<a name="l00444"></a>00444       <span class="keywordflow">break</span>;
<a name="l00445"></a>00445 
<a name="l00446"></a>00446     <span class="keywordflow">default</span>:
<a name="l00447"></a>00447       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00448"></a>00448     }
<a name="l00449"></a>00449 
<a name="l00450"></a>00450 }
<a name="l00451"></a>00451 
<a name="l00452"></a><a class="code" href="cmd__nfstools_8h.html#adf0d9cea94f31dd31d04b1446464e648">00452</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#adf0d9cea94f31dd31d04b1446464e648">cmdnfs_exports</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00453"></a>00453                    <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00454"></a>00454                    <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00455"></a>00455 {
<a name="l00456"></a>00456   <a class="code" href="structexportnode.html">exports</a> *p_exports = (<a class="code" href="structexportnode.html">exports</a> *) p_nfs_struct;
<a name="l00457"></a>00457 
<a name="l00458"></a>00458   <a class="code" href="structgroupnode.html">groups</a> group_list;
<a name="l00459"></a>00459 
<a name="l00460"></a>00460   <span class="comment">/* sanity check */</span>
<a name="l00461"></a>00461   <span class="keywordflow">if</span>(p_exports == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00462"></a>00462     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00463"></a>00463 
<a name="l00464"></a>00464   <span class="comment">/* empty list */</span>
<a name="l00465"></a>00465   <span class="keywordflow">if</span>(*p_exports == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00466"></a>00466     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00467"></a>00467 
<a name="l00468"></a>00468   <span class="keywordflow">switch</span> (encodeflag)
<a name="l00469"></a>00469     {
<a name="l00470"></a>00470     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l00471"></a>00471 
<a name="l00472"></a>00472       <span class="comment">/* it is never an input */</span>
<a name="l00473"></a>00473       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00474"></a>00474 
<a name="l00475"></a>00475       <span class="keywordflow">break</span>;
<a name="l00476"></a>00476     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l00477"></a>00477 
<a name="l00478"></a>00478       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00479"></a>00479       fprintf(out_stream, <span class="stringliteral">&quot;%*sex_dir = %s\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, (*p_exports)-&gt;ex_dir);
<a name="l00480"></a>00480       fprintf(out_stream, <span class="stringliteral">&quot;%*sex_groups =\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00481"></a>00481 
<a name="l00482"></a>00482       group_list = (*p_exports)-&gt;ex_groups;
<a name="l00483"></a>00483       <span class="keywordflow">while</span>(group_list)
<a name="l00484"></a>00484         {
<a name="l00485"></a>00485           fprintf(out_stream, <span class="stringliteral">&quot;%*sgr_name = %s\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>, group_list-&gt;<a class="code" href="structgroupnode.html#a32e2f31f9ec7aa26ed358e7244b8781d">gr_name</a>);
<a name="l00486"></a>00486           group_list = group_list-&gt;<a class="code" href="structgroupnode.html#a8a10f58153f1ef99c14ebd82109a2019">gr_next</a>;
<a name="l00487"></a>00487         }
<a name="l00488"></a>00488 
<a name="l00489"></a>00489       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00490"></a>00490 
<a name="l00491"></a>00491       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#adf0d9cea94f31dd31d04b1446464e648">cmdnfs_exports</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent, out_stream,
<a name="l00492"></a>00492                         (caddr_t) &amp; ((*p_exports)-&gt;ex_next)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00493"></a>00493         {
<a name="l00494"></a>00494           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00495"></a>00495         }
<a name="l00496"></a>00496 
<a name="l00497"></a>00497       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00498"></a>00498 
<a name="l00499"></a>00499       <span class="keywordflow">break</span>;
<a name="l00500"></a>00500 
<a name="l00501"></a>00501     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l00502"></a>00502 
<a name="l00503"></a>00503       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l00504"></a>00504       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00505"></a>00505 
<a name="l00506"></a>00506       <span class="keywordflow">break</span>;
<a name="l00507"></a>00507 
<a name="l00508"></a>00508     <span class="keywordflow">default</span>:
<a name="l00509"></a>00509       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00510"></a>00510     }
<a name="l00511"></a>00511 
<a name="l00512"></a>00512 }
<a name="l00513"></a>00513 
<a name="l00514"></a><a class="code" href="cmd__nfstools_8h.html#af72127fe6cb58ca1006f48d49cc630ce">00514</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00515"></a>00515                     <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00516"></a>00516                     <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00517"></a>00517 {
<a name="l00518"></a>00518   <a class="code" href="structfhandle3.html">fhandle3</a> *p_fhandle = (<a class="code" href="structfhandle3.html">fhandle3</a> *) p_nfs_struct;
<a name="l00519"></a>00519 
<a name="l00520"></a>00520   <span class="keywordtype">char</span> *str_handle;
<a name="l00521"></a>00521   <span class="keywordtype">char</span> str_printhandle[<a class="code" href="cmd__nfstools_8c.html#a6da0a82b146313afe68a9b4d32d5db2e">SIZE_STR_NFSHANDLE3</a>];
<a name="l00522"></a>00522   <span class="keywordtype">int</span> rc;
<a name="l00523"></a>00523 
<a name="l00524"></a>00524   <span class="comment">/* sanity check */</span>
<a name="l00525"></a>00525   <span class="keywordflow">if</span>(p_fhandle == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00526"></a>00526     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00527"></a>00527 
<a name="l00528"></a>00528   <span class="keywordflow">switch</span> (encodeflag)
<a name="l00529"></a>00529     {
<a name="l00530"></a>00530     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l00531"></a>00531 
<a name="l00532"></a>00532       <span class="keywordflow">if</span>(argc != 1)
<a name="l00533"></a>00533         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00534"></a>00534 
<a name="l00535"></a>00535       str_handle = argv[0];
<a name="l00536"></a>00536 
<a name="l00537"></a>00537       <span class="comment">/* check that it begins with an @ */</span>
<a name="l00538"></a>00538       <span class="keywordflow">if</span>(str_handle[0] != <span class="charliteral">&#39;@&#39;</span>)
<a name="l00539"></a>00539         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00540"></a>00540 
<a name="l00541"></a>00541       <span class="comment">/* escaping the first char @ */</span>
<a name="l00542"></a>00542       str_handle++;
<a name="l00543"></a>00543 
<a name="l00544"></a>00544       <span class="comment">/* Allocation of the nfs3 handle */</span>
<a name="l00545"></a>00545       p_fhandle-&gt;<a class="code" href="structfhandle3.html#a1739727dc47fe9ea2972a6b4b9b7b09b">fhandle3_val</a> = gsh_malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structalloc__file__handle__v3.html">alloc_file_handle_v3</a>));
<a name="l00546"></a>00546 
<a name="l00547"></a>00547       <span class="keywordflow">if</span>(p_fhandle-&gt;<a class="code" href="structfhandle3.html#a1739727dc47fe9ea2972a6b4b9b7b09b">fhandle3_val</a> == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00548"></a>00548         {
<a name="l00549"></a>00549           fprintf(stderr, <span class="stringliteral">&quot;Not enough memory.\n&quot;</span>);
<a name="l00550"></a>00550           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00551"></a>00551         }
<a name="l00552"></a>00552 
<a name="l00553"></a>00553       p_fhandle-&gt;<a class="code" href="structfhandle3.html#a5cc2d9c26702d46ed6f0a540e95b57a2">fhandle3_len</a> = (<span class="keywordtype">unsigned</span> int)<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structalloc__file__handle__v3.html">alloc_file_handle_v3</a>);
<a name="l00554"></a>00554 
<a name="l00555"></a>00555       rc = <a class="code" href="common__utils_8c.html#a6f09e2d1c20544d11ea2a8c8e9a7ff1a">sscanmem</a>((caddr_t) (p_fhandle-&gt;<a class="code" href="structfhandle3.html#a1739727dc47fe9ea2972a6b4b9b7b09b">fhandle3_val</a>),
<a name="l00556"></a>00556                     (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structalloc__file__handle__v3.html">alloc_file_handle_v3</a>),
<a name="l00557"></a>00557                     str_handle);
<a name="l00558"></a>00558 
<a name="l00559"></a>00559       <span class="keywordflow">if</span>(rc &lt; 2 * (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(<a class="code" href="structfile__handle__v3.html">file_handle_v3_t</a>))
<a name="l00560"></a>00560         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00561"></a>00561 
<a name="l00562"></a>00562       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00563"></a>00563 
<a name="l00564"></a>00564       <span class="keywordflow">break</span>;
<a name="l00565"></a>00565     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l00566"></a>00566 
<a name="l00567"></a>00567       <span class="keywordflow">if</span>(<a class="code" href="common__utils_8c.html#a740458b7b08d3f69d4fd1f262793ba6c">snprintmem</a>
<a name="l00568"></a>00568          (str_printhandle, <a class="code" href="cmd__nfstools_8c.html#a6da0a82b146313afe68a9b4d32d5db2e">SIZE_STR_NFSHANDLE3</a>, (caddr_t) (p_fhandle-&gt;<a class="code" href="structfhandle3.html#a1739727dc47fe9ea2972a6b4b9b7b09b">fhandle3_val</a>),
<a name="l00569"></a>00569           p_fhandle-&gt;<a class="code" href="structfhandle3.html#a5cc2d9c26702d46ed6f0a540e95b57a2">fhandle3_len</a>) &lt; 0)
<a name="l00570"></a>00570         {
<a name="l00571"></a>00571           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00572"></a>00572         }
<a name="l00573"></a>00573 
<a name="l00574"></a>00574       fprintf(out_stream, <span class="stringliteral">&quot;%*sfhandle3 = @%s\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>, str_printhandle);
<a name="l00575"></a>00575 
<a name="l00576"></a>00576       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00577"></a>00577 
<a name="l00578"></a>00578       <span class="keywordflow">break</span>;
<a name="l00579"></a>00579 
<a name="l00580"></a>00580     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l00581"></a>00581 
<a name="l00582"></a>00582       gsh_free(p_fhandle-&gt;<a class="code" href="structfhandle3.html#a1739727dc47fe9ea2972a6b4b9b7b09b">fhandle3_val</a>);
<a name="l00583"></a>00583       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00584"></a>00584 
<a name="l00585"></a>00585       <span class="keywordflow">break</span>;
<a name="l00586"></a>00586 
<a name="l00587"></a>00587     <span class="keywordflow">default</span>:
<a name="l00588"></a>00588       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00589"></a>00589     }
<a name="l00590"></a>00590 
<a name="l00591"></a>00591 }
<a name="l00592"></a>00592 
<a name="l00593"></a><a class="code" href="cmd__nfstools_8c.html#a71b970d9358cecfb7fc466ce7a33dc87">00593</a> <span class="preprocessor">#define MNT_HANDLE( p_mount_res3 ) ( (p_mount_res3)-&gt;mountres3_u.mountinfo.fhandle )</span>
<a name="l00594"></a><a class="code" href="cmd__nfstools_8c.html#ac2fbb2e6c7069a352a4dae5b353255d0">00594</a> <span class="preprocessor"></span><span class="preprocessor">#define AUTH_FLAVORS( p_mount_res3 ) ( (p_mount_res3)-&gt;mountres3_u.mountinfo.auth_flavors )</span>
<a name="l00595"></a>00595 <span class="preprocessor"></span>
<a name="l00596"></a><a class="code" href="cmd__nfstools_8h.html#a9ed868c63dffa323487115ba3b7ed656">00596</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a9ed868c63dffa323487115ba3b7ed656">cmdnfs_mountres3</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00597"></a>00597                      <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00598"></a>00598                      <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00599"></a>00599 {
<a name="l00600"></a>00600   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
<a name="l00601"></a>00601   <a class="code" href="structmountres3.html">mountres3</a> *p_mountres = (<a class="code" href="structmountres3.html">mountres3</a> *) p_nfs_struct;
<a name="l00602"></a>00602 
<a name="l00603"></a>00603   <span class="comment">/* sanity check */</span>
<a name="l00604"></a>00604   <span class="keywordflow">if</span>(p_mountres == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00605"></a>00605     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00606"></a>00606 
<a name="l00607"></a>00607   <span class="keywordflow">switch</span> (encodeflag)
<a name="l00608"></a>00608     {
<a name="l00609"></a>00609     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l00610"></a>00610 
<a name="l00611"></a>00611       fprintf(out_stream, <span class="stringliteral">&quot;%*smountres3 =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00612"></a>00612       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00613"></a>00613 
<a name="l00615"></a>00615       fprintf(out_stream, <span class="stringliteral">&quot;%*sfhs_status = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l00616"></a>00616               p_mountres-&gt;<a class="code" href="structmountres3.html#a79d60e8aa6db1ff8722041aa9525061c">fhs_status</a>);
<a name="l00617"></a>00617 
<a name="l00618"></a>00618       <span class="keywordflow">if</span>(p_mountres-&gt;<a class="code" href="structmountres3.html#a79d60e8aa6db1ff8722041aa9525061c">fhs_status</a> == <a class="code" href="mount_8h.html#a8f0f36dbbf33bd9a8f097c2e8d16536ba0f04fec1ae22eef7ae62b55dd2bacd6d">MNT3_OK</a>)
<a name="l00619"></a>00619         {
<a name="l00620"></a>00620           fprintf(out_stream, <span class="stringliteral">&quot;%*smountinfo =\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00621"></a>00621           fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00622"></a>00622 
<a name="l00623"></a>00623           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l00624"></a>00624                              (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a71b970d9358cecfb7fc466ce7a33dc87">MNT_HANDLE</a>(p_mountres)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00625"></a>00625             {
<a name="l00626"></a>00626               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00627"></a>00627             }
<a name="l00628"></a>00628 
<a name="l00629"></a>00629           <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="cmd__nfstools_8c.html#ac2fbb2e6c7069a352a4dae5b353255d0">AUTH_FLAVORS</a>(p_mountres).auth_flavors_len; i++)
<a name="l00630"></a>00630             {
<a name="l00631"></a>00631               fprintf(out_stream, <span class="stringliteral">&quot;%*sauth_flavor = %d\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>,
<a name="l00632"></a>00632                       <a class="code" href="cmd__nfstools_8c.html#ac2fbb2e6c7069a352a4dae5b353255d0">AUTH_FLAVORS</a>(p_mountres).auth_flavors_val[i]);
<a name="l00633"></a>00633             }
<a name="l00634"></a>00634 
<a name="l00635"></a>00635           fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00636"></a>00636         }
<a name="l00637"></a>00637 
<a name="l00638"></a>00638       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00639"></a>00639 
<a name="l00640"></a>00640       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00641"></a>00641 
<a name="l00642"></a>00642       <span class="keywordflow">break</span>;
<a name="l00643"></a>00643 
<a name="l00644"></a>00644     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l00645"></a>00645       <span class="comment">/* never an input */</span>
<a name="l00646"></a>00646     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l00647"></a>00647       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l00648"></a>00648     <span class="keywordflow">default</span>:
<a name="l00649"></a>00649       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00650"></a>00650     }
<a name="l00651"></a>00651 
<a name="l00652"></a>00652 }
<a name="l00653"></a>00653 
<a name="l00654"></a>00654 <span class="comment">/* undefine dirty macros... */</span>
<a name="l00655"></a>00655 <span class="preprocessor">#undef MNT_HANDLE</span>
<a name="l00656"></a>00656 <span class="preprocessor"></span><span class="preprocessor">#undef AUTH_FLAVORS</span>
<a name="l00657"></a>00657 <span class="preprocessor"></span>
<a name="l00658"></a><a class="code" href="cmd__nfstools_8h.html#a0ea9754e3cf3eb6843ed71a20430b663">00658</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a0ea9754e3cf3eb6843ed71a20430b663">cmdnfs_nfsstat2</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00659"></a>00659                     <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00660"></a>00660                     <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00661"></a>00661 {
<a name="l00662"></a>00662   <a class="code" href="nfs23_8h.html#a7aa4ec59cb08c181dab1f366d0c06778">nfsstat2</a> *p_stat2 = (<a class="code" href="nfs23_8h.html#a7aa4ec59cb08c181dab1f366d0c06778">nfsstat2</a> *) p_nfs_struct;
<a name="l00663"></a>00663 
<a name="l00664"></a>00664   <span class="comment">/* sanity check */</span>
<a name="l00665"></a>00665   <span class="keywordflow">if</span>(p_stat2 == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00666"></a>00666     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00667"></a>00667 
<a name="l00668"></a>00668   <span class="keywordflow">switch</span> (encodeflag)
<a name="l00669"></a>00669     {
<a name="l00670"></a>00670     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l00671"></a>00671 
<a name="l00672"></a>00672       fprintf(out_stream, <span class="stringliteral">&quot;%*sstatus = %d (%s)\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>, (<span class="keywordtype">int</span>)(*p_stat2),
<a name="l00673"></a>00673               <a class="code" href="nfs__tools_8h.html#afe1a009aa12e4010f72e91e34c0b69be">nfsstat2_to_str</a>(*p_stat2));
<a name="l00674"></a>00674       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00675"></a>00675 
<a name="l00676"></a>00676       <span class="keywordflow">break</span>;
<a name="l00677"></a>00677 
<a name="l00678"></a>00678     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l00679"></a>00679     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l00680"></a>00680       <span class="comment">/* never encoded */</span>
<a name="l00681"></a>00681     <span class="keywordflow">default</span>:
<a name="l00682"></a>00682       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00683"></a>00683     }
<a name="l00684"></a>00684 
<a name="l00685"></a>00685 }
<a name="l00686"></a>00686 
<a name="l00687"></a><a class="code" href="cmd__nfstools_8h.html#a8c47e3ccd166d5afcca5f6e0a192e0a6">00687</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a8c47e3ccd166d5afcca5f6e0a192e0a6">cmdnfs_fattr2</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00688"></a>00688                   <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00689"></a>00689                   <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00690"></a>00690 {
<a name="l00691"></a>00691   <a class="code" href="structfattr2.html">fattr2</a> *p_fattr = (<a class="code" href="structfattr2.html">fattr2</a> *) p_nfs_struct;
<a name="l00692"></a>00692   <span class="keywordtype">char</span> tmp_buff[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00693"></a>00693 
<a name="l00694"></a>00694   <span class="keyword">struct </span>tm paramtm;
<a name="l00695"></a>00695 
<a name="l00696"></a>00696   <span class="comment">/* sanity check */</span>
<a name="l00697"></a>00697   <span class="keywordflow">if</span>(p_fattr == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00698"></a>00698     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00699"></a>00699 
<a name="l00700"></a>00700   <span class="keywordflow">switch</span> (encodeflag)
<a name="l00701"></a>00701     {
<a name="l00702"></a>00702     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l00703"></a>00703 
<a name="l00705"></a>00705       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00706"></a>00706 
<a name="l00707"></a>00707       <span class="keywordflow">break</span>;
<a name="l00708"></a>00708     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l00709"></a>00709 
<a name="l00710"></a>00710       fprintf(out_stream, <span class="stringliteral">&quot;%*sfattr2 =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00711"></a>00711       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00712"></a>00712 
<a name="l00713"></a>00713       fprintf(out_stream, <span class="stringliteral">&quot;%*stype = %d (%s)\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, (<span class="keywordtype">int</span>)p_fattr-&gt;<a class="code" href="structfattr2.html#a0ba0a7d7f07a99ada917d40132312360">type</a>,
<a name="l00714"></a>00714               <a class="code" href="nfs__tools_8h.html#acd481d151104f463a8fa777a96b85ecd">nfstype2_to_str</a>(p_fattr-&gt;<a class="code" href="structfattr2.html#a0ba0a7d7f07a99ada917d40132312360">type</a>));
<a name="l00715"></a>00715       fprintf(out_stream, <span class="stringliteral">&quot;%*smode = 0%o\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr2.html#a13e1098d503868bff038e70e9ac96d72">mode</a>);
<a name="l00716"></a>00716       fprintf(out_stream, <span class="stringliteral">&quot;%*snlink = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr2.html#a70adf9cfd444a570e6fe1af990e228db">nlink</a>);
<a name="l00717"></a>00717       fprintf(out_stream, <span class="stringliteral">&quot;%*suid = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr2.html#a9f7c0a909f3c26f7f1e60b6fa12adfa0">uid</a>);
<a name="l00718"></a>00718       fprintf(out_stream, <span class="stringliteral">&quot;%*sgid = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr2.html#a7bf5ad8c527e242ecda06b5d184dab76">gid</a>);
<a name="l00719"></a>00719       fprintf(out_stream, <span class="stringliteral">&quot;%*ssize = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr2.html#a3731145df992668c56411b8a874f33ea">size</a>);
<a name="l00720"></a>00720       fprintf(out_stream, <span class="stringliteral">&quot;%*sblocksize = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr2.html#a19dffd82452858fa35e1471900e83c3f">blocksize</a>);
<a name="l00721"></a>00721       fprintf(out_stream, <span class="stringliteral">&quot;%*srdev = %hu.%hu\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l00722"></a>00722               (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)(p_fattr-&gt;<a class="code" href="structfattr2.html#a453f24d6106c23ba7c777bbe20c78715">rdev</a> &gt;&gt; 16), (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)p_fattr-&gt;<a class="code" href="structfattr2.html#a453f24d6106c23ba7c777bbe20c78715">rdev</a>);
<a name="l00723"></a>00723       fprintf(out_stream, <span class="stringliteral">&quot;%*sblocks = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr2.html#a1318ea9e13e704ff456bca95f1708ec2">blocks</a>);
<a name="l00724"></a>00724       fprintf(out_stream, <span class="stringliteral">&quot;%*sfsid = %#x\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr2.html#a621ff1fbbdf1401fd230e4f9cd712545">fsid</a>);
<a name="l00725"></a>00725       fprintf(out_stream, <span class="stringliteral">&quot;%*sfileid = %#x\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr2.html#a95d6c001cea7584c5ffa10369f0cf73a">fileid</a>);
<a name="l00726"></a>00726 
<a name="l00727"></a>00727       strftime(tmp_buff, 256, <span class="stringliteral">&quot;%Y-%m-%d %T&quot;</span>,
<a name="l00728"></a>00728                <a class="code" href="log__functions_8c.html#a61fa1aca88aec5370822f995ded637b3">Localtime_r</a>((time_t *) &amp; p_fattr-&gt;<a class="code" href="structfattr2.html#ab481943e3280f2ab1baea21090fb6beb">atime</a>.<a class="code" href="structnfstime2.html#a31317a2746da0753ebad22071c3b388c">seconds</a>, &amp;paramtm));
<a name="l00729"></a>00729       fprintf(out_stream, <span class="stringliteral">&quot;%*satime = %u.%.6u (%s)\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l00730"></a>00730               p_fattr-&gt;<a class="code" href="structfattr2.html#ab481943e3280f2ab1baea21090fb6beb">atime</a>.<a class="code" href="structnfstime2.html#a31317a2746da0753ebad22071c3b388c">seconds</a>, p_fattr-&gt;<a class="code" href="structfattr2.html#ab481943e3280f2ab1baea21090fb6beb">atime</a>.<a class="code" href="structnfstime2.html#a05324f8647614dd6b3428ce41c670846">useconds</a>, tmp_buff);
<a name="l00731"></a>00731 
<a name="l00732"></a>00732       strftime(tmp_buff, 256, <span class="stringliteral">&quot;%Y-%m-%d %T&quot;</span>,
<a name="l00733"></a>00733                <a class="code" href="log__functions_8c.html#a61fa1aca88aec5370822f995ded637b3">Localtime_r</a>((time_t *) &amp; p_fattr-&gt;<a class="code" href="structfattr2.html#adab8c94f23ce25de7a9aac39e9b6edeb">mtime</a>.<a class="code" href="structnfstime2.html#a31317a2746da0753ebad22071c3b388c">seconds</a>, &amp;paramtm));
<a name="l00734"></a>00734       fprintf(out_stream, <span class="stringliteral">&quot;%*smtime = %u.%.6u (%s)\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l00735"></a>00735               p_fattr-&gt;<a class="code" href="structfattr2.html#adab8c94f23ce25de7a9aac39e9b6edeb">mtime</a>.<a class="code" href="structnfstime2.html#a31317a2746da0753ebad22071c3b388c">seconds</a>, p_fattr-&gt;<a class="code" href="structfattr2.html#adab8c94f23ce25de7a9aac39e9b6edeb">mtime</a>.<a class="code" href="structnfstime2.html#a05324f8647614dd6b3428ce41c670846">useconds</a>, tmp_buff);
<a name="l00736"></a>00736 
<a name="l00737"></a>00737       strftime(tmp_buff, 256, <span class="stringliteral">&quot;%Y-%m-%d %T&quot;</span>,
<a name="l00738"></a>00738                <a class="code" href="log__functions_8c.html#a61fa1aca88aec5370822f995ded637b3">Localtime_r</a>((time_t *) &amp; p_fattr-&gt;<a class="code" href="structfattr2.html#ac0f70cf184f9ba521887997367d8d19d">ctime</a>.<a class="code" href="structnfstime2.html#a31317a2746da0753ebad22071c3b388c">seconds</a>, &amp;paramtm));
<a name="l00739"></a>00739       fprintf(out_stream, <span class="stringliteral">&quot;%*sctime = %u.%.6u (%s)\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l00740"></a>00740               p_fattr-&gt;<a class="code" href="structfattr2.html#ac0f70cf184f9ba521887997367d8d19d">ctime</a>.<a class="code" href="structnfstime2.html#a31317a2746da0753ebad22071c3b388c">seconds</a>, p_fattr-&gt;<a class="code" href="structfattr2.html#ac0f70cf184f9ba521887997367d8d19d">ctime</a>.<a class="code" href="structnfstime2.html#a05324f8647614dd6b3428ce41c670846">useconds</a>, tmp_buff);
<a name="l00741"></a>00741 
<a name="l00742"></a>00742       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00743"></a>00743 
<a name="l00744"></a>00744       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00745"></a>00745 
<a name="l00746"></a>00746       <span class="keywordflow">break</span>;
<a name="l00747"></a>00747 
<a name="l00748"></a>00748     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l00749"></a>00749 
<a name="l00751"></a>00751       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00752"></a>00752 
<a name="l00753"></a>00753       <span class="keywordflow">break</span>;
<a name="l00754"></a>00754 
<a name="l00755"></a>00755     <span class="keywordflow">default</span>:
<a name="l00756"></a>00756       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00757"></a>00757     }
<a name="l00758"></a>00758 
<a name="l00759"></a>00759 }
<a name="l00760"></a>00760 
<a name="l00761"></a><a class="code" href="cmd__nfstools_8c.html#aca15d9a77d0357d9dd8579f87586de84">00761</a> <span class="preprocessor">#define ATTR2_ATTRIBUTES( _p_attr2res ) ( (_p_attr2res)-&gt;ATTR2res_u.attributes )</span>
<a name="l00762"></a>00762 <span class="preprocessor"></span>
<a name="l00763"></a><a class="code" href="cmd__nfstools_8h.html#afca1770057ac630d3a4357846b5d4e85">00763</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#afca1770057ac630d3a4357846b5d4e85">cmdnfs_ATTR2res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00764"></a>00764                     <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00765"></a>00765                     <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00766"></a>00766 {
<a name="l00767"></a>00767   <a class="code" href="structATTR2res.html">ATTR2res</a> *p_attr2res = (<a class="code" href="structATTR2res.html">ATTR2res</a> *) p_nfs_struct;
<a name="l00768"></a>00768 
<a name="l00769"></a>00769   <span class="comment">/* sanity check */</span>
<a name="l00770"></a>00770   <span class="keywordflow">if</span>(p_attr2res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00771"></a>00771     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00772"></a>00772 
<a name="l00773"></a>00773   <span class="keywordflow">switch</span> (encodeflag)
<a name="l00774"></a>00774     {
<a name="l00775"></a>00775     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l00776"></a>00776 
<a name="l00777"></a>00777       fprintf(out_stream, <span class="stringliteral">&quot;%*sATTR2res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00778"></a>00778       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00779"></a>00779 
<a name="l00780"></a>00780       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a0ea9754e3cf3eb6843ed71a20430b663">cmdnfs_nfsstat2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l00781"></a>00781                          (caddr_t) &amp; p_attr2res-&gt;<a class="code" href="structATTR2res.html#a24383705e32232f48d228aaf36dfd867">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00782"></a>00782         {
<a name="l00783"></a>00783           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00784"></a>00784         }
<a name="l00785"></a>00785 
<a name="l00786"></a>00786       <span class="keywordflow">if</span>(p_attr2res-&gt;<a class="code" href="structATTR2res.html#a24383705e32232f48d228aaf36dfd867">status</a> == <a class="code" href="nfs23_8h.html#a7aa4ec59cb08c181dab1f366d0c06778ab31cf3caaf8dd2ab122a66434db73c96">NFS_OK</a>)
<a name="l00787"></a>00787         {
<a name="l00788"></a>00788           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a8c47e3ccd166d5afcca5f6e0a192e0a6">cmdnfs_fattr2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l00789"></a>00789                            (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#aca15d9a77d0357d9dd8579f87586de84">ATTR2_ATTRIBUTES</a>(p_attr2res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00790"></a>00790             {
<a name="l00791"></a>00791               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00792"></a>00792             }
<a name="l00793"></a>00793 
<a name="l00794"></a>00794         }
<a name="l00795"></a>00795 
<a name="l00796"></a>00796       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00797"></a>00797 
<a name="l00798"></a>00798       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00799"></a>00799 
<a name="l00800"></a>00800       <span class="keywordflow">break</span>;
<a name="l00801"></a>00801 
<a name="l00802"></a>00802     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l00803"></a>00803       <span class="comment">/* never encoded */</span>
<a name="l00804"></a>00804     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l00805"></a>00805       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l00806"></a>00806     <span class="keywordflow">default</span>:
<a name="l00807"></a>00807       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00808"></a>00808     }
<a name="l00809"></a>00809 
<a name="l00810"></a>00810 }
<a name="l00811"></a>00811 
<a name="l00812"></a>00812 <span class="preprocessor">#undef ATTR2_ATTRIBUTES</span>
<a name="l00813"></a>00813 <span class="preprocessor"></span>
<a name="l00814"></a><a class="code" href="cmd__nfstools_8c.html#a3370de208800df4df3f234d81a5347a4">00814</a> <span class="preprocessor">#define DIROP2_HANDLE( _p_dirop ) ( (_p_dirop)-&gt;DIROP2res_u.diropok.file )</span>
<a name="l00815"></a><a class="code" href="cmd__nfstools_8c.html#a6c910a050d7b9b48f23adeac9d68c2b3">00815</a> <span class="preprocessor"></span><span class="preprocessor">#define DIROP2_ATTRIBUTES( _p_dirop ) ( (_p_dirop)-&gt;DIROP2res_u.diropok.attributes )</span>
<a name="l00816"></a>00816 <span class="preprocessor"></span>
<a name="l00817"></a><a class="code" href="cmd__nfstools_8h.html#a3929e3eef3451c4877c808f4c0142e66">00817</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a3929e3eef3451c4877c808f4c0142e66">cmdnfs_DIROP2res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00818"></a>00818                      <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00819"></a>00819                      <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00820"></a>00820 {
<a name="l00821"></a>00821   <a class="code" href="structDIROP2res.html">DIROP2res</a> *p_dirop2res = (<a class="code" href="structDIROP2res.html">DIROP2res</a> *) p_nfs_struct;
<a name="l00822"></a>00822 
<a name="l00823"></a>00823   <span class="comment">/* sanity check */</span>
<a name="l00824"></a>00824   <span class="keywordflow">if</span>(p_dirop2res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00825"></a>00825     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00826"></a>00826 
<a name="l00827"></a>00827   <span class="keywordflow">switch</span> (encodeflag)
<a name="l00828"></a>00828     {
<a name="l00829"></a>00829     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l00830"></a>00830 
<a name="l00831"></a>00831       fprintf(out_stream, <span class="stringliteral">&quot;%*sDIROP2res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00832"></a>00832       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00833"></a>00833 
<a name="l00834"></a>00834       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a0ea9754e3cf3eb6843ed71a20430b663">cmdnfs_nfsstat2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l00835"></a>00835                          (caddr_t) &amp; p_dirop2res-&gt;<a class="code" href="structDIROP2res.html#a5a28bbdcf8e2dd570a748b587bf75064">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00836"></a>00836         {
<a name="l00837"></a>00837           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00838"></a>00838         }
<a name="l00839"></a>00839 
<a name="l00840"></a>00840       <span class="keywordflow">if</span>(p_dirop2res-&gt;<a class="code" href="structDIROP2res.html#a5a28bbdcf8e2dd570a748b587bf75064">status</a> == <a class="code" href="nfs23_8h.html#a7aa4ec59cb08c181dab1f366d0c06778ab31cf3caaf8dd2ab122a66434db73c96">NFS_OK</a>)
<a name="l00841"></a>00841         {
<a name="l00842"></a>00842           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a24c153a7561ff21d6c1748861c0e32fc">cmdnfs_fhandle2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l00843"></a>00843                              (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a3370de208800df4df3f234d81a5347a4">DIROP2_HANDLE</a>(p_dirop2res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00844"></a>00844             {
<a name="l00845"></a>00845               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00846"></a>00846             }
<a name="l00847"></a>00847 
<a name="l00848"></a>00848           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a8c47e3ccd166d5afcca5f6e0a192e0a6">cmdnfs_fattr2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l00849"></a>00849                            (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a6c910a050d7b9b48f23adeac9d68c2b3">DIROP2_ATTRIBUTES</a>(p_dirop2res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00850"></a>00850             {
<a name="l00851"></a>00851               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00852"></a>00852             }
<a name="l00853"></a>00853         }
<a name="l00854"></a>00854 
<a name="l00855"></a>00855       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00856"></a>00856 
<a name="l00857"></a>00857       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00858"></a>00858 
<a name="l00859"></a>00859       <span class="keywordflow">break</span>;
<a name="l00860"></a>00860 
<a name="l00861"></a>00861     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l00862"></a>00862       <span class="comment">/* never encoded */</span>
<a name="l00863"></a>00863     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l00864"></a>00864       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l00865"></a>00865     <span class="keywordflow">default</span>:
<a name="l00866"></a>00866       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00867"></a>00867     }
<a name="l00868"></a>00868 
<a name="l00869"></a>00869 }
<a name="l00870"></a>00870 
<a name="l00871"></a>00871 <span class="preprocessor">#undef DIROP2_HANDLE</span>
<a name="l00872"></a>00872 <span class="preprocessor"></span><span class="preprocessor">#undef DIROP2_ATTRIBUTES</span>
<a name="l00873"></a>00873 <span class="preprocessor"></span>
<a name="l00874"></a><a class="code" href="cmd__nfstools_8h.html#a8d0541c68723b6598125d5fb9490b8a3">00874</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a8d0541c68723b6598125d5fb9490b8a3">cmdnfs_diropargs2</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00875"></a>00875                       <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00876"></a>00876                       <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00877"></a>00877 {
<a name="l00878"></a>00878   <a class="code" href="structdiropargs2.html">diropargs2</a> *p_diropargs = (<a class="code" href="structdiropargs2.html">diropargs2</a> *) p_nfs_struct;
<a name="l00879"></a>00879 
<a name="l00880"></a>00880   <span class="comment">/* sanity check */</span>
<a name="l00881"></a>00881   <span class="keywordflow">if</span>(p_diropargs == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00882"></a>00882     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00883"></a>00883 
<a name="l00884"></a>00884   <span class="keywordflow">switch</span> (encodeflag)
<a name="l00885"></a>00885     {
<a name="l00886"></a>00886     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l00887"></a>00887 
<a name="l00888"></a>00888       <span class="keywordflow">if</span>(argc != 2)
<a name="l00889"></a>00889         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00890"></a>00890 
<a name="l00891"></a>00891       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a24c153a7561ff21d6c1748861c0e32fc">cmdnfs_fhandle2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 1, argv, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l00892"></a>00892                          (caddr_t) &amp; (p_diropargs-&gt;<a class="code" href="structdiropargs2.html#a623a75964ad3a212ef4be0ff9e45f488">dir</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00893"></a>00893         {
<a name="l00894"></a>00894           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00895"></a>00895         }
<a name="l00896"></a>00896 
<a name="l00897"></a>00897       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afa2a178837094076227dc6d941bfb66a">cmdnfs_dirpath</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 1, argv + 1, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l00898"></a>00898                         (caddr_t) &amp; (p_diropargs-&gt;<a class="code" href="structdiropargs2.html#ae178016e1700d6207942f7863c11e3b4">name</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00899"></a>00899         {
<a name="l00900"></a>00900           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00901"></a>00901         }
<a name="l00902"></a>00902 
<a name="l00903"></a>00903       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00904"></a>00904 
<a name="l00905"></a>00905     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l00906"></a>00906       <a class="code" href="cmd__nfstools_8c.html#a24c153a7561ff21d6c1748861c0e32fc">cmdnfs_fhandle2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_diropargs-&gt;<a class="code" href="structdiropargs2.html#a623a75964ad3a212ef4be0ff9e45f488">dir</a>));
<a name="l00907"></a>00907       <a class="code" href="cmd__nfstools_8c.html#afa2a178837094076227dc6d941bfb66a">cmdnfs_dirpath</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_diropargs-&gt;<a class="code" href="structdiropargs2.html#ae178016e1700d6207942f7863c11e3b4">name</a>));
<a name="l00908"></a>00908       <span class="keywordflow">break</span>;
<a name="l00909"></a>00909 
<a name="l00910"></a>00910     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l00911"></a>00911       <span class="comment">/* never decoded */</span>
<a name="l00912"></a>00912     <span class="keywordflow">default</span>:
<a name="l00913"></a>00913       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00914"></a>00914     }
<a name="l00915"></a>00915   <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00916"></a>00916 }
<a name="l00917"></a>00917 
<a name="l00918"></a><a class="code" href="cmd__nfstools_8c.html#a75944287fe5f432f274191d8ee00f135">00918</a> <span class="preprocessor">#define READLINKRES_PATH( _p_rl2res ) ( (_p_rl2res)-&gt;READLINK2res_u.data )</span>
<a name="l00919"></a>00919 <span class="preprocessor"></span>
<a name="l00920"></a><a class="code" href="cmd__nfstools_8h.html#ab94fa7416a1dfd4cdbbbbd0527842ae2">00920</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#ab94fa7416a1dfd4cdbbbbd0527842ae2">cmdnfs_READLINK2res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00921"></a>00921                         <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00922"></a>00922                         <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00923"></a>00923 {
<a name="l00924"></a>00924 
<a name="l00925"></a>00925   <a class="code" href="structREADLINK2res.html">READLINK2res</a> *p_rl2res = (<a class="code" href="structREADLINK2res.html">READLINK2res</a> *) p_nfs_struct;
<a name="l00926"></a>00926 
<a name="l00927"></a>00927   <span class="comment">/* sanity check */</span>
<a name="l00928"></a>00928   <span class="keywordflow">if</span>(p_rl2res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00929"></a>00929     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00930"></a>00930 
<a name="l00931"></a>00931   <span class="keywordflow">switch</span> (encodeflag)
<a name="l00932"></a>00932     {
<a name="l00933"></a>00933     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l00934"></a>00934 
<a name="l00935"></a>00935       fprintf(out_stream, <span class="stringliteral">&quot;%*sREADLINK2res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00936"></a>00936       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00937"></a>00937 
<a name="l00938"></a>00938       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a0ea9754e3cf3eb6843ed71a20430b663">cmdnfs_nfsstat2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l00939"></a>00939                          (caddr_t) &amp; p_rl2res-&gt;<a class="code" href="structREADLINK2res.html#ab8052cdfb8b39f9e07cac6288643124c">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l00940"></a>00940         {
<a name="l00941"></a>00941           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00942"></a>00942         }
<a name="l00943"></a>00943 
<a name="l00944"></a>00944       <span class="keywordflow">if</span>(p_rl2res-&gt;<a class="code" href="structREADLINK2res.html#ab8052cdfb8b39f9e07cac6288643124c">status</a> == <a class="code" href="nfs23_8h.html#a7aa4ec59cb08c181dab1f366d0c06778ab31cf3caaf8dd2ab122a66434db73c96">NFS_OK</a>)
<a name="l00945"></a>00945         {
<a name="l00946"></a>00946           fprintf(out_stream, <span class="stringliteral">&quot;%*sdata = \&quot;%s\&quot;\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l00947"></a>00947                   <a class="code" href="cmd__nfstools_8c.html#a75944287fe5f432f274191d8ee00f135">READLINKRES_PATH</a>(p_rl2res));
<a name="l00948"></a>00948         }
<a name="l00949"></a>00949 
<a name="l00950"></a>00950       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00951"></a>00951 
<a name="l00952"></a>00952       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00953"></a>00953 
<a name="l00954"></a>00954       <span class="keywordflow">break</span>;
<a name="l00955"></a>00955 
<a name="l00956"></a>00956     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l00957"></a>00957       <span class="comment">/* never encoded */</span>
<a name="l00958"></a>00958     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l00959"></a>00959       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l00960"></a>00960     <span class="keywordflow">default</span>:
<a name="l00961"></a>00961       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00962"></a>00962     }
<a name="l00963"></a>00963 
<a name="l00964"></a>00964 }
<a name="l00965"></a>00965 
<a name="l00966"></a>00966 <span class="preprocessor">#undef READLINKRES_PATH</span>
<a name="l00967"></a>00967 <span class="preprocessor"></span>
<a name="l00968"></a><a class="code" href="cmd__nfstools_8h.html#a589d61f0388fa907557e11b42af20d22">00968</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a589d61f0388fa907557e11b42af20d22">cmdnfs_sattr2</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l00969"></a>00969                   <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l00970"></a>00970                   <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l00971"></a>00971 {
<a name="l00972"></a>00972 
<a name="l00973"></a>00973   <a class="code" href="structsattr2.html">sattr2</a> *p_sattr2 = (<a class="code" href="structsattr2.html">sattr2</a> *) p_nfs_struct;
<a name="l00974"></a>00974 
<a name="l00975"></a>00975   <span class="keywordtype">char</span> *next_str = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00976"></a>00976   <span class="keywordtype">char</span> *attrib_str;
<a name="l00977"></a>00977   <span class="keywordtype">char</span> *value_str;
<a name="l00978"></a>00978 
<a name="l00979"></a>00979   <span class="keywordtype">int</span> mode, userid, groupid, rc;
<a name="l00980"></a>00980   time_t a_sec, m_sec;
<a name="l00981"></a>00981   <span class="keywordtype">int</span> a_usec, m_usec;
<a name="l00982"></a>00982   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> size;
<a name="l00983"></a>00983   <span class="keywordtype">char</span> *usec_str;
<a name="l00984"></a>00984   <span class="keywordtype">char</span> *time_str;
<a name="l00985"></a>00985 
<a name="l00986"></a>00986   <span class="keywordtype">char</span> tmp_buff[1024];
<a name="l00987"></a>00987 
<a name="l00988"></a>00988   <span class="comment">/* sanity check */</span>
<a name="l00989"></a>00989   <span class="keywordflow">if</span>(p_sattr2 == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00990"></a>00990     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00991"></a>00991 
<a name="l00992"></a>00992   <span class="keywordflow">switch</span> (encodeflag)
<a name="l00993"></a>00993     {
<a name="l00994"></a>00994     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l00995"></a>00995 
<a name="l00996"></a>00996       <span class="comment">/* inits structure */</span>
<a name="l00997"></a>00997 
<a name="l00998"></a>00998       p_sattr2-&gt;<a class="code" href="structsattr2.html#adb52724853bbde621876cca1cb95d25a">mode</a> = (<span class="keywordtype">unsigned</span> int)-1;
<a name="l00999"></a>00999       p_sattr2-&gt;<a class="code" href="structsattr2.html#a062a82ca989d349519aa9d9b50b5e374">uid</a> = (<span class="keywordtype">unsigned</span> int)-1;
<a name="l01000"></a>01000       p_sattr2-&gt;<a class="code" href="structsattr2.html#a328f8a6a03dc44b9ff51b69537526418">gid</a> = (<span class="keywordtype">unsigned</span> int)-1;
<a name="l01001"></a>01001       p_sattr2-&gt;<a class="code" href="structsattr2.html#af3311a906e9803943707c885dda9320c">size</a> = (<span class="keywordtype">unsigned</span> int)-1;
<a name="l01002"></a>01002       p_sattr2-&gt;<a class="code" href="structsattr2.html#a52dd4d219af2e7082878820c0b719ff1">atime</a>.<a class="code" href="structnfstime2.html#a31317a2746da0753ebad22071c3b388c">seconds</a> = (<span class="keywordtype">unsigned</span> int)-1;
<a name="l01003"></a>01003       p_sattr2-&gt;<a class="code" href="structsattr2.html#a52dd4d219af2e7082878820c0b719ff1">atime</a>.<a class="code" href="structnfstime2.html#a05324f8647614dd6b3428ce41c670846">useconds</a> = (<span class="keywordtype">unsigned</span> int)-1;
<a name="l01004"></a>01004       p_sattr2-&gt;<a class="code" href="structsattr2.html#a237a24fb9141d2b452b317ee7b9d1188">mtime</a>.<a class="code" href="structnfstime2.html#a31317a2746da0753ebad22071c3b388c">seconds</a> = (<span class="keywordtype">unsigned</span> int)-1;
<a name="l01005"></a>01005       p_sattr2-&gt;<a class="code" href="structsattr2.html#a237a24fb9141d2b452b317ee7b9d1188">mtime</a>.<a class="code" href="structnfstime2.html#a05324f8647614dd6b3428ce41c670846">useconds</a> = (<span class="keywordtype">unsigned</span> int)-1;
<a name="l01006"></a>01006 
<a name="l01007"></a>01007       <span class="keywordflow">if</span>(argc == 0)
<a name="l01008"></a>01008         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01009"></a>01009 
<a name="l01010"></a>01010       <span class="comment">/* at this point it must not be more than one string */</span>
<a name="l01011"></a>01011       <span class="keywordflow">if</span>(argc != 1)
<a name="l01012"></a>01012         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01013"></a>01013 
<a name="l01014"></a>01014       <span class="comment">/* the attributes are:</span>
<a name="l01015"></a>01015 <span class="comment">       * mode, uid, gid, size, atime, mtime</span>
<a name="l01016"></a>01016 <span class="comment">       */</span>
<a name="l01017"></a>01017       strncpy(tmp_buff, argv[0], 1024);
<a name="l01018"></a>01018 
<a name="l01019"></a>01019       attrib_str = strtok_r(tmp_buff, <span class="stringliteral">&quot;,&quot;</span>, &amp;next_str);
<a name="l01020"></a>01020 
<a name="l01021"></a>01021       <span class="keywordflow">if</span>(attrib_str == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01022"></a>01022         {
<a name="l01023"></a>01023 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01024"></a>01024 <span class="preprocessor"></span>          printf(<span class="stringliteral">&quot;Unexpected parsing error.\n&quot;</span>);
<a name="l01025"></a>01025 <span class="preprocessor">#endif</span>
<a name="l01026"></a>01026 <span class="preprocessor"></span>          <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01027"></a>01027         }
<a name="l01028"></a>01028 
<a name="l01029"></a>01029       <span class="keywordflow">while</span>(attrib_str != <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01030"></a>01030         {
<a name="l01031"></a>01031 
<a name="l01032"></a>01032           <span class="comment">/* retrieving attribute name and value */</span>
<a name="l01033"></a>01033           attrib_str = strtok_r(attrib_str, <span class="stringliteral">&quot;=&quot;</span>, &amp;value_str);
<a name="l01034"></a>01034 
<a name="l01035"></a>01035           <span class="keywordflow">if</span>((attrib_str == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) || (value_str == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))
<a name="l01036"></a>01036             {
<a name="l01037"></a>01037 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01038"></a>01038 <span class="preprocessor"></span>              printf
<a name="l01039"></a>01039                   (<span class="stringliteral">&quot;Syntax error for sattr2.\nExpected syntax: &lt;attr&gt;=&lt;value&gt;,&lt;attr&gt;=&lt;value&gt;,...\n&quot;</span>);
<a name="l01040"></a>01040 <span class="preprocessor">#endif</span>
<a name="l01041"></a>01041 <span class="preprocessor"></span>              <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01042"></a>01042             }
<a name="l01043"></a>01043 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01044"></a>01044 <span class="preprocessor"></span>          printf(<span class="stringliteral">&quot;Attribute: \&quot;%s\&quot;, Value: \&quot;%s\&quot;\n&quot;</span>, attrib_str, value_str);
<a name="l01045"></a>01045 <span class="preprocessor">#endif</span>
<a name="l01046"></a>01046 <span class="preprocessor"></span>
<a name="l01047"></a>01047           <span class="keywordflow">if</span>(!strcasecmp(attrib_str, <span class="stringliteral">&quot;mode&quot;</span>))
<a name="l01048"></a>01048             {
<a name="l01049"></a>01049               mode = <a class="code" href="cmd__tools_8c.html#a0dcb2075e79b984f98f9b7cd729c5724">atomode</a>(value_str);
<a name="l01050"></a>01050               <span class="keywordflow">if</span>(mode &lt; 0)
<a name="l01051"></a>01051                 <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01052"></a>01052               p_sattr2-&gt;<a class="code" href="structsattr2.html#adb52724853bbde621876cca1cb95d25a">mode</a> = (<span class="keywordtype">unsigned</span> int)mode;
<a name="l01053"></a>01053 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01054"></a>01054 <span class="preprocessor"></span>              printf(<span class="stringliteral">&quot;  mode = 0%o\n&quot;</span>, p_sattr2-&gt;<a class="code" href="structsattr2.html#adb52724853bbde621876cca1cb95d25a">mode</a>);
<a name="l01055"></a>01055 <span class="preprocessor">#endif</span>
<a name="l01056"></a>01056 <span class="preprocessor"></span>            }
<a name="l01057"></a>01057           <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcasecmp(attrib_str, <span class="stringliteral">&quot;uid&quot;</span>))
<a name="l01058"></a>01058             {
<a name="l01059"></a>01059               userid = <a class="code" href="cmd__tools_8c.html#a688b18dd9abbd7f9b3bab90531c0a066">my_atoi</a>(value_str);
<a name="l01060"></a>01060               <span class="keywordflow">if</span>(userid &lt; 0)
<a name="l01061"></a>01061                 <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01062"></a>01062               p_sattr2-&gt;<a class="code" href="structsattr2.html#a062a82ca989d349519aa9d9b50b5e374">uid</a> = (<span class="keywordtype">unsigned</span> int)userid;
<a name="l01063"></a>01063 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01064"></a>01064 <span class="preprocessor"></span>              printf(<span class="stringliteral">&quot;  uid = %u\n&quot;</span>, p_sattr2-&gt;<a class="code" href="structsattr2.html#a062a82ca989d349519aa9d9b50b5e374">uid</a>);
<a name="l01065"></a>01065 <span class="preprocessor">#endif</span>
<a name="l01066"></a>01066 <span class="preprocessor"></span>            }
<a name="l01067"></a>01067           <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcasecmp(attrib_str, <span class="stringliteral">&quot;gid&quot;</span>))
<a name="l01068"></a>01068             {
<a name="l01069"></a>01069               groupid = <a class="code" href="cmd__tools_8c.html#a688b18dd9abbd7f9b3bab90531c0a066">my_atoi</a>(value_str);
<a name="l01070"></a>01070               <span class="keywordflow">if</span>(groupid &lt; 0)
<a name="l01071"></a>01071                 <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01072"></a>01072               p_sattr2-&gt;<a class="code" href="structsattr2.html#a328f8a6a03dc44b9ff51b69537526418">gid</a> = (<span class="keywordtype">unsigned</span> int)groupid;
<a name="l01073"></a>01073 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01074"></a>01074 <span class="preprocessor"></span>              printf(<span class="stringliteral">&quot;  gid = %u\n&quot;</span>, p_sattr2-&gt;<a class="code" href="structsattr2.html#a328f8a6a03dc44b9ff51b69537526418">gid</a>);
<a name="l01075"></a>01075 <span class="preprocessor">#endif</span>
<a name="l01076"></a>01076 <span class="preprocessor"></span>            }
<a name="l01077"></a>01077           <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcasecmp(attrib_str, <span class="stringliteral">&quot;size&quot;</span>))
<a name="l01078"></a>01078             {
<a name="l01079"></a>01079               rc = <a class="code" href="cmd__tools_8c.html#a6e4bec3955f66ac34221da2c4117595f">ato64</a>(value_str, &amp;size);
<a name="l01080"></a>01080               <span class="keywordflow">if</span>(rc)
<a name="l01081"></a>01081                 <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01082"></a>01082               <span class="keywordflow">if</span>(size &gt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)UINT_MAX)
<a name="l01083"></a>01083                 <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01084"></a>01084               p_sattr2-&gt;<a class="code" href="structsattr2.html#af3311a906e9803943707c885dda9320c">size</a> = (<span class="keywordtype">unsigned</span> int)size;
<a name="l01085"></a>01085 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01086"></a>01086 <span class="preprocessor"></span>              printf(<span class="stringliteral">&quot;  size = %u\n&quot;</span>, p_sattr2-&gt;<a class="code" href="structsattr2.html#af3311a906e9803943707c885dda9320c">size</a>);
<a name="l01087"></a>01087 <span class="preprocessor">#endif</span>
<a name="l01088"></a>01088 <span class="preprocessor"></span>            }
<a name="l01089"></a>01089           <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcasecmp(attrib_str, <span class="stringliteral">&quot;atime&quot;</span>))
<a name="l01090"></a>01090             {
<a name="l01091"></a>01091               time_str = strtok_r(value_str, <span class="stringliteral">&quot;.&quot;</span>, &amp;usec_str);
<a name="l01092"></a>01092 
<a name="l01093"></a>01093               a_sec = <a class="code" href="cmd__tools_8c.html#a3663a6a631535306a284cfc4e5e00916">atotime</a>(time_str);
<a name="l01094"></a>01094               <span class="keywordflow">if</span>(a_sec == ((time_t) - 1))
<a name="l01095"></a>01095                 <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01096"></a>01096 
<a name="l01097"></a>01097               <span class="keywordflow">if</span>(usec_str == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01098"></a>01098                 {
<a name="l01099"></a>01099                   a_usec = 0;
<a name="l01100"></a>01100                 }
<a name="l01101"></a>01101               <span class="keywordflow">else</span>
<a name="l01102"></a>01102                 {
<a name="l01103"></a>01103                   a_usec = <a class="code" href="cmd__tools_8c.html#a688b18dd9abbd7f9b3bab90531c0a066">my_atoi</a>(usec_str);
<a name="l01104"></a>01104                   <span class="comment">/* 1 million is authorized and is interpreted by server as a &quot;set to server time&quot; */</span>
<a name="l01105"></a>01105                   <span class="keywordflow">if</span>((a_usec &lt; 0) || (a_usec &gt; 1000000))
<a name="l01106"></a>01106                     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01107"></a>01107                 }
<a name="l01108"></a>01108               p_sattr2-&gt;<a class="code" href="structsattr2.html#a52dd4d219af2e7082878820c0b719ff1">atime</a>.<a class="code" href="structnfstime2.html#a31317a2746da0753ebad22071c3b388c">seconds</a> = (<span class="keywordtype">unsigned</span> int)a_sec;
<a name="l01109"></a>01109               p_sattr2-&gt;<a class="code" href="structsattr2.html#a52dd4d219af2e7082878820c0b719ff1">atime</a>.<a class="code" href="structnfstime2.html#a05324f8647614dd6b3428ce41c670846">useconds</a> = (<span class="keywordtype">unsigned</span> int)a_usec;
<a name="l01110"></a>01110 
<a name="l01111"></a>01111 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01112"></a>01112 <span class="preprocessor"></span>              printf(<span class="stringliteral">&quot;  atime = %u.%.6u\n&quot;</span>, p_sattr2-&gt;<a class="code" href="structsattr2.html#a52dd4d219af2e7082878820c0b719ff1">atime</a>.<a class="code" href="structnfstime2.html#a31317a2746da0753ebad22071c3b388c">seconds</a>,
<a name="l01113"></a>01113                      p_sattr-&gt;atime.useconds);
<a name="l01114"></a>01114 <span class="preprocessor">#endif</span>
<a name="l01115"></a>01115 <span class="preprocessor"></span>            }
<a name="l01116"></a>01116           <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcasecmp(attrib_str, <span class="stringliteral">&quot;mtime&quot;</span>))
<a name="l01117"></a>01117             {
<a name="l01118"></a>01118               time_str = strtok_r(value_str, <span class="stringliteral">&quot;.&quot;</span>, &amp;usec_str);
<a name="l01119"></a>01119 
<a name="l01120"></a>01120               m_sec = <a class="code" href="cmd__tools_8c.html#a3663a6a631535306a284cfc4e5e00916">atotime</a>(time_str);
<a name="l01121"></a>01121               <span class="keywordflow">if</span>(m_sec == ((time_t) - 1))
<a name="l01122"></a>01122                 <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01123"></a>01123 
<a name="l01124"></a>01124               <span class="keywordflow">if</span>(usec_str == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01125"></a>01125                 {
<a name="l01126"></a>01126                   m_usec = 0;
<a name="l01127"></a>01127                 }
<a name="l01128"></a>01128               <span class="keywordflow">else</span>
<a name="l01129"></a>01129                 {
<a name="l01130"></a>01130                   m_usec = <a class="code" href="cmd__tools_8c.html#a688b18dd9abbd7f9b3bab90531c0a066">my_atoi</a>(usec_str);
<a name="l01131"></a>01131                   <span class="comment">/* 1 million is authorized and is interpreted by server as a &quot;set to server time&quot; */</span>
<a name="l01132"></a>01132                   <span class="keywordflow">if</span>((m_usec &lt; 0) || (m_usec &gt; 1000000))
<a name="l01133"></a>01133                     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01134"></a>01134                 }
<a name="l01135"></a>01135               p_sattr2-&gt;<a class="code" href="structsattr2.html#a237a24fb9141d2b452b317ee7b9d1188">mtime</a>.<a class="code" href="structnfstime2.html#a31317a2746da0753ebad22071c3b388c">seconds</a> = (<span class="keywordtype">unsigned</span> int)m_sec;
<a name="l01136"></a>01136               p_sattr2-&gt;<a class="code" href="structsattr2.html#a237a24fb9141d2b452b317ee7b9d1188">mtime</a>.<a class="code" href="structnfstime2.html#a05324f8647614dd6b3428ce41c670846">useconds</a> = (<span class="keywordtype">unsigned</span> int)m_usec;
<a name="l01137"></a>01137 
<a name="l01138"></a>01138 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01139"></a>01139 <span class="preprocessor"></span>              printf(<span class="stringliteral">&quot;  mtime = %u.%.6u\n&quot;</span>, p_sattr2-&gt;<a class="code" href="structsattr2.html#a237a24fb9141d2b452b317ee7b9d1188">mtime</a>.<a class="code" href="structnfstime2.html#a31317a2746da0753ebad22071c3b388c">seconds</a>,
<a name="l01140"></a>01140                      p_sattr-&gt;mtime.useconds);
<a name="l01141"></a>01141 <span class="preprocessor">#endif</span>
<a name="l01142"></a>01142 <span class="preprocessor"></span>            }
<a name="l01143"></a>01143           <span class="keywordflow">else</span>
<a name="l01144"></a>01144             {
<a name="l01145"></a>01145 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01146"></a>01146 <span class="preprocessor"></span>              printf
<a name="l01147"></a>01147                   (<span class="stringliteral">&quot;Syntax error for sattr2.\n&lt;attr&gt; must be one of the following: mode, uid, gid, size, atime, mtime.\n&quot;</span>);
<a name="l01148"></a>01148 <span class="preprocessor">#endif</span>
<a name="l01149"></a>01149 <span class="preprocessor"></span>              <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01150"></a>01150             }
<a name="l01151"></a>01151 
<a name="l01152"></a>01152           attrib_str = next_str;
<a name="l01153"></a>01153 
<a name="l01154"></a>01154           next_str = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;      <span class="comment">/* paranoid setting */</span>
<a name="l01155"></a>01155           value_str = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;     <span class="comment">/* paranoid setting */</span>
<a name="l01156"></a>01156 
<a name="l01157"></a>01157           <span class="keywordflow">if</span>(attrib_str != <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01158"></a>01158             attrib_str = strtok_r(attrib_str, <span class="stringliteral">&quot;,&quot;</span>, &amp;next_str);
<a name="l01159"></a>01159 
<a name="l01160"></a>01160         }
<a name="l01161"></a>01161 
<a name="l01162"></a>01162       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01163"></a>01163 
<a name="l01164"></a>01164     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l01165"></a>01165       <span class="comment">/* nothing to do */</span>
<a name="l01166"></a>01166       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01167"></a>01167       <span class="keywordflow">break</span>;
<a name="l01168"></a>01168 
<a name="l01169"></a>01169     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l01170"></a>01170       <span class="comment">/* never decoded */</span>
<a name="l01171"></a>01171     <span class="keywordflow">default</span>:
<a name="l01172"></a>01172       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01173"></a>01173     }
<a name="l01174"></a>01174 
<a name="l01175"></a>01175 }
<a name="l01176"></a>01176 
<a name="l01177"></a><a class="code" href="cmd__nfstools_8h.html#a331aae7bbe0965b8d8e58df83ca5cee0">01177</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a331aae7bbe0965b8d8e58df83ca5cee0">cmdnfs_CREATE2args</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l01178"></a>01178                        <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l01179"></a>01179                        <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l01180"></a>01180 {
<a name="l01181"></a>01181   <a class="code" href="structCREATE2args.html">CREATE2args</a> *p_create2args = (<a class="code" href="structCREATE2args.html">CREATE2args</a> *) p_nfs_struct;
<a name="l01182"></a>01182 
<a name="l01183"></a>01183   <span class="comment">/* sanity check */</span>
<a name="l01184"></a>01184   <span class="keywordflow">if</span>(p_create2args == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01185"></a>01185     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01186"></a>01186 
<a name="l01187"></a>01187   <span class="keywordflow">switch</span> (encodeflag)
<a name="l01188"></a>01188     {
<a name="l01189"></a>01189     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l01190"></a>01190 
<a name="l01191"></a>01191       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a8d0541c68723b6598125d5fb9490b8a3">cmdnfs_diropargs2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 2, argv, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l01192"></a>01192                            (caddr_t) &amp; (p_create2args-&gt;<a class="code" href="structCREATE2args.html#ab5778340c31c868e4bcc58d8ffd2f1a7">where</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01193"></a>01193         {
<a name="l01194"></a>01194           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01195"></a>01195         }
<a name="l01196"></a>01196 
<a name="l01197"></a>01197       <span class="comment">/* optional sattr2 parameters */</span>
<a name="l01198"></a>01198       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a589d61f0388fa907557e11b42af20d22">cmdnfs_sattr2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, argc - 2, argv + 2, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l01199"></a>01199                        (caddr_t) &amp; (p_create2args-&gt;<a class="code" href="structCREATE2args.html#a82b45b33d748c87c559bf7ba0203a4d3">attributes</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01200"></a>01200         {
<a name="l01201"></a>01201           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01202"></a>01202         }
<a name="l01203"></a>01203 
<a name="l01204"></a>01204       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01205"></a>01205 
<a name="l01206"></a>01206     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l01207"></a>01207       <a class="code" href="cmd__nfstools_8c.html#a8d0541c68723b6598125d5fb9490b8a3">cmdnfs_diropargs2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l01208"></a>01208                         (caddr_t) &amp; (p_create2args-&gt;<a class="code" href="structCREATE2args.html#ab5778340c31c868e4bcc58d8ffd2f1a7">where</a>));
<a name="l01209"></a>01209       <a class="code" href="cmd__nfstools_8c.html#a589d61f0388fa907557e11b42af20d22">cmdnfs_sattr2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l01210"></a>01210                     (caddr_t) &amp; (p_create2args-&gt;<a class="code" href="structCREATE2args.html#a82b45b33d748c87c559bf7ba0203a4d3">attributes</a>));
<a name="l01211"></a>01211       <span class="keywordflow">break</span>;
<a name="l01212"></a>01212 
<a name="l01213"></a>01213     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l01214"></a>01214       <span class="comment">/* never decoded */</span>
<a name="l01215"></a>01215     <span class="keywordflow">default</span>:
<a name="l01216"></a>01216       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01217"></a>01217     }
<a name="l01218"></a>01218   <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01219"></a>01219 }
<a name="l01220"></a>01220 
<a name="l01221"></a><a class="code" href="cmd__nfstools_8h.html#ad14a256f4f23189d637fbe5ac905c2c9">01221</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#ad14a256f4f23189d637fbe5ac905c2c9">cmdnfs_SETATTR2args</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l01222"></a>01222                         <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l01223"></a>01223                         <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l01224"></a>01224 {
<a name="l01225"></a>01225   <a class="code" href="structSETATTR2args.html">SETATTR2args</a> *p_SETATTR2args = (<a class="code" href="structSETATTR2args.html">SETATTR2args</a> *) p_nfs_struct;
<a name="l01226"></a>01226 
<a name="l01227"></a>01227   <span class="comment">/* sanity check */</span>
<a name="l01228"></a>01228   <span class="keywordflow">if</span>(p_SETATTR2args == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01229"></a>01229     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01230"></a>01230 
<a name="l01231"></a>01231   <span class="keywordflow">switch</span> (encodeflag)
<a name="l01232"></a>01232     {
<a name="l01233"></a>01233     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l01234"></a>01234 
<a name="l01235"></a>01235       <span class="keywordflow">if</span>(argc != 2)
<a name="l01236"></a>01236         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01237"></a>01237 
<a name="l01238"></a>01238       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a24c153a7561ff21d6c1748861c0e32fc">cmdnfs_fhandle2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 1, argv, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l01239"></a>01239                          (caddr_t) &amp; (p_SETATTR2args-&gt;<a class="code" href="structSETATTR2args.html#a6cc70676659dfeacd0e167fe3712f1b3">file</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01240"></a>01240         {
<a name="l01241"></a>01241           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01242"></a>01242         }
<a name="l01243"></a>01243 
<a name="l01244"></a>01244       <span class="comment">/* mandatory sattr2 parameter */</span>
<a name="l01245"></a>01245       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a589d61f0388fa907557e11b42af20d22">cmdnfs_sattr2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, argc - 1, argv + 1, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l01246"></a>01246                        (caddr_t) &amp; (p_SETATTR2args-&gt;<a class="code" href="structSETATTR2args.html#adb3dea778ecd27d506ecfbfa4f8a300a">attributes</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01247"></a>01247         {
<a name="l01248"></a>01248           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01249"></a>01249         }
<a name="l01250"></a>01250 
<a name="l01251"></a>01251       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01252"></a>01252 
<a name="l01253"></a>01253     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l01254"></a>01254       <a class="code" href="cmd__nfstools_8c.html#a24c153a7561ff21d6c1748861c0e32fc">cmdnfs_fhandle2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_SETATTR2args-&gt;<a class="code" href="structSETATTR2args.html#a6cc70676659dfeacd0e167fe3712f1b3">file</a>));
<a name="l01255"></a>01255       <a class="code" href="cmd__nfstools_8c.html#a589d61f0388fa907557e11b42af20d22">cmdnfs_sattr2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l01256"></a>01256                     (caddr_t) &amp; (p_SETATTR2args-&gt;<a class="code" href="structSETATTR2args.html#adb3dea778ecd27d506ecfbfa4f8a300a">attributes</a>));
<a name="l01257"></a>01257       <span class="keywordflow">break</span>;
<a name="l01258"></a>01258 
<a name="l01259"></a>01259     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l01260"></a>01260       <span class="comment">/* never decoded */</span>
<a name="l01261"></a>01261     <span class="keywordflow">default</span>:
<a name="l01262"></a>01262       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01263"></a>01263     }
<a name="l01264"></a>01264   <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01265"></a>01265 }
<a name="l01266"></a>01266 
<a name="l01267"></a><a class="code" href="cmd__nfstools_8h.html#a81bc302ef1af84fba6094863c5414729">01267</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a81bc302ef1af84fba6094863c5414729">cmdnfs_READDIR2args</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l01268"></a>01268                         <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l01269"></a>01269                         <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l01270"></a>01270 {
<a name="l01271"></a>01271   caddr_t p_cookie;
<a name="l01272"></a>01272   <span class="keywordtype">int</span> count;
<a name="l01273"></a>01273   <span class="keywordtype">int</span> cookie;
<a name="l01274"></a>01274   <a class="code" href="structREADDIR2args.html">READDIR2args</a> *p_READDIR2args = (<a class="code" href="structREADDIR2args.html">READDIR2args</a> *) p_nfs_struct;
<a name="l01275"></a>01275 
<a name="l01276"></a>01276   <span class="comment">/* sanity check */</span>
<a name="l01277"></a>01277   <span class="keywordflow">if</span>(p_READDIR2args == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01278"></a>01278     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01279"></a>01279 
<a name="l01280"></a>01280   <span class="keywordflow">switch</span> (encodeflag)
<a name="l01281"></a>01281     {
<a name="l01282"></a>01282     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l01283"></a>01283 
<a name="l01284"></a>01284       <span class="keywordflow">if</span>(argc != 3)
<a name="l01285"></a>01285         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01286"></a>01286 
<a name="l01287"></a>01287       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a24c153a7561ff21d6c1748861c0e32fc">cmdnfs_fhandle2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 1, argv, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l01288"></a>01288                          (caddr_t) &amp; (p_READDIR2args-&gt;<a class="code" href="structREADDIR2args.html#a0d000aff5087bb3f5e30cf1695e78bba">dir</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01289"></a>01289         {
<a name="l01290"></a>01290           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01291"></a>01291         }
<a name="l01292"></a>01292 
<a name="l01293"></a>01293       <span class="comment">/* cookie = 4 octets */</span>
<a name="l01294"></a>01294 
<a name="l01295"></a>01295       cookie = <a class="code" href="cmd__tools_8c.html#a688b18dd9abbd7f9b3bab90531c0a066">my_atoi</a>(argv[1]);
<a name="l01296"></a>01296       <span class="keywordflow">if</span>(cookie &lt; 0)
<a name="l01297"></a>01297         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01298"></a>01298       p_cookie = (caddr_t) &amp; (p_READDIR2args-&gt;<a class="code" href="structREADDIR2args.html#a8378d8b4c2cd91ef5cc5e8e810ed77db">cookie</a>);
<a name="l01299"></a>01299 
<a name="l01300"></a>01300       memcpy(p_cookie, &amp;cookie, 4);
<a name="l01301"></a>01301 
<a name="l01302"></a>01302       <span class="comment">/* count */</span>
<a name="l01303"></a>01303 
<a name="l01304"></a>01304       count = <a class="code" href="cmd__tools_8c.html#a688b18dd9abbd7f9b3bab90531c0a066">my_atoi</a>(argv[2]);
<a name="l01305"></a>01305       <span class="keywordflow">if</span>(count &lt; 0)
<a name="l01306"></a>01306         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01307"></a>01307       p_READDIR2args-&gt;<a class="code" href="structREADDIR2args.html#ac6df5af18c0ed40d506dc2d063f5ca0f">count</a> = (<span class="keywordtype">unsigned</span> int)count;
<a name="l01308"></a>01308 
<a name="l01309"></a>01309       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01310"></a>01310 
<a name="l01311"></a>01311     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l01312"></a>01312       <a class="code" href="cmd__nfstools_8c.html#a24c153a7561ff21d6c1748861c0e32fc">cmdnfs_fhandle2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_READDIR2args-&gt;<a class="code" href="structREADDIR2args.html#a0d000aff5087bb3f5e30cf1695e78bba">dir</a>));
<a name="l01313"></a>01313 
<a name="l01314"></a>01314       <span class="keywordflow">break</span>;
<a name="l01315"></a>01315 
<a name="l01316"></a>01316     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l01317"></a>01317       <span class="comment">/* never decoded */</span>
<a name="l01318"></a>01318     <span class="keywordflow">default</span>:
<a name="l01319"></a>01319       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01320"></a>01320     }
<a name="l01321"></a>01321   <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01322"></a>01322 }
<a name="l01323"></a>01323 
<a name="l01324"></a>01324 <span class="keyword">static</span> <span class="keywordtype">int</span> cmdnfs_READDIR2resok(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l01325"></a>01325                                 <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l01326"></a>01326                                 <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l01327"></a>01327 {
<a name="l01328"></a>01328   <a class="code" href="structREADDIR2resok.html">READDIR2resok</a> *p_READDIR2resok = (<a class="code" href="structREADDIR2resok.html">READDIR2resok</a> *) p_nfs_struct;
<a name="l01329"></a>01329 
<a name="l01330"></a>01330   <a class="code" href="structentry2.html">entry2</a> *p_entry2 = p_READDIR2resok-&gt;<a class="code" href="structREADDIR2resok.html#a7338be3ff34ae9d63ade4784de9fced0">entries</a>;
<a name="l01331"></a>01331 
<a name="l01332"></a>01332   <span class="keywordflow">switch</span> (encodeflag)
<a name="l01333"></a>01333     {
<a name="l01334"></a>01334     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l01335"></a>01335 
<a name="l01336"></a>01336       <span class="comment">/* print the list of entries */</span>
<a name="l01337"></a>01337       <span class="keywordflow">if</span>(p_entry2 != <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01338"></a>01338         fprintf(out_stream, <span class="stringliteral">&quot;%*sDirEntries:\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01339"></a>01339 
<a name="l01340"></a>01340       <span class="keywordflow">while</span>(p_entry2)
<a name="l01341"></a>01341         {
<a name="l01342"></a>01342           fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01343"></a>01343           fprintf(out_stream, <span class="stringliteral">&quot;%*sfileid = %#x\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>, p_entry2-&gt;<a class="code" href="structentry2.html#abbd9a58eb8734866fe74d811697f45ef">fileid</a>);
<a name="l01344"></a>01344           fprintf(out_stream, <span class="stringliteral">&quot;%*sname = %s\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>, p_entry2-&gt;<a class="code" href="structentry2.html#a11ab28f7bfe85a7904962f485a513754">name</a>);
<a name="l01345"></a>01345           fprintf(out_stream, <span class="stringliteral">&quot;%*scookie = %u\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>,
<a name="l01346"></a>01346                   *(p_entry2-&gt;<a class="code" href="structentry2.html#a95e3bfaf872152d0aac24c032baae72b">cookie</a>));
<a name="l01347"></a>01347           fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01348"></a>01348 
<a name="l01349"></a>01349           p_entry2 = p_entry2-&gt;<a class="code" href="structentry2.html#ae958ee2312cab66cb374bedc4c1ebb6c">nextentry</a>;
<a name="l01350"></a>01350         }
<a name="l01351"></a>01351 
<a name="l01352"></a>01352       <span class="comment">/* prinf the eof boolean */</span>
<a name="l01353"></a>01353 
<a name="l01354"></a>01354       <span class="keywordflow">if</span>(p_READDIR2resok-&gt;<a class="code" href="structREADDIR2resok.html#afe0c05eb52dd4087ca805c1da49591c1">eof</a>)
<a name="l01355"></a>01355         fprintf(out_stream, <span class="stringliteral">&quot;%*seof = TRUE\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01356"></a>01356       <span class="keywordflow">else</span>
<a name="l01357"></a>01357         fprintf(out_stream, <span class="stringliteral">&quot;%*seof = FALSE\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01358"></a>01358 
<a name="l01359"></a>01359       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01360"></a>01360       <span class="keywordflow">break</span>;
<a name="l01361"></a>01361 
<a name="l01362"></a>01362     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l01363"></a>01363       <span class="comment">/* never encoded */</span>
<a name="l01364"></a>01364     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l01365"></a>01365       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l01366"></a>01366     <span class="keywordflow">default</span>:
<a name="l01367"></a>01367       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01368"></a>01368     }
<a name="l01369"></a>01369 }
<a name="l01370"></a>01370 
<a name="l01371"></a><a class="code" href="cmd__nfstools_8h.html#ac99ceb01c2a854262ea5ad4a451ad9fc">01371</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#ac99ceb01c2a854262ea5ad4a451ad9fc">cmdnfs_READDIR2res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l01372"></a>01372                        <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l01373"></a>01373                        <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l01374"></a>01374 {
<a name="l01375"></a>01375   <a class="code" href="structREADDIR2res.html">READDIR2res</a> *p_READDIR2res = (<a class="code" href="structREADDIR2res.html">READDIR2res</a> *) p_nfs_struct;
<a name="l01376"></a>01376 
<a name="l01377"></a>01377   <span class="comment">/* sanity check */</span>
<a name="l01378"></a>01378   <span class="keywordflow">if</span>(p_READDIR2res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01379"></a>01379     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01380"></a>01380 
<a name="l01381"></a>01381   <span class="keywordflow">switch</span> (encodeflag)
<a name="l01382"></a>01382     {
<a name="l01383"></a>01383     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l01384"></a>01384 
<a name="l01385"></a>01385       <span class="comment">/* it is never an input */</span>
<a name="l01386"></a>01386       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01387"></a>01387 
<a name="l01388"></a>01388       <span class="keywordflow">break</span>;
<a name="l01389"></a>01389     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l01390"></a>01390 
<a name="l01391"></a>01391       fprintf(out_stream, <span class="stringliteral">&quot;%*sREADDIR2res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01392"></a>01392       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01393"></a>01393 
<a name="l01394"></a>01394       <span class="comment">/* Convert status to error code */</span>
<a name="l01395"></a>01395       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a0ea9754e3cf3eb6843ed71a20430b663">cmdnfs_nfsstat2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l01396"></a>01396                          (caddr_t) &amp; p_READDIR2res-&gt;<a class="code" href="structREADDIR2res.html#afa6d0c5a85a537586fa0ac963f0eead4">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01397"></a>01397         {
<a name="l01398"></a>01398           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01399"></a>01399         }
<a name="l01400"></a>01400 
<a name="l01401"></a>01401       <span class="keywordflow">if</span>(p_READDIR2res-&gt;<a class="code" href="structREADDIR2res.html#afa6d0c5a85a537586fa0ac963f0eead4">status</a> == <a class="code" href="nfs23_8h.html#a7aa4ec59cb08c181dab1f366d0c06778ab31cf3caaf8dd2ab122a66434db73c96">NFS_OK</a>)
<a name="l01402"></a>01402         {
<a name="l01403"></a>01403           <span class="keywordflow">if</span>(cmdnfs_READDIR2resok(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l01404"></a>01404                                   (caddr_t) &amp; p_READDIR2res-&gt;<a class="code" href="structREADDIR2res.html#a120738085bcfae5aa7d0e37052fc2842">READDIR2res_u</a>.<a class="code" href="structREADDIR2res.html#a4707533b0df565560beaa5516b86ca89">readdirok</a>) ==
<a name="l01405"></a>01405              <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01406"></a>01406             {
<a name="l01407"></a>01407               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01408"></a>01408             }
<a name="l01409"></a>01409         }
<a name="l01410"></a>01410       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01411"></a>01411 
<a name="l01412"></a>01412       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01413"></a>01413 
<a name="l01414"></a>01414       <span class="keywordflow">break</span>;
<a name="l01415"></a>01415 
<a name="l01416"></a>01416     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l01417"></a>01417 
<a name="l01418"></a>01418       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l01419"></a>01419       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01420"></a>01420 
<a name="l01421"></a>01421       <span class="keywordflow">break</span>;
<a name="l01422"></a>01422 
<a name="l01423"></a>01423     <span class="keywordflow">default</span>:
<a name="l01424"></a>01424       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01425"></a>01425     }
<a name="l01426"></a>01426 }
<a name="l01427"></a>01427 
<a name="l01428"></a><a class="code" href="cmd__nfstools_8h.html#aca3ef32c5983e679d24ed632481aea95">01428</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#aca3ef32c5983e679d24ed632481aea95">cmdnfs_RENAME2args</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l01429"></a>01429                        <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l01430"></a>01430                        <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l01431"></a>01431 {
<a name="l01432"></a>01432   <a class="code" href="structRENAME2args.html">RENAME2args</a> *p_RENAME2args = (<a class="code" href="structRENAME2args.html">RENAME2args</a> *) p_nfs_struct;
<a name="l01433"></a>01433 
<a name="l01434"></a>01434   <span class="comment">/* sanity check */</span>
<a name="l01435"></a>01435   <span class="keywordflow">if</span>(p_RENAME2args == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01436"></a>01436     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01437"></a>01437 
<a name="l01438"></a>01438   <span class="keywordflow">switch</span> (encodeflag)
<a name="l01439"></a>01439     {
<a name="l01440"></a>01440     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l01441"></a>01441 
<a name="l01442"></a>01442       <span class="keywordflow">if</span>(argc != 4)
<a name="l01443"></a>01443         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01444"></a>01444 
<a name="l01445"></a>01445       <span class="comment">/* The first 2 args */</span>
<a name="l01446"></a>01446       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a8d0541c68723b6598125d5fb9490b8a3">cmdnfs_diropargs2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 2, argv, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l01447"></a>01447                            (caddr_t) &amp; (p_RENAME2args-&gt;<a class="code" href="structRENAME2args.html#a100cdfb0dc65be3b82c5facaa51ece58">from</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01448"></a>01448         {
<a name="l01449"></a>01449           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01450"></a>01450         }
<a name="l01451"></a>01451 
<a name="l01452"></a>01452       <span class="comment">/* The last 2 args */</span>
<a name="l01453"></a>01453       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a8d0541c68723b6598125d5fb9490b8a3">cmdnfs_diropargs2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, argc - 2, argv + 2, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l01454"></a>01454                            (caddr_t) &amp; (p_RENAME2args-&gt;<a class="code" href="structRENAME2args.html#a21bc2c77c0323967a46ee744b4455157">to</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01455"></a>01455         {
<a name="l01456"></a>01456           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01457"></a>01457         }
<a name="l01458"></a>01458 
<a name="l01459"></a>01459       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01460"></a>01460 
<a name="l01461"></a>01461     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l01462"></a>01462       <a class="code" href="cmd__nfstools_8c.html#a8d0541c68723b6598125d5fb9490b8a3">cmdnfs_diropargs2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_RENAME2args-&gt;<a class="code" href="structRENAME2args.html#a100cdfb0dc65be3b82c5facaa51ece58">from</a>));
<a name="l01463"></a>01463       <a class="code" href="cmd__nfstools_8c.html#a8d0541c68723b6598125d5fb9490b8a3">cmdnfs_diropargs2</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_RENAME2args-&gt;<a class="code" href="structRENAME2args.html#a21bc2c77c0323967a46ee744b4455157">to</a>));
<a name="l01464"></a>01464       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01465"></a>01465       <span class="keywordflow">break</span>;
<a name="l01466"></a>01466 
<a name="l01467"></a>01467     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l01468"></a>01468       <span class="comment">/* never decoded */</span>
<a name="l01469"></a>01469     <span class="keywordflow">default</span>:
<a name="l01470"></a>01470       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01471"></a>01471     }
<a name="l01472"></a>01472 }
<a name="l01473"></a>01473 
<a name="l01474"></a><a class="code" href="cmd__nfstools_8h.html#a77429f22c9ac2deefd3177a8f8f1be33">01474</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l01475"></a>01475                     <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l01476"></a>01476                     <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l01477"></a>01477 {
<a name="l01478"></a>01478   <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5">nfsstat3</a> *p_stat3 = (<a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5">nfsstat3</a> *) p_nfs_struct;
<a name="l01479"></a>01479 
<a name="l01480"></a>01480   <span class="comment">/* sanity check */</span>
<a name="l01481"></a>01481   <span class="keywordflow">if</span>(p_stat3 == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01482"></a>01482     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01483"></a>01483 
<a name="l01484"></a>01484   <span class="keywordflow">switch</span> (encodeflag)
<a name="l01485"></a>01485     {
<a name="l01486"></a>01486     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l01487"></a>01487 
<a name="l01488"></a>01488       fprintf(out_stream, <span class="stringliteral">&quot;%*sstatus = %d (%s)\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>, (<span class="keywordtype">int</span>)(*p_stat3),
<a name="l01489"></a>01489               <a class="code" href="nfs__tools_8h.html#a2e00e2efee8b1a0234dfcfa69126094e">nfsstat3_to_str</a>(*p_stat3));
<a name="l01490"></a>01490       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01491"></a>01491 
<a name="l01492"></a>01492       <span class="keywordflow">break</span>;
<a name="l01493"></a>01493 
<a name="l01494"></a>01494     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l01495"></a>01495     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l01496"></a>01496       <span class="comment">/* never encoded */</span>
<a name="l01497"></a>01497     <span class="keywordflow">default</span>:
<a name="l01498"></a>01498       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01499"></a>01499     }
<a name="l01500"></a>01500 
<a name="l01501"></a>01501 }
<a name="l01502"></a>01502 
<a name="l01503"></a><a class="code" href="cmd__nfstools_8h.html#a536c0eee765570250825fe9a296551a8">01503</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a536c0eee765570250825fe9a296551a8">cmdnfs_fattr3</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l01504"></a>01504                   <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l01505"></a>01505                   <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l01506"></a>01506 {
<a name="l01507"></a>01507   <a class="code" href="structfattr3.html">fattr3</a> *p_fattr = (<a class="code" href="structfattr3.html">fattr3</a> *) p_nfs_struct;
<a name="l01508"></a>01508   <span class="keywordtype">char</span> tmp_buff[256] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l01509"></a>01509   <span class="keyword">struct </span>tm paramtm;
<a name="l01510"></a>01510 
<a name="l01511"></a>01511   <span class="comment">/* sanity check */</span>
<a name="l01512"></a>01512   <span class="keywordflow">if</span>(p_fattr == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01513"></a>01513     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01514"></a>01514 
<a name="l01515"></a>01515   <span class="keywordflow">switch</span> (encodeflag)
<a name="l01516"></a>01516     {
<a name="l01517"></a>01517     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l01518"></a>01518 
<a name="l01520"></a>01520       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01521"></a>01521 
<a name="l01522"></a>01522       <span class="keywordflow">break</span>;
<a name="l01523"></a>01523     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l01524"></a>01524 
<a name="l01525"></a>01525       fprintf(out_stream, <span class="stringliteral">&quot;%*sfattr3 =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01526"></a>01526       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01527"></a>01527 
<a name="l01528"></a>01528       fprintf(out_stream, <span class="stringliteral">&quot;%*stype = %d (%s)\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, (<span class="keywordtype">int</span>)p_fattr-&gt;<a class="code" href="structfattr3.html#a2d335c76165aa75adf83514976aa2112">type</a>,
<a name="l01529"></a>01529               <a class="code" href="nfs__tools_8h.html#a9d4214ccfda180f881344e77ce947fe0">nfstype3_to_str</a>(p_fattr-&gt;<a class="code" href="structfattr3.html#a2d335c76165aa75adf83514976aa2112">type</a>));
<a name="l01530"></a>01530       fprintf(out_stream, <span class="stringliteral">&quot;%*smode = 0%o\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr3.html#aee0d62992319bbbeef0d8887ac9bcb2f">mode</a>);
<a name="l01531"></a>01531       fprintf(out_stream, <span class="stringliteral">&quot;%*snlink = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr3.html#a44bf30bfbd6985ad468e5bf247db693f">nlink</a>);
<a name="l01532"></a>01532       fprintf(out_stream, <span class="stringliteral">&quot;%*suid = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr3.html#a3655231cbb17ab96c9a02aa2fb4cb135">uid</a>);
<a name="l01533"></a>01533       fprintf(out_stream, <span class="stringliteral">&quot;%*sgid = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr3.html#ad06aaedf675b11afb16d26d90e4db785">gid</a>);
<a name="l01534"></a>01534       fprintf(out_stream, <span class="stringliteral">&quot;%*ssize = %llu\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr3.html#a9f6a7cea85ad19307b72f22f0048ffbe">size</a>);
<a name="l01535"></a>01535       fprintf(out_stream, <span class="stringliteral">&quot;%*sused = %llu\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr3.html#a8bc9c0cd4d60d4f67b6549792db76962">used</a>);
<a name="l01536"></a>01536       fprintf(out_stream, <span class="stringliteral">&quot;%*srdev = %u.%u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr3.html#aeacbc8524e827ae15df2e1ccc67e6952">rdev</a>.<a class="code" href="structspecdata3.html#a8dd187b4d8448de2723cf38cfc2bb4c1">specdata1</a>,
<a name="l01537"></a>01537               p_fattr-&gt;<a class="code" href="structfattr3.html#aeacbc8524e827ae15df2e1ccc67e6952">rdev</a>.<a class="code" href="structspecdata3.html#a4ebcb5f3b478735ecee13556e4197d6e">specdata2</a>);
<a name="l01538"></a>01538       fprintf(out_stream, <span class="stringliteral">&quot;%*sfsid = %#llx\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr3.html#a79e94bca8e16a8f5c794e40bf049c57a">fsid</a>);
<a name="l01539"></a>01539       fprintf(out_stream, <span class="stringliteral">&quot;%*sfileid = %#llx\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_fattr-&gt;<a class="code" href="structfattr3.html#a3bb2e40248c202b8095bf86375ac2fb6">fileid</a>);
<a name="l01540"></a>01540 
<a name="l01541"></a>01541       strftime(tmp_buff, 256, <span class="stringliteral">&quot;%Y-%m-%d %T&quot;</span>,
<a name="l01542"></a>01542                <a class="code" href="log__functions_8c.html#a61fa1aca88aec5370822f995ded637b3">Localtime_r</a>((time_t *) &amp; p_fattr-&gt;<a class="code" href="structfattr3.html#aac52b3ecb1cdc7ef643be10801c76a67">atime</a>.<a class="code" href="structnfstime3.html#a6765f76aef63ace5fb0ce3dc904f14c3">seconds</a>, &amp;paramtm));
<a name="l01543"></a>01543       fprintf(out_stream, <span class="stringliteral">&quot;%*satime = %u.%.9u (%s)\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l01544"></a>01544               p_fattr-&gt;<a class="code" href="structfattr3.html#aac52b3ecb1cdc7ef643be10801c76a67">atime</a>.<a class="code" href="structnfstime3.html#a6765f76aef63ace5fb0ce3dc904f14c3">seconds</a>, p_fattr-&gt;<a class="code" href="structfattr3.html#aac52b3ecb1cdc7ef643be10801c76a67">atime</a>.<a class="code" href="structnfstime3.html#aad0965ff90c90abd7d7c4c431e7e41a1">nseconds</a>, tmp_buff);
<a name="l01545"></a>01545 
<a name="l01546"></a>01546       strftime(tmp_buff, 256, <span class="stringliteral">&quot;%Y-%m-%d %T&quot;</span>,
<a name="l01547"></a>01547                <a class="code" href="log__functions_8c.html#a61fa1aca88aec5370822f995ded637b3">Localtime_r</a>((time_t *) &amp; p_fattr-&gt;<a class="code" href="structfattr3.html#ac129137a6a257bd46e1ea4c526733de9">mtime</a>.<a class="code" href="structnfstime3.html#a6765f76aef63ace5fb0ce3dc904f14c3">seconds</a>, &amp;paramtm));
<a name="l01548"></a>01548       fprintf(out_stream, <span class="stringliteral">&quot;%*smtime = %u.%.9u (%s)\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l01549"></a>01549               p_fattr-&gt;<a class="code" href="structfattr3.html#ac129137a6a257bd46e1ea4c526733de9">mtime</a>.<a class="code" href="structnfstime3.html#a6765f76aef63ace5fb0ce3dc904f14c3">seconds</a>, p_fattr-&gt;<a class="code" href="structfattr3.html#ac129137a6a257bd46e1ea4c526733de9">mtime</a>.<a class="code" href="structnfstime3.html#aad0965ff90c90abd7d7c4c431e7e41a1">nseconds</a>, tmp_buff);
<a name="l01550"></a>01550 
<a name="l01551"></a>01551       strftime(tmp_buff, 256, <span class="stringliteral">&quot;%Y-%m-%d %T&quot;</span>,
<a name="l01552"></a>01552                <a class="code" href="log__functions_8c.html#a61fa1aca88aec5370822f995ded637b3">Localtime_r</a>((time_t *) &amp; p_fattr-&gt;<a class="code" href="structfattr3.html#a645fed869a8d1a7593124c82b4fa3d7e">ctime</a>.<a class="code" href="structnfstime3.html#a6765f76aef63ace5fb0ce3dc904f14c3">seconds</a>, &amp;paramtm));
<a name="l01553"></a>01553       fprintf(out_stream, <span class="stringliteral">&quot;%*sctime = %u.%.9u (%s)\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l01554"></a>01554               p_fattr-&gt;<a class="code" href="structfattr3.html#a645fed869a8d1a7593124c82b4fa3d7e">ctime</a>.<a class="code" href="structnfstime3.html#a6765f76aef63ace5fb0ce3dc904f14c3">seconds</a>, p_fattr-&gt;<a class="code" href="structfattr3.html#a645fed869a8d1a7593124c82b4fa3d7e">ctime</a>.<a class="code" href="structnfstime3.html#aad0965ff90c90abd7d7c4c431e7e41a1">nseconds</a>, tmp_buff);
<a name="l01555"></a>01555 
<a name="l01556"></a>01556       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01557"></a>01557 
<a name="l01558"></a>01558       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01559"></a>01559 
<a name="l01560"></a>01560       <span class="keywordflow">break</span>;
<a name="l01561"></a>01561 
<a name="l01562"></a>01562     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l01563"></a>01563 
<a name="l01565"></a>01565       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01566"></a>01566 
<a name="l01567"></a>01567       <span class="keywordflow">break</span>;
<a name="l01568"></a>01568 
<a name="l01569"></a>01569     <span class="keywordflow">default</span>:
<a name="l01570"></a>01570       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01571"></a>01571     }
<a name="l01572"></a>01572 
<a name="l01573"></a>01573 }
<a name="l01574"></a>01574 
<a name="l01575"></a>01575 <span class="comment">/* interprets a list of attributes separated with a colon :</span>
<a name="l01576"></a>01576 <span class="comment"> * mode=0755,uid=...,gid=...,etc...</span>
<a name="l01577"></a>01577 <span class="comment"> */</span>
<a name="l01578"></a><a class="code" href="cmd__nfstools_8h.html#a1e0a6cd7c4500a3cfbb1a35cb2105436">01578</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a1e0a6cd7c4500a3cfbb1a35cb2105436">cmdnfs_sattr3</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l01579"></a>01579                   <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l01580"></a>01580                   <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l01581"></a>01581 {
<a name="l01582"></a>01582   <a class="code" href="structsattr3.html">sattr3</a> *p_sattr = (<a class="code" href="structsattr3.html">sattr3</a> *) p_nfs_struct;
<a name="l01583"></a>01583   <span class="keywordtype">char</span> *next_str = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01584"></a>01584   <span class="keywordtype">char</span> *attrib_str;
<a name="l01585"></a>01585   <span class="keywordtype">char</span> *value_str;
<a name="l01586"></a>01586 
<a name="l01587"></a>01587   <span class="keywordtype">int</span> mode, userid, groupid, rc;
<a name="l01588"></a>01588   time_t a_sec, m_sec;
<a name="l01589"></a>01589   <span class="keywordtype">int</span> a_nsec, m_nsec;
<a name="l01590"></a>01590   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> size;
<a name="l01591"></a>01591   <span class="keywordtype">char</span> *nsec_str;
<a name="l01592"></a>01592   <span class="keywordtype">char</span> *time_str;
<a name="l01593"></a>01593   <span class="keywordtype">char</span> tmp_buff[1024];
<a name="l01594"></a>01594 
<a name="l01595"></a>01595   <span class="comment">/* sanity check */</span>
<a name="l01596"></a>01596   <span class="keywordflow">if</span>(p_sattr == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01597"></a>01597     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01598"></a>01598 
<a name="l01599"></a>01599   <span class="keywordflow">switch</span> (encodeflag)
<a name="l01600"></a>01600     {
<a name="l01601"></a>01601     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l01602"></a>01602 
<a name="l01603"></a>01603       <span class="comment">/* inits structure */</span>
<a name="l01604"></a>01604       memset((caddr_t) p_sattr, 0, <span class="keyword">sizeof</span>(<a class="code" href="structsattr3.html">sattr3</a>));
<a name="l01605"></a>01605 
<a name="l01606"></a>01606       p_sattr-&gt;mode.set_it = <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01607"></a>01607       p_sattr-&gt;uid.set_it = <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01608"></a>01608       p_sattr-&gt;gid.set_it = <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01609"></a>01609       p_sattr-&gt;size.set_it = <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01610"></a>01610       p_sattr-&gt;atime.set_it = <a class="code" href="nfs23_8h.html#a073a77f0e47a0652458d490f531e0c6da0112ffba4da19444de62dd0ec75654c6">DONT_CHANGE</a>;
<a name="l01611"></a>01611       p_sattr-&gt;mtime.set_it = <a class="code" href="nfs23_8h.html#a073a77f0e47a0652458d490f531e0c6da0112ffba4da19444de62dd0ec75654c6">DONT_CHANGE</a>;
<a name="l01612"></a>01612 
<a name="l01613"></a>01613       <span class="keywordflow">if</span>(argc == 0)
<a name="l01614"></a>01614         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01615"></a>01615 
<a name="l01616"></a>01616       <span class="comment">/* at this point it must not be more than one string */</span>
<a name="l01617"></a>01617       <span class="keywordflow">if</span>(argc != 1)
<a name="l01618"></a>01618         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01619"></a>01619 
<a name="l01620"></a>01620       <span class="comment">/* the attributes are:</span>
<a name="l01621"></a>01621 <span class="comment">       * mode, uid, gid, size, atime, mtime</span>
<a name="l01622"></a>01622 <span class="comment">       */</span>
<a name="l01623"></a>01623       strncpy(tmp_buff, argv[0], 1024);
<a name="l01624"></a>01624 
<a name="l01625"></a>01625       attrib_str = strtok_r(tmp_buff, <span class="stringliteral">&quot;,&quot;</span>, &amp;next_str);
<a name="l01626"></a>01626 
<a name="l01627"></a>01627       <span class="keywordflow">if</span>(attrib_str == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01628"></a>01628         {
<a name="l01629"></a>01629 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01630"></a>01630 <span class="preprocessor"></span>          printf(<span class="stringliteral">&quot;Unexpected parsing error.\n&quot;</span>);
<a name="l01631"></a>01631 <span class="preprocessor">#endif</span>
<a name="l01632"></a>01632 <span class="preprocessor"></span>          <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01633"></a>01633         }
<a name="l01634"></a>01634 
<a name="l01635"></a>01635       <span class="keywordflow">while</span>(attrib_str != <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01636"></a>01636         {
<a name="l01637"></a>01637 
<a name="l01638"></a>01638           <span class="comment">/* retrieving attribute value */</span>
<a name="l01639"></a>01639           attrib_str = strtok_r(attrib_str, <span class="stringliteral">&quot;=&quot;</span>, &amp;value_str);
<a name="l01640"></a>01640 
<a name="l01641"></a>01641           <span class="keywordflow">if</span>((attrib_str == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) || (value_str == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))
<a name="l01642"></a>01642             {
<a name="l01643"></a>01643 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01644"></a>01644 <span class="preprocessor"></span>              printf
<a name="l01645"></a>01645                   (<span class="stringliteral">&quot;Syntax error for sattr3.\nExpected syntax: &lt;attr&gt;=&lt;value&gt;,&lt;attr&gt;=&lt;value&gt;,...\n&quot;</span>);
<a name="l01646"></a>01646 <span class="preprocessor">#endif</span>
<a name="l01647"></a>01647 <span class="preprocessor"></span>              <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01648"></a>01648             }
<a name="l01649"></a>01649 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01650"></a>01650 <span class="preprocessor"></span>          printf(<span class="stringliteral">&quot;Attribute: \&quot;%s\&quot;, Value: \&quot;%s\&quot;\n&quot;</span>, attrib_str, value_str);
<a name="l01651"></a>01651 <span class="preprocessor">#endif</span>
<a name="l01652"></a>01652 <span class="preprocessor"></span>
<a name="l01653"></a>01653           <span class="keywordflow">if</span>(!strcasecmp(attrib_str, <span class="stringliteral">&quot;mode&quot;</span>))
<a name="l01654"></a>01654             {
<a name="l01655"></a>01655               mode = <a class="code" href="cmd__tools_8c.html#a0dcb2075e79b984f98f9b7cd729c5724">atomode</a>(value_str);
<a name="l01656"></a>01656               <span class="keywordflow">if</span>(mode &lt; 0)
<a name="l01657"></a>01657                 <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01658"></a>01658               p_sattr-&gt;mode.set_it = <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01659"></a>01659               p_sattr-&gt;mode.set_mode3_u.mode = (<span class="keywordtype">unsigned</span> int)mode;
<a name="l01660"></a>01660 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01661"></a>01661 <span class="preprocessor"></span>              printf(<span class="stringliteral">&quot;  mode = 0%o\n&quot;</span>, p_sattr-&gt;mode.set_mode3_u.mode);
<a name="l01662"></a>01662 <span class="preprocessor">#endif</span>
<a name="l01663"></a>01663 <span class="preprocessor"></span>            }
<a name="l01664"></a>01664           <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcasecmp(attrib_str, <span class="stringliteral">&quot;uid&quot;</span>))
<a name="l01665"></a>01665             {
<a name="l01666"></a>01666               userid = <a class="code" href="cmd__tools_8c.html#a688b18dd9abbd7f9b3bab90531c0a066">my_atoi</a>(value_str);
<a name="l01667"></a>01667               <span class="keywordflow">if</span>(userid &lt; 0)
<a name="l01668"></a>01668                 <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01669"></a>01669               p_sattr-&gt;uid.set_it = <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01670"></a>01670               p_sattr-&gt;uid.set_uid3_u.uid = (<span class="keywordtype">unsigned</span> int)userid;
<a name="l01671"></a>01671 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01672"></a>01672 <span class="preprocessor"></span>              printf(<span class="stringliteral">&quot;  uid = %u\n&quot;</span>, p_sattr-&gt;uid.set_uid3_u.uid);
<a name="l01673"></a>01673 <span class="preprocessor">#endif</span>
<a name="l01674"></a>01674 <span class="preprocessor"></span>            }
<a name="l01675"></a>01675           <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcasecmp(attrib_str, <span class="stringliteral">&quot;gid&quot;</span>))
<a name="l01676"></a>01676             {
<a name="l01677"></a>01677               groupid = <a class="code" href="cmd__tools_8c.html#a688b18dd9abbd7f9b3bab90531c0a066">my_atoi</a>(value_str);
<a name="l01678"></a>01678               <span class="keywordflow">if</span>(groupid &lt; 0)
<a name="l01679"></a>01679                 <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01680"></a>01680               p_sattr-&gt;gid.set_it = <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01681"></a>01681               p_sattr-&gt;gid.set_gid3_u.gid = (<span class="keywordtype">unsigned</span> int)groupid;
<a name="l01682"></a>01682 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01683"></a>01683 <span class="preprocessor"></span>              printf(<span class="stringliteral">&quot;  gid = %u\n&quot;</span>, p_sattr-&gt;gid.set_gid3_u.gid);
<a name="l01684"></a>01684 <span class="preprocessor">#endif</span>
<a name="l01685"></a>01685 <span class="preprocessor"></span>            }
<a name="l01686"></a>01686           <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcasecmp(attrib_str, <span class="stringliteral">&quot;size&quot;</span>))
<a name="l01687"></a>01687             {
<a name="l01688"></a>01688               rc = <a class="code" href="cmd__tools_8c.html#a6e4bec3955f66ac34221da2c4117595f">ato64</a>(value_str, &amp;size);
<a name="l01689"></a>01689               <span class="keywordflow">if</span>(rc)
<a name="l01690"></a>01690                 <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01691"></a>01691               p_sattr-&gt;size.set_it = <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01692"></a>01692               p_sattr-&gt;size.set_size3_u.size = (<a class="code" href="nfs23_8h.html#a94919eab980041ec8964cf8fcf16762c">size3</a>) size;
<a name="l01693"></a>01693 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01694"></a>01694 <span class="preprocessor"></span>              printf(<span class="stringliteral">&quot;  size = %llu\n&quot;</span>, p_sattr-&gt;size.set_size3_u.size);
<a name="l01695"></a>01695 <span class="preprocessor">#endif</span>
<a name="l01696"></a>01696 <span class="preprocessor"></span>            }
<a name="l01697"></a>01697           <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcasecmp(attrib_str, <span class="stringliteral">&quot;atime&quot;</span>))
<a name="l01698"></a>01698             {
<a name="l01699"></a>01699               time_str = strtok_r(value_str, <span class="stringliteral">&quot;.&quot;</span>, &amp;nsec_str);
<a name="l01700"></a>01700 
<a name="l01701"></a>01701               a_sec = <a class="code" href="cmd__tools_8c.html#a3663a6a631535306a284cfc4e5e00916">atotime</a>(time_str);
<a name="l01702"></a>01702               <span class="keywordflow">if</span>(a_sec == ((time_t) - 1))
<a name="l01703"></a>01703                 <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01704"></a>01704 
<a name="l01705"></a>01705               <span class="keywordflow">if</span>(nsec_str == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01706"></a>01706                 {
<a name="l01707"></a>01707                   a_nsec = 0;
<a name="l01708"></a>01708                 }
<a name="l01709"></a>01709               <span class="keywordflow">else</span>
<a name="l01710"></a>01710                 {
<a name="l01711"></a>01711                   a_nsec = <a class="code" href="cmd__tools_8c.html#a688b18dd9abbd7f9b3bab90531c0a066">my_atoi</a>(nsec_str);
<a name="l01712"></a>01712                   <span class="keywordflow">if</span>((a_nsec &lt; 0) || (a_nsec &gt; 999999999))
<a name="l01713"></a>01713                     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01714"></a>01714                 }
<a name="l01715"></a>01715 
<a name="l01716"></a>01716               p_sattr-&gt;atime.set_it = <a class="code" href="nfs23_8h.html#a073a77f0e47a0652458d490f531e0c6daaa081929e588b58ae26675e4309e2546">SET_TO_CLIENT_TIME</a>;
<a name="l01717"></a>01717               p_sattr-&gt;atime.set_atime_u.atime.seconds = a_sec;
<a name="l01718"></a>01718               p_sattr-&gt;atime.set_atime_u.atime.nseconds = a_nsec;
<a name="l01719"></a>01719 
<a name="l01720"></a>01720 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01721"></a>01721 <span class="preprocessor"></span>              printf(<span class="stringliteral">&quot;  atime = %u.%.9u\n&quot;</span>, p_sattr-&gt;atime.set_atime_u.atime.seconds,
<a name="l01722"></a>01722                      p_sattr-&gt;atime.set_atime_u.atime.nseconds);
<a name="l01723"></a>01723 <span class="preprocessor">#endif</span>
<a name="l01724"></a>01724 <span class="preprocessor"></span>            }
<a name="l01725"></a>01725           <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcasecmp(attrib_str, <span class="stringliteral">&quot;mtime&quot;</span>))
<a name="l01726"></a>01726             {
<a name="l01727"></a>01727               time_str = strtok_r(value_str, <span class="stringliteral">&quot;.&quot;</span>, &amp;nsec_str);
<a name="l01728"></a>01728 
<a name="l01729"></a>01729               m_sec = <a class="code" href="cmd__tools_8c.html#a3663a6a631535306a284cfc4e5e00916">atotime</a>(time_str);
<a name="l01730"></a>01730               <span class="keywordflow">if</span>(m_sec == ((time_t) - 1))
<a name="l01731"></a>01731                 <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01732"></a>01732 
<a name="l01733"></a>01733               <span class="keywordflow">if</span>(nsec_str == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01734"></a>01734                 {
<a name="l01735"></a>01735                   m_nsec = 0;
<a name="l01736"></a>01736                 }
<a name="l01737"></a>01737               <span class="keywordflow">else</span>
<a name="l01738"></a>01738                 {
<a name="l01739"></a>01739                   m_nsec = <a class="code" href="cmd__tools_8c.html#a688b18dd9abbd7f9b3bab90531c0a066">my_atoi</a>(nsec_str);
<a name="l01740"></a>01740                   <span class="keywordflow">if</span>((m_nsec &lt; 0) || (m_nsec &gt; 999999999))
<a name="l01741"></a>01741                     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01742"></a>01742                 }
<a name="l01743"></a>01743 
<a name="l01744"></a>01744               p_sattr-&gt;mtime.set_it = <a class="code" href="nfs23_8h.html#a073a77f0e47a0652458d490f531e0c6daaa081929e588b58ae26675e4309e2546">SET_TO_CLIENT_TIME</a>;
<a name="l01745"></a>01745               p_sattr-&gt;mtime.set_mtime_u.mtime.seconds = m_sec;
<a name="l01746"></a>01746               p_sattr-&gt;mtime.set_mtime_u.mtime.nseconds = m_nsec;
<a name="l01747"></a>01747 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01748"></a>01748 <span class="preprocessor"></span>              printf(<span class="stringliteral">&quot;  mtime = %u.%.9u\n&quot;</span>, p_sattr-&gt;mtime.set_mtime_u.mtime.seconds,
<a name="l01749"></a>01749                      p_sattr-&gt;mtime.set_mtime_u.mtime.nseconds);
<a name="l01750"></a>01750 <span class="preprocessor">#endif</span>
<a name="l01751"></a>01751 <span class="preprocessor"></span>            }
<a name="l01752"></a>01752           <span class="keywordflow">else</span>
<a name="l01753"></a>01753             {
<a name="l01754"></a>01754 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l01755"></a>01755 <span class="preprocessor"></span>              printf
<a name="l01756"></a>01756                   (<span class="stringliteral">&quot;Syntax error for sattr3.\n&lt;attr&gt; must be one of the following: mode, uid, gid, size, atime, mtime.\n&quot;</span>);
<a name="l01757"></a>01757 <span class="preprocessor">#endif</span>
<a name="l01758"></a>01758 <span class="preprocessor"></span>              <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01759"></a>01759             }
<a name="l01760"></a>01760 
<a name="l01761"></a>01761           attrib_str = next_str;
<a name="l01762"></a>01762 
<a name="l01763"></a>01763           next_str = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;      <span class="comment">/* paranoid setting */</span>
<a name="l01764"></a>01764           value_str = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;     <span class="comment">/* paranoid setting */</span>
<a name="l01765"></a>01765 
<a name="l01766"></a>01766           <span class="keywordflow">if</span>(attrib_str != <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01767"></a>01767             attrib_str = strtok_r(attrib_str, <span class="stringliteral">&quot;,&quot;</span>, &amp;next_str);
<a name="l01768"></a>01768 
<a name="l01769"></a>01769         }
<a name="l01770"></a>01770 
<a name="l01771"></a>01771       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01772"></a>01772       <span class="keywordflow">break</span>;
<a name="l01773"></a>01773 
<a name="l01774"></a>01774     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l01775"></a>01775       <span class="comment">/* nothing to do */</span>
<a name="l01776"></a>01776       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01777"></a>01777       <span class="keywordflow">break</span>;
<a name="l01778"></a>01778 
<a name="l01779"></a>01779     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l01780"></a>01780       <span class="comment">/* never decoded */</span>
<a name="l01781"></a>01781     <span class="keywordflow">default</span>:
<a name="l01782"></a>01782       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01783"></a>01783     }
<a name="l01784"></a>01784 
<a name="l01785"></a>01785 }                               <span class="comment">/* cmdnfs_sattr3 */</span>
<a name="l01786"></a>01786 
<a name="l01787"></a><a class="code" href="cmd__nfstools_8c.html#a8e3b707e2e3dfd214ea8ed14118e16d3">01787</a> <span class="preprocessor">#define GETATTR3_ATTRIBUTES( _p_GETATTR3res ) ( (_p_GETATTR3res)-&gt;GETATTR3res_u.resok.obj_attributes )</span>
<a name="l01788"></a>01788 <span class="preprocessor"></span>
<a name="l01789"></a><a class="code" href="cmd__nfstools_8h.html#a6e7a984674dc7857433fd2f1e454ebbc">01789</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a6e7a984674dc7857433fd2f1e454ebbc">cmdnfs_GETATTR3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l01790"></a>01790                        <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l01791"></a>01791                        <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l01792"></a>01792 {
<a name="l01793"></a>01793   <a class="code" href="structGETATTR3res.html">GETATTR3res</a> *p_gattr3res = (<a class="code" href="structGETATTR3res.html">GETATTR3res</a> *) p_nfs_struct;
<a name="l01794"></a>01794 
<a name="l01795"></a>01795   <span class="comment">/* sanity check */</span>
<a name="l01796"></a>01796   <span class="keywordflow">if</span>(p_gattr3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01797"></a>01797     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01798"></a>01798 
<a name="l01799"></a>01799   <span class="keywordflow">switch</span> (encodeflag)
<a name="l01800"></a>01800     {
<a name="l01801"></a>01801     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l01802"></a>01802 
<a name="l01803"></a>01803       fprintf(out_stream, <span class="stringliteral">&quot;%*sGETATTR3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01804"></a>01804       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01805"></a>01805 
<a name="l01806"></a>01806       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l01807"></a>01807                          (caddr_t) &amp; p_gattr3res-&gt;<a class="code" href="structGETATTR3res.html#a930d9fb7f56063b9c8740d5cd379d499">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01808"></a>01808         {
<a name="l01809"></a>01809           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01810"></a>01810         }
<a name="l01811"></a>01811 
<a name="l01812"></a>01812       <span class="keywordflow">if</span>(p_gattr3res-&gt;<a class="code" href="structGETATTR3res.html#a930d9fb7f56063b9c8740d5cd379d499">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l01813"></a>01813         {
<a name="l01814"></a>01814           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a536c0eee765570250825fe9a296551a8">cmdnfs_fattr3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l01815"></a>01815                            (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a8e3b707e2e3dfd214ea8ed14118e16d3">GETATTR3_ATTRIBUTES</a>(p_gattr3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01816"></a>01816             {
<a name="l01817"></a>01817               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01818"></a>01818             }
<a name="l01819"></a>01819 
<a name="l01820"></a>01820         }
<a name="l01821"></a>01821 
<a name="l01822"></a>01822       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01823"></a>01823 
<a name="l01824"></a>01824       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01825"></a>01825 
<a name="l01826"></a>01826       <span class="keywordflow">break</span>;
<a name="l01827"></a>01827 
<a name="l01828"></a>01828     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l01829"></a>01829       <span class="comment">/* never encoded */</span>
<a name="l01830"></a>01830     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l01831"></a>01831       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l01832"></a>01832     <span class="keywordflow">default</span>:
<a name="l01833"></a>01833       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01834"></a>01834     }
<a name="l01835"></a>01835 
<a name="l01836"></a>01836 }
<a name="l01837"></a>01837 
<a name="l01838"></a>01838 <span class="preprocessor">#undef GETATTR3_ATTRIBUTES</span>
<a name="l01839"></a>01839 <span class="preprocessor"></span>
<a name="l01840"></a><a class="code" href="cmd__nfstools_8h.html#a242dedae1aa72eac02a1465e81b9441b">01840</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a242dedae1aa72eac02a1465e81b9441b">cmdnfs_diropargs3</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l01841"></a>01841                       <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l01842"></a>01842                       <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l01843"></a>01843 {
<a name="l01844"></a>01844   <a class="code" href="structdiropargs3.html">diropargs3</a> *p_dirop3 = (<a class="code" href="structdiropargs3.html">diropargs3</a> *) p_nfs_struct;
<a name="l01845"></a>01845 
<a name="l01846"></a>01846   <span class="comment">/* sanity check */</span>
<a name="l01847"></a>01847   <span class="keywordflow">if</span>(p_dirop3 == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01848"></a>01848     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01849"></a>01849 
<a name="l01850"></a>01850   <span class="keywordflow">switch</span> (encodeflag)
<a name="l01851"></a>01851     {
<a name="l01852"></a>01852     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l01853"></a>01853 
<a name="l01854"></a>01854       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 1, argv, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l01855"></a>01855                          (caddr_t) &amp; (p_dirop3-&gt;<a class="code" href="structdiropargs3.html#a9de5bdbe277dffd0d100d2ac6493baea">dir</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01856"></a>01856         {
<a name="l01857"></a>01857           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01858"></a>01858         }
<a name="l01859"></a>01859 
<a name="l01860"></a>01860       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afa2a178837094076227dc6d941bfb66a">cmdnfs_dirpath</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, argc - 1, argv + 1, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l01861"></a>01861                         (caddr_t) &amp; (p_dirop3-&gt;<a class="code" href="structdiropargs3.html#aa9b81fbc05b3356e0a578fc5db18d4be">name</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01862"></a>01862         {
<a name="l01863"></a>01863           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01864"></a>01864         }
<a name="l01865"></a>01865 
<a name="l01866"></a>01866       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01867"></a>01867 
<a name="l01868"></a>01868     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l01869"></a>01869       <a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_dirop3-&gt;<a class="code" href="structdiropargs3.html#a9de5bdbe277dffd0d100d2ac6493baea">dir</a>));
<a name="l01870"></a>01870       <a class="code" href="cmd__nfstools_8c.html#afa2a178837094076227dc6d941bfb66a">cmdnfs_dirpath</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_dirop3-&gt;<a class="code" href="structdiropargs3.html#aa9b81fbc05b3356e0a578fc5db18d4be">name</a>));
<a name="l01871"></a>01871       <span class="keywordflow">break</span>;
<a name="l01872"></a>01872 
<a name="l01873"></a>01873     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l01874"></a>01874       <span class="comment">/* never decoded */</span>
<a name="l01875"></a>01875     <span class="keywordflow">default</span>:
<a name="l01876"></a>01876       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01877"></a>01877     }
<a name="l01878"></a>01878   <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01879"></a>01879 }
<a name="l01880"></a>01880 
<a name="l01881"></a><a class="code" href="cmd__nfstools_8h.html#afcffb351c8115cd880d820dc200f8bc7">01881</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l01882"></a>01882                       <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l01883"></a>01883                       <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l01884"></a>01884 {
<a name="l01885"></a>01885   <a class="code" href="structpost__op__attr.html">post_op_attr</a> *p_opattr = (<a class="code" href="structpost__op__attr.html">post_op_attr</a> *) p_nfs_struct;
<a name="l01886"></a>01886 
<a name="l01887"></a>01887   <span class="comment">/* sanity check */</span>
<a name="l01888"></a>01888   <span class="keywordflow">if</span>(p_opattr == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01889"></a>01889     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01890"></a>01890 
<a name="l01891"></a>01891   <span class="keywordflow">switch</span> (encodeflag)
<a name="l01892"></a>01892     {
<a name="l01893"></a>01893     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l01894"></a>01894 
<a name="l01895"></a>01895       <span class="keywordflow">if</span>(p_opattr-&gt;<a class="code" href="structpost__op__attr.html#a7eed0c4cb54b1759439f7b9d69e3f818">attributes_follow</a>)
<a name="l01896"></a>01896         {
<a name="l01897"></a>01897           <span class="keywordflow">return</span> <a class="code" href="cmd__nfstools_8c.html#a536c0eee765570250825fe9a296551a8">cmdnfs_fattr3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent, out_stream,
<a name="l01898"></a>01898                                (caddr_t) &amp; (p_opattr-&gt;<a class="code" href="structpost__op__attr.html#abc6a2ba00641a7cfc4cb6820ec9d1a65">post_op_attr_u</a>.<a class="code" href="structpost__op__attr.html#a2f531f07da6ccee97f0bd006cf91a248">attributes</a>));
<a name="l01899"></a>01899         }
<a name="l01900"></a>01900       <span class="keywordflow">else</span>
<a name="l01901"></a>01901         {
<a name="l01902"></a>01902           fprintf(out_stream, <span class="stringliteral">&quot;%*sN/A\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01903"></a>01903           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01904"></a>01904         }
<a name="l01905"></a>01905 
<a name="l01906"></a>01906       <span class="keywordflow">break</span>;
<a name="l01907"></a>01907 
<a name="l01908"></a>01908     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l01909"></a>01909       <span class="comment">/* never encoded */</span>
<a name="l01910"></a>01910     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l01911"></a>01911       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l01912"></a>01912     <span class="keywordflow">default</span>:
<a name="l01913"></a>01913       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01914"></a>01914     }
<a name="l01915"></a>01915 }
<a name="l01916"></a>01916 
<a name="l01917"></a><a class="code" href="cmd__nfstools_8h.html#acc46aca72bbd733004ab3a53e25f2a05">01917</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#acc46aca72bbd733004ab3a53e25f2a05">cmdnfs_postopfh3</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l01918"></a>01918                      <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l01919"></a>01919                      <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l01920"></a>01920 {
<a name="l01921"></a>01921   <a class="code" href="structpost__op__fh3.html">post_op_fh3</a> *p_opfh3 = (<a class="code" href="structpost__op__fh3.html">post_op_fh3</a> *) p_nfs_struct;
<a name="l01922"></a>01922 
<a name="l01923"></a>01923   <span class="comment">/* sanity check */</span>
<a name="l01924"></a>01924   <span class="keywordflow">if</span>(p_opfh3 == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01925"></a>01925     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01926"></a>01926 
<a name="l01927"></a>01927   <span class="keywordflow">switch</span> (encodeflag)
<a name="l01928"></a>01928     {
<a name="l01929"></a>01929     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l01930"></a>01930 
<a name="l01931"></a>01931       <span class="keywordflow">if</span>(p_opfh3-&gt;<a class="code" href="structpost__op__fh3.html#a44767c38b562a83b21881116e9c41ffd">handle_follows</a>)
<a name="l01932"></a>01932         {
<a name="l01933"></a>01933           <span class="keywordflow">return</span> <a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent, out_stream,
<a name="l01934"></a>01934                                  (caddr_t) &amp; (p_opfh3-&gt;<a class="code" href="structpost__op__fh3.html#ae188fa86740deb826d164583f3c90330">post_op_fh3_u</a>.<a class="code" href="structpost__op__fh3.html#a8b8308ba086a7453fbff04c0e92f6bab">handle</a>));
<a name="l01935"></a>01935         }
<a name="l01936"></a>01936       <span class="keywordflow">else</span>
<a name="l01937"></a>01937         {
<a name="l01938"></a>01938           fprintf(out_stream, <span class="stringliteral">&quot;%*sN/A\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01939"></a>01939           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01940"></a>01940         }
<a name="l01941"></a>01941 
<a name="l01942"></a>01942       <span class="keywordflow">break</span>;
<a name="l01943"></a>01943 
<a name="l01944"></a>01944     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l01945"></a>01945       <span class="comment">/* never encoded */</span>
<a name="l01946"></a>01946     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l01947"></a>01947       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l01948"></a>01948     <span class="keywordflow">default</span>:
<a name="l01949"></a>01949       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01950"></a>01950     }
<a name="l01951"></a>01951 }
<a name="l01952"></a>01952 
<a name="l01953"></a><a class="code" href="cmd__nfstools_8c.html#a80f37991223e2d667372c3f424848151">01953</a> <span class="preprocessor">#define LOOKUP3_OK_HANDLE( _p_LOOKUP3res ) ( (_p_LOOKUP3res)-&gt;LOOKUP3res_u.resok.object )</span>
<a name="l01954"></a><a class="code" href="cmd__nfstools_8c.html#ac44ad282e147ab626648e643e85a0410">01954</a> <span class="preprocessor"></span><span class="preprocessor">#define LOOKUP3_OK_OBJATTR( _p_LOOKUP3res ) ( (_p_LOOKUP3res)-&gt;LOOKUP3res_u.resok.obj_attributes )</span>
<a name="l01955"></a><a class="code" href="cmd__nfstools_8c.html#aa5b348d1098a64e387cc779355fb8edb">01955</a> <span class="preprocessor"></span><span class="preprocessor">#define LOOKUP3_OK_DIRATTR( _p_LOOKUP3res ) ( (_p_LOOKUP3res)-&gt;LOOKUP3res_u.resok.dir_attributes )</span>
<a name="l01956"></a><a class="code" href="cmd__nfstools_8c.html#a6142d50763937c86a5e1c087efd78429">01956</a> <span class="preprocessor"></span><span class="preprocessor">#define LOOKUP3_FAIL_DIRATTR( _p_LOOKUP3res ) ( (_p_LOOKUP3res)-&gt;LOOKUP3res_u.resfail.dir_attributes )</span>
<a name="l01957"></a>01957 <span class="preprocessor"></span>
<a name="l01958"></a><a class="code" href="cmd__nfstools_8h.html#a3d8f021bb2cbd9b1ae58d9ceaf7c7bf4">01958</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a3d8f021bb2cbd9b1ae58d9ceaf7c7bf4">cmdnfs_LOOKUP3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l01959"></a>01959                       <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l01960"></a>01960                       <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l01961"></a>01961 {
<a name="l01962"></a>01962   <a class="code" href="structLOOKUP3res.html">LOOKUP3res</a> *p_lkup3res = (<a class="code" href="structLOOKUP3res.html">LOOKUP3res</a> *) p_nfs_struct;
<a name="l01963"></a>01963 
<a name="l01964"></a>01964   <span class="comment">/* sanity check */</span>
<a name="l01965"></a>01965   <span class="keywordflow">if</span>(p_lkup3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01966"></a>01966     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01967"></a>01967 
<a name="l01968"></a>01968   <span class="keywordflow">switch</span> (encodeflag)
<a name="l01969"></a>01969     {
<a name="l01970"></a>01970     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l01971"></a>01971 
<a name="l01972"></a>01972       fprintf(out_stream, <span class="stringliteral">&quot;%*sLOOKUP3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01973"></a>01973       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01974"></a>01974 
<a name="l01975"></a>01975       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l01976"></a>01976                          (caddr_t) &amp; p_lkup3res-&gt;<a class="code" href="structLOOKUP3res.html#a093b1b85b9eda85b89809f571f65f2c4">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01977"></a>01977         {
<a name="l01978"></a>01978           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01979"></a>01979         }
<a name="l01980"></a>01980 
<a name="l01981"></a>01981       <span class="keywordflow">if</span>(p_lkup3res-&gt;<a class="code" href="structLOOKUP3res.html#a093b1b85b9eda85b89809f571f65f2c4">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l01982"></a>01982         {
<a name="l01983"></a>01983 
<a name="l01984"></a>01984           fprintf(out_stream, <span class="stringliteral">&quot;%*sObject Handle:\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01985"></a>01985           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l01986"></a>01986                              (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a80f37991223e2d667372c3f424848151">LOOKUP3_OK_HANDLE</a>(p_lkup3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01987"></a>01987             {
<a name="l01988"></a>01988               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01989"></a>01989             }
<a name="l01990"></a>01990 
<a name="l01991"></a>01991           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (object):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01992"></a>01992           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l01993"></a>01993                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#ac44ad282e147ab626648e643e85a0410">LOOKUP3_OK_OBJATTR</a>(p_lkup3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l01994"></a>01994             {
<a name="l01995"></a>01995               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01996"></a>01996             }
<a name="l01997"></a>01997 
<a name="l01998"></a>01998           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01999"></a>01999           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l02000"></a>02000                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#aa5b348d1098a64e387cc779355fb8edb">LOOKUP3_OK_DIRATTR</a>(p_lkup3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02001"></a>02001             {
<a name="l02002"></a>02002               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02003"></a>02003             }
<a name="l02004"></a>02004 
<a name="l02005"></a>02005         }
<a name="l02006"></a>02006       <span class="keywordflow">else</span>
<a name="l02007"></a>02007         {
<a name="l02008"></a>02008           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02009"></a>02009           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l02010"></a>02010                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a6142d50763937c86a5e1c087efd78429">LOOKUP3_FAIL_DIRATTR</a>(p_lkup3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02011"></a>02011             {
<a name="l02012"></a>02012               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02013"></a>02013             }
<a name="l02014"></a>02014         }
<a name="l02015"></a>02015 
<a name="l02016"></a>02016       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02017"></a>02017 
<a name="l02018"></a>02018       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02019"></a>02019 
<a name="l02020"></a>02020       <span class="keywordflow">break</span>;
<a name="l02021"></a>02021 
<a name="l02022"></a>02022     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l02023"></a>02023       <span class="comment">/* never encoded */</span>
<a name="l02024"></a>02024     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l02025"></a>02025       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l02026"></a>02026     <span class="keywordflow">default</span>:
<a name="l02027"></a>02027       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02028"></a>02028     }
<a name="l02029"></a>02029 
<a name="l02030"></a>02030 }
<a name="l02031"></a>02031 
<a name="l02032"></a>02032 <span class="preprocessor">#undef LOOKUP3_OK_HANDLE</span>
<a name="l02033"></a>02033 <span class="preprocessor"></span><span class="preprocessor">#undef LOOKUP3_OK_OBJATTR</span>
<a name="l02034"></a>02034 <span class="preprocessor"></span><span class="preprocessor">#undef LOOKUP3_OK_DIRATTR</span>
<a name="l02035"></a>02035 <span class="preprocessor"></span><span class="preprocessor">#undef LOOKUP3_FAIL_DIRATTR</span>
<a name="l02036"></a>02036 <span class="preprocessor"></span>
<a name="l02037"></a>02037 <span class="keyword">static</span> <span class="keywordtype">int</span> cmdnfs_verf3(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag, <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv, <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct, <span class="keywordtype">char</span> *verfname      <span class="comment">/* name to be printed for the verifier (DECODE mode only) */</span>
<a name="l02038"></a>02038     )
<a name="l02039"></a>02039 {
<a name="l02040"></a>02040   <span class="comment">/* pointer to an opaque buff */</span>
<a name="l02041"></a>02041   caddr_t p_verf = p_nfs_struct;
<a name="l02042"></a>02042 
<a name="l02043"></a>02043   <span class="keywordtype">char</span> *str_verf;
<a name="l02044"></a>02044   <span class="keywordtype">char</span> str_printverf[17];
<a name="l02045"></a>02045   <span class="keywordtype">int</span> rc;
<a name="l02046"></a>02046 
<a name="l02047"></a>02047   <span class="comment">/* sanity check */</span>
<a name="l02048"></a>02048   <span class="keywordflow">if</span>(p_verf == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02049"></a>02049     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02050"></a>02050 
<a name="l02051"></a>02051   <span class="keywordflow">switch</span> (encodeflag)
<a name="l02052"></a>02052     {
<a name="l02053"></a>02053     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l02054"></a>02054 
<a name="l02055"></a>02055       <span class="keywordflow">if</span>(argc != 1)
<a name="l02056"></a>02056         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02057"></a>02057 
<a name="l02058"></a>02058       str_verf = argv[0];
<a name="l02059"></a>02059 
<a name="l02060"></a>02060       memset(p_verf, 0, 8);
<a name="l02061"></a>02061 
<a name="l02062"></a>02062       rc = <a class="code" href="common__utils_8c.html#a6f09e2d1c20544d11ea2a8c8e9a7ff1a">sscanmem</a>(p_verf, 8, str_verf);
<a name="l02063"></a>02063 
<a name="l02064"></a>02064 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02065"></a>02065 <span class="preprocessor"></span>      fprintf(stderr, <span class="stringliteral">&quot;verf = \&quot;%s\&quot;\n&quot;</span>, str_verf);
<a name="l02066"></a>02066       fprintf(stderr, <span class="stringliteral">&quot;-&gt; %d bytes read.\n&quot;</span>, rc);
<a name="l02067"></a>02067       fprintf(stderr, <span class="stringliteral">&quot;buffer=%02X.%02X.%02X.%02X.%02X.%02X.%02X.%02X\n&quot;</span>,
<a name="l02068"></a>02068               p_verf[0], p_verf[1], p_verf[2], p_verf[3],
<a name="l02069"></a>02069               p_verf[4], p_verf[5], p_verf[6], p_verf[7]);
<a name="l02070"></a>02070 
<a name="l02071"></a>02071 <span class="preprocessor">#endif</span>
<a name="l02072"></a>02072 <span class="preprocessor"></span>
<a name="l02073"></a>02073       <span class="comment">/* we must have read at least the verf size */</span>
<a name="l02074"></a>02074       <span class="keywordflow">if</span>(rc &lt; 0)
<a name="l02075"></a>02075         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02076"></a>02076 
<a name="l02077"></a>02077       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02078"></a>02078 
<a name="l02079"></a>02079       <span class="keywordflow">break</span>;
<a name="l02080"></a>02080     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l02081"></a>02081 
<a name="l02082"></a>02082       <span class="keywordflow">if</span>(<a class="code" href="common__utils_8c.html#a740458b7b08d3f69d4fd1f262793ba6c">snprintmem</a>(str_printverf, 17, p_verf, 8) &lt; 0)
<a name="l02083"></a>02083         {
<a name="l02084"></a>02084           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02085"></a>02085         }
<a name="l02086"></a>02086 
<a name="l02087"></a>02087       fprintf(out_stream, <span class="stringliteral">&quot;%*s%s = %s\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>, verfname, str_printverf);
<a name="l02088"></a>02088 
<a name="l02089"></a>02089       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02090"></a>02090       <span class="keywordflow">break</span>;
<a name="l02091"></a>02091 
<a name="l02092"></a>02092     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l02093"></a>02093       <span class="comment">/* nothing to do */</span>
<a name="l02094"></a>02094       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02095"></a>02095       <span class="keywordflow">break</span>;
<a name="l02096"></a>02096 
<a name="l02097"></a>02097     <span class="keywordflow">default</span>:
<a name="l02098"></a>02098       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02099"></a>02099     }
<a name="l02100"></a>02100 }
<a name="l02101"></a>02101 
<a name="l02102"></a>02102 <span class="keyword">static</span> <span class="keywordtype">int</span> cmdnfs_dirlist3(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l02103"></a>02103                            <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l02104"></a>02104                            <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l02105"></a>02105 {
<a name="l02106"></a>02106   <a class="code" href="structdirlist3.html">dirlist3</a> *p_dirlist3 = (<a class="code" href="structdirlist3.html">dirlist3</a> *) p_nfs_struct;
<a name="l02107"></a>02107 
<a name="l02108"></a>02108   <a class="code" href="structentry3.html">entry3</a> *p_entry = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02109"></a>02109 
<a name="l02110"></a>02110   <span class="comment">/* sanity check */</span>
<a name="l02111"></a>02111   <span class="keywordflow">if</span>(p_dirlist3 == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02112"></a>02112     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02113"></a>02113 
<a name="l02114"></a>02114   <span class="keywordflow">switch</span> (encodeflag)
<a name="l02115"></a>02115     {
<a name="l02116"></a>02116     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l02117"></a>02117 
<a name="l02118"></a>02118       <span class="comment">/* print the list of entries */</span>
<a name="l02119"></a>02119       p_entry = p_dirlist3-&gt;<a class="code" href="structdirlist3.html#a67038caf7a11594aff12c0c3156f4116">entries</a>;
<a name="l02120"></a>02120 
<a name="l02121"></a>02121       fprintf(out_stream, <span class="stringliteral">&quot;%*sDirEntries:\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02122"></a>02122       <span class="keywordflow">while</span>(p_entry)
<a name="l02123"></a>02123         {
<a name="l02124"></a>02124           fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02125"></a>02125           fprintf(out_stream, <span class="stringliteral">&quot;%*sfileid = %#llx\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>, p_entry-&gt;<a class="code" href="structentry3.html#a49753496a3576afcebb9fd7890697675">fileid</a>);
<a name="l02126"></a>02126           fprintf(out_stream, <span class="stringliteral">&quot;%*sname = %s\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>, p_entry-&gt;<a class="code" href="structentry3.html#a33aa657a1fd2b6be6824c6181656cd3d">name</a>);
<a name="l02127"></a>02127           fprintf(out_stream, <span class="stringliteral">&quot;%*scookie = %llu\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>, p_entry-&gt;<a class="code" href="structentry3.html#abea67210c6fed25df853d885906d7af6">cookie</a>);
<a name="l02128"></a>02128           fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02129"></a>02129 
<a name="l02130"></a>02130           p_entry = p_entry-&gt;<a class="code" href="structentry3.html#af0a6d8ceec056d063472a744d7da3500">nextentry</a>;
<a name="l02131"></a>02131         }
<a name="l02132"></a>02132 
<a name="l02133"></a>02133       <span class="comment">/* prinf the eof boolean */</span>
<a name="l02134"></a>02134 
<a name="l02135"></a>02135       <span class="keywordflow">if</span>(p_dirlist3-&gt;<a class="code" href="structdirlist3.html#a5e4e47366c562189bfe7e0c4bcbde4e4">eof</a>)
<a name="l02136"></a>02136         fprintf(out_stream, <span class="stringliteral">&quot;%*seof = TRUE\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02137"></a>02137       <span class="keywordflow">else</span>
<a name="l02138"></a>02138         fprintf(out_stream, <span class="stringliteral">&quot;%*seof = FALSE\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02139"></a>02139 
<a name="l02140"></a>02140       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02141"></a>02141       <span class="keywordflow">break</span>;
<a name="l02142"></a>02142 
<a name="l02143"></a>02143     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l02144"></a>02144       <span class="comment">/* never encoded */</span>
<a name="l02145"></a>02145     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l02146"></a>02146       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l02147"></a>02147     <span class="keywordflow">default</span>:
<a name="l02148"></a>02148       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02149"></a>02149     }
<a name="l02150"></a>02150 }
<a name="l02151"></a>02151 
<a name="l02152"></a><a class="code" href="cmd__nfstools_8h.html#a2a44a5ff5f42ec3fb64b91ff76aa3c43">02152</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a2a44a5ff5f42ec3fb64b91ff76aa3c43">cmdnfs_READDIR3args</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l02153"></a>02153                         <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l02154"></a>02154                         <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l02155"></a>02155 {
<a name="l02156"></a>02156   <a class="code" href="structREADDIR3args.html">READDIR3args</a> *p_rd3arg = (<a class="code" href="structREADDIR3args.html">READDIR3args</a> *) p_nfs_struct;
<a name="l02157"></a>02157   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> tmp64;
<a name="l02158"></a>02158   <span class="keywordtype">int</span> rc;
<a name="l02159"></a>02159 
<a name="l02160"></a>02160   <span class="comment">/* sanity check */</span>
<a name="l02161"></a>02161   <span class="keywordflow">if</span>(p_rd3arg == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02162"></a>02162     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02163"></a>02163 
<a name="l02164"></a>02164   <span class="keywordflow">switch</span> (encodeflag)
<a name="l02165"></a>02165     {
<a name="l02166"></a>02166     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l02167"></a>02167 
<a name="l02168"></a>02168       <span class="keywordflow">if</span>(argc != 4)
<a name="l02169"></a>02169         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02170"></a>02170 
<a name="l02171"></a>02171       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 1, argv, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l02172"></a>02172                          (caddr_t) &amp; (p_rd3arg-&gt;<a class="code" href="structREADDIR3args.html#a8d23dc5a8c875175b3ed0b6a088f4b53">dir</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02173"></a>02173         {
<a name="l02174"></a>02174 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02175"></a>02175 <span class="preprocessor"></span>          fprintf(stderr, <span class="stringliteral">&quot;dir_handle error.\n&quot;</span>);
<a name="l02176"></a>02176 <span class="preprocessor">#endif</span>
<a name="l02177"></a>02177 <span class="preprocessor"></span>          <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02178"></a>02178         }
<a name="l02179"></a>02179 
<a name="l02180"></a>02180       rc = <a class="code" href="cmd__tools_8c.html#a6e4bec3955f66ac34221da2c4117595f">ato64</a>(argv[1], &amp;tmp64);
<a name="l02181"></a>02181       <span class="keywordflow">if</span>(rc)
<a name="l02182"></a>02182         {
<a name="l02183"></a>02183 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02184"></a>02184 <span class="preprocessor"></span>          fprintf(stderr, <span class="stringliteral">&quot;cookie error.\n&quot;</span>);
<a name="l02185"></a>02185 <span class="preprocessor">#endif</span>
<a name="l02186"></a>02186 <span class="preprocessor"></span>          <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02187"></a>02187         }
<a name="l02188"></a>02188       p_rd3arg-&gt;<a class="code" href="structREADDIR3args.html#a23558c5ecfa732069b457300b32b5723">cookie</a> = tmp64;
<a name="l02189"></a>02189 
<a name="l02190"></a>02190 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02191"></a>02191 <span class="preprocessor"></span>      fprintf(stderr, <span class="stringliteral">&quot;cookie = %llu.\n&quot;</span>, tmp64);
<a name="l02192"></a>02192 <span class="preprocessor">#endif</span>
<a name="l02193"></a>02193 <span class="preprocessor"></span>
<a name="l02194"></a>02194       <span class="keywordflow">if</span>(cmdnfs_verf3(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 1, argv + 2, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l02195"></a>02195                       (caddr_t) &amp; (p_rd3arg-&gt;<a class="code" href="structREADDIR3args.html#ab5f19f4fb79541202750e79c9cd6ec54">cookieverf</a>), <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02196"></a>02196         {
<a name="l02197"></a>02197 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02198"></a>02198 <span class="preprocessor"></span>          fprintf(stderr, <span class="stringliteral">&quot;cookieverf error.\n&quot;</span>);
<a name="l02199"></a>02199 <span class="preprocessor">#endif</span>
<a name="l02200"></a>02200 <span class="preprocessor"></span>          <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02201"></a>02201         }
<a name="l02202"></a>02202 
<a name="l02203"></a>02203       rc = <a class="code" href="cmd__tools_8c.html#a6e4bec3955f66ac34221da2c4117595f">ato64</a>(argv[3], &amp;tmp64);
<a name="l02204"></a>02204       <span class="keywordflow">if</span>(rc)
<a name="l02205"></a>02205         {
<a name="l02206"></a>02206 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02207"></a>02207 <span class="preprocessor"></span>          fprintf(stderr, <span class="stringliteral">&quot;count error (not a number).\n&quot;</span>);
<a name="l02208"></a>02208 <span class="preprocessor">#endif</span>
<a name="l02209"></a>02209 <span class="preprocessor"></span>          <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02210"></a>02210         }
<a name="l02211"></a>02211       <span class="keywordflow">if</span>(tmp64 &gt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)UINT_MAX)
<a name="l02212"></a>02212         {
<a name="l02213"></a>02213 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02214"></a>02214 <span class="preprocessor"></span>          fprintf(stderr, <span class="stringliteral">&quot;count error (number too big).\n&quot;</span>);
<a name="l02215"></a>02215 <span class="preprocessor">#endif</span>
<a name="l02216"></a>02216 <span class="preprocessor"></span>          <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02217"></a>02217         }
<a name="l02218"></a>02218 
<a name="l02219"></a>02219       p_rd3arg-&gt;<a class="code" href="structREADDIR3args.html#a8aad396e861425299615e21ed1cacb56">count</a> = (<span class="keywordtype">unsigned</span> int)tmp64;
<a name="l02220"></a>02220 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02221"></a>02221 <span class="preprocessor"></span>      fprintf(stderr, <span class="stringliteral">&quot;count = %u\n&quot;</span>, p_rd3arg-&gt;<a class="code" href="structREADDIR3args.html#a8aad396e861425299615e21ed1cacb56">count</a>);
<a name="l02222"></a>02222 <span class="preprocessor">#endif</span>
<a name="l02223"></a>02223 <span class="preprocessor"></span>
<a name="l02224"></a>02224       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02225"></a>02225 
<a name="l02226"></a>02226     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l02227"></a>02227 
<a name="l02228"></a>02228       <a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_rd3arg-&gt;<a class="code" href="structREADDIR3args.html#a8d23dc5a8c875175b3ed0b6a088f4b53">dir</a>));
<a name="l02229"></a>02229 
<a name="l02230"></a>02230       <span class="keywordflow">break</span>;
<a name="l02231"></a>02231 
<a name="l02232"></a>02232     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l02233"></a>02233       <span class="comment">/* never decoded */</span>
<a name="l02234"></a>02234     <span class="keywordflow">default</span>:
<a name="l02235"></a>02235       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02236"></a>02236     }
<a name="l02237"></a>02237   <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02238"></a>02238 }
<a name="l02239"></a>02239 
<a name="l02240"></a><a class="code" href="cmd__nfstools_8c.html#a0865d46e6103888a14b014927e38db04">02240</a> <span class="preprocessor">#define READDIR3_OK( _p_READDIR3res ) ( (_p_READDIR3res)-&gt;READDIR3res_u.resok )</span>
<a name="l02241"></a><a class="code" href="cmd__nfstools_8c.html#ad8dc50f7dafd0b6ba49e1b1758cc4dca">02241</a> <span class="preprocessor"></span><span class="preprocessor">#define READDIR3_FAIL( _p_READDIR3res ) ( (_p_READDIR3res)-&gt;READDIR3res_u.resfail )</span>
<a name="l02242"></a>02242 <span class="preprocessor"></span>
<a name="l02243"></a><a class="code" href="cmd__nfstools_8h.html#a0b31242fdcb0db145d1eae26897bb4d2">02243</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a0b31242fdcb0db145d1eae26897bb4d2">cmdnfs_READDIR3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l02244"></a>02244                        <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l02245"></a>02245                        <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l02246"></a>02246 {
<a name="l02247"></a>02247   <a class="code" href="structREADDIR3res.html">READDIR3res</a> *p_rd3res = (<a class="code" href="structREADDIR3res.html">READDIR3res</a> *) p_nfs_struct;
<a name="l02248"></a>02248 
<a name="l02249"></a>02249   <span class="comment">/* sanity check */</span>
<a name="l02250"></a>02250   <span class="keywordflow">if</span>(p_rd3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02251"></a>02251     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02252"></a>02252 
<a name="l02253"></a>02253   <span class="keywordflow">switch</span> (encodeflag)
<a name="l02254"></a>02254     {
<a name="l02255"></a>02255     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l02256"></a>02256 
<a name="l02257"></a>02257       fprintf(out_stream, <span class="stringliteral">&quot;%*sREADDIR3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02258"></a>02258       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02259"></a>02259 
<a name="l02260"></a>02260       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l02261"></a>02261                          (caddr_t) &amp; p_rd3res-&gt;<a class="code" href="structREADDIR3res.html#ab64bb5d01348b4cf9addb7430dd1f551">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02262"></a>02262         {
<a name="l02263"></a>02263           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02264"></a>02264         }
<a name="l02265"></a>02265 
<a name="l02266"></a>02266       <span class="keywordflow">if</span>(p_rd3res-&gt;<a class="code" href="structREADDIR3res.html#ab64bb5d01348b4cf9addb7430dd1f551">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l02267"></a>02267         {
<a name="l02268"></a>02268           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02269"></a>02269           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l02270"></a>02270                                (caddr_t) &amp; (<a class="code" href="cmd__nfstools_8c.html#a0865d46e6103888a14b014927e38db04">READDIR3_OK</a>(p_rd3res).dir_attributes)) ==
<a name="l02271"></a>02271              <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02272"></a>02272             {
<a name="l02273"></a>02273               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02274"></a>02274             }
<a name="l02275"></a>02275           <span class="keywordflow">if</span>(cmdnfs_verf3(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l02276"></a>02276                           (caddr_t) &amp; (<a class="code" href="cmd__nfstools_8c.html#a0865d46e6103888a14b014927e38db04">READDIR3_OK</a>(p_rd3res).cookieverf),
<a name="l02277"></a>02277                           <span class="stringliteral">&quot;cookieverf&quot;</span>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02278"></a>02278             {
<a name="l02279"></a>02279               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02280"></a>02280             }
<a name="l02281"></a>02281 
<a name="l02282"></a>02282           <span class="keywordflow">if</span>(cmdnfs_dirlist3(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l02283"></a>02283                              (caddr_t) &amp; (<a class="code" href="cmd__nfstools_8c.html#a0865d46e6103888a14b014927e38db04">READDIR3_OK</a>(p_rd3res).reply)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02284"></a>02284             {
<a name="l02285"></a>02285               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02286"></a>02286             }
<a name="l02287"></a>02287 
<a name="l02288"></a>02288         }
<a name="l02289"></a>02289       <span class="keywordflow">else</span>
<a name="l02290"></a>02290         {
<a name="l02291"></a>02291           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02292"></a>02292           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l02293"></a>02293                                (caddr_t) &amp; (<a class="code" href="cmd__nfstools_8c.html#ad8dc50f7dafd0b6ba49e1b1758cc4dca">READDIR3_FAIL</a>(p_rd3res).dir_attributes)) ==
<a name="l02294"></a>02294              <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02295"></a>02295             {
<a name="l02296"></a>02296               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02297"></a>02297             }
<a name="l02298"></a>02298         }
<a name="l02299"></a>02299 
<a name="l02300"></a>02300       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02301"></a>02301 
<a name="l02302"></a>02302       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02303"></a>02303 
<a name="l02304"></a>02304       <span class="keywordflow">break</span>;
<a name="l02305"></a>02305 
<a name="l02306"></a>02306     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l02307"></a>02307       <span class="comment">/* never encoded */</span>
<a name="l02308"></a>02308     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l02309"></a>02309       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l02310"></a>02310     <span class="keywordflow">default</span>:
<a name="l02311"></a>02311       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02312"></a>02312     }
<a name="l02313"></a>02313 }
<a name="l02314"></a>02314 
<a name="l02315"></a>02315 <span class="preprocessor">#undef READDIR3_OK</span>
<a name="l02316"></a>02316 <span class="preprocessor"></span><span class="preprocessor">#undef READDIR3_FAIL</span>
<a name="l02317"></a>02317 <span class="preprocessor"></span>
<a name="l02318"></a><a class="code" href="cmd__nfstools_8h.html#aabf244cb3c969fba19d210fc6ce2d12f">02318</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#aabf244cb3c969fba19d210fc6ce2d12f">cmdnfs_READDIRPLUS3args</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l02319"></a>02319                             <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l02320"></a>02320                             <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l02321"></a>02321 {
<a name="l02322"></a>02322   <a class="code" href="structREADDIRPLUS3args.html">READDIRPLUS3args</a> *p_rdp3arg = (<a class="code" href="structREADDIRPLUS3args.html">READDIRPLUS3args</a> *) p_nfs_struct;
<a name="l02323"></a>02323   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> tmp64;
<a name="l02324"></a>02324   <span class="keywordtype">int</span> rc;
<a name="l02325"></a>02325 
<a name="l02326"></a>02326   <span class="comment">/* sanity check */</span>
<a name="l02327"></a>02327   <span class="keywordflow">if</span>(p_rdp3arg == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02328"></a>02328     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02329"></a>02329 
<a name="l02330"></a>02330   <span class="keywordflow">switch</span> (encodeflag)
<a name="l02331"></a>02331     {
<a name="l02332"></a>02332     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l02333"></a>02333 
<a name="l02334"></a>02334       <span class="keywordflow">if</span>(argc != 5)
<a name="l02335"></a>02335         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02336"></a>02336 
<a name="l02337"></a>02337       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 1, argv, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l02338"></a>02338                          (caddr_t) &amp; (p_rdp3arg-&gt;<a class="code" href="structREADDIRPLUS3args.html#a398f1ee8153b16af4bfa9f4263f786b8">dir</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02339"></a>02339         {
<a name="l02340"></a>02340 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02341"></a>02341 <span class="preprocessor"></span>          fprintf(stderr, <span class="stringliteral">&quot;dir_handle error.\n&quot;</span>);
<a name="l02342"></a>02342 <span class="preprocessor">#endif</span>
<a name="l02343"></a>02343 <span class="preprocessor"></span>          <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02344"></a>02344         }
<a name="l02345"></a>02345 
<a name="l02346"></a>02346       rc = <a class="code" href="cmd__tools_8c.html#a6e4bec3955f66ac34221da2c4117595f">ato64</a>(argv[1], &amp;tmp64);
<a name="l02347"></a>02347       <span class="keywordflow">if</span>(rc)
<a name="l02348"></a>02348         {
<a name="l02349"></a>02349 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02350"></a>02350 <span class="preprocessor"></span>          fprintf(stderr, <span class="stringliteral">&quot;cookie error.\n&quot;</span>);
<a name="l02351"></a>02351 <span class="preprocessor">#endif</span>
<a name="l02352"></a>02352 <span class="preprocessor"></span>          <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02353"></a>02353         }
<a name="l02354"></a>02354       p_rdp3arg-&gt;<a class="code" href="structREADDIRPLUS3args.html#a6566a2159ba893c82e3ab45df2731ad0">cookie</a> = tmp64;
<a name="l02355"></a>02355 
<a name="l02356"></a>02356 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02357"></a>02357 <span class="preprocessor"></span>      fprintf(stderr, <span class="stringliteral">&quot;cookie = %llu.\n&quot;</span>, tmp64);
<a name="l02358"></a>02358 <span class="preprocessor">#endif</span>
<a name="l02359"></a>02359 <span class="preprocessor"></span>
<a name="l02360"></a>02360       <span class="keywordflow">if</span>(cmdnfs_verf3(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 1, argv + 2, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l02361"></a>02361                       (caddr_t) &amp; (p_rdp3arg-&gt;<a class="code" href="structREADDIRPLUS3args.html#ae7e3e24bd06e47981fd74b368cc6a503">cookieverf</a>), <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02362"></a>02362         {
<a name="l02363"></a>02363 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02364"></a>02364 <span class="preprocessor"></span>          fprintf(stderr, <span class="stringliteral">&quot;cookieverf error.\n&quot;</span>);
<a name="l02365"></a>02365 <span class="preprocessor">#endif</span>
<a name="l02366"></a>02366 <span class="preprocessor"></span>          <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02367"></a>02367         }
<a name="l02368"></a>02368 
<a name="l02369"></a>02369       rc = <a class="code" href="cmd__tools_8c.html#a6e4bec3955f66ac34221da2c4117595f">ato64</a>(argv[3], &amp;tmp64);
<a name="l02370"></a>02370       <span class="keywordflow">if</span>(rc)
<a name="l02371"></a>02371         {
<a name="l02372"></a>02372 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02373"></a>02373 <span class="preprocessor"></span>          fprintf(stderr, <span class="stringliteral">&quot;dircount error (not a number).\n&quot;</span>);
<a name="l02374"></a>02374 <span class="preprocessor">#endif</span>
<a name="l02375"></a>02375 <span class="preprocessor"></span>          <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02376"></a>02376         }
<a name="l02377"></a>02377       <span class="keywordflow">if</span>(tmp64 &gt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)UINT_MAX)
<a name="l02378"></a>02378         {
<a name="l02379"></a>02379 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02380"></a>02380 <span class="preprocessor"></span>          fprintf(stderr, <span class="stringliteral">&quot;dircount error (number too big).\n&quot;</span>);
<a name="l02381"></a>02381 <span class="preprocessor">#endif</span>
<a name="l02382"></a>02382 <span class="preprocessor"></span>          <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02383"></a>02383         }
<a name="l02384"></a>02384 
<a name="l02385"></a>02385       p_rdp3arg-&gt;<a class="code" href="structREADDIRPLUS3args.html#afe72b289ab80c7c2f586800336efdfc9">dircount</a> = (<span class="keywordtype">unsigned</span> int)tmp64;
<a name="l02386"></a>02386 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02387"></a>02387 <span class="preprocessor"></span>      fprintf(stderr, <span class="stringliteral">&quot;dircount = %u\n&quot;</span>, p_rdp3arg-&gt;<a class="code" href="structREADDIRPLUS3args.html#afe72b289ab80c7c2f586800336efdfc9">dircount</a>);
<a name="l02388"></a>02388 <span class="preprocessor">#endif</span>
<a name="l02389"></a>02389 <span class="preprocessor"></span>
<a name="l02390"></a>02390       rc = <a class="code" href="cmd__tools_8c.html#a6e4bec3955f66ac34221da2c4117595f">ato64</a>(argv[4], &amp;tmp64);
<a name="l02391"></a>02391       <span class="keywordflow">if</span>(rc)
<a name="l02392"></a>02392         {
<a name="l02393"></a>02393 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02394"></a>02394 <span class="preprocessor"></span>          fprintf(stderr, <span class="stringliteral">&quot;maxcount error (not a number).\n&quot;</span>);
<a name="l02395"></a>02395 <span class="preprocessor">#endif</span>
<a name="l02396"></a>02396 <span class="preprocessor"></span>          <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02397"></a>02397         }
<a name="l02398"></a>02398       <span class="keywordflow">if</span>(tmp64 &gt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)UINT_MAX)
<a name="l02399"></a>02399         {
<a name="l02400"></a>02400 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02401"></a>02401 <span class="preprocessor"></span>          fprintf(stderr, <span class="stringliteral">&quot;maxcount error (number too big).\n&quot;</span>);
<a name="l02402"></a>02402 <span class="preprocessor">#endif</span>
<a name="l02403"></a>02403 <span class="preprocessor"></span>          <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02404"></a>02404         }
<a name="l02405"></a>02405 
<a name="l02406"></a>02406       p_rdp3arg-&gt;<a class="code" href="structREADDIRPLUS3args.html#a3773fdd2e2e813e964f03efc24258312">maxcount</a> = (<span class="keywordtype">unsigned</span> int)tmp64;
<a name="l02407"></a>02407 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02408"></a>02408 <span class="preprocessor"></span>      fprintf(stderr, <span class="stringliteral">&quot;maxcount = %u\n&quot;</span>, p_rdp3arg-&gt;<a class="code" href="structREADDIRPLUS3args.html#a3773fdd2e2e813e964f03efc24258312">maxcount</a>);
<a name="l02409"></a>02409 <span class="preprocessor">#endif</span>
<a name="l02410"></a>02410 <span class="preprocessor"></span>
<a name="l02411"></a>02411       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02412"></a>02412 
<a name="l02413"></a>02413     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l02414"></a>02414 
<a name="l02415"></a>02415       <a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_rdp3arg-&gt;<a class="code" href="structREADDIRPLUS3args.html#a398f1ee8153b16af4bfa9f4263f786b8">dir</a>));
<a name="l02416"></a>02416 
<a name="l02417"></a>02417       <span class="keywordflow">break</span>;
<a name="l02418"></a>02418 
<a name="l02419"></a>02419     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l02420"></a>02420       <span class="comment">/* never decoded */</span>
<a name="l02421"></a>02421     <span class="keywordflow">default</span>:
<a name="l02422"></a>02422       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02423"></a>02423     }
<a name="l02424"></a>02424   <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02425"></a>02425 }
<a name="l02426"></a>02426 
<a name="l02427"></a>02427 <span class="keyword">static</span> <span class="keywordtype">int</span> cmdnfs_dirlistplus3(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l02428"></a>02428                                <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l02429"></a>02429                                <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l02430"></a>02430 {
<a name="l02431"></a>02431   <a class="code" href="structdirlistplus3.html">dirlistplus3</a> *p_dirlistplus3 = (<a class="code" href="structdirlistplus3.html">dirlistplus3</a> *) p_nfs_struct;
<a name="l02432"></a>02432 
<a name="l02433"></a>02433   <a class="code" href="structentryplus3.html">entryplus3</a> *p_entry = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02434"></a>02434 
<a name="l02435"></a>02435   <span class="comment">/* sanity check */</span>
<a name="l02436"></a>02436   <span class="keywordflow">if</span>(p_dirlistplus3 == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02437"></a>02437     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02438"></a>02438 
<a name="l02439"></a>02439   <span class="keywordflow">switch</span> (encodeflag)
<a name="l02440"></a>02440     {
<a name="l02441"></a>02441     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l02442"></a>02442 
<a name="l02443"></a>02443       <span class="comment">/* print the list of entries */</span>
<a name="l02444"></a>02444       p_entry = p_dirlistplus3-&gt;<a class="code" href="structdirlistplus3.html#a0895037ab877822cc4180f1c97c76f40">entries</a>;
<a name="l02445"></a>02445 
<a name="l02446"></a>02446       fprintf(out_stream, <span class="stringliteral">&quot;%*sDirEntries:\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02447"></a>02447       <span class="keywordflow">while</span>(p_entry)
<a name="l02448"></a>02448         {
<a name="l02449"></a>02449           fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02450"></a>02450           fprintf(out_stream, <span class="stringliteral">&quot;%*sfileid = %#llx\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>, p_entry-&gt;<a class="code" href="structentryplus3.html#a74e653c2b62e492ce8a0c3ed96349746">fileid</a>);
<a name="l02451"></a>02451           fprintf(out_stream, <span class="stringliteral">&quot;%*sname = %s\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>, p_entry-&gt;<a class="code" href="structentryplus3.html#abb0304440ff2244c2a2e3e8cc2569a71">name</a>);
<a name="l02452"></a>02452           fprintf(out_stream, <span class="stringliteral">&quot;%*scookie = %llu\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>, p_entry-&gt;<a class="code" href="structentryplus3.html#ae0e51ec371839548a77ea82ae75a060e">cookie</a>);
<a name="l02453"></a>02453 
<a name="l02454"></a>02454           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes:\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02455"></a>02455           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 6, out_stream,
<a name="l02456"></a>02456                                (caddr_t) &amp; (p_entry-&gt;<a class="code" href="structentryplus3.html#a7aa82ecc071fb9c4ad0a1ec7666ed161">name_attributes</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02457"></a>02457             {
<a name="l02458"></a>02458               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02459"></a>02459             }
<a name="l02460"></a>02460 
<a name="l02461"></a>02461           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op handle:\n&quot;</span>, indent + 4, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02462"></a>02462           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#acc46aca72bbd733004ab3a53e25f2a05">cmdnfs_postopfh3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 6, out_stream,
<a name="l02463"></a>02463                               (caddr_t) &amp; (p_entry-&gt;<a class="code" href="structentryplus3.html#a2d683f46ff54eb776c1c437069551264">name_handle</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02464"></a>02464             {
<a name="l02465"></a>02465               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02466"></a>02466             }
<a name="l02467"></a>02467 
<a name="l02468"></a>02468           fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02469"></a>02469 
<a name="l02470"></a>02470           p_entry = p_entry-&gt;<a class="code" href="structentryplus3.html#a036ed86204d81e0ec96c8e6cfbccbcd8">nextentry</a>;
<a name="l02471"></a>02471         }
<a name="l02472"></a>02472 
<a name="l02473"></a>02473       <span class="comment">/* prinf the eof boolean */</span>
<a name="l02474"></a>02474 
<a name="l02475"></a>02475       <span class="keywordflow">if</span>(p_dirlistplus3-&gt;<a class="code" href="structdirlistplus3.html#a754d2fb317384a3c2e8f76fb188d18ad">eof</a>)
<a name="l02476"></a>02476         fprintf(out_stream, <span class="stringliteral">&quot;%*seof = TRUE\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02477"></a>02477       <span class="keywordflow">else</span>
<a name="l02478"></a>02478         fprintf(out_stream, <span class="stringliteral">&quot;%*seof = FALSE\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02479"></a>02479 
<a name="l02480"></a>02480       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02481"></a>02481       <span class="keywordflow">break</span>;
<a name="l02482"></a>02482 
<a name="l02483"></a>02483     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l02484"></a>02484       <span class="comment">/* never encoded */</span>
<a name="l02485"></a>02485     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l02486"></a>02486       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l02487"></a>02487     <span class="keywordflow">default</span>:
<a name="l02488"></a>02488       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02489"></a>02489     }
<a name="l02490"></a>02490 }
<a name="l02491"></a>02491 
<a name="l02492"></a><a class="code" href="cmd__nfstools_8c.html#a7cb4eb2fcfe6d3de58b47e7383e2f3e1">02492</a> <span class="preprocessor">#define READDIRPLUS3_OK( _p_READDIRPLUS3res ) ( (_p_READDIRPLUS3res)-&gt;READDIRPLUS3res_u.resok )</span>
<a name="l02493"></a><a class="code" href="cmd__nfstools_8c.html#a90f34daa521230a84f78d968b30d7858">02493</a> <span class="preprocessor"></span><span class="preprocessor">#define READDIRPLUS3_FAIL( _p_READDIRPLUS3res ) ( (_p_READDIRPLUS3res)-&gt;READDIRPLUS3res_u.resfail )</span>
<a name="l02494"></a>02494 <span class="preprocessor"></span>
<a name="l02495"></a><a class="code" href="cmd__nfstools_8h.html#a595a5e308779a0debbd65068018a9c57">02495</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a595a5e308779a0debbd65068018a9c57">cmdnfs_READDIRPLUS3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l02496"></a>02496                            <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l02497"></a>02497                            <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l02498"></a>02498 {
<a name="l02499"></a>02499   <a class="code" href="structREADDIRPLUS3res.html">READDIRPLUS3res</a> *p_rdp3res = (<a class="code" href="structREADDIRPLUS3res.html">READDIRPLUS3res</a> *) p_nfs_struct;
<a name="l02500"></a>02500 
<a name="l02501"></a>02501   <span class="comment">/* sanity check */</span>
<a name="l02502"></a>02502   <span class="keywordflow">if</span>(p_rdp3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02503"></a>02503     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02504"></a>02504 
<a name="l02505"></a>02505   <span class="keywordflow">switch</span> (encodeflag)
<a name="l02506"></a>02506     {
<a name="l02507"></a>02507     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l02508"></a>02508 
<a name="l02509"></a>02509       fprintf(out_stream, <span class="stringliteral">&quot;%*sREADDIRPLUS3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02510"></a>02510       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02511"></a>02511 
<a name="l02512"></a>02512       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l02513"></a>02513                          (caddr_t) &amp; p_rdp3res-&gt;<a class="code" href="structREADDIRPLUS3res.html#aef09e073945fd491985eaa3c36098006">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02514"></a>02514         {
<a name="l02515"></a>02515           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02516"></a>02516         }
<a name="l02517"></a>02517 
<a name="l02518"></a>02518       <span class="keywordflow">if</span>(p_rdp3res-&gt;<a class="code" href="structREADDIRPLUS3res.html#aef09e073945fd491985eaa3c36098006">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l02519"></a>02519         {
<a name="l02520"></a>02520           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02521"></a>02521           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l02522"></a>02522                                (caddr_t) &amp; (<a class="code" href="cmd__nfstools_8c.html#a7cb4eb2fcfe6d3de58b47e7383e2f3e1">READDIRPLUS3_OK</a>(p_rdp3res).dir_attributes))
<a name="l02523"></a>02523              == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02524"></a>02524             {
<a name="l02525"></a>02525               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02526"></a>02526             }
<a name="l02527"></a>02527           <span class="keywordflow">if</span>(cmdnfs_verf3(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l02528"></a>02528                           (caddr_t) &amp; (<a class="code" href="cmd__nfstools_8c.html#a7cb4eb2fcfe6d3de58b47e7383e2f3e1">READDIRPLUS3_OK</a>(p_rdp3res).cookieverf),
<a name="l02529"></a>02529                           <span class="stringliteral">&quot;cookieverf&quot;</span>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02530"></a>02530             {
<a name="l02531"></a>02531               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02532"></a>02532             }
<a name="l02533"></a>02533 
<a name="l02534"></a>02534           <span class="keywordflow">if</span>(cmdnfs_dirlistplus3(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l02535"></a>02535                                  (caddr_t) &amp; (<a class="code" href="cmd__nfstools_8c.html#a7cb4eb2fcfe6d3de58b47e7383e2f3e1">READDIRPLUS3_OK</a>(p_rdp3res).reply)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02536"></a>02536             {
<a name="l02537"></a>02537               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02538"></a>02538             }
<a name="l02539"></a>02539 
<a name="l02540"></a>02540         }
<a name="l02541"></a>02541       <span class="keywordflow">else</span>
<a name="l02542"></a>02542         {
<a name="l02543"></a>02543           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02544"></a>02544           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l02545"></a>02545                                (caddr_t) &amp; (<a class="code" href="cmd__nfstools_8c.html#a90f34daa521230a84f78d968b30d7858">READDIRPLUS3_FAIL</a>(p_rdp3res).dir_attributes))
<a name="l02546"></a>02546              == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02547"></a>02547             {
<a name="l02548"></a>02548               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02549"></a>02549             }
<a name="l02550"></a>02550         }
<a name="l02551"></a>02551 
<a name="l02552"></a>02552       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02553"></a>02553 
<a name="l02554"></a>02554       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02555"></a>02555 
<a name="l02556"></a>02556       <span class="keywordflow">break</span>;
<a name="l02557"></a>02557 
<a name="l02558"></a>02558     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l02559"></a>02559       <span class="comment">/* never encoded */</span>
<a name="l02560"></a>02560     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l02561"></a>02561       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l02562"></a>02562     <span class="keywordflow">default</span>:
<a name="l02563"></a>02563       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02564"></a>02564     }
<a name="l02565"></a>02565 }
<a name="l02566"></a>02566 
<a name="l02567"></a>02567 <span class="preprocessor">#undef READDIRPLUS3_OK</span>
<a name="l02568"></a>02568 <span class="preprocessor"></span><span class="preprocessor">#undef READDIRPLUS3_FAIL</span>
<a name="l02569"></a>02569 <span class="preprocessor"></span>
<a name="l02570"></a><a class="code" href="cmd__nfstools_8c.html#acaa46de7384f72a50d98e4b30c745c2f">02570</a> <span class="preprocessor">#define READLINK3_OK_ATTRS( _p_READLINK3res ) ( (_p_READLINK3res)-&gt;READLINK3res_u.resok.symlink_attributes )</span>
<a name="l02571"></a><a class="code" href="cmd__nfstools_8c.html#a0722331929e2e1eda459a78e776c91ee">02571</a> <span class="preprocessor"></span><span class="preprocessor">#define READLINK3_OK_DATA( _p_READLINK3res ) ( (_p_READLINK3res)-&gt;READLINK3res_u.resok.data )</span>
<a name="l02572"></a><a class="code" href="cmd__nfstools_8c.html#a4dd6c887306ad6cec6e55b6eae04c9f7">02572</a> <span class="preprocessor"></span><span class="preprocessor">#define READLINK3_FAIL_ATTRS( _p_READLINK3res ) ( (_p_READLINK3res)-&gt;READLINK3res_u.resfail.symlink_attributes )</span>
<a name="l02573"></a>02573 <span class="preprocessor"></span>
<a name="l02574"></a><a class="code" href="cmd__nfstools_8h.html#a2d0443b085242f596b5717bdca49a104">02574</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a2d0443b085242f596b5717bdca49a104">cmdnfs_READLINK3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l02575"></a>02575                         <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l02576"></a>02576                         <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l02577"></a>02577 {
<a name="l02578"></a>02578   <a class="code" href="structREADLINK3res.html">READLINK3res</a> *p_readlnk3res = (<a class="code" href="structREADLINK3res.html">READLINK3res</a> *) p_nfs_struct;
<a name="l02579"></a>02579 
<a name="l02580"></a>02580   <span class="comment">/* sanity check */</span>
<a name="l02581"></a>02581   <span class="keywordflow">if</span>(p_readlnk3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02582"></a>02582     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02583"></a>02583 
<a name="l02584"></a>02584   <span class="keywordflow">switch</span> (encodeflag)
<a name="l02585"></a>02585     {
<a name="l02586"></a>02586     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l02587"></a>02587 
<a name="l02588"></a>02588       fprintf(out_stream, <span class="stringliteral">&quot;%*sREADLINK3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02589"></a>02589       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02590"></a>02590 
<a name="l02591"></a>02591       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l02592"></a>02592                          (caddr_t) &amp; p_readlnk3res-&gt;<a class="code" href="structREADLINK3res.html#a6e8b72f483f0fcb5022b0b0a6537a6c7">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02593"></a>02593         {
<a name="l02594"></a>02594           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02595"></a>02595         }
<a name="l02596"></a>02596 
<a name="l02597"></a>02597       <span class="keywordflow">if</span>(p_readlnk3res-&gt;<a class="code" href="structREADLINK3res.html#a6e8b72f483f0fcb5022b0b0a6537a6c7">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l02598"></a>02598         {
<a name="l02599"></a>02599 
<a name="l02600"></a>02600           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (symlink):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02601"></a>02601           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l02602"></a>02602                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#acaa46de7384f72a50d98e4b30c745c2f">READLINK3_OK_ATTRS</a>(p_readlnk3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02603"></a>02603             {
<a name="l02604"></a>02604               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02605"></a>02605             }
<a name="l02606"></a>02606 
<a name="l02607"></a>02607           fprintf(out_stream, <span class="stringliteral">&quot;%*sdata = \&quot;%s\&quot;\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l02608"></a>02608                   <a class="code" href="cmd__nfstools_8c.html#a0722331929e2e1eda459a78e776c91ee">READLINK3_OK_DATA</a>(p_readlnk3res));
<a name="l02609"></a>02609         }
<a name="l02610"></a>02610       <span class="keywordflow">else</span>
<a name="l02611"></a>02611         {
<a name="l02612"></a>02612           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (symlink):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02613"></a>02613           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l02614"></a>02614                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a4dd6c887306ad6cec6e55b6eae04c9f7">READLINK3_FAIL_ATTRS</a>(p_readlnk3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02615"></a>02615             {
<a name="l02616"></a>02616               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02617"></a>02617             }
<a name="l02618"></a>02618         }
<a name="l02619"></a>02619 
<a name="l02620"></a>02620       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02621"></a>02621 
<a name="l02622"></a>02622       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02623"></a>02623 
<a name="l02624"></a>02624       <span class="keywordflow">break</span>;
<a name="l02625"></a>02625 
<a name="l02626"></a>02626     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l02627"></a>02627       <span class="comment">/* never encoded */</span>
<a name="l02628"></a>02628     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l02629"></a>02629       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l02630"></a>02630     <span class="keywordflow">default</span>:
<a name="l02631"></a>02631       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02632"></a>02632     }
<a name="l02633"></a>02633 }
<a name="l02634"></a>02634 
<a name="l02635"></a>02635 <span class="preprocessor">#undef READLINK3_OK_ATTRS</span>
<a name="l02636"></a>02636 <span class="preprocessor"></span><span class="preprocessor">#undef READLINK3_OK_DATA</span>
<a name="l02637"></a>02637 <span class="preprocessor"></span><span class="preprocessor">#undef READLINK3_FAIL_ATTRS</span>
<a name="l02638"></a>02638 <span class="preprocessor"></span>
<a name="l02639"></a><a class="code" href="cmd__nfstools_8c.html#a01c8856343917ca75a0567433d3c8bd8">02639</a> <span class="preprocessor">#define FSSTAT3_OK( _p_FSSTAT3res ) ( (_p_FSSTAT3res)-&gt;FSSTAT3res_u.resok )</span>
<a name="l02640"></a><a class="code" href="cmd__nfstools_8c.html#add52a378b4b141e70b96dd11472e69de">02640</a> <span class="preprocessor"></span><span class="preprocessor">#define FSSTAT3_FAIL_ATTRS( _p_FSSTAT3res ) ( (_p_FSSTAT3res)-&gt;FSSTAT3res_u.resfail.obj_attributes )</span>
<a name="l02641"></a>02641 <span class="preprocessor"></span>
<a name="l02642"></a><a class="code" href="cmd__nfstools_8h.html#aed74f750a972e950e98b021e99d7d064">02642</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#aed74f750a972e950e98b021e99d7d064">cmdnfs_FSSTAT3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l02643"></a>02643                       <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l02644"></a>02644                       <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l02645"></a>02645 {
<a name="l02646"></a>02646   <a class="code" href="structFSSTAT3res.html">FSSTAT3res</a> *p_fsstat3res = (<a class="code" href="structFSSTAT3res.html">FSSTAT3res</a> *) p_nfs_struct;
<a name="l02647"></a>02647 
<a name="l02648"></a>02648   <span class="comment">/* sanity check */</span>
<a name="l02649"></a>02649   <span class="keywordflow">if</span>(p_fsstat3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02650"></a>02650     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02651"></a>02651 
<a name="l02652"></a>02652   <span class="keywordflow">switch</span> (encodeflag)
<a name="l02653"></a>02653     {
<a name="l02654"></a>02654     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l02655"></a>02655 
<a name="l02656"></a>02656       fprintf(out_stream, <span class="stringliteral">&quot;%*sFSSTAT3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02657"></a>02657       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02658"></a>02658 
<a name="l02659"></a>02659       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l02660"></a>02660                          (caddr_t) &amp; p_fsstat3res-&gt;<a class="code" href="structFSSTAT3res.html#aab810219d16d0344207d846570febb28">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02661"></a>02661         {
<a name="l02662"></a>02662           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02663"></a>02663         }
<a name="l02664"></a>02664 
<a name="l02665"></a>02665       <span class="keywordflow">if</span>(p_fsstat3res-&gt;<a class="code" href="structFSSTAT3res.html#aab810219d16d0344207d846570febb28">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l02666"></a>02666         {
<a name="l02667"></a>02667 
<a name="l02668"></a>02668           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (symlink):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02669"></a>02669           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l02670"></a>02670                                (caddr_t) &amp; (<a class="code" href="cmd__nfstools_8c.html#a01c8856343917ca75a0567433d3c8bd8">FSSTAT3_OK</a>(p_fsstat3res).obj_attributes)) ==
<a name="l02671"></a>02671              <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02672"></a>02672             {
<a name="l02673"></a>02673               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02674"></a>02674             }
<a name="l02675"></a>02675           fprintf(out_stream, <span class="stringliteral">&quot;%*stotal_bytes = %llu\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l02676"></a>02676                   <a class="code" href="cmd__nfstools_8c.html#a01c8856343917ca75a0567433d3c8bd8">FSSTAT3_OK</a>(p_fsstat3res).tbytes);
<a name="l02677"></a>02677           fprintf(out_stream, <span class="stringliteral">&quot;%*sfree_bytes = %llu\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l02678"></a>02678                   <a class="code" href="cmd__nfstools_8c.html#a01c8856343917ca75a0567433d3c8bd8">FSSTAT3_OK</a>(p_fsstat3res).fbytes);
<a name="l02679"></a>02679           fprintf(out_stream, <span class="stringliteral">&quot;%*savail_bytes = %llu\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l02680"></a>02680                   <a class="code" href="cmd__nfstools_8c.html#a01c8856343917ca75a0567433d3c8bd8">FSSTAT3_OK</a>(p_fsstat3res).abytes);
<a name="l02681"></a>02681           fprintf(out_stream, <span class="stringliteral">&quot;%*stotal_files = %llu\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l02682"></a>02682                   <a class="code" href="cmd__nfstools_8c.html#a01c8856343917ca75a0567433d3c8bd8">FSSTAT3_OK</a>(p_fsstat3res).tfiles);
<a name="l02683"></a>02683           fprintf(out_stream, <span class="stringliteral">&quot;%*sfree_files = %llu\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l02684"></a>02684                   <a class="code" href="cmd__nfstools_8c.html#a01c8856343917ca75a0567433d3c8bd8">FSSTAT3_OK</a>(p_fsstat3res).ffiles);
<a name="l02685"></a>02685           fprintf(out_stream, <span class="stringliteral">&quot;%*savail_files = %llu\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l02686"></a>02686                   <a class="code" href="cmd__nfstools_8c.html#a01c8856343917ca75a0567433d3c8bd8">FSSTAT3_OK</a>(p_fsstat3res).afiles);
<a name="l02687"></a>02687           fprintf(out_stream, <span class="stringliteral">&quot;%*sinvar_sec = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l02688"></a>02688                   <a class="code" href="cmd__nfstools_8c.html#a01c8856343917ca75a0567433d3c8bd8">FSSTAT3_OK</a>(p_fsstat3res).invarsec);
<a name="l02689"></a>02689 
<a name="l02690"></a>02690         }
<a name="l02691"></a>02691       <span class="keywordflow">else</span>
<a name="l02692"></a>02692         {
<a name="l02693"></a>02693           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (object):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02694"></a>02694           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l02695"></a>02695                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#add52a378b4b141e70b96dd11472e69de">FSSTAT3_FAIL_ATTRS</a>(p_fsstat3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02696"></a>02696             {
<a name="l02697"></a>02697               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02698"></a>02698             }
<a name="l02699"></a>02699         }
<a name="l02700"></a>02700 
<a name="l02701"></a>02701       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02702"></a>02702 
<a name="l02703"></a>02703       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02704"></a>02704 
<a name="l02705"></a>02705       <span class="keywordflow">break</span>;
<a name="l02706"></a>02706 
<a name="l02707"></a>02707     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l02708"></a>02708       <span class="comment">/* never encoded */</span>
<a name="l02709"></a>02709     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l02710"></a>02710       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l02711"></a>02711     <span class="keywordflow">default</span>:
<a name="l02712"></a>02712       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02713"></a>02713     }
<a name="l02714"></a>02714 }
<a name="l02715"></a>02715 
<a name="l02716"></a>02716 <span class="preprocessor">#undef FSSTAT3_OK</span>
<a name="l02717"></a>02717 <span class="preprocessor"></span><span class="preprocessor">#undef FSSTAT3_FAIL_ATTRS</span>
<a name="l02718"></a>02718 <span class="preprocessor"></span>
<a name="l02719"></a><a class="code" href="cmd__nfstools_8h.html#ac2cf041edcc7a02020f4ff166d514815">02719</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#ac2cf041edcc7a02020f4ff166d514815">cmdnfs_ACCESS3args</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l02720"></a>02720                        <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l02721"></a>02721                        <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l02722"></a>02722 {
<a name="l02723"></a>02723   <a class="code" href="structACCESS3args.html">ACCESS3args</a> *p_access3args = (<a class="code" href="structACCESS3args.html">ACCESS3args</a> *) p_nfs_struct;
<a name="l02724"></a>02724 
<a name="l02725"></a>02725   <span class="keywordtype">char</span> *str_access;
<a name="l02726"></a>02726   <span class="comment">/* sanity check */</span>
<a name="l02727"></a>02727   <span class="keywordflow">if</span>(p_access3args == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02728"></a>02728     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02729"></a>02729 
<a name="l02730"></a>02730   <span class="keywordflow">switch</span> (encodeflag)
<a name="l02731"></a>02731     {
<a name="l02732"></a>02732     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l02733"></a>02733 
<a name="l02734"></a>02734       <span class="keywordflow">if</span>(argc != 2)
<a name="l02735"></a>02735         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02736"></a>02736 
<a name="l02737"></a>02737       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 1, argv, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l02738"></a>02738                          (caddr_t) &amp; (p_access3args-&gt;<a class="code" href="structACCESS3args.html#addbe54f2bd715fa0a5a4b74494958c63">object</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02739"></a>02739         {
<a name="l02740"></a>02740           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02741"></a>02741         }
<a name="l02742"></a>02742 
<a name="l02743"></a>02743       <span class="comment">/* access 2e arg: R(ead) L(ookup) M(odify) E(xtend) D(elete) (e)X(ecute) */</span>
<a name="l02744"></a>02744       <span class="comment">/* convert a &quot;RLMEDX&quot; string to an NFS access mask. */</span>
<a name="l02745"></a>02745 
<a name="l02746"></a>02746       p_access3args-&gt;<a class="code" href="structACCESS3args.html#a94bc97926547253c27b525cf9f6ce498">access</a> = 0;
<a name="l02747"></a>02747 
<a name="l02748"></a>02748       str_access = argv[1];
<a name="l02749"></a>02749       <span class="keywordflow">while</span>(str_access[0] != <span class="charliteral">&#39;\0&#39;</span>)
<a name="l02750"></a>02750         {
<a name="l02751"></a>02751           <span class="keywordflow">if</span>((str_access[0] == <span class="charliteral">&#39;r&#39;</span>) || (str_access[0] == <span class="charliteral">&#39;R&#39;</span>))
<a name="l02752"></a>02752             p_access3args-&gt;<a class="code" href="structACCESS3args.html#a94bc97926547253c27b525cf9f6ce498">access</a> |= <a class="code" href="nfs23_8h.html#a7ad99cccff38bb3a53d261dd35c3cf79">ACCESS3_READ</a>;
<a name="l02753"></a>02753           <span class="keywordflow">else</span> <span class="keywordflow">if</span>((str_access[0] == <span class="charliteral">&#39;l&#39;</span>) || (str_access[0] == <span class="charliteral">&#39;L&#39;</span>))
<a name="l02754"></a>02754             p_access3args-&gt;<a class="code" href="structACCESS3args.html#a94bc97926547253c27b525cf9f6ce498">access</a> |= <a class="code" href="nfs23_8h.html#a0ecd105be986d0c387c662dd6e4d1793">ACCESS3_LOOKUP</a>;
<a name="l02755"></a>02755           <span class="keywordflow">else</span> <span class="keywordflow">if</span>((str_access[0] == <span class="charliteral">&#39;m&#39;</span>) || (str_access[0] == <span class="charliteral">&#39;M&#39;</span>))
<a name="l02756"></a>02756             p_access3args-&gt;<a class="code" href="structACCESS3args.html#a94bc97926547253c27b525cf9f6ce498">access</a> |= <a class="code" href="nfs23_8h.html#ab3da3d85ecf5fbd06dbe40f12b761942">ACCESS3_MODIFY</a>;
<a name="l02757"></a>02757           <span class="keywordflow">else</span> <span class="keywordflow">if</span>((str_access[0] == <span class="charliteral">&#39;e&#39;</span>) || (str_access[0] == <span class="charliteral">&#39;E&#39;</span>))
<a name="l02758"></a>02758             p_access3args-&gt;<a class="code" href="structACCESS3args.html#a94bc97926547253c27b525cf9f6ce498">access</a> |= <a class="code" href="nfs23_8h.html#a550d969b8907291b8328eac18824b8a8">ACCESS3_EXTEND</a>;
<a name="l02759"></a>02759           <span class="keywordflow">else</span> <span class="keywordflow">if</span>((str_access[0] == <span class="charliteral">&#39;d&#39;</span>) || (str_access[0] == <span class="charliteral">&#39;D&#39;</span>))
<a name="l02760"></a>02760             p_access3args-&gt;<a class="code" href="structACCESS3args.html#a94bc97926547253c27b525cf9f6ce498">access</a> |= <a class="code" href="nfs23_8h.html#a1daefe290f2711ef4e4ba873dca7ec68">ACCESS3_DELETE</a>;
<a name="l02761"></a>02761           <span class="keywordflow">else</span> <span class="keywordflow">if</span>((str_access[0] == <span class="charliteral">&#39;x&#39;</span>) || (str_access[0] == <span class="charliteral">&#39;X&#39;</span>))
<a name="l02762"></a>02762             p_access3args-&gt;<a class="code" href="structACCESS3args.html#a94bc97926547253c27b525cf9f6ce498">access</a> |= <a class="code" href="nfs23_8h.html#aebd86a2fb196e0682736070fac8bf6fb">ACCESS3_EXECUTE</a>;
<a name="l02763"></a>02763           <span class="keywordflow">else</span>
<a name="l02764"></a>02764             {
<a name="l02765"></a>02765 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l02766"></a>02766 <span class="preprocessor"></span>              fprintf(stderr, <span class="stringliteral">&quot;access flag error: unknown flag \&quot;%c\&quot;.\n&quot;</span>, str_access[0]);
<a name="l02767"></a>02767 <span class="preprocessor">#endif</span>
<a name="l02768"></a>02768 <span class="preprocessor"></span>              <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02769"></a>02769             }
<a name="l02770"></a>02770 
<a name="l02771"></a>02771           str_access++;
<a name="l02772"></a>02772         }
<a name="l02773"></a>02773 
<a name="l02774"></a>02774       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02775"></a>02775 
<a name="l02776"></a>02776     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l02777"></a>02777       <a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_access3args-&gt;<a class="code" href="structACCESS3args.html#addbe54f2bd715fa0a5a4b74494958c63">object</a>));
<a name="l02778"></a>02778       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02779"></a>02779       <span class="keywordflow">break</span>;
<a name="l02780"></a>02780 
<a name="l02781"></a>02781     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l02782"></a>02782       <span class="comment">/* never decoded */</span>
<a name="l02783"></a>02783     <span class="keywordflow">default</span>:
<a name="l02784"></a>02784       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02785"></a>02785     }
<a name="l02786"></a>02786 }
<a name="l02787"></a>02787 
<a name="l02788"></a><a class="code" href="cmd__nfstools_8c.html#a565508548351beca21afe5e619db2b91">02788</a> <span class="preprocessor">#define ACCESS3_OK_ATTRS( _p_ACCESS3res ) ( (_p_ACCESS3res)-&gt;ACCESS3res_u.resok.obj_attributes )</span>
<a name="l02789"></a><a class="code" href="cmd__nfstools_8c.html#a1b7ccd5d1d943a4c72f13baaf80d9225">02789</a> <span class="preprocessor"></span><span class="preprocessor">#define ACCESS3_OK_ACCESS( _p_ACCESS3res ) ( (_p_ACCESS3res)-&gt;ACCESS3res_u.resok.access )</span>
<a name="l02790"></a><a class="code" href="cmd__nfstools_8c.html#a75f238cc17adb8de42e26dcfb11de2d7">02790</a> <span class="preprocessor"></span><span class="preprocessor">#define ACCESS3_FAIL_ATTRS( _p_ACCESS3res ) ( (_p_ACCESS3res)-&gt;ACCESS3res_u.resfail.obj_attributes )</span>
<a name="l02791"></a>02791 <span class="preprocessor"></span>
<a name="l02792"></a><a class="code" href="cmd__nfstools_8h.html#a98043821c2e34f63dc8449c264f9da41">02792</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a98043821c2e34f63dc8449c264f9da41">cmdnfs_ACCESS3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l02793"></a>02793                       <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l02794"></a>02794                       <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l02795"></a>02795 {
<a name="l02796"></a>02796   <a class="code" href="structACCESS3res.html">ACCESS3res</a> *p_access3res = (<a class="code" href="structACCESS3res.html">ACCESS3res</a> *) p_nfs_struct;
<a name="l02797"></a>02797 
<a name="l02798"></a>02798   <span class="comment">/* sanity check */</span>
<a name="l02799"></a>02799   <span class="keywordflow">if</span>(p_access3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02800"></a>02800     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02801"></a>02801 
<a name="l02802"></a>02802   <span class="keywordflow">switch</span> (encodeflag)
<a name="l02803"></a>02803     {
<a name="l02804"></a>02804     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l02805"></a>02805 
<a name="l02806"></a>02806       fprintf(out_stream, <span class="stringliteral">&quot;%*sACCESS3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02807"></a>02807       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02808"></a>02808 
<a name="l02809"></a>02809       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l02810"></a>02810                          (caddr_t) &amp; p_access3res-&gt;<a class="code" href="structACCESS3res.html#ad82bcce681dcc529489dfd292a2eb00b">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02811"></a>02811         {
<a name="l02812"></a>02812           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02813"></a>02813         }
<a name="l02814"></a>02814 
<a name="l02815"></a>02815       <span class="keywordflow">if</span>(p_access3res-&gt;<a class="code" href="structACCESS3res.html#ad82bcce681dcc529489dfd292a2eb00b">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l02816"></a>02816         {
<a name="l02817"></a>02817 
<a name="l02818"></a>02818           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (object):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02819"></a>02819           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l02820"></a>02820                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a565508548351beca21afe5e619db2b91">ACCESS3_OK_ATTRS</a>(p_access3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02821"></a>02821             {
<a name="l02822"></a>02822               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02823"></a>02823             }
<a name="l02824"></a>02824 
<a name="l02825"></a>02825           <span class="comment">/* print acces rights */</span>
<a name="l02826"></a>02826           fprintf(out_stream, <span class="stringliteral">&quot;%*saccess =&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02827"></a>02827           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a1b7ccd5d1d943a4c72f13baaf80d9225">ACCESS3_OK_ACCESS</a>(p_access3res) &amp; <a class="code" href="nfs23_8h.html#a7ad99cccff38bb3a53d261dd35c3cf79">ACCESS3_READ</a>)
<a name="l02828"></a>02828             fprintf(out_stream, <span class="stringliteral">&quot; READ&quot;</span>);
<a name="l02829"></a>02829           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a1b7ccd5d1d943a4c72f13baaf80d9225">ACCESS3_OK_ACCESS</a>(p_access3res) &amp; <a class="code" href="nfs23_8h.html#a0ecd105be986d0c387c662dd6e4d1793">ACCESS3_LOOKUP</a>)
<a name="l02830"></a>02830             fprintf(out_stream, <span class="stringliteral">&quot; LOOKUP&quot;</span>);
<a name="l02831"></a>02831           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a1b7ccd5d1d943a4c72f13baaf80d9225">ACCESS3_OK_ACCESS</a>(p_access3res) &amp; <a class="code" href="nfs23_8h.html#ab3da3d85ecf5fbd06dbe40f12b761942">ACCESS3_MODIFY</a>)
<a name="l02832"></a>02832             fprintf(out_stream, <span class="stringliteral">&quot; MODIFY&quot;</span>);
<a name="l02833"></a>02833           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a1b7ccd5d1d943a4c72f13baaf80d9225">ACCESS3_OK_ACCESS</a>(p_access3res) &amp; <a class="code" href="nfs23_8h.html#a550d969b8907291b8328eac18824b8a8">ACCESS3_EXTEND</a>)
<a name="l02834"></a>02834             fprintf(out_stream, <span class="stringliteral">&quot; EXTEND&quot;</span>);
<a name="l02835"></a>02835           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a1b7ccd5d1d943a4c72f13baaf80d9225">ACCESS3_OK_ACCESS</a>(p_access3res) &amp; <a class="code" href="nfs23_8h.html#a1daefe290f2711ef4e4ba873dca7ec68">ACCESS3_DELETE</a>)
<a name="l02836"></a>02836             fprintf(out_stream, <span class="stringliteral">&quot; DELETE&quot;</span>);
<a name="l02837"></a>02837           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a1b7ccd5d1d943a4c72f13baaf80d9225">ACCESS3_OK_ACCESS</a>(p_access3res) &amp; <a class="code" href="nfs23_8h.html#aebd86a2fb196e0682736070fac8bf6fb">ACCESS3_EXECUTE</a>)
<a name="l02838"></a>02838             fprintf(out_stream, <span class="stringliteral">&quot; EXECUTE&quot;</span>);
<a name="l02839"></a>02839           fprintf(out_stream, <span class="stringliteral">&quot; (%#.4x)\n&quot;</span>, <a class="code" href="cmd__nfstools_8c.html#a1b7ccd5d1d943a4c72f13baaf80d9225">ACCESS3_OK_ACCESS</a>(p_access3res));
<a name="l02840"></a>02840 
<a name="l02841"></a>02841         }
<a name="l02842"></a>02842       <span class="keywordflow">else</span>
<a name="l02843"></a>02843         {
<a name="l02844"></a>02844           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (object):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02845"></a>02845           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l02846"></a>02846                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a75f238cc17adb8de42e26dcfb11de2d7">ACCESS3_FAIL_ATTRS</a>(p_access3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02847"></a>02847             {
<a name="l02848"></a>02848               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02849"></a>02849             }
<a name="l02850"></a>02850         }
<a name="l02851"></a>02851 
<a name="l02852"></a>02852       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02853"></a>02853 
<a name="l02854"></a>02854       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02855"></a>02855 
<a name="l02856"></a>02856       <span class="keywordflow">break</span>;
<a name="l02857"></a>02857 
<a name="l02858"></a>02858     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l02859"></a>02859       <span class="comment">/* never encoded */</span>
<a name="l02860"></a>02860     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l02861"></a>02861       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l02862"></a>02862     <span class="keywordflow">default</span>:
<a name="l02863"></a>02863       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02864"></a>02864     }
<a name="l02865"></a>02865 }
<a name="l02866"></a>02866 
<a name="l02867"></a>02867 <span class="preprocessor">#undef ACCESS3_OK_ATTRS</span>
<a name="l02868"></a>02868 <span class="preprocessor"></span><span class="preprocessor">#undef ACCESS3_OK_ACCESS</span>
<a name="l02869"></a>02869 <span class="preprocessor"></span><span class="preprocessor">#undef ACCESS3_FAIL_ATTRS</span>
<a name="l02870"></a>02870 <span class="preprocessor"></span>
<a name="l02871"></a><a class="code" href="cmd__nfstools_8h.html#ae8067d0506d9682565c428a996623f0a">02871</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#ae8067d0506d9682565c428a996623f0a">cmdnfs_CREATE3args</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l02872"></a>02872                        <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l02873"></a>02873                        <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l02874"></a>02874 {
<a name="l02875"></a>02875   <a class="code" href="structCREATE3args.html">CREATE3args</a> *p_CREATE3args = (<a class="code" href="structCREATE3args.html">CREATE3args</a> *) p_nfs_struct;
<a name="l02876"></a>02876   <span class="keywordtype">char</span> *str_mode;
<a name="l02877"></a>02877 
<a name="l02878"></a>02878   <span class="comment">/* sanity check */</span>
<a name="l02879"></a>02879   <span class="keywordflow">if</span>(p_CREATE3args == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02880"></a>02880     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02881"></a>02881 
<a name="l02882"></a>02882   <span class="keywordflow">switch</span> (encodeflag)
<a name="l02883"></a>02883     {
<a name="l02884"></a>02884     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l02885"></a>02885 
<a name="l02886"></a>02886       <span class="keywordflow">if</span>((argc != 3) &amp;&amp; (argc != 4))
<a name="l02887"></a>02887         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02888"></a>02888 
<a name="l02889"></a>02889       <span class="comment">/* The first two args */</span>
<a name="l02890"></a>02890       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a242dedae1aa72eac02a1465e81b9441b">cmdnfs_diropargs3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 2, argv, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l02891"></a>02891                            (caddr_t) &amp; (p_CREATE3args-&gt;<a class="code" href="structCREATE3args.html#a66dde2509a8f5650358882ed83279477">where</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02892"></a>02892         {
<a name="l02893"></a>02893           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02894"></a>02894         }
<a name="l02895"></a>02895 
<a name="l02896"></a>02896       <span class="comment">/* CREATE 3e arg: UNCHECKED, GUARDED or EXCLUSIVE */</span>
<a name="l02897"></a>02897 
<a name="l02898"></a>02898       str_mode = argv[2];
<a name="l02899"></a>02899       <span class="keywordflow">if</span>(!strcasecmp(str_mode, <span class="stringliteral">&quot;UNCHECKED&quot;</span>))
<a name="l02900"></a>02900         p_CREATE3args-&gt;<a class="code" href="structCREATE3args.html#a9136faa9e2c0616c8e2112c561cbb6fc">how</a>.<a class="code" href="structcreatehow3.html#a590bdfdcb639da9fea76f525e52387f4">mode</a> = <a class="code" href="nfs23_8h.html#adc37f68185850e518e76a8ace956946fac09241148cb51bc72137fbe835df8986">UNCHECKED</a>;
<a name="l02901"></a>02901       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcasecmp(str_mode, <span class="stringliteral">&quot;GUARDED&quot;</span>))
<a name="l02902"></a>02902         p_CREATE3args-&gt;<a class="code" href="structCREATE3args.html#a9136faa9e2c0616c8e2112c561cbb6fc">how</a>.<a class="code" href="structcreatehow3.html#a590bdfdcb639da9fea76f525e52387f4">mode</a> = <a class="code" href="nfs23_8h.html#adc37f68185850e518e76a8ace956946fa2bd8a5d7d693356de33a89cef6c219fb">GUARDED</a>;
<a name="l02903"></a>02903       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcasecmp(str_mode, <span class="stringliteral">&quot;EXCLUSIVE&quot;</span>))
<a name="l02904"></a>02904         p_CREATE3args-&gt;<a class="code" href="structCREATE3args.html#a9136faa9e2c0616c8e2112c561cbb6fc">how</a>.<a class="code" href="structcreatehow3.html#a590bdfdcb639da9fea76f525e52387f4">mode</a> = <a class="code" href="nfs23_8h.html#adc37f68185850e518e76a8ace956946fa088b83acb938fbda78ab567a1a6e71e0">EXCLUSIVE</a>;
<a name="l02905"></a>02905       <span class="keywordflow">else</span>
<a name="l02906"></a>02906         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02907"></a>02907 
<a name="l02908"></a>02908       <span class="comment">/* CREATE 4th arg: sattr3 list or a create verifier */</span>
<a name="l02909"></a>02909 
<a name="l02910"></a>02910       switch (p_CREATE3args-&gt;<a class="code" href="structCREATE3args.html#a9136faa9e2c0616c8e2112c561cbb6fc">how</a>.<a class="code" href="structcreatehow3.html#a590bdfdcb639da9fea76f525e52387f4">mode</a>)
<a name="l02911"></a>02911         {
<a name="l02912"></a>02912         <span class="keywordflow">case</span> <a class="code" href="nfs23_8h.html#adc37f68185850e518e76a8ace956946fac09241148cb51bc72137fbe835df8986">UNCHECKED</a>:
<a name="l02913"></a>02913         <span class="keywordflow">case</span> <a class="code" href="nfs23_8h.html#adc37f68185850e518e76a8ace956946fa2bd8a5d7d693356de33a89cef6c219fb">GUARDED</a>:
<a name="l02914"></a>02914 
<a name="l02915"></a>02915           <span class="comment">/* The optional 4th arg is a sattr3 list */</span>
<a name="l02916"></a>02916           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a1e0a6cd7c4500a3cfbb1a35cb2105436">cmdnfs_sattr3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, argc - 3, argv + 3, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l02917"></a>02917                            (caddr_t) &amp; (p_CREATE3args-&gt;<a class="code" href="structCREATE3args.html#a9136faa9e2c0616c8e2112c561cbb6fc">how</a>.<a class="code" href="structcreatehow3.html#ad3ad7d1ab9c070bbacecb95f78065c86">createhow3_u</a>.<a class="code" href="structcreatehow3.html#a9fe00dc10c2d7b2d9940f630a3c98112">obj_attributes</a>))
<a name="l02918"></a>02918              == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02919"></a>02919             {
<a name="l02920"></a>02920               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02921"></a>02921             }
<a name="l02922"></a>02922 
<a name="l02923"></a>02923           <span class="keywordflow">break</span>;
<a name="l02924"></a>02924         <span class="keywordflow">case</span> <a class="code" href="nfs23_8h.html#adc37f68185850e518e76a8ace956946fa088b83acb938fbda78ab567a1a6e71e0">EXCLUSIVE</a>:
<a name="l02925"></a>02925 
<a name="l02926"></a>02926           <span class="comment">/* The mandatory 4rd arg is a create verifier */</span>
<a name="l02927"></a>02927           <span class="keywordflow">if</span>(cmdnfs_verf3(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, argc - 3, argv + 3, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l02928"></a>02928                           (caddr_t) &amp; (p_CREATE3args-&gt;<a class="code" href="structCREATE3args.html#a9136faa9e2c0616c8e2112c561cbb6fc">how</a>.<a class="code" href="structcreatehow3.html#ad3ad7d1ab9c070bbacecb95f78065c86">createhow3_u</a>.<a class="code" href="structcreatehow3.html#aa905400ae4f1d264e10e6d719162bd3f">verf</a>),
<a name="l02929"></a>02929                           <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l02930"></a>02930             {
<a name="l02931"></a>02931               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02932"></a>02932             }
<a name="l02933"></a>02933 
<a name="l02934"></a>02934           <span class="keywordflow">break</span>;
<a name="l02935"></a>02935         }
<a name="l02936"></a>02936 
<a name="l02937"></a>02937       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02938"></a>02938 
<a name="l02939"></a>02939     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l02940"></a>02940 
<a name="l02941"></a>02941       <a class="code" href="cmd__nfstools_8c.html#a242dedae1aa72eac02a1465e81b9441b">cmdnfs_diropargs3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l02942"></a>02942                         (caddr_t) &amp; (p_CREATE3args-&gt;<a class="code" href="structCREATE3args.html#a66dde2509a8f5650358882ed83279477">where</a>));
<a name="l02943"></a>02943 
<a name="l02944"></a>02944       <span class="keywordflow">switch</span> (p_CREATE3args-&gt;<a class="code" href="structCREATE3args.html#a9136faa9e2c0616c8e2112c561cbb6fc">how</a>.<a class="code" href="structcreatehow3.html#a590bdfdcb639da9fea76f525e52387f4">mode</a>)
<a name="l02945"></a>02945         {
<a name="l02946"></a>02946         <span class="keywordflow">case</span> <a class="code" href="nfs23_8h.html#adc37f68185850e518e76a8ace956946fac09241148cb51bc72137fbe835df8986">UNCHECKED</a>:
<a name="l02947"></a>02947         <span class="keywordflow">case</span> <a class="code" href="nfs23_8h.html#adc37f68185850e518e76a8ace956946fa2bd8a5d7d693356de33a89cef6c219fb">GUARDED</a>:
<a name="l02948"></a>02948           <a class="code" href="cmd__nfstools_8c.html#a1e0a6cd7c4500a3cfbb1a35cb2105436">cmdnfs_sattr3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l02949"></a>02949                         (caddr_t) &amp; (p_CREATE3args-&gt;<a class="code" href="structCREATE3args.html#a9136faa9e2c0616c8e2112c561cbb6fc">how</a>.<a class="code" href="structcreatehow3.html#ad3ad7d1ab9c070bbacecb95f78065c86">createhow3_u</a>.<a class="code" href="structcreatehow3.html#a9fe00dc10c2d7b2d9940f630a3c98112">obj_attributes</a>));
<a name="l02950"></a>02950           <span class="keywordflow">break</span>;
<a name="l02951"></a>02951 
<a name="l02952"></a>02952         <span class="keywordflow">case</span> <a class="code" href="nfs23_8h.html#adc37f68185850e518e76a8ace956946fa088b83acb938fbda78ab567a1a6e71e0">EXCLUSIVE</a>:
<a name="l02953"></a>02953           cmdnfs_verf3(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l02954"></a>02954                        (caddr_t) &amp; (p_CREATE3args-&gt;<a class="code" href="structCREATE3args.html#a9136faa9e2c0616c8e2112c561cbb6fc">how</a>.<a class="code" href="structcreatehow3.html#ad3ad7d1ab9c070bbacecb95f78065c86">createhow3_u</a>.<a class="code" href="structcreatehow3.html#aa905400ae4f1d264e10e6d719162bd3f">verf</a>), <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l02955"></a>02955           <span class="keywordflow">break</span>;
<a name="l02956"></a>02956         }
<a name="l02957"></a>02957 
<a name="l02958"></a>02958       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l02959"></a>02959       <span class="keywordflow">break</span>;
<a name="l02960"></a>02960 
<a name="l02961"></a>02961     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l02962"></a>02962       <span class="comment">/* never decoded */</span>
<a name="l02963"></a>02963     <span class="keywordflow">default</span>:
<a name="l02964"></a>02964       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02965"></a>02965     }
<a name="l02966"></a>02966 }
<a name="l02967"></a>02967 
<a name="l02968"></a><a class="code" href="cmd__nfstools_8c.html#a8844a50937b3ebe57a7bf43d4226af4a">02968</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a8844a50937b3ebe57a7bf43d4226af4a">cmdnfs_preopattr</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l02969"></a>02969                      <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l02970"></a>02970                      <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l02971"></a>02971 {
<a name="l02972"></a>02972   <a class="code" href="structpre__op__attr.html">pre_op_attr</a> *p_opattr = (<a class="code" href="structpre__op__attr.html">pre_op_attr</a> *) p_nfs_struct;
<a name="l02973"></a>02973   <a class="code" href="structwcc__attr.html">wcc_attr</a> *p_wccattr;
<a name="l02974"></a>02974   <span class="keywordtype">char</span> tmp_buff[256];
<a name="l02975"></a>02975   <span class="keyword">struct </span>tm paramtm;
<a name="l02976"></a>02976   <span class="comment">/* sanity check */</span>
<a name="l02977"></a>02977   <span class="keywordflow">if</span>(p_opattr == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02978"></a>02978     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l02979"></a>02979 
<a name="l02980"></a>02980   <span class="keywordflow">switch</span> (encodeflag)
<a name="l02981"></a>02981     {
<a name="l02982"></a>02982     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l02983"></a>02983 
<a name="l02984"></a>02984       <span class="keywordflow">if</span>(p_opattr-&gt;<a class="code" href="structpre__op__attr.html#a1f5d71767f1e6b76ec35f5fc34859a57">attributes_follow</a>)
<a name="l02985"></a>02985         {
<a name="l02986"></a>02986           p_wccattr = &amp;(p_opattr-&gt;<a class="code" href="structpre__op__attr.html#ae00e06d3376aaacd42b7a89a0f3878ef">pre_op_attr_u</a>.<a class="code" href="structpre__op__attr.html#aad31dce15a8670cc5744b89dd2da265b">attributes</a>);
<a name="l02987"></a>02987 
<a name="l02988"></a>02988           fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l02989"></a>02989 
<a name="l02990"></a>02990           fprintf(out_stream, <span class="stringliteral">&quot;%*ssize = %llu\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>, p_wccattr-&gt;<a class="code" href="structwcc__attr.html#ab9b1a271d60b32f67d41b0f2cb59b6f0">size</a>);
<a name="l02991"></a>02991 
<a name="l02992"></a>02992           strftime(tmp_buff, 256, <span class="stringliteral">&quot;%Y-%m-%d %T&quot;</span>,
<a name="l02993"></a>02993                    <a class="code" href="log__functions_8c.html#a61fa1aca88aec5370822f995ded637b3">Localtime_r</a>((time_t *) &amp; p_wccattr-&gt;<a class="code" href="structwcc__attr.html#aa90fb6afd5a3824894919701ccdc9713">mtime</a>.<a class="code" href="structnfstime3.html#a6765f76aef63ace5fb0ce3dc904f14c3">seconds</a>, &amp;paramtm));
<a name="l02994"></a>02994           fprintf(out_stream, <span class="stringliteral">&quot;%*smtime = %u.%.9u (%s)\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l02995"></a>02995                   p_wccattr-&gt;<a class="code" href="structwcc__attr.html#aa90fb6afd5a3824894919701ccdc9713">mtime</a>.<a class="code" href="structnfstime3.html#a6765f76aef63ace5fb0ce3dc904f14c3">seconds</a>, p_wccattr-&gt;<a class="code" href="structwcc__attr.html#aa90fb6afd5a3824894919701ccdc9713">mtime</a>.<a class="code" href="structnfstime3.html#aad0965ff90c90abd7d7c4c431e7e41a1">nseconds</a>, tmp_buff);
<a name="l02996"></a>02996 
<a name="l02997"></a>02997           strftime(tmp_buff, 256, <span class="stringliteral">&quot;%Y-%m-%d %T&quot;</span>,
<a name="l02998"></a>02998                    <a class="code" href="log__functions_8c.html#a61fa1aca88aec5370822f995ded637b3">Localtime_r</a>((time_t *) &amp; p_wccattr-&gt;<a class="code" href="structwcc__attr.html#ad5d9b31c95d7c615e3552e86c5c0fa14">ctime</a>.<a class="code" href="structnfstime3.html#a6765f76aef63ace5fb0ce3dc904f14c3">seconds</a>, &amp;paramtm));
<a name="l02999"></a>02999           fprintf(out_stream, <span class="stringliteral">&quot;%*sctime = %u.%.9u (%s)\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l03000"></a>03000                   p_wccattr-&gt;<a class="code" href="structwcc__attr.html#ad5d9b31c95d7c615e3552e86c5c0fa14">ctime</a>.<a class="code" href="structnfstime3.html#a6765f76aef63ace5fb0ce3dc904f14c3">seconds</a>, p_wccattr-&gt;<a class="code" href="structwcc__attr.html#ad5d9b31c95d7c615e3552e86c5c0fa14">ctime</a>.<a class="code" href="structnfstime3.html#aad0965ff90c90abd7d7c4c431e7e41a1">nseconds</a>, tmp_buff);
<a name="l03001"></a>03001 
<a name="l03002"></a>03002           fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03003"></a>03003         }
<a name="l03004"></a>03004       <span class="keywordflow">else</span>
<a name="l03005"></a>03005         {
<a name="l03006"></a>03006           fprintf(out_stream, <span class="stringliteral">&quot;%*sN/A\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03007"></a>03007           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03008"></a>03008         }
<a name="l03009"></a>03009 
<a name="l03010"></a>03010       <span class="keywordflow">break</span>;
<a name="l03011"></a>03011 
<a name="l03012"></a>03012     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l03013"></a>03013       <span class="comment">/* never encoded */</span>
<a name="l03014"></a>03014     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l03015"></a>03015       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l03016"></a>03016     <span class="keywordflow">default</span>:
<a name="l03017"></a>03017       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03018"></a>03018     }
<a name="l03019"></a>03019   <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03020"></a>03020 }
<a name="l03021"></a>03021 
<a name="l03022"></a><a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">03022</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l03023"></a>03023                    <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l03024"></a>03024                    <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l03025"></a>03025 {
<a name="l03026"></a>03026   <a class="code" href="structwcc__data.html">wcc_data</a> *p_wccdata = (<a class="code" href="structwcc__data.html">wcc_data</a> *) p_nfs_struct;
<a name="l03027"></a>03027   <span class="comment">/* sanity check */</span>
<a name="l03028"></a>03028 
<a name="l03029"></a>03029   <span class="keywordflow">if</span>(p_wccdata == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03030"></a>03030     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03031"></a>03031 
<a name="l03032"></a>03032   <span class="keywordflow">switch</span> (encodeflag)
<a name="l03033"></a>03033     {
<a name="l03034"></a>03034     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l03035"></a>03035 
<a name="l03036"></a>03036       fprintf(out_stream, <span class="stringliteral">&quot;%*swcc_before:\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03037"></a>03037       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a8844a50937b3ebe57a7bf43d4226af4a">cmdnfs_preopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent, out_stream,
<a name="l03038"></a>03038                           (caddr_t) &amp; (p_wccdata-&gt;<a class="code" href="structwcc__data.html#a5a59ba86fd24d197a6deae0b676a50ca">before</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03039"></a>03039         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03040"></a>03040 
<a name="l03041"></a>03041       fprintf(out_stream, <span class="stringliteral">&quot;%*swcc_after:\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03042"></a>03042       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent, out_stream,
<a name="l03043"></a>03043                            (caddr_t) &amp; (p_wccdata-&gt;<a class="code" href="structwcc__data.html#a2b29caacf2c5a44c0ef3c5cddbd92902">after</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03044"></a>03044         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03045"></a>03045 
<a name="l03046"></a>03046       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03047"></a>03047       <span class="keywordflow">break</span>;
<a name="l03048"></a>03048 
<a name="l03049"></a>03049     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l03050"></a>03050       <span class="comment">/* never encoded */</span>
<a name="l03051"></a>03051     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l03052"></a>03052       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l03053"></a>03053     <span class="keywordflow">default</span>:
<a name="l03054"></a>03054       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03055"></a>03055     }
<a name="l03056"></a>03056 }
<a name="l03057"></a>03057 
<a name="l03058"></a><a class="code" href="cmd__nfstools_8c.html#a0a6cd5243255ca7612ffe37a32262c5b">03058</a> <span class="preprocessor">#define CREATE3_OK_FH( _p_CREATE3res ) ( (_p_CREATE3res)-&gt;CREATE3res_u.resok.obj )</span>
<a name="l03059"></a><a class="code" href="cmd__nfstools_8c.html#a0b39a374f6bf32e77a96f7dfd6de3be4">03059</a> <span class="preprocessor"></span><span class="preprocessor">#define CREATE3_OK_ATTRS( _p_CREATE3res ) ( (_p_CREATE3res)-&gt;CREATE3res_u.resok.obj_attributes )</span>
<a name="l03060"></a><a class="code" href="cmd__nfstools_8c.html#af9b5e7698497b4e421ec76ae2eb304c4">03060</a> <span class="preprocessor"></span><span class="preprocessor">#define CREATE3_OK_WCC( _p_CREATE3res ) ( (_p_CREATE3res)-&gt;CREATE3res_u.resok.dir_wcc )</span>
<a name="l03061"></a><a class="code" href="cmd__nfstools_8c.html#a084c7fccd8a64eed1f1007e587cdb2e8">03061</a> <span class="preprocessor"></span><span class="preprocessor">#define CREATE3_FAIL_WCC( _p_CREATE3res ) ( (_p_CREATE3res)-&gt;CREATE3res_u.resfail.dir_wcc )</span>
<a name="l03062"></a>03062 <span class="preprocessor"></span>
<a name="l03063"></a><a class="code" href="cmd__nfstools_8h.html#aaa248329807034a467b0299cce1f552d">03063</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#aaa248329807034a467b0299cce1f552d">cmdnfs_CREATE3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l03064"></a>03064                       <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l03065"></a>03065                       <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l03066"></a>03066 {
<a name="l03067"></a>03067 
<a name="l03068"></a>03068   <a class="code" href="structCREATE3res.html">CREATE3res</a> *p_CREATE3res = (<a class="code" href="structCREATE3res.html">CREATE3res</a> *) p_nfs_struct;
<a name="l03069"></a>03069 
<a name="l03070"></a>03070   <span class="comment">/* sanity check */</span>
<a name="l03071"></a>03071   <span class="keywordflow">if</span>(p_CREATE3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03072"></a>03072     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03073"></a>03073 
<a name="l03074"></a>03074   <span class="keywordflow">switch</span> (encodeflag)
<a name="l03075"></a>03075     {
<a name="l03076"></a>03076     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l03077"></a>03077 
<a name="l03078"></a>03078       fprintf(out_stream, <span class="stringliteral">&quot;%*sCREATE3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03079"></a>03079       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03080"></a>03080 
<a name="l03081"></a>03081       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l03082"></a>03082                          (caddr_t) &amp; p_CREATE3res-&gt;<a class="code" href="structCREATE3res.html#a58b8b42eb76d2214fa74e8b32d2da4c0">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03083"></a>03083         {
<a name="l03084"></a>03084           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03085"></a>03085         }
<a name="l03086"></a>03086 
<a name="l03087"></a>03087       <span class="keywordflow">if</span>(p_CREATE3res-&gt;<a class="code" href="structCREATE3res.html#a58b8b42eb76d2214fa74e8b32d2da4c0">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l03088"></a>03088         {
<a name="l03089"></a>03089 
<a name="l03090"></a>03090           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#acc46aca72bbd733004ab3a53e25f2a05">cmdnfs_postopfh3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l03091"></a>03091                               (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a0a6cd5243255ca7612ffe37a32262c5b">CREATE3_OK_FH</a>(p_CREATE3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03092"></a>03092             {
<a name="l03093"></a>03093               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03094"></a>03094             }
<a name="l03095"></a>03095 
<a name="l03096"></a>03096           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (object):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03097"></a>03097           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03098"></a>03098                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a0b39a374f6bf32e77a96f7dfd6de3be4">CREATE3_OK_ATTRS</a>(p_CREATE3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03099"></a>03099             {
<a name="l03100"></a>03100               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03101"></a>03101             }
<a name="l03102"></a>03102 
<a name="l03103"></a>03103           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03104"></a>03104           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03105"></a>03105                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#af9b5e7698497b4e421ec76ae2eb304c4">CREATE3_OK_WCC</a>(p_CREATE3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03106"></a>03106             {
<a name="l03107"></a>03107               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03108"></a>03108             }
<a name="l03109"></a>03109 
<a name="l03110"></a>03110         }
<a name="l03111"></a>03111       <span class="keywordflow">else</span>
<a name="l03112"></a>03112         {
<a name="l03113"></a>03113           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03114"></a>03114           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03115"></a>03115                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a084c7fccd8a64eed1f1007e587cdb2e8">CREATE3_FAIL_WCC</a>(p_CREATE3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03116"></a>03116             {
<a name="l03117"></a>03117               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03118"></a>03118             }
<a name="l03119"></a>03119         }
<a name="l03120"></a>03120 
<a name="l03121"></a>03121       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03122"></a>03122 
<a name="l03123"></a>03123       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03124"></a>03124 
<a name="l03125"></a>03125       <span class="keywordflow">break</span>;
<a name="l03126"></a>03126 
<a name="l03127"></a>03127     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l03128"></a>03128       <span class="comment">/* never encoded */</span>
<a name="l03129"></a>03129     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l03130"></a>03130       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l03131"></a>03131     <span class="keywordflow">default</span>:
<a name="l03132"></a>03132       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03133"></a>03133     }
<a name="l03134"></a>03134 
<a name="l03135"></a>03135 }
<a name="l03136"></a>03136 
<a name="l03137"></a>03137 <span class="preprocessor">#undef CREATE3_OK_FH</span>
<a name="l03138"></a>03138 <span class="preprocessor"></span><span class="preprocessor">#undef CREATE3_OK_ATTRS</span>
<a name="l03139"></a>03139 <span class="preprocessor"></span><span class="preprocessor">#undef CREATE3_OK_WCC</span>
<a name="l03140"></a>03140 <span class="preprocessor"></span><span class="preprocessor">#undef CREATE3_FAIL_WCC</span>
<a name="l03141"></a>03141 <span class="preprocessor"></span>
<a name="l03142"></a><a class="code" href="cmd__nfstools_8h.html#a5df66fdcefcdcd4a5b1e1144a4cd4d50">03142</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a5df66fdcefcdcd4a5b1e1144a4cd4d50">cmdnfs_MKDIR3args</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l03143"></a>03143                       <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l03144"></a>03144                       <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l03145"></a>03145 {
<a name="l03146"></a>03146   <a class="code" href="structMKDIR3args.html">MKDIR3args</a> *p_MKDIR3args = (<a class="code" href="structMKDIR3args.html">MKDIR3args</a> *) p_nfs_struct;
<a name="l03147"></a>03147 
<a name="l03148"></a>03148   <span class="comment">/* sanity check */</span>
<a name="l03149"></a>03149   <span class="keywordflow">if</span>(p_MKDIR3args == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03150"></a>03150     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03151"></a>03151 
<a name="l03152"></a>03152   <span class="keywordflow">switch</span> (encodeflag)
<a name="l03153"></a>03153     {
<a name="l03154"></a>03154     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l03155"></a>03155 
<a name="l03156"></a>03156       <span class="keywordflow">if</span>((argc != 2) &amp;&amp; (argc != 3))
<a name="l03157"></a>03157         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03158"></a>03158 
<a name="l03159"></a>03159       <span class="comment">/* The first two args */</span>
<a name="l03160"></a>03160       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a242dedae1aa72eac02a1465e81b9441b">cmdnfs_diropargs3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 2, argv, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03161"></a>03161                            (caddr_t) &amp; (p_MKDIR3args-&gt;<a class="code" href="structMKDIR3args.html#a585852bf15cf6f69d819f39af11c2e9a">where</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03162"></a>03162         {
<a name="l03163"></a>03163           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03164"></a>03164         }
<a name="l03165"></a>03165 
<a name="l03166"></a>03166       <span class="comment">/* MKDIR 3th arg: sattr3 list or a MKDIR verifier */</span>
<a name="l03167"></a>03167 
<a name="l03168"></a>03168       <span class="keywordflow">if</span>(argc == 3)
<a name="l03169"></a>03169         {
<a name="l03170"></a>03170           <span class="comment">/* The 3th arg is a sattr3 list */</span>
<a name="l03171"></a>03171           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a1e0a6cd7c4500a3cfbb1a35cb2105436">cmdnfs_sattr3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 1, argv + 2, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03172"></a>03172                            (caddr_t) &amp; (p_MKDIR3args-&gt;<a class="code" href="structMKDIR3args.html#a5ed765848ef339ce9bcf165d6411311c">attributes</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03173"></a>03173             {
<a name="l03174"></a>03174               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03175"></a>03175             }
<a name="l03176"></a>03176         }
<a name="l03177"></a>03177       <span class="keywordflow">else</span>
<a name="l03178"></a>03178         {
<a name="l03179"></a>03179           <span class="comment">/* the sattr3 strucure is empty */</span>
<a name="l03180"></a>03180           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a1e0a6cd7c4500a3cfbb1a35cb2105436">cmdnfs_sattr3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03181"></a>03181                            (caddr_t) &amp; (p_MKDIR3args-&gt;<a class="code" href="structMKDIR3args.html#a5ed765848ef339ce9bcf165d6411311c">attributes</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03182"></a>03182             {
<a name="l03183"></a>03183               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03184"></a>03184             }
<a name="l03185"></a>03185         }
<a name="l03186"></a>03186 
<a name="l03187"></a>03187       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03188"></a>03188 
<a name="l03189"></a>03189     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l03190"></a>03190       <a class="code" href="cmd__nfstools_8c.html#a242dedae1aa72eac02a1465e81b9441b">cmdnfs_diropargs3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_MKDIR3args-&gt;<a class="code" href="structMKDIR3args.html#a585852bf15cf6f69d819f39af11c2e9a">where</a>));
<a name="l03191"></a>03191       <a class="code" href="cmd__nfstools_8c.html#a1e0a6cd7c4500a3cfbb1a35cb2105436">cmdnfs_sattr3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03192"></a>03192                     (caddr_t) &amp; (p_MKDIR3args-&gt;<a class="code" href="structMKDIR3args.html#a5ed765848ef339ce9bcf165d6411311c">attributes</a>));
<a name="l03193"></a>03193       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03194"></a>03194       <span class="keywordflow">break</span>;
<a name="l03195"></a>03195 
<a name="l03196"></a>03196     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l03197"></a>03197       <span class="comment">/* never decoded */</span>
<a name="l03198"></a>03198     <span class="keywordflow">default</span>:
<a name="l03199"></a>03199       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03200"></a>03200     }
<a name="l03201"></a>03201 }
<a name="l03202"></a>03202 
<a name="l03203"></a><a class="code" href="cmd__nfstools_8c.html#a89cba842b0dd4183194a390e260b7546">03203</a> <span class="preprocessor">#define MKDIR3_OK_FH( _p_MKDIR3res ) ( (_p_MKDIR3res)-&gt;MKDIR3res_u.resok.obj )</span>
<a name="l03204"></a><a class="code" href="cmd__nfstools_8c.html#addefabbf4bbe1f3c879bb04df1fbc8c8">03204</a> <span class="preprocessor"></span><span class="preprocessor">#define MKDIR3_OK_ATTRS( _p_MKDIR3res ) ( (_p_MKDIR3res)-&gt;MKDIR3res_u.resok.obj_attributes )</span>
<a name="l03205"></a><a class="code" href="cmd__nfstools_8c.html#a4ad42b6f76f16fcfb5833ca173443d56">03205</a> <span class="preprocessor"></span><span class="preprocessor">#define MKDIR3_OK_WCC( _p_MKDIR3res ) ( (_p_MKDIR3res)-&gt;MKDIR3res_u.resok.dir_wcc )</span>
<a name="l03206"></a><a class="code" href="cmd__nfstools_8c.html#affa24c7bcfcfa4ed574c82387c7bc0a9">03206</a> <span class="preprocessor"></span><span class="preprocessor">#define MKDIR3_FAIL_WCC( _p_MKDIR3res ) ( (_p_MKDIR3res)-&gt;MKDIR3res_u.resfail.dir_wcc )</span>
<a name="l03207"></a>03207 <span class="preprocessor"></span>
<a name="l03208"></a><a class="code" href="cmd__nfstools_8h.html#af2e70d72fa2aa228f4b267d271a0d66d">03208</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#af2e70d72fa2aa228f4b267d271a0d66d">cmdnfs_MKDIR3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l03209"></a>03209                      <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l03210"></a>03210                      <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l03211"></a>03211 {
<a name="l03212"></a>03212 
<a name="l03213"></a>03213   <a class="code" href="structMKDIR3res.html">MKDIR3res</a> *p_MKDIR3res = (<a class="code" href="structMKDIR3res.html">MKDIR3res</a> *) p_nfs_struct;
<a name="l03214"></a>03214 
<a name="l03215"></a>03215   <span class="comment">/* sanity check */</span>
<a name="l03216"></a>03216   <span class="keywordflow">if</span>(p_MKDIR3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03217"></a>03217     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03218"></a>03218 
<a name="l03219"></a>03219   <span class="keywordflow">switch</span> (encodeflag)
<a name="l03220"></a>03220     {
<a name="l03221"></a>03221     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l03222"></a>03222 
<a name="l03223"></a>03223       fprintf(out_stream, <span class="stringliteral">&quot;%*sMKDIR3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03224"></a>03224       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03225"></a>03225 
<a name="l03226"></a>03226       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l03227"></a>03227                          (caddr_t) &amp; p_MKDIR3res-&gt;<a class="code" href="structMKDIR3res.html#a03b708c07bf55dadff199ad49c7ebb4e">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03228"></a>03228         {
<a name="l03229"></a>03229           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03230"></a>03230         }
<a name="l03231"></a>03231 
<a name="l03232"></a>03232       <span class="keywordflow">if</span>(p_MKDIR3res-&gt;<a class="code" href="structMKDIR3res.html#a03b708c07bf55dadff199ad49c7ebb4e">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l03233"></a>03233         {
<a name="l03234"></a>03234 
<a name="l03235"></a>03235           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#acc46aca72bbd733004ab3a53e25f2a05">cmdnfs_postopfh3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l03236"></a>03236                               (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a89cba842b0dd4183194a390e260b7546">MKDIR3_OK_FH</a>(p_MKDIR3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03237"></a>03237             {
<a name="l03238"></a>03238               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03239"></a>03239             }
<a name="l03240"></a>03240 
<a name="l03241"></a>03241           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (new dir):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03242"></a>03242           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03243"></a>03243                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#addefabbf4bbe1f3c879bb04df1fbc8c8">MKDIR3_OK_ATTRS</a>(p_MKDIR3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03244"></a>03244             {
<a name="l03245"></a>03245               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03246"></a>03246             }
<a name="l03247"></a>03247 
<a name="l03248"></a>03248           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (parent dir):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03249"></a>03249           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03250"></a>03250                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a4ad42b6f76f16fcfb5833ca173443d56">MKDIR3_OK_WCC</a>(p_MKDIR3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03251"></a>03251             {
<a name="l03252"></a>03252               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03253"></a>03253             }
<a name="l03254"></a>03254 
<a name="l03255"></a>03255         }
<a name="l03256"></a>03256       <span class="keywordflow">else</span>
<a name="l03257"></a>03257         {
<a name="l03258"></a>03258           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (parent dir):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03259"></a>03259           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03260"></a>03260                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#affa24c7bcfcfa4ed574c82387c7bc0a9">MKDIR3_FAIL_WCC</a>(p_MKDIR3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03261"></a>03261             {
<a name="l03262"></a>03262               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03263"></a>03263             }
<a name="l03264"></a>03264         }
<a name="l03265"></a>03265 
<a name="l03266"></a>03266       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03267"></a>03267 
<a name="l03268"></a>03268       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03269"></a>03269 
<a name="l03270"></a>03270       <span class="keywordflow">break</span>;
<a name="l03271"></a>03271 
<a name="l03272"></a>03272     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l03273"></a>03273       <span class="comment">/* never encoded */</span>
<a name="l03274"></a>03274     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l03275"></a>03275       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l03276"></a>03276     <span class="keywordflow">default</span>:
<a name="l03277"></a>03277       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03278"></a>03278     }
<a name="l03279"></a>03279 
<a name="l03280"></a>03280 }
<a name="l03281"></a>03281 
<a name="l03282"></a>03282 <span class="preprocessor">#undef MKDIR3_OK_FH</span>
<a name="l03283"></a>03283 <span class="preprocessor"></span><span class="preprocessor">#undef MKDIR3_OK_ATTRS</span>
<a name="l03284"></a>03284 <span class="preprocessor"></span><span class="preprocessor">#undef MKDIR3_OK_WCC</span>
<a name="l03285"></a>03285 <span class="preprocessor"></span><span class="preprocessor">#undef MKDIR3_FAIL_WCC</span>
<a name="l03286"></a>03286 <span class="preprocessor"></span>
<a name="l03287"></a><a class="code" href="cmd__nfstools_8c.html#a6ce5bf2e922bf5291cbaca46644f8842">03287</a> <span class="preprocessor">#define REMOVE3_OK_WCC( _p_REMOVE3res ) ( (_p_REMOVE3res)-&gt;REMOVE3res_u.resok.dir_wcc )</span>
<a name="l03288"></a><a class="code" href="cmd__nfstools_8c.html#a062be574670fbf1b5413f4c9b7677999">03288</a> <span class="preprocessor"></span><span class="preprocessor">#define REMOVE3_FAIL_WCC( _p_REMOVE3res ) ( (_p_REMOVE3res)-&gt;REMOVE3res_u.resfail.dir_wcc )</span>
<a name="l03289"></a>03289 <span class="preprocessor"></span>
<a name="l03290"></a><a class="code" href="cmd__nfstools_8h.html#a0c983c1ed75d53cb6ffa77bcee39490f">03290</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a0c983c1ed75d53cb6ffa77bcee39490f">cmdnfs_REMOVE3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l03291"></a>03291                       <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l03292"></a>03292                       <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l03293"></a>03293 {
<a name="l03294"></a>03294 
<a name="l03295"></a>03295   <a class="code" href="structREMOVE3res.html">REMOVE3res</a> *p_REMOVE3res = (<a class="code" href="structREMOVE3res.html">REMOVE3res</a> *) p_nfs_struct;
<a name="l03296"></a>03296 
<a name="l03297"></a>03297   <span class="comment">/* sanity check */</span>
<a name="l03298"></a>03298   <span class="keywordflow">if</span>(p_REMOVE3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03299"></a>03299     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03300"></a>03300 
<a name="l03301"></a>03301   <span class="keywordflow">switch</span> (encodeflag)
<a name="l03302"></a>03302     {
<a name="l03303"></a>03303     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l03304"></a>03304 
<a name="l03305"></a>03305       fprintf(out_stream, <span class="stringliteral">&quot;%*sREMOVE3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03306"></a>03306       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03307"></a>03307 
<a name="l03308"></a>03308       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l03309"></a>03309                          (caddr_t) &amp; p_REMOVE3res-&gt;<a class="code" href="structREMOVE3res.html#ac29aa8ecf571de0c786f66aa87313a0d">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03310"></a>03310         {
<a name="l03311"></a>03311           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03312"></a>03312         }
<a name="l03313"></a>03313 
<a name="l03314"></a>03314       <span class="keywordflow">if</span>(p_REMOVE3res-&gt;<a class="code" href="structREMOVE3res.html#ac29aa8ecf571de0c786f66aa87313a0d">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l03315"></a>03315         {
<a name="l03316"></a>03316 
<a name="l03317"></a>03317           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (parent dir):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03318"></a>03318           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03319"></a>03319                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a6ce5bf2e922bf5291cbaca46644f8842">REMOVE3_OK_WCC</a>(p_REMOVE3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03320"></a>03320             {
<a name="l03321"></a>03321               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03322"></a>03322             }
<a name="l03323"></a>03323 
<a name="l03324"></a>03324         }
<a name="l03325"></a>03325       <span class="keywordflow">else</span>
<a name="l03326"></a>03326         {
<a name="l03327"></a>03327           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (parent dir):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03328"></a>03328           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03329"></a>03329                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a062be574670fbf1b5413f4c9b7677999">REMOVE3_FAIL_WCC</a>(p_REMOVE3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03330"></a>03330             {
<a name="l03331"></a>03331               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03332"></a>03332             }
<a name="l03333"></a>03333         }
<a name="l03334"></a>03334 
<a name="l03335"></a>03335       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03336"></a>03336 
<a name="l03337"></a>03337       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03338"></a>03338 
<a name="l03339"></a>03339       <span class="keywordflow">break</span>;
<a name="l03340"></a>03340 
<a name="l03341"></a>03341     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l03342"></a>03342       <span class="comment">/* never encoded */</span>
<a name="l03343"></a>03343     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l03344"></a>03344       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l03345"></a>03345     <span class="keywordflow">default</span>:
<a name="l03346"></a>03346       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03347"></a>03347     }
<a name="l03348"></a>03348 
<a name="l03349"></a>03349 }
<a name="l03350"></a>03350 
<a name="l03351"></a>03351 <span class="preprocessor">#undef REMOVE3_OK_WCC</span>
<a name="l03352"></a>03352 <span class="preprocessor"></span><span class="preprocessor">#undef REMOVE3_FAIL_WCC</span>
<a name="l03353"></a>03353 <span class="preprocessor"></span>
<a name="l03354"></a><a class="code" href="cmd__nfstools_8c.html#aafc114951a00b0910445d1f50dfc822b">03354</a> <span class="preprocessor">#define RMDIR3_OK_WCC( _p_RMDIR3res ) ( (_p_RMDIR3res)-&gt;RMDIR3res_u.resok.dir_wcc )</span>
<a name="l03355"></a><a class="code" href="cmd__nfstools_8c.html#ac69e92ebf0dde7cad2ad5f466c399e38">03355</a> <span class="preprocessor"></span><span class="preprocessor">#define RMDIR3_FAIL_WCC( _p_RMDIR3res ) ( (_p_RMDIR3res)-&gt;RMDIR3res_u.resfail.dir_wcc )</span>
<a name="l03356"></a>03356 <span class="preprocessor"></span>
<a name="l03357"></a><a class="code" href="cmd__nfstools_8h.html#a70482e93debd8542a591d85a9cb14117">03357</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a70482e93debd8542a591d85a9cb14117">cmdnfs_RMDIR3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l03358"></a>03358                      <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l03359"></a>03359                      <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l03360"></a>03360 {
<a name="l03361"></a>03361 
<a name="l03362"></a>03362   <a class="code" href="structRMDIR3res.html">RMDIR3res</a> *p_RMDIR3res = (<a class="code" href="structRMDIR3res.html">RMDIR3res</a> *) p_nfs_struct;
<a name="l03363"></a>03363 
<a name="l03364"></a>03364   <span class="comment">/* sanity check */</span>
<a name="l03365"></a>03365   <span class="keywordflow">if</span>(p_RMDIR3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03366"></a>03366     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03367"></a>03367 
<a name="l03368"></a>03368   <span class="keywordflow">switch</span> (encodeflag)
<a name="l03369"></a>03369     {
<a name="l03370"></a>03370     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l03371"></a>03371 
<a name="l03372"></a>03372       fprintf(out_stream, <span class="stringliteral">&quot;%*sRMDIR3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03373"></a>03373       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03374"></a>03374 
<a name="l03375"></a>03375       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l03376"></a>03376                          (caddr_t) &amp; p_RMDIR3res-&gt;<a class="code" href="structRMDIR3res.html#a05f839859ae48d783b3770e9a0bf02e0">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03377"></a>03377         {
<a name="l03378"></a>03378           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03379"></a>03379         }
<a name="l03380"></a>03380 
<a name="l03381"></a>03381       <span class="keywordflow">if</span>(p_RMDIR3res-&gt;<a class="code" href="structRMDIR3res.html#a05f839859ae48d783b3770e9a0bf02e0">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l03382"></a>03382         {
<a name="l03383"></a>03383 
<a name="l03384"></a>03384           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (parent dir):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03385"></a>03385           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03386"></a>03386                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#aafc114951a00b0910445d1f50dfc822b">RMDIR3_OK_WCC</a>(p_RMDIR3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03387"></a>03387             {
<a name="l03388"></a>03388               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03389"></a>03389             }
<a name="l03390"></a>03390 
<a name="l03391"></a>03391         }
<a name="l03392"></a>03392       <span class="keywordflow">else</span>
<a name="l03393"></a>03393         {
<a name="l03394"></a>03394           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (parent dir):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03395"></a>03395           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03396"></a>03396                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#ac69e92ebf0dde7cad2ad5f466c399e38">RMDIR3_FAIL_WCC</a>(p_RMDIR3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03397"></a>03397             {
<a name="l03398"></a>03398               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03399"></a>03399             }
<a name="l03400"></a>03400         }
<a name="l03401"></a>03401 
<a name="l03402"></a>03402       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03403"></a>03403 
<a name="l03404"></a>03404       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03405"></a>03405 
<a name="l03406"></a>03406       <span class="keywordflow">break</span>;
<a name="l03407"></a>03407 
<a name="l03408"></a>03408     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l03409"></a>03409       <span class="comment">/* never encoded */</span>
<a name="l03410"></a>03410     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l03411"></a>03411       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l03412"></a>03412     <span class="keywordflow">default</span>:
<a name="l03413"></a>03413       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03414"></a>03414     }
<a name="l03415"></a>03415 
<a name="l03416"></a>03416 }
<a name="l03417"></a>03417 
<a name="l03418"></a>03418 <span class="preprocessor">#undef RMDIR3_OK_WCC</span>
<a name="l03419"></a>03419 <span class="preprocessor"></span><span class="preprocessor">#undef RMDIR3_FAIL_WCC</span>
<a name="l03420"></a>03420 <span class="preprocessor"></span>
<a name="l03421"></a><a class="code" href="cmd__nfstools_8c.html#a335d351db8dd46a8d11503cae46c6565">03421</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a335d351db8dd46a8d11503cae46c6565">cmdnfs_sattrguard3</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l03422"></a>03422                        <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l03423"></a>03423                        <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l03424"></a>03424 {
<a name="l03425"></a>03425   <a class="code" href="structsattrguard3.html">sattrguard3</a> *p_sattr = (<a class="code" href="structsattrguard3.html">sattrguard3</a> *) p_nfs_struct;
<a name="l03426"></a>03426 
<a name="l03427"></a>03427   time_t c_sec;
<a name="l03428"></a>03428   <span class="keywordtype">int</span> c_nsec;
<a name="l03429"></a>03429   <span class="keywordtype">char</span> *nsec_str = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03430"></a>03430   <span class="keywordtype">char</span> *time_str;
<a name="l03431"></a>03431 
<a name="l03432"></a>03432   <span class="comment">/* sanity check */</span>
<a name="l03433"></a>03433   <span class="keywordflow">if</span>(p_sattr == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03434"></a>03434     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03435"></a>03435 
<a name="l03436"></a>03436   <span class="keywordflow">switch</span> (encodeflag)
<a name="l03437"></a>03437     {
<a name="l03438"></a>03438     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l03439"></a>03439 
<a name="l03440"></a>03440       <span class="comment">/* inits structure */</span>
<a name="l03441"></a>03441       memset((caddr_t) p_sattr, 0, <span class="keyword">sizeof</span>(<a class="code" href="structsattrguard3.html">sattrguard3</a>));
<a name="l03442"></a>03442 
<a name="l03443"></a>03443       <span class="keywordflow">if</span>(argc == 0)
<a name="l03444"></a>03444         {
<a name="l03445"></a>03445           <span class="comment">/* empty structure */</span>
<a name="l03446"></a>03446           p_sattr-&gt;check = <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03447"></a>03447           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03448"></a>03448         }
<a name="l03449"></a>03449 
<a name="l03450"></a>03450       <span class="comment">/* at this point it must not be more than one string */</span>
<a name="l03451"></a>03451       <span class="keywordflow">if</span>(argc != 1)
<a name="l03452"></a>03452         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03453"></a>03453 
<a name="l03454"></a>03454       time_str = strtok_r(argv[0], <span class="stringliteral">&quot;.&quot;</span>, &amp;nsec_str);
<a name="l03455"></a>03455 
<a name="l03456"></a>03456       c_sec = <a class="code" href="cmd__tools_8c.html#a3663a6a631535306a284cfc4e5e00916">atotime</a>(time_str);
<a name="l03457"></a>03457       <span class="keywordflow">if</span>(c_sec == ((time_t) - 1))
<a name="l03458"></a>03458         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03459"></a>03459 
<a name="l03460"></a>03460       <span class="keywordflow">if</span>(nsec_str == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03461"></a>03461         {
<a name="l03462"></a>03462           c_nsec = 0;
<a name="l03463"></a>03463         }
<a name="l03464"></a>03464       <span class="keywordflow">else</span>
<a name="l03465"></a>03465         {
<a name="l03466"></a>03466           c_nsec = <a class="code" href="cmd__tools_8c.html#a688b18dd9abbd7f9b3bab90531c0a066">my_atoi</a>(nsec_str);
<a name="l03467"></a>03467           <span class="keywordflow">if</span>((c_nsec &lt; 0) || (c_nsec &gt; 999999999))
<a name="l03468"></a>03468             <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03469"></a>03469         }
<a name="l03470"></a>03470 
<a name="l03471"></a>03471       p_sattr-&gt;check = <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03472"></a>03472       p_sattr-&gt;sattrguard3_u.obj_ctime.seconds = c_sec;
<a name="l03473"></a>03473       p_sattr-&gt;sattrguard3_u.obj_ctime.nseconds = c_nsec;
<a name="l03474"></a>03474 
<a name="l03475"></a>03475 <span class="preprocessor">#ifdef _DEBUG_NFS_SHELL</span>
<a name="l03476"></a>03476 <span class="preprocessor"></span>      printf(<span class="stringliteral">&quot;ctime check = %u.%.9u\n&quot;</span>, p_sattr-&gt;sattrguard3_u.obj_ctime.seconds,
<a name="l03477"></a>03477              p_sattr-&gt;sattrguard3_u.obj_ctime.nseconds);
<a name="l03478"></a>03478 <span class="preprocessor">#endif</span>
<a name="l03479"></a>03479 <span class="preprocessor"></span>
<a name="l03480"></a>03480       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03481"></a>03481       <span class="keywordflow">break</span>;
<a name="l03482"></a>03482     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l03483"></a>03483       <span class="comment">/* nothing to do */</span>
<a name="l03484"></a>03484       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03485"></a>03485       <span class="keywordflow">break</span>;
<a name="l03486"></a>03486 
<a name="l03487"></a>03487     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l03488"></a>03488       <span class="comment">/* never decoded */</span>
<a name="l03489"></a>03489     <span class="keywordflow">default</span>:
<a name="l03490"></a>03490       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03491"></a>03491     }
<a name="l03492"></a>03492 
<a name="l03493"></a>03493 }                               <span class="comment">/* cmdnfs_sattrguard3 */</span>
<a name="l03494"></a>03494 
<a name="l03495"></a><a class="code" href="cmd__nfstools_8h.html#a4aa20a7216f5c4ead1ff73943b5a25fc">03495</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a4aa20a7216f5c4ead1ff73943b5a25fc">cmdnfs_SETATTR3args</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l03496"></a>03496                         <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l03497"></a>03497                         <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l03498"></a>03498 {
<a name="l03499"></a>03499   <a class="code" href="structSETATTR3args.html">SETATTR3args</a> *p_SETATTR3args = (<a class="code" href="structSETATTR3args.html">SETATTR3args</a> *) p_nfs_struct;
<a name="l03500"></a>03500 
<a name="l03501"></a>03501   <span class="comment">/* sanity check */</span>
<a name="l03502"></a>03502   <span class="keywordflow">if</span>(p_SETATTR3args == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03503"></a>03503     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03504"></a>03504 
<a name="l03505"></a>03505   <span class="keywordflow">switch</span> (encodeflag)
<a name="l03506"></a>03506     {
<a name="l03507"></a>03507     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l03508"></a>03508 
<a name="l03509"></a>03509       <span class="keywordflow">if</span>((argc != 2) &amp;&amp; (argc != 3))
<a name="l03510"></a>03510         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03511"></a>03511 
<a name="l03512"></a>03512       <span class="comment">/* The first arg */</span>
<a name="l03513"></a>03513       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 1, argv, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03514"></a>03514                          (caddr_t) &amp; (p_SETATTR3args-&gt;<a class="code" href="structSETATTR3args.html#aa6619d9480a7c0752ae68f311818b504">object</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03515"></a>03515         {
<a name="l03516"></a>03516           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03517"></a>03517         }
<a name="l03518"></a>03518 
<a name="l03519"></a>03519       <span class="comment">/* SETATTR 2th arg: sattr3 list */</span>
<a name="l03520"></a>03520 
<a name="l03521"></a>03521       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a1e0a6cd7c4500a3cfbb1a35cb2105436">cmdnfs_sattr3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 1, argv + 1, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03522"></a>03522                        (caddr_t) &amp; (p_SETATTR3args-&gt;<a class="code" href="structSETATTR3args.html#af34aa19345b9f343d9b656a851073788">new_attributes</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03523"></a>03523         {
<a name="l03524"></a>03524           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03525"></a>03525         }
<a name="l03526"></a>03526 
<a name="l03527"></a>03527       <span class="comment">/* SETATTR optionnal 3th arg: sattrguard3 */</span>
<a name="l03528"></a>03528 
<a name="l03529"></a>03529       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a335d351db8dd46a8d11503cae46c6565">cmdnfs_sattrguard3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, argc - 2, argv + 2, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03530"></a>03530                             (caddr_t) &amp; (p_SETATTR3args-&gt;<a class="code" href="structSETATTR3args.html#a09442fa38b2507d11064f7d2580fc37c">guard</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03531"></a>03531         {
<a name="l03532"></a>03532           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03533"></a>03533         }
<a name="l03534"></a>03534 
<a name="l03535"></a>03535       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03536"></a>03536 
<a name="l03537"></a>03537     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l03538"></a>03538       <a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03539"></a>03539                       (caddr_t) &amp; (p_SETATTR3args-&gt;<a class="code" href="structSETATTR3args.html#aa6619d9480a7c0752ae68f311818b504">object</a>));
<a name="l03540"></a>03540       <a class="code" href="cmd__nfstools_8c.html#a1e0a6cd7c4500a3cfbb1a35cb2105436">cmdnfs_sattr3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03541"></a>03541                     (caddr_t) &amp; (p_SETATTR3args-&gt;<a class="code" href="structSETATTR3args.html#af34aa19345b9f343d9b656a851073788">new_attributes</a>));
<a name="l03542"></a>03542       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03543"></a>03543       <span class="keywordflow">break</span>;
<a name="l03544"></a>03544 
<a name="l03545"></a>03545     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l03546"></a>03546       <span class="comment">/* never decoded */</span>
<a name="l03547"></a>03547     <span class="keywordflow">default</span>:
<a name="l03548"></a>03548       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03549"></a>03549     }
<a name="l03550"></a>03550 }
<a name="l03551"></a>03551 
<a name="l03552"></a><a class="code" href="cmd__nfstools_8c.html#a21648d2411f49b07287e4e0a3602e761">03552</a> <span class="preprocessor">#define SETATTR3_OK_WCC( _p_SETATTR3res ) ( (_p_SETATTR3res)-&gt;SETATTR3res_u.resok.obj_wcc )</span>
<a name="l03553"></a><a class="code" href="cmd__nfstools_8c.html#a35645a6bc2301b04e22d541033d0de92">03553</a> <span class="preprocessor"></span><span class="preprocessor">#define SETATTR3_FAIL_WCC( _p_SETATTR3res ) ( (_p_SETATTR3res)-&gt;SETATTR3res_u.resfail.obj_wcc )</span>
<a name="l03554"></a>03554 <span class="preprocessor"></span>
<a name="l03555"></a><a class="code" href="cmd__nfstools_8h.html#a17bb8614a0506a5a6c98e65c00b637b0">03555</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a17bb8614a0506a5a6c98e65c00b637b0">cmdnfs_SETATTR3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l03556"></a>03556                        <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l03557"></a>03557                        <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l03558"></a>03558 {
<a name="l03559"></a>03559 
<a name="l03560"></a>03560   <a class="code" href="structSETATTR3res.html">SETATTR3res</a> *p_SETATTR3res = (<a class="code" href="structSETATTR3res.html">SETATTR3res</a> *) p_nfs_struct;
<a name="l03561"></a>03561 
<a name="l03562"></a>03562   <span class="comment">/* sanity check */</span>
<a name="l03563"></a>03563   <span class="keywordflow">if</span>(p_SETATTR3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03564"></a>03564     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03565"></a>03565 
<a name="l03566"></a>03566   <span class="keywordflow">switch</span> (encodeflag)
<a name="l03567"></a>03567     {
<a name="l03568"></a>03568     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l03569"></a>03569 
<a name="l03570"></a>03570       fprintf(out_stream, <span class="stringliteral">&quot;%*sSETATTR3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03571"></a>03571       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03572"></a>03572 
<a name="l03573"></a>03573       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l03574"></a>03574                          (caddr_t) &amp; p_SETATTR3res-&gt;<a class="code" href="structSETATTR3res.html#a3ab981155ec76dbe0a54ddc42473e881">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03575"></a>03575         {
<a name="l03576"></a>03576           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03577"></a>03577         }
<a name="l03578"></a>03578 
<a name="l03579"></a>03579       <span class="keywordflow">if</span>(p_SETATTR3res-&gt;<a class="code" href="structSETATTR3res.html#a3ab981155ec76dbe0a54ddc42473e881">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l03580"></a>03580         {
<a name="l03581"></a>03581 
<a name="l03582"></a>03582           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (object):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03583"></a>03583           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03584"></a>03584                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a21648d2411f49b07287e4e0a3602e761">SETATTR3_OK_WCC</a>(p_SETATTR3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03585"></a>03585             {
<a name="l03586"></a>03586               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03587"></a>03587             }
<a name="l03588"></a>03588 
<a name="l03589"></a>03589         }
<a name="l03590"></a>03590       <span class="keywordflow">else</span>
<a name="l03591"></a>03591         {
<a name="l03592"></a>03592           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (object):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03593"></a>03593           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03594"></a>03594                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a35645a6bc2301b04e22d541033d0de92">SETATTR3_FAIL_WCC</a>(p_SETATTR3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03595"></a>03595             {
<a name="l03596"></a>03596               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03597"></a>03597             }
<a name="l03598"></a>03598         }
<a name="l03599"></a>03599 
<a name="l03600"></a>03600       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03601"></a>03601 
<a name="l03602"></a>03602       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03603"></a>03603 
<a name="l03604"></a>03604       <span class="keywordflow">break</span>;
<a name="l03605"></a>03605 
<a name="l03606"></a>03606     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l03607"></a>03607       <span class="comment">/* never encoded */</span>
<a name="l03608"></a>03608     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l03609"></a>03609       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l03610"></a>03610     <span class="keywordflow">default</span>:
<a name="l03611"></a>03611       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03612"></a>03612     }
<a name="l03613"></a>03613 
<a name="l03614"></a>03614 }
<a name="l03615"></a>03615 
<a name="l03616"></a>03616 <span class="preprocessor">#undef SETATTR3_OK_WCC</span>
<a name="l03617"></a>03617 <span class="preprocessor"></span><span class="preprocessor">#undef SETATTR3_FAIL_WCC</span>
<a name="l03618"></a>03618 <span class="preprocessor"></span>
<a name="l03619"></a><a class="code" href="cmd__nfstools_8h.html#aba10fca21d9e9c8fa35453ddc3130395">03619</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#aba10fca21d9e9c8fa35453ddc3130395">cmdnfs_RENAME3args</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l03620"></a>03620                        <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l03621"></a>03621                        <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l03622"></a>03622 {
<a name="l03623"></a>03623   <a class="code" href="structRENAME3args.html">RENAME3args</a> *p_RENAME3args = (<a class="code" href="structRENAME3args.html">RENAME3args</a> *) p_nfs_struct;
<a name="l03624"></a>03624 
<a name="l03625"></a>03625   <span class="comment">/* sanity check */</span>
<a name="l03626"></a>03626   <span class="keywordflow">if</span>(p_RENAME3args == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03627"></a>03627     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03628"></a>03628 
<a name="l03629"></a>03629   <span class="keywordflow">switch</span> (encodeflag)
<a name="l03630"></a>03630     {
<a name="l03631"></a>03631     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l03632"></a>03632 
<a name="l03633"></a>03633       <span class="keywordflow">if</span>(argc != 4)
<a name="l03634"></a>03634         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03635"></a>03635 
<a name="l03636"></a>03636       <span class="comment">/* The first 2 args */</span>
<a name="l03637"></a>03637       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a242dedae1aa72eac02a1465e81b9441b">cmdnfs_diropargs3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 2, argv, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03638"></a>03638                            (caddr_t) &amp; (p_RENAME3args-&gt;<a class="code" href="structRENAME3args.html#af14318b5724947911cc2a2f6572ceb71">from</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03639"></a>03639         {
<a name="l03640"></a>03640           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03641"></a>03641         }
<a name="l03642"></a>03642 
<a name="l03643"></a>03643       <span class="comment">/* The last 2 args */</span>
<a name="l03644"></a>03644       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a242dedae1aa72eac02a1465e81b9441b">cmdnfs_diropargs3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, argc - 2, argv + 2, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03645"></a>03645                            (caddr_t) &amp; (p_RENAME3args-&gt;<a class="code" href="structRENAME3args.html#ac67f9b32525057b781d055c1eae68a63">to</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03646"></a>03646         {
<a name="l03647"></a>03647           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03648"></a>03648         }
<a name="l03649"></a>03649 
<a name="l03650"></a>03650       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03651"></a>03651 
<a name="l03652"></a>03652     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l03653"></a>03653       <a class="code" href="cmd__nfstools_8c.html#a242dedae1aa72eac02a1465e81b9441b">cmdnfs_diropargs3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_RENAME3args-&gt;<a class="code" href="structRENAME3args.html#af14318b5724947911cc2a2f6572ceb71">from</a>));
<a name="l03654"></a>03654       <a class="code" href="cmd__nfstools_8c.html#a242dedae1aa72eac02a1465e81b9441b">cmdnfs_diropargs3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_RENAME3args-&gt;<a class="code" href="structRENAME3args.html#ac67f9b32525057b781d055c1eae68a63">to</a>));
<a name="l03655"></a>03655       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03656"></a>03656       <span class="keywordflow">break</span>;
<a name="l03657"></a>03657 
<a name="l03658"></a>03658     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l03659"></a>03659       <span class="comment">/* never decoded */</span>
<a name="l03660"></a>03660     <span class="keywordflow">default</span>:
<a name="l03661"></a>03661       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03662"></a>03662     }
<a name="l03663"></a>03663 }
<a name="l03664"></a>03664 
<a name="l03665"></a><a class="code" href="cmd__nfstools_8c.html#a89d9c17241451de1ad8606960633dd01">03665</a> <span class="preprocessor">#define RENAME3_OK_FROMWCC( _p_RENAME3res ) ( (_p_RENAME3res)-&gt;RENAME3res_u.resok.fromdir_wcc )</span>
<a name="l03666"></a><a class="code" href="cmd__nfstools_8c.html#ae7fcfdccfd6614913594e82b882a5700">03666</a> <span class="preprocessor"></span><span class="preprocessor">#define RENAME3_OK_TOWCC( _p_RENAME3res ) ( (_p_RENAME3res)-&gt;RENAME3res_u.resok.todir_wcc )</span>
<a name="l03667"></a><a class="code" href="cmd__nfstools_8c.html#aa1de84626587f836506bd6f733bcbf1c">03667</a> <span class="preprocessor"></span><span class="preprocessor">#define RENAME3_FAIL_FROMWCC( _p_RENAME3res ) ( (_p_RENAME3res)-&gt;RENAME3res_u.resfail.fromdir_wcc )</span>
<a name="l03668"></a><a class="code" href="cmd__nfstools_8c.html#a17383d4b460081ad609d5b30185d221c">03668</a> <span class="preprocessor"></span><span class="preprocessor">#define RENAME3_FAIL_TOWCC( _p_RENAME3res ) ( (_p_RENAME3res)-&gt;RENAME3res_u.resfail.todir_wcc )</span>
<a name="l03669"></a>03669 <span class="preprocessor"></span>
<a name="l03670"></a><a class="code" href="cmd__nfstools_8h.html#a88dd6e36c0a3fa3f67117c451cbf28bb">03670</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a88dd6e36c0a3fa3f67117c451cbf28bb">cmdnfs_RENAME3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l03671"></a>03671                       <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l03672"></a>03672                       <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l03673"></a>03673 {
<a name="l03674"></a>03674 
<a name="l03675"></a>03675   <a class="code" href="structRENAME3res.html">RENAME3res</a> *p_RENAME3res = (<a class="code" href="structRENAME3res.html">RENAME3res</a> *) p_nfs_struct;
<a name="l03676"></a>03676 
<a name="l03677"></a>03677   <span class="comment">/* sanity check */</span>
<a name="l03678"></a>03678   <span class="keywordflow">if</span>(p_RENAME3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03679"></a>03679     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03680"></a>03680 
<a name="l03681"></a>03681   <span class="keywordflow">switch</span> (encodeflag)
<a name="l03682"></a>03682     {
<a name="l03683"></a>03683     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l03684"></a>03684 
<a name="l03685"></a>03685       fprintf(out_stream, <span class="stringliteral">&quot;%*sRENAME3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03686"></a>03686       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03687"></a>03687 
<a name="l03688"></a>03688       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l03689"></a>03689                          (caddr_t) &amp; p_RENAME3res-&gt;<a class="code" href="structRENAME3res.html#aa7d3092548581a1dfc9c604806f972d7">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03690"></a>03690         {
<a name="l03691"></a>03691           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03692"></a>03692         }
<a name="l03693"></a>03693 
<a name="l03694"></a>03694       <span class="keywordflow">if</span>(p_RENAME3res-&gt;<a class="code" href="structRENAME3res.html#aa7d3092548581a1dfc9c604806f972d7">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l03695"></a>03695         {
<a name="l03696"></a>03696 
<a name="l03697"></a>03697           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (source directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03698"></a>03698           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03699"></a>03699                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a89d9c17241451de1ad8606960633dd01">RENAME3_OK_FROMWCC</a>(p_RENAME3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03700"></a>03700             {
<a name="l03701"></a>03701               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03702"></a>03702             }
<a name="l03703"></a>03703           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (target directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03704"></a>03704           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03705"></a>03705                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#ae7fcfdccfd6614913594e82b882a5700">RENAME3_OK_TOWCC</a>(p_RENAME3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03706"></a>03706             {
<a name="l03707"></a>03707               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03708"></a>03708             }
<a name="l03709"></a>03709 
<a name="l03710"></a>03710         }
<a name="l03711"></a>03711       <span class="keywordflow">else</span>
<a name="l03712"></a>03712         {
<a name="l03713"></a>03713           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (source directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03714"></a>03714           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03715"></a>03715                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#aa1de84626587f836506bd6f733bcbf1c">RENAME3_FAIL_FROMWCC</a>(p_RENAME3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03716"></a>03716             {
<a name="l03717"></a>03717               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03718"></a>03718             }
<a name="l03719"></a>03719           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (target directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03720"></a>03720           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03721"></a>03721                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a17383d4b460081ad609d5b30185d221c">RENAME3_FAIL_TOWCC</a>(p_RENAME3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03722"></a>03722             {
<a name="l03723"></a>03723               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03724"></a>03724             }
<a name="l03725"></a>03725         }
<a name="l03726"></a>03726 
<a name="l03727"></a>03727       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03728"></a>03728 
<a name="l03729"></a>03729       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03730"></a>03730 
<a name="l03731"></a>03731       <span class="keywordflow">break</span>;
<a name="l03732"></a>03732 
<a name="l03733"></a>03733     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l03734"></a>03734       <span class="comment">/* never encoded */</span>
<a name="l03735"></a>03735     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l03736"></a>03736       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l03737"></a>03737     <span class="keywordflow">default</span>:
<a name="l03738"></a>03738       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03739"></a>03739     }
<a name="l03740"></a>03740 
<a name="l03741"></a>03741 }
<a name="l03742"></a>03742 
<a name="l03743"></a>03743 <span class="preprocessor">#undef RENAME3_OK_FROMWCC</span>
<a name="l03744"></a>03744 <span class="preprocessor"></span><span class="preprocessor">#undef RENAME3_OK_TOWCC</span>
<a name="l03745"></a>03745 <span class="preprocessor"></span><span class="preprocessor">#undef RENAME3_FAIL_FROMWCC</span>
<a name="l03746"></a>03746 <span class="preprocessor"></span><span class="preprocessor">#undef RENAME3_FAIL_TOWCC</span>
<a name="l03747"></a>03747 <span class="preprocessor"></span>
<a name="l03748"></a><a class="code" href="cmd__nfstools_8h.html#a2052cc32b34b275ee7b05725f2ba3235">03748</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a2052cc32b34b275ee7b05725f2ba3235">cmdnfs_LINK3args</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l03749"></a>03749                      <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l03750"></a>03750                      <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l03751"></a>03751 {
<a name="l03752"></a>03752   <a class="code" href="structLINK3args.html">LINK3args</a> *p_LINK3args = (<a class="code" href="structLINK3args.html">LINK3args</a> *) p_nfs_struct;
<a name="l03753"></a>03753 
<a name="l03754"></a>03754   <span class="comment">/* sanity check */</span>
<a name="l03755"></a>03755   <span class="keywordflow">if</span>(p_LINK3args == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03756"></a>03756     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03757"></a>03757 
<a name="l03758"></a>03758   <span class="keywordflow">switch</span> (encodeflag)
<a name="l03759"></a>03759     {
<a name="l03760"></a>03760     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l03761"></a>03761 
<a name="l03762"></a>03762       <span class="keywordflow">if</span>(argc != 3)
<a name="l03763"></a>03763         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03764"></a>03764 
<a name="l03765"></a>03765       <span class="comment">/* The first arg */</span>
<a name="l03766"></a>03766       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 1, argv, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03767"></a>03767                          (caddr_t) &amp; (p_LINK3args-&gt;<a class="code" href="structLINK3args.html#a281a7fab6100f4b66a8471efeb8e15bc">file</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03768"></a>03768         {
<a name="l03769"></a>03769           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03770"></a>03770         }
<a name="l03771"></a>03771 
<a name="l03772"></a>03772       <span class="comment">/* The last 2 args */</span>
<a name="l03773"></a>03773       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a242dedae1aa72eac02a1465e81b9441b">cmdnfs_diropargs3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, argc - 1, argv + 1, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03774"></a>03774                            (caddr_t) &amp; (p_LINK3args-&gt;<a class="code" href="structLINK3args.html#aad3c3fbcfa79da0dfb489fcd3d6bceac">link</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03775"></a>03775         {
<a name="l03776"></a>03776           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03777"></a>03777         }
<a name="l03778"></a>03778 
<a name="l03779"></a>03779       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03780"></a>03780 
<a name="l03781"></a>03781     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l03782"></a>03782       <a class="code" href="cmd__nfstools_8c.html#af72127fe6cb58ca1006f48d49cc630ce">cmdnfs_fhandle3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_LINK3args-&gt;<a class="code" href="structLINK3args.html#a281a7fab6100f4b66a8471efeb8e15bc">file</a>));
<a name="l03783"></a>03783       <a class="code" href="cmd__nfstools_8c.html#a242dedae1aa72eac02a1465e81b9441b">cmdnfs_diropargs3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (caddr_t) &amp; (p_LINK3args-&gt;<a class="code" href="structLINK3args.html#aad3c3fbcfa79da0dfb489fcd3d6bceac">link</a>));
<a name="l03784"></a>03784       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03785"></a>03785       <span class="keywordflow">break</span>;
<a name="l03786"></a>03786 
<a name="l03787"></a>03787     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l03788"></a>03788       <span class="comment">/* never decoded */</span>
<a name="l03789"></a>03789     <span class="keywordflow">default</span>:
<a name="l03790"></a>03790       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03791"></a>03791     }
<a name="l03792"></a>03792 }
<a name="l03793"></a>03793 
<a name="l03794"></a><a class="code" href="cmd__nfstools_8c.html#aa937d71af0f81ceca8ecaf0b3035b3b8">03794</a> <span class="preprocessor">#define LINK3_OK_ATTRS( _p_LINK3res ) ( (_p_LINK3res)-&gt;LINK3res_u.resok.file_attributes )</span>
<a name="l03795"></a><a class="code" href="cmd__nfstools_8c.html#a2e09f301543147d82e0a37c87326455f">03795</a> <span class="preprocessor"></span><span class="preprocessor">#define LINK3_OK_WCC( _p_LINK3res ) ( (_p_LINK3res)-&gt;LINK3res_u.resok.linkdir_wcc )</span>
<a name="l03796"></a><a class="code" href="cmd__nfstools_8c.html#aa07955a9e1b5ba75b8cf8c811336db9b">03796</a> <span class="preprocessor"></span><span class="preprocessor">#define LINK3_FAIL_ATTRS( _p_LINK3res ) ( (_p_LINK3res)-&gt;LINK3res_u.resfail.file_attributes )</span>
<a name="l03797"></a><a class="code" href="cmd__nfstools_8c.html#abd4a485bc0cc2f7a0156428cd11c64b3">03797</a> <span class="preprocessor"></span><span class="preprocessor">#define LINK3_FAIL_WCC( _p_LINK3res ) ( (_p_LINK3res)-&gt;LINK3res_u.resfail.linkdir_wcc )</span>
<a name="l03798"></a>03798 <span class="preprocessor"></span>
<a name="l03799"></a><a class="code" href="cmd__nfstools_8h.html#a9c8eb0ce9a2a2fa18dff7742e6008ed9">03799</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a9c8eb0ce9a2a2fa18dff7742e6008ed9">cmdnfs_LINK3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l03800"></a>03800                     <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l03801"></a>03801                     <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l03802"></a>03802 {
<a name="l03803"></a>03803 
<a name="l03804"></a>03804   <a class="code" href="structLINK3res.html">LINK3res</a> *p_LINK3res = (<a class="code" href="structLINK3res.html">LINK3res</a> *) p_nfs_struct;
<a name="l03805"></a>03805 
<a name="l03806"></a>03806   <span class="comment">/* sanity check */</span>
<a name="l03807"></a>03807   <span class="keywordflow">if</span>(p_LINK3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03808"></a>03808     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03809"></a>03809 
<a name="l03810"></a>03810   <span class="keywordflow">switch</span> (encodeflag)
<a name="l03811"></a>03811     {
<a name="l03812"></a>03812     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l03813"></a>03813 
<a name="l03814"></a>03814       fprintf(out_stream, <span class="stringliteral">&quot;%*sLINK3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03815"></a>03815       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03816"></a>03816 
<a name="l03817"></a>03817       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l03818"></a>03818                          (caddr_t) &amp; p_LINK3res-&gt;<a class="code" href="structLINK3res.html#a53294e87fd0ca4860b3ad04f6da4686a">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03819"></a>03819         {
<a name="l03820"></a>03820           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03821"></a>03821         }
<a name="l03822"></a>03822 
<a name="l03823"></a>03823       <span class="keywordflow">if</span>(p_LINK3res-&gt;<a class="code" href="structLINK3res.html#a53294e87fd0ca4860b3ad04f6da4686a">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l03824"></a>03824         {
<a name="l03825"></a>03825 
<a name="l03826"></a>03826           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (file):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03827"></a>03827           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03828"></a>03828                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#aa937d71af0f81ceca8ecaf0b3035b3b8">LINK3_OK_ATTRS</a>(p_LINK3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03829"></a>03829             {
<a name="l03830"></a>03830               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03831"></a>03831             }
<a name="l03832"></a>03832 
<a name="l03833"></a>03833           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (link directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03834"></a>03834           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03835"></a>03835                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a2e09f301543147d82e0a37c87326455f">LINK3_OK_WCC</a>(p_LINK3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03836"></a>03836             {
<a name="l03837"></a>03837               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03838"></a>03838             }
<a name="l03839"></a>03839 
<a name="l03840"></a>03840         }
<a name="l03841"></a>03841       <span class="keywordflow">else</span>
<a name="l03842"></a>03842         {
<a name="l03843"></a>03843           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (file):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03844"></a>03844           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03845"></a>03845                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#aa07955a9e1b5ba75b8cf8c811336db9b">LINK3_FAIL_ATTRS</a>(p_LINK3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03846"></a>03846             {
<a name="l03847"></a>03847               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03848"></a>03848             }
<a name="l03849"></a>03849 
<a name="l03850"></a>03850           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (link directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03851"></a>03851           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03852"></a>03852                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#abd4a485bc0cc2f7a0156428cd11c64b3">LINK3_FAIL_WCC</a>(p_LINK3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03853"></a>03853             {
<a name="l03854"></a>03854               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03855"></a>03855             }
<a name="l03856"></a>03856         }
<a name="l03857"></a>03857 
<a name="l03858"></a>03858       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03859"></a>03859 
<a name="l03860"></a>03860       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03861"></a>03861 
<a name="l03862"></a>03862       <span class="keywordflow">break</span>;
<a name="l03863"></a>03863 
<a name="l03864"></a>03864     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l03865"></a>03865       <span class="comment">/* never encoded */</span>
<a name="l03866"></a>03866     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l03867"></a>03867       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l03868"></a>03868     <span class="keywordflow">default</span>:
<a name="l03869"></a>03869       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03870"></a>03870     }
<a name="l03871"></a>03871 
<a name="l03872"></a>03872 }
<a name="l03873"></a>03873 
<a name="l03874"></a>03874 <span class="preprocessor">#undef LINK3_OK_ATTRS</span>
<a name="l03875"></a>03875 <span class="preprocessor"></span><span class="preprocessor">#undef LINK3_OK_WCC</span>
<a name="l03876"></a>03876 <span class="preprocessor"></span><span class="preprocessor">#undef LINK3_FAIL_ATTRS</span>
<a name="l03877"></a>03877 <span class="preprocessor"></span><span class="preprocessor">#undef LINK3_FAIL_WCC</span>
<a name="l03878"></a>03878 <span class="preprocessor"></span>
<a name="l03879"></a><a class="code" href="cmd__nfstools_8h.html#a11691f0e087638360a4ec83bfdf359d5">03879</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a11691f0e087638360a4ec83bfdf359d5">cmdnfs_SYMLINK3args</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l03880"></a>03880                         <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l03881"></a>03881                         <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l03882"></a>03882 {
<a name="l03883"></a>03883   <a class="code" href="structSYMLINK3args.html">SYMLINK3args</a> *p_SYMLINK3args = (<a class="code" href="structSYMLINK3args.html">SYMLINK3args</a> *) p_nfs_struct;
<a name="l03884"></a>03884 
<a name="l03885"></a>03885   <span class="comment">/* sanity check */</span>
<a name="l03886"></a>03886   <span class="keywordflow">if</span>(p_SYMLINK3args == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03887"></a>03887     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03888"></a>03888 
<a name="l03889"></a>03889   <span class="keywordflow">switch</span> (encodeflag)
<a name="l03890"></a>03890     {
<a name="l03891"></a>03891     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l03892"></a>03892 
<a name="l03893"></a>03893       <span class="keywordflow">if</span>((argc != 3) &amp;&amp; (argc != 4))
<a name="l03894"></a>03894         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03895"></a>03895 
<a name="l03896"></a>03896       <span class="comment">/* The first 2 args */</span>
<a name="l03897"></a>03897       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a242dedae1aa72eac02a1465e81b9441b">cmdnfs_diropargs3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 2, argv, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03898"></a>03898                            (caddr_t) &amp; (p_SYMLINK3args-&gt;<a class="code" href="structSYMLINK3args.html#ae3fc61aca65568eb4ea3b1bf853698c2">where</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03899"></a>03899         {
<a name="l03900"></a>03900           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03901"></a>03901         }
<a name="l03902"></a>03902 
<a name="l03903"></a>03903       <span class="comment">/* optional 3rd arg */</span>
<a name="l03904"></a>03904       <span class="keywordflow">if</span>(argc == 4)
<a name="l03905"></a>03905         {
<a name="l03906"></a>03906           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a1e0a6cd7c4500a3cfbb1a35cb2105436">cmdnfs_sattr3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 1, argv + 2, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03907"></a>03907                            (caddr_t) &amp; (p_SYMLINK3args-&gt;<a class="code" href="structSYMLINK3args.html#a8040abca038c15e2db3068aa28267bc7">symlink</a>.<a class="code" href="structsymlinkdata3.html#a75e5a7b364442cc9f0f85bd381df8d3f">symlink_attributes</a>)) ==
<a name="l03908"></a>03908              <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03909"></a>03909             {
<a name="l03910"></a>03910               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03911"></a>03911             }
<a name="l03912"></a>03912           <span class="comment">/* 4th arg */</span>
<a name="l03913"></a>03913           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afa2a178837094076227dc6d941bfb66a">cmdnfs_dirpath</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, argc - 3, argv + 3, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03914"></a>03914                             (caddr_t) &amp; (p_SYMLINK3args-&gt;<a class="code" href="structSYMLINK3args.html#a8040abca038c15e2db3068aa28267bc7">symlink</a>.<a class="code" href="structsymlinkdata3.html#a327a9ec2a625b5fe8f93465a373a7410">symlink_data</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03915"></a>03915             {
<a name="l03916"></a>03916               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03917"></a>03917             }
<a name="l03918"></a>03918 
<a name="l03919"></a>03919         }
<a name="l03920"></a>03920       <span class="keywordflow">else</span>
<a name="l03921"></a>03921         {
<a name="l03922"></a>03922           <span class="comment">/* empty attr set */</span>
<a name="l03923"></a>03923           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a1e0a6cd7c4500a3cfbb1a35cb2105436">cmdnfs_sattr3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03924"></a>03924                            (caddr_t) &amp; (p_SYMLINK3args-&gt;<a class="code" href="structSYMLINK3args.html#a8040abca038c15e2db3068aa28267bc7">symlink</a>.<a class="code" href="structsymlinkdata3.html#a75e5a7b364442cc9f0f85bd381df8d3f">symlink_attributes</a>)) ==
<a name="l03925"></a>03925              <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03926"></a>03926             {
<a name="l03927"></a>03927               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03928"></a>03928             }
<a name="l03929"></a>03929           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afa2a178837094076227dc6d941bfb66a">cmdnfs_dirpath</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>, argc - 2, argv + 2, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03930"></a>03930                             (caddr_t) &amp; (p_SYMLINK3args-&gt;<a class="code" href="structSYMLINK3args.html#a8040abca038c15e2db3068aa28267bc7">symlink</a>.<a class="code" href="structsymlinkdata3.html#a327a9ec2a625b5fe8f93465a373a7410">symlink_data</a>)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03931"></a>03931             {
<a name="l03932"></a>03932               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03933"></a>03933             }
<a name="l03934"></a>03934         }
<a name="l03935"></a>03935 
<a name="l03936"></a>03936       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03937"></a>03937 
<a name="l03938"></a>03938     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l03939"></a>03939       <a class="code" href="cmd__nfstools_8c.html#a242dedae1aa72eac02a1465e81b9441b">cmdnfs_diropargs3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03940"></a>03940                         (caddr_t) &amp; (p_SYMLINK3args-&gt;<a class="code" href="structSYMLINK3args.html#ae3fc61aca65568eb4ea3b1bf853698c2">where</a>));
<a name="l03941"></a>03941       <a class="code" href="cmd__nfstools_8c.html#a1e0a6cd7c4500a3cfbb1a35cb2105436">cmdnfs_sattr3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03942"></a>03942                     (caddr_t) &amp; (p_SYMLINK3args-&gt;<a class="code" href="structSYMLINK3args.html#a8040abca038c15e2db3068aa28267bc7">symlink</a>.<a class="code" href="structsymlinkdata3.html#a75e5a7b364442cc9f0f85bd381df8d3f">symlink_attributes</a>));
<a name="l03943"></a>03943       <a class="code" href="cmd__nfstools_8c.html#afa2a178837094076227dc6d941bfb66a">cmdnfs_dirpath</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l03944"></a>03944                      (caddr_t) &amp; (p_SYMLINK3args-&gt;<a class="code" href="structSYMLINK3args.html#a8040abca038c15e2db3068aa28267bc7">symlink</a>.<a class="code" href="structsymlinkdata3.html#a327a9ec2a625b5fe8f93465a373a7410">symlink_data</a>));
<a name="l03945"></a>03945       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03946"></a>03946       <span class="keywordflow">break</span>;
<a name="l03947"></a>03947 
<a name="l03948"></a>03948     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l03949"></a>03949       <span class="comment">/* never decoded */</span>
<a name="l03950"></a>03950     <span class="keywordflow">default</span>:
<a name="l03951"></a>03951       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03952"></a>03952     }
<a name="l03953"></a>03953 }                               <span class="comment">/* cmdnfs_SYMLINK3args */</span>
<a name="l03954"></a>03954 
<a name="l03955"></a><a class="code" href="cmd__nfstools_8c.html#a532ae124463ab67852ef7bca87dd9cc5">03955</a> <span class="preprocessor">#define SYMLINK3_OK_FH( _p_SYMLINK3res ) ( (_p_SYMLINK3res)-&gt;SYMLINK3res_u.resok.obj )</span>
<a name="l03956"></a><a class="code" href="cmd__nfstools_8c.html#ab79c2647c6d41d1f89673f94ca601849">03956</a> <span class="preprocessor"></span><span class="preprocessor">#define SYMLINK3_OK_ATTRS( _p_SYMLINK3res ) ( (_p_SYMLINK3res)-&gt;SYMLINK3res_u.resok.obj_attributes )</span>
<a name="l03957"></a><a class="code" href="cmd__nfstools_8c.html#ae22932b591cee116e15b7530e89689cd">03957</a> <span class="preprocessor"></span><span class="preprocessor">#define SYMLINK3_OK_WCC( _p_SYMLINK3res ) ( (_p_SYMLINK3res)-&gt;SYMLINK3res_u.resok.dir_wcc )</span>
<a name="l03958"></a><a class="code" href="cmd__nfstools_8c.html#ad85300bfbe11039e2c0b3076b9b380d1">03958</a> <span class="preprocessor"></span><span class="preprocessor">#define SYMLINK3_FAIL_WCC( _p_SYMLINK3res ) ( (_p_SYMLINK3res)-&gt;SYMLINK3res_u.resfail.dir_wcc )</span>
<a name="l03959"></a>03959 <span class="preprocessor"></span>
<a name="l03960"></a><a class="code" href="cmd__nfstools_8h.html#ac1c836ab8b81ed863a521ea279b5c33a">03960</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#ac1c836ab8b81ed863a521ea279b5c33a">cmdnfs_SYMLINK3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l03961"></a>03961                        <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l03962"></a>03962                        <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l03963"></a>03963 {
<a name="l03964"></a>03964 
<a name="l03965"></a>03965   <a class="code" href="structSYMLINK3res.html">SYMLINK3res</a> *p_SYMLINK3res = (<a class="code" href="structSYMLINK3res.html">SYMLINK3res</a> *) p_nfs_struct;
<a name="l03966"></a>03966 
<a name="l03967"></a>03967   <span class="comment">/* sanity check */</span>
<a name="l03968"></a>03968   <span class="keywordflow">if</span>(p_SYMLINK3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03969"></a>03969     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03970"></a>03970 
<a name="l03971"></a>03971   <span class="keywordflow">switch</span> (encodeflag)
<a name="l03972"></a>03972     {
<a name="l03973"></a>03973     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l03974"></a>03974 
<a name="l03975"></a>03975       fprintf(out_stream, <span class="stringliteral">&quot;%*sSYMLINK3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03976"></a>03976       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03977"></a>03977 
<a name="l03978"></a>03978       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l03979"></a>03979                          (caddr_t) &amp; p_SYMLINK3res-&gt;<a class="code" href="structSYMLINK3res.html#a8ef7bd1272e051850f9b37a478df7b94">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03980"></a>03980         {
<a name="l03981"></a>03981           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03982"></a>03982         }
<a name="l03983"></a>03983 
<a name="l03984"></a>03984       <span class="keywordflow">if</span>(p_SYMLINK3res-&gt;<a class="code" href="structSYMLINK3res.html#a8ef7bd1272e051850f9b37a478df7b94">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l03985"></a>03985         {
<a name="l03986"></a>03986 
<a name="l03987"></a>03987           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#acc46aca72bbd733004ab3a53e25f2a05">cmdnfs_postopfh3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l03988"></a>03988                               (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a532ae124463ab67852ef7bca87dd9cc5">SYMLINK3_OK_FH</a>(p_SYMLINK3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03989"></a>03989             {
<a name="l03990"></a>03990               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03991"></a>03991             }
<a name="l03992"></a>03992 
<a name="l03993"></a>03993           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (symlink):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l03994"></a>03994           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l03995"></a>03995                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#ab79c2647c6d41d1f89673f94ca601849">SYMLINK3_OK_ATTRS</a>(p_SYMLINK3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l03996"></a>03996             {
<a name="l03997"></a>03997               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l03998"></a>03998             }
<a name="l03999"></a>03999 
<a name="l04000"></a>04000           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l04001"></a>04001           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l04002"></a>04002                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#ae22932b591cee116e15b7530e89689cd">SYMLINK3_OK_WCC</a>(p_SYMLINK3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l04003"></a>04003             {
<a name="l04004"></a>04004               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l04005"></a>04005             }
<a name="l04006"></a>04006 
<a name="l04007"></a>04007         }
<a name="l04008"></a>04008       <span class="keywordflow">else</span>
<a name="l04009"></a>04009         {
<a name="l04010"></a>04010           fprintf(out_stream, <span class="stringliteral">&quot;%*sWcc_data (directory):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l04011"></a>04011           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a72398de714f8b6f7eeaa32d5ac14e31d">cmdnfs_wccdata</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l04012"></a>04012                             (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#ad85300bfbe11039e2c0b3076b9b380d1">SYMLINK3_FAIL_WCC</a>(p_SYMLINK3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l04013"></a>04013             {
<a name="l04014"></a>04014               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l04015"></a>04015             }
<a name="l04016"></a>04016         }
<a name="l04017"></a>04017 
<a name="l04018"></a>04018       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l04019"></a>04019 
<a name="l04020"></a>04020       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l04021"></a>04021 
<a name="l04022"></a>04022       <span class="keywordflow">break</span>;
<a name="l04023"></a>04023 
<a name="l04024"></a>04024     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l04025"></a>04025       <span class="comment">/* never encoded */</span>
<a name="l04026"></a>04026     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l04027"></a>04027       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l04028"></a>04028     <span class="keywordflow">default</span>:
<a name="l04029"></a>04029       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l04030"></a>04030     }
<a name="l04031"></a>04031 
<a name="l04032"></a>04032 }
<a name="l04033"></a>04033 
<a name="l04034"></a>04034 <span class="preprocessor">#undef SYMLINK3_OK_FH</span>
<a name="l04035"></a>04035 <span class="preprocessor"></span><span class="preprocessor">#undef SYMLINK3_OK_ATTRS</span>
<a name="l04036"></a>04036 <span class="preprocessor"></span><span class="preprocessor">#undef SYMLINK3_OK_WCC</span>
<a name="l04037"></a>04037 <span class="preprocessor"></span><span class="preprocessor">#undef SYMLINK3_FAIL_WCC</span>
<a name="l04038"></a>04038 <span class="preprocessor"></span>
<a name="l04039"></a><a class="code" href="cmd__nfstools_8c.html#a022476b3116e8c69d7088c7fd711987e">04039</a> <span class="preprocessor">#define FSINFO3_OK_ATTRS( _p_FSINFO3res ) ( (_p_FSINFO3res)-&gt;FSINFO3res_u.resok.obj_attributes )</span>
<a name="l04040"></a><a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">04040</a> <span class="preprocessor"></span><span class="preprocessor">#define FSINFO3_OK_INFO( _p_FSINFO3res ) ( (_p_FSINFO3res)-&gt;FSINFO3res_u.resok )</span>
<a name="l04041"></a><a class="code" href="cmd__nfstools_8c.html#ab66cc831a34f2a78551da770812391ab">04041</a> <span class="preprocessor"></span><span class="preprocessor">#define FSINFO3_FAIL_ATTRS( _p_FSINFO3res ) ( (_p_FSINFO3res)-&gt;FSINFO3res_u.resfail.obj_attributes )</span>
<a name="l04042"></a>04042 <span class="preprocessor"></span>
<a name="l04043"></a><a class="code" href="cmd__nfstools_8h.html#a6f7397016b476d46ebe1e727e672f2c0">04043</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a6f7397016b476d46ebe1e727e672f2c0">cmdnfs_FSINFO3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l04044"></a>04044                       <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l04045"></a>04045                       <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l04046"></a>04046 {
<a name="l04047"></a>04047 
<a name="l04048"></a>04048   <a class="code" href="structFSINFO3res.html">FSINFO3res</a> *p_FSINFO3res = (<a class="code" href="structFSINFO3res.html">FSINFO3res</a> *) p_nfs_struct;
<a name="l04049"></a>04049 
<a name="l04050"></a>04050   <span class="comment">/* sanity check */</span>
<a name="l04051"></a>04051   <span class="keywordflow">if</span>(p_FSINFO3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l04052"></a>04052     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l04053"></a>04053 
<a name="l04054"></a>04054   <span class="keywordflow">switch</span> (encodeflag)
<a name="l04055"></a>04055     {
<a name="l04056"></a>04056     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l04057"></a>04057 
<a name="l04058"></a>04058       fprintf(out_stream, <span class="stringliteral">&quot;%*sFSINFO3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l04059"></a>04059       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l04060"></a>04060 
<a name="l04061"></a>04061       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l04062"></a>04062                          (caddr_t) &amp; p_FSINFO3res-&gt;<a class="code" href="structFSINFO3res.html#ad4342c3f92f766b25c9b2fee28045ce5">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l04063"></a>04063         {
<a name="l04064"></a>04064           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l04065"></a>04065         }
<a name="l04066"></a>04066 
<a name="l04067"></a>04067       <span class="keywordflow">if</span>(p_FSINFO3res-&gt;<a class="code" href="structFSINFO3res.html#ad4342c3f92f766b25c9b2fee28045ce5">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l04068"></a>04068         {
<a name="l04069"></a>04069 
<a name="l04070"></a>04070           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (root):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l04071"></a>04071           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l04072"></a>04072                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a022476b3116e8c69d7088c7fd711987e">FSINFO3_OK_ATTRS</a>(p_FSINFO3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l04073"></a>04073             {
<a name="l04074"></a>04074               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l04075"></a>04075             }
<a name="l04076"></a>04076 
<a name="l04077"></a>04077           fprintf(out_stream, <span class="stringliteral">&quot;%*srtmax = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04078"></a>04078                   <a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).rtmax);
<a name="l04079"></a>04079           fprintf(out_stream, <span class="stringliteral">&quot;%*srtpref = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04080"></a>04080                   <a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).rtpref);
<a name="l04081"></a>04081           fprintf(out_stream, <span class="stringliteral">&quot;%*srtmult = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04082"></a>04082                   <a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).rtmult);
<a name="l04083"></a>04083           fprintf(out_stream, <span class="stringliteral">&quot;%*swtmax = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04084"></a>04084                   <a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).wtmax);
<a name="l04085"></a>04085           fprintf(out_stream, <span class="stringliteral">&quot;%*swtpref = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04086"></a>04086                   <a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).wtpref);
<a name="l04087"></a>04087           fprintf(out_stream, <span class="stringliteral">&quot;%*swtmult = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04088"></a>04088                   <a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).wtmult);
<a name="l04089"></a>04089           fprintf(out_stream, <span class="stringliteral">&quot;%*sdtpref = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04090"></a>04090                   <a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).dtpref);
<a name="l04091"></a>04091           fprintf(out_stream, <span class="stringliteral">&quot;%*smaxfilesize = %llu (%#llx)\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04092"></a>04092                   <a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).maxfilesize,
<a name="l04093"></a>04093                   <a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).maxfilesize);
<a name="l04094"></a>04094           fprintf(out_stream, <span class="stringliteral">&quot;%*stime_delta = %u.%.9u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04095"></a>04095                   <a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).time_delta.seconds,
<a name="l04096"></a>04096                   <a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).time_delta.nseconds);
<a name="l04097"></a>04097           fprintf(out_stream, <span class="stringliteral">&quot;%*sproperties = %#x : &quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04098"></a>04098                   <a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).properties);
<a name="l04099"></a>04099 
<a name="l04100"></a>04100           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).properties &amp; <a class="code" href="nfs23_8h.html#ad94dc6a247b6b662b0a9d7b932dbf1f7">FSF3_LINK</a>)
<a name="l04101"></a>04101             fprintf(out_stream, <span class="stringliteral">&quot;FSF3_LINK &quot;</span>);
<a name="l04102"></a>04102           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).properties &amp; <a class="code" href="nfs23_8h.html#ac32479e53ff519c71a94b80995e089f4">FSF3_SYMLINK</a>)
<a name="l04103"></a>04103             fprintf(out_stream, <span class="stringliteral">&quot;FSF3_SYMLINK &quot;</span>);
<a name="l04104"></a>04104           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).properties &amp; <a class="code" href="nfs23_8h.html#a599ef45d2a18a43bc254a2ff71a0fdb7">FSF3_HOMOGENEOUS</a>)
<a name="l04105"></a>04105             fprintf(out_stream, <span class="stringliteral">&quot;FSF3_HOMOGENEOUS &quot;</span>);
<a name="l04106"></a>04106           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#aabea26d06d7dfde0836764c7359d2fc8">FSINFO3_OK_INFO</a>(p_FSINFO3res).properties &amp; <a class="code" href="nfs23_8h.html#ad3e1a90dba7c746d3191a1c4bb25c7a7">FSF3_CANSETTIME</a>)
<a name="l04107"></a>04107             fprintf(out_stream, <span class="stringliteral">&quot;FSF3_CANSETTIME &quot;</span>);
<a name="l04108"></a>04108 
<a name="l04109"></a>04109           fprintf(out_stream, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l04110"></a>04110 
<a name="l04111"></a>04111         }
<a name="l04112"></a>04112       <span class="keywordflow">else</span>
<a name="l04113"></a>04113         {
<a name="l04114"></a>04114           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (root):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l04115"></a>04115           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l04116"></a>04116                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#ab66cc831a34f2a78551da770812391ab">FSINFO3_FAIL_ATTRS</a>(p_FSINFO3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l04117"></a>04117             {
<a name="l04118"></a>04118               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l04119"></a>04119             }
<a name="l04120"></a>04120         }
<a name="l04121"></a>04121 
<a name="l04122"></a>04122       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l04123"></a>04123 
<a name="l04124"></a>04124       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l04125"></a>04125 
<a name="l04126"></a>04126       <span class="keywordflow">break</span>;
<a name="l04127"></a>04127 
<a name="l04128"></a>04128     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l04129"></a>04129       <span class="comment">/* never encoded */</span>
<a name="l04130"></a>04130     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l04131"></a>04131       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l04132"></a>04132     <span class="keywordflow">default</span>:
<a name="l04133"></a>04133       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l04134"></a>04134     }
<a name="l04135"></a>04135 
<a name="l04136"></a>04136 }                               <span class="comment">/* cmdnfs_FSINFO3res */</span>
<a name="l04137"></a>04137 
<a name="l04138"></a>04138 <span class="preprocessor">#undef FSINFO3_OK_ATTRS</span>
<a name="l04139"></a>04139 <span class="preprocessor"></span><span class="preprocessor">#undef FSINFO3_OK_INFO</span>
<a name="l04140"></a>04140 <span class="preprocessor"></span><span class="preprocessor">#undef FSINFO3_FAIL_ATTRS</span>
<a name="l04141"></a>04141 <span class="preprocessor"></span>
<a name="l04142"></a><a class="code" href="cmd__nfstools_8c.html#a8ae9b743dc0983276d1c630679d67750">04142</a> <span class="preprocessor">#define PATHCONF3_OK_ATTRS( _p_PATHCONF3res ) ( (_p_PATHCONF3res)-&gt;PATHCONF3res_u.resok.obj_attributes )</span>
<a name="l04143"></a><a class="code" href="cmd__nfstools_8c.html#ab9677f44571baaba4dfb4088d780c318">04143</a> <span class="preprocessor"></span><span class="preprocessor">#define PATHCONF3_OK_INFO( _p_PATHCONF3res ) ( (_p_PATHCONF3res)-&gt;PATHCONF3res_u.resok )</span>
<a name="l04144"></a><a class="code" href="cmd__nfstools_8c.html#a0fd396a06525390775574aef7b5a62ad">04144</a> <span class="preprocessor"></span><span class="preprocessor">#define PATHCONF3_FAIL_ATTRS( _p_PATHCONF3res ) ( (_p_PATHCONF3res)-&gt;PATHCONF3res_u.resfail.obj_attributes )</span>
<a name="l04145"></a>04145 <span class="preprocessor"></span>
<a name="l04146"></a><a class="code" href="cmd__nfstools_8h.html#a764f30081647f2a1d2771b0fec38c02a">04146</a> <span class="keywordtype">int</span> <a class="code" href="cmd__nfstools_8c.html#a764f30081647f2a1d2771b0fec38c02a">cmdnfs_PATHCONF3res</a>(<a class="code" href="cmd__nfstools_8h.html#ad6769d5db79c8670bb957a5adf43ae5e">cmdnfs_encodetype_t</a> encodeflag,
<a name="l04147"></a>04147                         <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv,
<a name="l04148"></a>04148                         <span class="keywordtype">int</span> indent, FILE * out_stream, caddr_t p_nfs_struct)
<a name="l04149"></a>04149 {
<a name="l04150"></a>04150 
<a name="l04151"></a>04151   <a class="code" href="structPATHCONF3res.html">PATHCONF3res</a> *p_PATHCONF3res = (<a class="code" href="structPATHCONF3res.html">PATHCONF3res</a> *) p_nfs_struct;
<a name="l04152"></a>04152 
<a name="l04153"></a>04153   <span class="comment">/* sanity check */</span>
<a name="l04154"></a>04154   <span class="keywordflow">if</span>(p_PATHCONF3res == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l04155"></a>04155     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l04156"></a>04156 
<a name="l04157"></a>04157   <span class="keywordflow">switch</span> (encodeflag)
<a name="l04158"></a>04158     {
<a name="l04159"></a>04159     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>:
<a name="l04160"></a>04160 
<a name="l04161"></a>04161       fprintf(out_stream, <span class="stringliteral">&quot;%*sPATHCONF3res =\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l04162"></a>04162       fprintf(out_stream, <span class="stringliteral">&quot;%*s{\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l04163"></a>04163 
<a name="l04164"></a>04164       <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#a77429f22c9ac2deefd3177a8f8f1be33">cmdnfs_nfsstat3</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 2, out_stream,
<a name="l04165"></a>04165                          (caddr_t) &amp; p_PATHCONF3res-&gt;<a class="code" href="structPATHCONF3res.html#a0de84f165583c10fd218fbb6cc94caa0">status</a>) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l04166"></a>04166         {
<a name="l04167"></a>04167           <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l04168"></a>04168         }
<a name="l04169"></a>04169 
<a name="l04170"></a>04170       <span class="keywordflow">if</span>(p_PATHCONF3res-&gt;<a class="code" href="structPATHCONF3res.html#a0de84f165583c10fd218fbb6cc94caa0">status</a> == <a class="code" href="nfs23_8h.html#a1721ade9b8e43c719c5834eaaf60aac5ae705552b166e565f66540b9412805365">NFS3_OK</a>)
<a name="l04171"></a>04171         {
<a name="l04172"></a>04172 
<a name="l04173"></a>04173           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (object):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l04174"></a>04174           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l04175"></a>04175                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a8ae9b743dc0983276d1c630679d67750">PATHCONF3_OK_ATTRS</a>(p_PATHCONF3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l04176"></a>04176             {
<a name="l04177"></a>04177               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l04178"></a>04178             }
<a name="l04179"></a>04179 
<a name="l04180"></a>04180           fprintf(out_stream, <span class="stringliteral">&quot;%*slinkmax = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04181"></a>04181                   <a class="code" href="cmd__nfstools_8c.html#ab9677f44571baaba4dfb4088d780c318">PATHCONF3_OK_INFO</a>(p_PATHCONF3res).linkmax);
<a name="l04182"></a>04182           fprintf(out_stream, <span class="stringliteral">&quot;%*sname_max = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04183"></a>04183                   <a class="code" href="cmd__nfstools_8c.html#ab9677f44571baaba4dfb4088d780c318">PATHCONF3_OK_INFO</a>(p_PATHCONF3res).name_max);
<a name="l04184"></a>04184           fprintf(out_stream, <span class="stringliteral">&quot;%*sno_trunc = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04185"></a>04185                   <a class="code" href="cmd__nfstools_8c.html#ab9677f44571baaba4dfb4088d780c318">PATHCONF3_OK_INFO</a>(p_PATHCONF3res).no_trunc);
<a name="l04186"></a>04186           fprintf(out_stream, <span class="stringliteral">&quot;%*schown_restricted = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04187"></a>04187                   <a class="code" href="cmd__nfstools_8c.html#ab9677f44571baaba4dfb4088d780c318">PATHCONF3_OK_INFO</a>(p_PATHCONF3res).chown_restricted);
<a name="l04188"></a>04188           fprintf(out_stream, <span class="stringliteral">&quot;%*scase_insensitive = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04189"></a>04189                   <a class="code" href="cmd__nfstools_8c.html#ab9677f44571baaba4dfb4088d780c318">PATHCONF3_OK_INFO</a>(p_PATHCONF3res).case_insensitive);
<a name="l04190"></a>04190           fprintf(out_stream, <span class="stringliteral">&quot;%*scase_preserving = %u\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>,
<a name="l04191"></a>04191                   <a class="code" href="cmd__nfstools_8c.html#ab9677f44571baaba4dfb4088d780c318">PATHCONF3_OK_INFO</a>(p_PATHCONF3res).case_preserving);
<a name="l04192"></a>04192 
<a name="l04193"></a>04193         }
<a name="l04194"></a>04194       <span class="keywordflow">else</span>
<a name="l04195"></a>04195         {
<a name="l04196"></a>04196           fprintf(out_stream, <span class="stringliteral">&quot;%*sPost-op attributes (object):\n&quot;</span>, indent + 2, <span class="stringliteral">&quot; &quot;</span>);
<a name="l04197"></a>04197           <span class="keywordflow">if</span>(<a class="code" href="cmd__nfstools_8c.html#afcffb351c8115cd880d820dc200f8bc7">cmdnfs_postopattr</a>(<a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fae421e4fa3950219d1fa5ea420d5ed009">CMDNFS_DECODE</a>, 0, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, indent + 4, out_stream,
<a name="l04198"></a>04198                                (caddr_t) &amp; <a class="code" href="cmd__nfstools_8c.html#a0fd396a06525390775574aef7b5a62ad">PATHCONF3_FAIL_ATTRS</a>(p_PATHCONF3res)) == <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)
<a name="l04199"></a>04199             {
<a name="l04200"></a>04200               <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l04201"></a>04201             }
<a name="l04202"></a>04202         }
<a name="l04203"></a>04203 
<a name="l04204"></a>04204       fprintf(out_stream, <span class="stringliteral">&quot;%*s}\n&quot;</span>, indent, <span class="stringliteral">&quot; &quot;</span>);
<a name="l04205"></a>04205 
<a name="l04206"></a>04206       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l04207"></a>04207 
<a name="l04208"></a>04208       <span class="keywordflow">break</span>;
<a name="l04209"></a>04209 
<a name="l04210"></a>04210     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa8cefd6e286aadd1e76ce0a98d3f95a95">CMDNFS_ENCODE</a>:
<a name="l04211"></a>04211       <span class="comment">/* never encoded */</span>
<a name="l04212"></a>04212     <span class="keywordflow">case</span> <a class="code" href="cmd__nfstools_8h.html#a397cef1652ae1a9d0f1510493a62274fa0d3d8e19bcbae675de4d418db9ba004d">CMDNFS_FREE</a>:
<a name="l04213"></a>04213       <span class="comment">/* it is never an input (never encoded, never allocated) */</span>
<a name="l04214"></a>04214     <span class="keywordflow">default</span>:
<a name="l04215"></a>04215       <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l04216"></a>04216     }
<a name="l04217"></a>04217 
<a name="l04218"></a>04218 }                               <span class="comment">/* cmdnfs_PATHCONF3res */</span>
<a name="l04219"></a>04219 
<a name="l04220"></a>04220 <span class="preprocessor">#undef PATHCONF3_OK_ATTRS</span>
<a name="l04221"></a>04221 <span class="preprocessor"></span><span class="preprocessor">#undef PATHCONF3_OK_INFO</span>
<a name="l04222"></a>04222 <span class="preprocessor"></span><span class="preprocessor">#undef PATHCONF3_FAIL_ATTRS</span>
<a name="l04223"></a>04223 <span class="preprocessor"></span>
<a name="l04224"></a>04224 <span class="comment">/*-----------------------------------------------------------------------*/</span>
<a name="l04225"></a>04225 
<a name="l04237"></a><a class="code" href="cmd__nfstools_8c.html#a7e7d03757ddb79aaafd21dcbd9c8131b">04237</a> <span class="preprocessor">#define print_mask(_out,_mode,_mask,_lettre) do {    \</span>
<a name="l04238"></a>04238 <span class="preprocessor">        if (_mode &amp; _mask) fprintf(_out,_lettre);    \</span>
<a name="l04239"></a>04239 <span class="preprocessor">        else fprintf(_out,&quot;-&quot;);                      \</span>
<a name="l04240"></a>04240 <span class="preprocessor">      } while(0)</span>
<a name="l04241"></a>04241 <span class="preprocessor"></span>
<a name="l04242"></a><a class="code" href="cmd__nfstools_8h.html#a0da9dd192f1cf0546755a5575d63f570">04242</a> <span class="keywordtype">void</span> <a class="code" href="cmd__nfstools_8c.html#a0da9dd192f1cf0546755a5575d63f570">print_nfsitem_line</a>(FILE * <a class="code" href="test__nfs__ip__name_8c.html#a0204bbf34f64a80680c73f74564b6d22">out</a>, <a class="code" href="structfattr3.html">fattr3</a> * attrib, <span class="keywordtype">char</span> *<a class="code" href="mount_8h.html#a2946c588fc7fa2fa5b43ac54b7872725">name</a>, <span class="keywordtype">char</span> *target)
<a name="l04243"></a>04243 {
<a name="l04244"></a>04244 
<a name="l04245"></a>04245   <span class="keywordtype">char</span> buff[256];
<a name="l04246"></a>04246 
<a name="l04247"></a>04247   <span class="comment">/* print inode */</span>
<a name="l04248"></a>04248   fprintf(out, <span class="stringliteral">&quot;%10llx &quot;</span>, attrib-&gt;<a class="code" href="structfattr3.html#a3bb2e40248c202b8095bf86375ac2fb6">fileid</a>);
<a name="l04249"></a>04249 
<a name="l04250"></a>04250   <span class="comment">/* printing type */</span>
<a name="l04251"></a>04251   <span class="keywordflow">switch</span> (attrib-&gt;<a class="code" href="structfattr3.html#a2d335c76165aa75adf83514976aa2112">type</a>)
<a name="l04252"></a>04252     {
<a name="l04253"></a>04253     <span class="keywordflow">case</span> <a class="code" href="nfs23_8h.html#a270ed8f2f29f617162aa69c5078ec79da6d59d7a9ae38a38e063d710aea4640fc">NF3FIFO</a>:
<a name="l04254"></a>04254       fprintf(out, <span class="stringliteral">&quot;p&quot;</span>);
<a name="l04255"></a>04255       <span class="keywordflow">break</span>;
<a name="l04256"></a>04256     <span class="keywordflow">case</span> <a class="code" href="nfs23_8h.html#a270ed8f2f29f617162aa69c5078ec79dac8a57c1da573e86b559062c0b942202f">NF3CHR</a>:
<a name="l04257"></a>04257       fprintf(out, <span class="stringliteral">&quot;c&quot;</span>);
<a name="l04258"></a>04258       <span class="keywordflow">break</span>;
<a name="l04259"></a>04259     <span class="keywordflow">case</span> <a class="code" href="nfs23_8h.html#a270ed8f2f29f617162aa69c5078ec79da56ad1836713cef2ce7d2f006bede56de">NF3DIR</a>:
<a name="l04260"></a>04260       fprintf(out, <span class="stringliteral">&quot;d&quot;</span>);
<a name="l04261"></a>04261       <span class="keywordflow">break</span>;
<a name="l04262"></a>04262     <span class="keywordflow">case</span> <a class="code" href="nfs23_8h.html#a270ed8f2f29f617162aa69c5078ec79daff7e7574b93b900472155b1e02fae50c">NF3BLK</a>:
<a name="l04263"></a>04263       fprintf(out, <span class="stringliteral">&quot;b&quot;</span>);
<a name="l04264"></a>04264       <span class="keywordflow">break</span>;
<a name="l04265"></a>04265     <span class="keywordflow">case</span> <a class="code" href="nfs23_8h.html#a270ed8f2f29f617162aa69c5078ec79dabf16e3df467ea6ba6bf1159f81671d30">NF3REG</a>:
<a name="l04266"></a>04266       fprintf(out, <span class="stringliteral">&quot;-&quot;</span>);
<a name="l04267"></a>04267       <span class="keywordflow">break</span>;
<a name="l04268"></a>04268     <span class="keywordflow">case</span> <a class="code" href="nfs23_8h.html#a270ed8f2f29f617162aa69c5078ec79da15b3431cae84c4a4a03c1b73363182d4">NF3LNK</a>:
<a name="l04269"></a>04269       fprintf(out, <span class="stringliteral">&quot;l&quot;</span>);
<a name="l04270"></a>04270       <span class="keywordflow">break</span>;
<a name="l04271"></a>04271     <span class="keywordflow">case</span> <a class="code" href="nfs23_8h.html#a270ed8f2f29f617162aa69c5078ec79da6d7cada19804d7dd8d6ec507d497bfbc">NF3SOCK</a>:
<a name="l04272"></a>04272       fprintf(out, <span class="stringliteral">&quot;s&quot;</span>);
<a name="l04273"></a>04273       <span class="keywordflow">break</span>;
<a name="l04274"></a>04274     <span class="keywordflow">default</span>:
<a name="l04275"></a>04275       fprintf(out, <span class="stringliteral">&quot;?&quot;</span>);
<a name="l04276"></a>04276     }
<a name="l04277"></a>04277 
<a name="l04278"></a>04278   <span class="comment">/* printing rights */</span>
<a name="l04279"></a>04279   <a class="code" href="cmd__nfstools_8c.html#a7e7d03757ddb79aaafd21dcbd9c8131b">print_mask</a>(out, attrib-&gt;<a class="code" href="structfattr3.html#aee0d62992319bbbeef0d8887ac9bcb2f">mode</a>, S_IRUSR, <span class="stringliteral">&quot;r&quot;</span>);
<a name="l04280"></a>04280   <a class="code" href="cmd__nfstools_8c.html#a7e7d03757ddb79aaafd21dcbd9c8131b">print_mask</a>(out, attrib-&gt;<a class="code" href="structfattr3.html#aee0d62992319bbbeef0d8887ac9bcb2f">mode</a>, S_IWUSR, <span class="stringliteral">&quot;w&quot;</span>);
<a name="l04281"></a>04281 
<a name="l04282"></a>04282   <span class="keywordflow">if</span>(attrib-&gt;<a class="code" href="structfattr3.html#aee0d62992319bbbeef0d8887ac9bcb2f">mode</a> &amp; S_ISUID)
<a name="l04283"></a>04283     {
<a name="l04284"></a>04284       <span class="keywordflow">if</span>(attrib-&gt;<a class="code" href="structfattr3.html#aee0d62992319bbbeef0d8887ac9bcb2f">mode</a> &amp; S_IXUSR)
<a name="l04285"></a>04285         fprintf(out, <span class="stringliteral">&quot;s&quot;</span>);
<a name="l04286"></a>04286       <span class="keywordflow">else</span>
<a name="l04287"></a>04287         fprintf(out, <span class="stringliteral">&quot;S&quot;</span>);
<a name="l04288"></a>04288     }
<a name="l04289"></a>04289   <span class="keywordflow">else</span>
<a name="l04290"></a>04290     {
<a name="l04291"></a>04291       <span class="keywordflow">if</span>(attrib-&gt;<a class="code" href="structfattr3.html#aee0d62992319bbbeef0d8887ac9bcb2f">mode</a> &amp; S_IXUSR)
<a name="l04292"></a>04292         fprintf(out, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l04293"></a>04293       <span class="keywordflow">else</span>
<a name="l04294"></a>04294         fprintf(out, <span class="stringliteral">&quot;-&quot;</span>);
<a name="l04295"></a>04295     }
<a name="l04296"></a>04296 
<a name="l04297"></a>04297   <a class="code" href="cmd__nfstools_8c.html#a7e7d03757ddb79aaafd21dcbd9c8131b">print_mask</a>(out, attrib-&gt;<a class="code" href="structfattr3.html#aee0d62992319bbbeef0d8887ac9bcb2f">mode</a>, S_IRGRP, <span class="stringliteral">&quot;r&quot;</span>);
<a name="l04298"></a>04298   <a class="code" href="cmd__nfstools_8c.html#a7e7d03757ddb79aaafd21dcbd9c8131b">print_mask</a>(out, attrib-&gt;<a class="code" href="structfattr3.html#aee0d62992319bbbeef0d8887ac9bcb2f">mode</a>, S_IWGRP, <span class="stringliteral">&quot;w&quot;</span>);
<a name="l04299"></a>04299 
<a name="l04300"></a>04300   <span class="keywordflow">if</span>(attrib-&gt;<a class="code" href="structfattr3.html#aee0d62992319bbbeef0d8887ac9bcb2f">mode</a> &amp; S_ISGID)
<a name="l04301"></a>04301     {
<a name="l04302"></a>04302       <span class="keywordflow">if</span>(attrib-&gt;<a class="code" href="structfattr3.html#aee0d62992319bbbeef0d8887ac9bcb2f">mode</a> &amp; S_IXGRP)
<a name="l04303"></a>04303         fprintf(out, <span class="stringliteral">&quot;s&quot;</span>);
<a name="l04304"></a>04304       <span class="keywordflow">else</span>
<a name="l04305"></a>04305         fprintf(out, <span class="stringliteral">&quot;l&quot;</span>);
<a name="l04306"></a>04306     }
<a name="l04307"></a>04307   <span class="keywordflow">else</span>
<a name="l04308"></a>04308     {
<a name="l04309"></a>04309       <span class="keywordflow">if</span>(attrib-&gt;<a class="code" href="structfattr3.html#aee0d62992319bbbeef0d8887ac9bcb2f">mode</a> &amp; S_IXGRP)
<a name="l04310"></a>04310         fprintf(out, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l04311"></a>04311       <span class="keywordflow">else</span>
<a name="l04312"></a>04312         fprintf(out, <span class="stringliteral">&quot;-&quot;</span>);
<a name="l04313"></a>04313     }
<a name="l04314"></a>04314   <a class="code" href="cmd__nfstools_8c.html#a7e7d03757ddb79aaafd21dcbd9c8131b">print_mask</a>(out, attrib-&gt;<a class="code" href="structfattr3.html#aee0d62992319bbbeef0d8887ac9bcb2f">mode</a>, S_IROTH, <span class="stringliteral">&quot;r&quot;</span>);
<a name="l04315"></a>04315   <a class="code" href="cmd__nfstools_8c.html#a7e7d03757ddb79aaafd21dcbd9c8131b">print_mask</a>(out, attrib-&gt;<a class="code" href="structfattr3.html#aee0d62992319bbbeef0d8887ac9bcb2f">mode</a>, S_IWOTH, <span class="stringliteral">&quot;w&quot;</span>);
<a name="l04316"></a>04316   <a class="code" href="cmd__nfstools_8c.html#a7e7d03757ddb79aaafd21dcbd9c8131b">print_mask</a>(out, attrib-&gt;<a class="code" href="structfattr3.html#aee0d62992319bbbeef0d8887ac9bcb2f">mode</a>, S_IXOTH, <span class="stringliteral">&quot;x&quot;</span>);
<a name="l04317"></a>04317 
<a name="l04318"></a>04318   fprintf(out, <span class="stringliteral">&quot; %3u&quot;</span>, attrib-&gt;<a class="code" href="structfattr3.html#a44bf30bfbd6985ad468e5bf247db693f">nlink</a>);
<a name="l04319"></a>04319   fprintf(out, <span class="stringliteral">&quot; %8d&quot;</span>, attrib-&gt;<a class="code" href="structfattr3.html#a3655231cbb17ab96c9a02aa2fb4cb135">uid</a>);
<a name="l04320"></a>04320   fprintf(out, <span class="stringliteral">&quot; %8d&quot;</span>, attrib-&gt;<a class="code" href="structfattr3.html#ad06aaedf675b11afb16d26d90e4db785">gid</a>);
<a name="l04321"></a>04321   fprintf(out, <span class="stringliteral">&quot; %15llu&quot;</span>, attrib-&gt;<a class="code" href="structfattr3.html#a9f6a7cea85ad19307b72f22f0048ffbe">size</a>);
<a name="l04322"></a>04322 
<a name="l04323"></a>04323   <span class="comment">/* print mtime */</span>
<a name="l04324"></a>04324   fprintf(out, <span class="stringliteral">&quot; %15s&quot;</span>, <a class="code" href="cmd__tools_8c.html#ab89ae5e88592c4a71a93fe8183249a02">time2str</a>(attrib-&gt;<a class="code" href="structfattr3.html#ac129137a6a257bd46e1ea4c526733de9">mtime</a>.<a class="code" href="structnfstime3.html#a6765f76aef63ace5fb0ce3dc904f14c3">seconds</a>, buff));
<a name="l04325"></a>04325 
<a name="l04326"></a>04326   <span class="comment">/* print name */</span>
<a name="l04327"></a>04327   fprintf(out, <span class="stringliteral">&quot; %s&quot;</span>, name);
<a name="l04328"></a>04328 
<a name="l04329"></a>04329   <span class="keywordflow">if</span>(attrib-&gt;<a class="code" href="structfattr3.html#a2d335c76165aa75adf83514976aa2112">type</a> == <a class="code" href="nfs23_8h.html#a270ed8f2f29f617162aa69c5078ec79da15b3431cae84c4a4a03c1b73363182d4">NF3LNK</a>)
<a name="l04330"></a>04330     fprintf(out, <span class="stringliteral">&quot; -&gt; %s&quot;</span>, target);
<a name="l04331"></a>04331 
<a name="l04332"></a>04332   fprintf(out, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l04333"></a>04333   <span class="keywordflow">return</span>;
<a name="l04334"></a>04334 
<a name="l04335"></a>04335 }                               <span class="comment">/* print_nfsitem_line */</span>
<a name="l04336"></a>04336 
<a name="l04345"></a><a class="code" href="cmd__nfstools_8h.html#a3d381f490ea75390cc5457a82724d7b1">04345</a> <span class="keywordtype">void</span> <a class="code" href="cmd__nfstools_8c.html#a3d381f490ea75390cc5457a82724d7b1">print_nfs_attributes</a>(<a class="code" href="structfattr3.html">fattr3</a> * attrs, FILE * output)
<a name="l04346"></a>04346 {
<a name="l04347"></a>04347 
<a name="l04348"></a>04348   fprintf(output, <span class="stringliteral">&quot;\tType : %s\n&quot;</span>, <a class="code" href="nfs__tools_8h.html#a9d4214ccfda180f881344e77ce947fe0">nfstype3_to_str</a>(attrs-&gt;<a class="code" href="structfattr3.html#a2d335c76165aa75adf83514976aa2112">type</a>));
<a name="l04349"></a>04349   fprintf(output, <span class="stringliteral">&quot;\tSize : %llu\n&quot;</span>, attrs-&gt;<a class="code" href="structfattr3.html#a9f6a7cea85ad19307b72f22f0048ffbe">size</a>);
<a name="l04350"></a>04350   fprintf(output, <span class="stringliteral">&quot;\tfsId : %u.%u\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)(attrs-&gt;<a class="code" href="structfattr3.html#a79e94bca8e16a8f5c794e40bf049c57a">fsid</a> &gt;&gt; 32),
<a name="l04351"></a>04351           (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)attrs-&gt;<a class="code" href="structfattr3.html#a79e94bca8e16a8f5c794e40bf049c57a">fsid</a>);
<a name="l04352"></a>04352   fprintf(output, <span class="stringliteral">&quot;\tFileId : %#llx\n&quot;</span>, attrs-&gt;<a class="code" href="structfattr3.html#a3bb2e40248c202b8095bf86375ac2fb6">fileid</a>);
<a name="l04353"></a>04353   fprintf(output, <span class="stringliteral">&quot;\tMode : %#o\n&quot;</span>, attrs-&gt;<a class="code" href="structfattr3.html#aee0d62992319bbbeef0d8887ac9bcb2f">mode</a>);
<a name="l04354"></a>04354   fprintf(output, <span class="stringliteral">&quot;\tNumlinks : %u\n&quot;</span>, attrs-&gt;<a class="code" href="structfattr3.html#a44bf30bfbd6985ad468e5bf247db693f">nlink</a>);
<a name="l04355"></a>04355   fprintf(output, <span class="stringliteral">&quot;\tuid : %d\n&quot;</span>, attrs-&gt;<a class="code" href="structfattr3.html#a3655231cbb17ab96c9a02aa2fb4cb135">uid</a>);
<a name="l04356"></a>04356   fprintf(output, <span class="stringliteral">&quot;\tgid : %d\n&quot;</span>, attrs-&gt;<a class="code" href="structfattr3.html#ad06aaedf675b11afb16d26d90e4db785">gid</a>);
<a name="l04357"></a>04357   fprintf(output, <span class="stringliteral">&quot;\tRawdev : %u.%u\n&quot;</span>, attrs-&gt;<a class="code" href="structfattr3.html#aeacbc8524e827ae15df2e1ccc67e6952">rdev</a>.<a class="code" href="structspecdata3.html#a8dd187b4d8448de2723cf38cfc2bb4c1">specdata1</a>, attrs-&gt;<a class="code" href="structfattr3.html#aeacbc8524e827ae15df2e1ccc67e6952">rdev</a>.<a class="code" href="structspecdata3.html#a4ebcb5f3b478735ecee13556e4197d6e">specdata2</a>);
<a name="l04358"></a>04358   fprintf(output, <span class="stringliteral">&quot;\tatime : %s&quot;</span>, ctime((time_t *) &amp; attrs-&gt;<a class="code" href="structfattr3.html#aac52b3ecb1cdc7ef643be10801c76a67">atime</a>.<a class="code" href="structnfstime3.html#a6765f76aef63ace5fb0ce3dc904f14c3">seconds</a>));
<a name="l04359"></a>04359   fprintf(output, <span class="stringliteral">&quot;\tctime : %s&quot;</span>, ctime((time_t *) &amp; attrs-&gt;<a class="code" href="structfattr3.html#a645fed869a8d1a7593124c82b4fa3d7e">ctime</a>.<a class="code" href="structnfstime3.html#a6765f76aef63ace5fb0ce3dc904f14c3">seconds</a>));
<a name="l04360"></a>04360   fprintf(output, <span class="stringliteral">&quot;\tmtime : %s&quot;</span>, ctime((time_t *) &amp; attrs-&gt;<a class="code" href="structfattr3.html#ac129137a6a257bd46e1ea4c526733de9">mtime</a>.<a class="code" href="structnfstime3.html#a6765f76aef63ace5fb0ce3dc904f14c3">seconds</a>));
<a name="l04361"></a>04361   fprintf(output, <span class="stringliteral">&quot;\tspaceused : %llu\n&quot;</span>, attrs-&gt;<a class="code" href="structfattr3.html#a8bc9c0cd4d60d4f67b6549792db76962">used</a>);
<a name="l04362"></a>04362 
<a name="l04363"></a>04363 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 21 2012 for nfs-ganesha by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
