<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>nfs-ganesha: nfs_init.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nfs-ganesha&#160;<span id="projectnumber">1.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>nfs_init.c</h1>  </div>
</div>
<div class="contents">
<a href="nfs__init_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * vim:expandtab:shiftwidth=8:tabstop=8:</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright CEA/DAM/DIF  (2008)</span>
<a name="l00005"></a>00005 <span class="comment"> * contributeur : Philippe DENIEL   philippe.deniel@cea.fr</span>
<a name="l00006"></a>00006 <span class="comment"> *                Thomas LEIBOVICI  thomas.leibovici@cea.fr</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00010"></a>00010 <span class="comment"> * modify it under the terms of the GNU Lesser General Public</span>
<a name="l00011"></a>00011 <span class="comment"> * License as published by the Free Software Foundation; either</span>
<a name="l00012"></a>00012 <span class="comment"> * version 3 of the License, or (at your option) any later version.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00015"></a>00015 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00016"></a>00016 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00017"></a>00017 <span class="comment"> * Lesser General Public License for more details.</span>
<a name="l00018"></a>00018 <span class="comment"> *</span>
<a name="l00019"></a>00019 <span class="comment"> * You should have received a copy of the GNU Lesser General Public</span>
<a name="l00020"></a>00020 <span class="comment"> * License along with this library; if not, write to the Free Software</span>
<a name="l00021"></a>00021 <span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> * ---------------------------------------</span>
<a name="l00024"></a>00024 <span class="comment"> */</span>
<a name="l00025"></a>00025 
<a name="l00033"></a>00033 <span class="preprocessor">#ifdef HAVE_CONFIG_H</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">#include &quot;config.h&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#endif</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span>
<a name="l00037"></a>00037 <span class="preprocessor">#ifdef _SOLARIS</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="preprocessor">#include &quot;solaris_port.h&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#endif</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;ganesha_rpc.h&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="nfs__init_8h.html" title="NFSd initialization prototypes.">nfs_init.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;log.h&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;fsal.h&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;nfs23.h&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;nfs4.h&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;mount.h&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;nlm4.h&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;rquota.h&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;nfs_core.h&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;cache_inode.h&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;cache_inode_lru.h&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;err_cache_inode.h&quot;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;nfs_file_handle.h&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;nfs_exports.h&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;nfs_tools.h&quot;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;nfs_proto_functions.h&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;nfs_dupreq.h&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;config_parsing.h&quot;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &quot;SemN.h&quot;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &quot;external_tools.h&quot;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include &quot;nfs4_acls.h&quot;</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include &quot;nfs_rpc_callback.h&quot;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#ifdef USE_DBUS</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span><span class="preprocessor">#include &quot;ganesha_dbus.h&quot;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#endif</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span><span class="preprocessor">#ifdef _USE_CB_SIMULATOR</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span><span class="preprocessor">#include &quot;nfs_rpc_callback_simulator.h&quot;</span>
<a name="l00069"></a>00069 <span class="preprocessor">#endif</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span><span class="preprocessor">#include &lt;sys/time.h&gt;</span>
<a name="l00071"></a>00071 <span class="preprocessor">#include &lt;sys/resource.h&gt;</span>
<a name="l00072"></a>00072 <span class="preprocessor">#include &lt;unistd.h&gt;</span>
<a name="l00073"></a>00073 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00074"></a>00074 <span class="preprocessor">#include &lt;signal.h&gt;</span>
<a name="l00075"></a>00075 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00076"></a>00076 <span class="preprocessor">#ifdef _USE_NLM</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span><span class="preprocessor">#include &quot;nlm_util.h&quot;</span>
<a name="l00078"></a>00078 <span class="preprocessor">#include &quot;nsm.h&quot;</span>
<a name="l00079"></a>00079 <span class="preprocessor">#endif</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span><span class="preprocessor">#include &quot;sal_functions.h&quot;</span>
<a name="l00081"></a>00081 <span class="preprocessor">#include &quot;nfs_tcb.h&quot;</span>
<a name="l00082"></a>00082 <span class="preprocessor">#include &quot;nfs_tcb.h&quot;</span>
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="comment">/* global information exported to all layers (as extern vars) */</span>
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="comment">/* nfs_parameter_t      nfs_param = {0}; */</span>
<a name="l00087"></a><a class="code" href="nfs__init_8c.html#aeb8fc46586993cf210777049fca03969">00087</a> <a class="code" href="structnfs__param____.html">nfs_parameter_t</a> <a class="code" href="nfs__core_8h.html#aeb8fc46586993cf210777049fca03969">nfs_param</a>;
<a name="l00088"></a>00088 
<a name="l00089"></a>00089 <span class="comment">/* ServerEpoch is ServerBootTime unless overriden by -E command line option */</span>
<a name="l00090"></a><a class="code" href="nfs__init_8c.html#a7b4df488832bc1f60082b16b51472dc5">00090</a> time_t <a class="code" href="Convert__FSAL__Handle_8c.html#a7b4df488832bc1f60082b16b51472dc5">ServerBootTime</a>;
<a name="l00091"></a><a class="code" href="nfs__init_8c.html#a6b4f1d7993315c835596a7e2fff1584b">00091</a> time_t <a class="code" href="nfs__core_8h.html#a6b4f1d7993315c835596a7e2fff1584b">ServerEpoch</a>;
<a name="l00092"></a>00092 
<a name="l00093"></a><a class="code" href="nfs__worker__thread_8c.html#a4dfa2d28740c327f84868034c781f5d4">00093</a> <a class="code" href="structnfs__worker__data____.html">nfs_worker_data_t</a> *<a class="code" href="nfs__core_8h.html#a4dfa2d28740c327f84868034c781f5d4">workers_data</a> = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00094"></a><a class="code" href="commands__NFS_8c.html#aea4783fdf613711bce616cf9876ab62e">00094</a> <a class="code" href="structhash__table.html">hash_table_t</a> *<a class="code" href="cache__inode_8h.html#aea4783fdf613711bce616cf9876ab62e">fh_to_cache_entry_ht</a> = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">/* Cache inode handle lookup table */</span>
<a name="l00095"></a><a class="code" href="nfs__init_8c.html#aba2f7cc065d516cd61fe9d1751df1aaf">00095</a> <a class="code" href="nfsv40_8h.html#a11442bc5a79d08d82fa18205f01ae61d">verifier4</a> <a class="code" href="nfs__core_8h.html#aba2f7cc065d516cd61fe9d1751df1aaf">NFS4_write_verifier</a>;  <span class="comment">/* NFS V4 write verifier */</span>
<a name="l00096"></a><a class="code" href="nfs__init_8c.html#ac75a3dafdfdc69436850ab6d14017097">00096</a> <a class="code" href="nfs23_8h.html#ac2493d4bf549f6c3ca66a5fa396273ee">writeverf3</a> <a class="code" href="nfs__core_8h.html#ac75a3dafdfdc69436850ab6d14017097">NFS3_write_verifier</a>; <span class="comment">/* NFS V3 write verifier */</span>
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 <span class="comment">/* node ID used to identify an individual node in a cluster */</span>
<a name="l00099"></a><a class="code" href="nfs__init_8c.html#a8d39cce827eaeb4b62b84ca0f495188f">00099</a> ushort <a class="code" href="nfs__core_8h.html#a8d39cce827eaeb4b62b84ca0f495188f">g_nodeid</a> = 0;
<a name="l00100"></a>00100 
<a name="l00101"></a><a class="code" href="nfs__stats__thread_8c.html#a3dc6d52e1b7aca5314a422a52fedc551">00101</a> <a class="code" href="structhash__table.html">hash_table_t</a> *<a class="code" href="nfs__init_8c.html#a3dc6d52e1b7aca5314a422a52fedc551">ht_ip_stats</a>[<a class="code" href="nfs__core_8h.html#af2dec24399f7e7e1b4f16ee3fe2ed91f">NB_MAX_WORKER_THREAD</a>];
<a name="l00102"></a><a class="code" href="nfs__init_8c.html#a06d155d9a3d842e8f43384d85c962c29">00102</a> <a class="code" href="struct____nfs__start__info.html">nfs_start_info_t</a> <a class="code" href="nfs__file__content__flush__thread_8c.html#a06d155d9a3d842e8f43384d85c962c29">nfs_start_info</a>;
<a name="l00103"></a>00103 
<a name="l00104"></a><a class="code" href="nfs__init_8c.html#a8c8588708bf16f62ec7fdb33a22d0fc9">00104</a> pthread_t <a class="code" href="nfs__init_8c.html#a8c8588708bf16f62ec7fdb33a22d0fc9">worker_thrid</a>[<a class="code" href="nfs__core_8h.html#af2dec24399f7e7e1b4f16ee3fe2ed91f">NB_MAX_WORKER_THREAD</a>];
<a name="l00105"></a>00105 
<a name="l00106"></a><a class="code" href="nfs__init_8c.html#a4cb0c0e39624eb563a219a2b7d0d8d48">00106</a> pthread_t <a class="code" href="nfs__init_8c.html#a4cb0c0e39624eb563a219a2b7d0d8d48">flusher_thrid</a>[<a class="code" href="nfs__core_8h.html#a613419c7eb3e2035d48a17e4fec6726a">NB_MAX_FLUSHER_THREAD</a>];
<a name="l00107"></a><a class="code" href="nfs__init_8c.html#ad3475dbf1e80c72b805dde8b0eec79a0">00107</a> <a class="code" href="structnfs__flush__thread__data____.html">nfs_flush_thread_data_t</a> <a class="code" href="nfs__init_8c.html#ad3475dbf1e80c72b805dde8b0eec79a0">flush_info</a>[<a class="code" href="nfs__core_8h.html#a613419c7eb3e2035d48a17e4fec6726a">NB_MAX_FLUSHER_THREAD</a>];
<a name="l00108"></a>00108 
<a name="l00109"></a><a class="code" href="nfs__init_8c.html#abc17efd81490605a1e42b272a0d81e73">00109</a> pthread_t <a class="code" href="nfs__init_8c.html#abc17efd81490605a1e42b272a0d81e73">stat_thrid</a>;
<a name="l00110"></a><a class="code" href="nfs__init_8c.html#a06e5c43ab019ea359065a405da0fb412">00110</a> pthread_t <a class="code" href="nfs__init_8c.html#a06e5c43ab019ea359065a405da0fb412">stat_exporter_thrid</a>;
<a name="l00111"></a><a class="code" href="nfs__init_8c.html#a499bd8760892c803ad9d66afd3125d64">00111</a> pthread_t <a class="code" href="nfs__init_8c.html#a499bd8760892c803ad9d66afd3125d64">admin_thrid</a>;
<a name="l00112"></a><a class="code" href="nfs__init_8c.html#a66e22a847b4c468903e5e333603a2aad">00112</a> pthread_t <a class="code" href="nfs__init_8c.html#a66e22a847b4c468903e5e333603a2aad">fcc_gc_thrid</a>;
<a name="l00113"></a><a class="code" href="nfs__init_8c.html#a6c8a4c4fc828d4f08a94a211c78de19e">00113</a> pthread_t <a class="code" href="nfs__init_8c.html#a6c8a4c4fc828d4f08a94a211c78de19e">sigmgr_thrid</a>;
<a name="l00114"></a><a class="code" href="nfs__init_8c.html#a819a12879d824839884110f4a4b2bd5a">00114</a> pthread_t <a class="code" href="nfs__init_8c.html#a819a12879d824839884110f4a4b2bd5a">reaper_thrid</a>;
<a name="l00115"></a><a class="code" href="nfs__init_8c.html#ac8fb85dd60a9496f9f6c689cf9cd5ceb">00115</a> pthread_t <a class="code" href="nfs__init_8c.html#ac8fb85dd60a9496f9f6c689cf9cd5ceb">gsh_dbus_thrid</a>;
<a name="l00116"></a><a class="code" href="nfs__init_8c.html#a7e67a11ccbf16e0c0e8bd32d4328acee">00116</a> pthread_t <a class="code" href="nfs__init_8c.html#a7e67a11ccbf16e0c0e8bd32d4328acee">upp_thrid</a>;
<a name="l00117"></a><a class="code" href="nfs__init_8c.html#ae95946ffb36b931bef7d2cf6cdf4ce99">00117</a> <a class="code" href="structnfs__thread__control__block____.html">nfs_tcb_t</a> <a class="code" href="nfs__file__content__gc__thread_8c.html#ae95946ffb36b931bef7d2cf6cdf4ce99">gccb</a>;
<a name="l00118"></a>00118 
<a name="l00119"></a>00119 <span class="preprocessor">#ifdef _USE_9P</span>
<a name="l00120"></a>00120 <span class="preprocessor"></span>pthread_t _9p_dispatcher_thrid;
<a name="l00121"></a>00121 <span class="preprocessor">#endif</span>
<a name="l00122"></a>00122 <span class="preprocessor"></span>
<a name="l00123"></a>00123 <span class="preprocessor">#ifdef _USE_UPCALL_SIMULATOR</span>
<a name="l00124"></a>00124 <span class="preprocessor"></span>pthread_t upcall_simulator_thrid;
<a name="l00125"></a>00125 <span class="preprocessor">#endif</span>
<a name="l00126"></a>00126 <span class="preprocessor"></span>
<a name="l00127"></a><a class="code" href="nfs__init_8c.html#a0f1c0806dfc5944f5a3d98ac5a907974">00127</a> <span class="keywordtype">char</span> <a class="code" href="nfs__core_8h.html#a0f1c0806dfc5944f5a3d98ac5a907974">config_path</a>[<a class="code" href="tests_8h.html#addfa831c1473e710d2b71b72fd7fcfa5">MAXPATHLEN</a>];
<a name="l00128"></a>00128 
<a name="l00129"></a><a class="code" href="nfs__init_8c.html#a877702fbc03cf868b780d55ba012b777">00129</a> <span class="keywordtype">char</span> <a class="code" href="nfs__core_8h.html#a877702fbc03cf868b780d55ba012b777">pidfile_path</a>[<a class="code" href="tests_8h.html#addfa831c1473e710d2b71b72fd7fcfa5">MAXPATHLEN</a>] ;
<a name="l00130"></a>00130 
<a name="l00139"></a><a class="code" href="nfs__init_8c.html#a573c92247c22a1febc30faf9a5fadef2">00139</a> <span class="keywordtype">void</span> *<a class="code" href="nfs__core_8h.html#a573c92247c22a1febc30faf9a5fadef2">sigmgr_thread</a>( <span class="keywordtype">void</span> * UnusedArg )
<a name="l00140"></a>00140 {
<a name="l00141"></a>00141   <a class="code" href="log_8h.html#aca6ef6a917e3178e7d309664cb668bec">SetNameFunction</a>(<span class="stringliteral">&quot;sigmgr&quot;</span>);
<a name="l00142"></a>00142   <span class="keywordtype">int</span> signal_caught = 0;
<a name="l00143"></a>00143   <a class="code" href="structfsal__status____.html">fsal_status_t</a> st;
<a name="l00144"></a>00144 
<a name="l00145"></a>00145   <span class="comment">/* Loop until we catch SIGTERM */</span>
<a name="l00146"></a>00146   <span class="keywordflow">while</span>(signal_caught != SIGTERM)
<a name="l00147"></a>00147     {
<a name="l00148"></a>00148       sigset_t signals_to_catch;
<a name="l00149"></a>00149       sigemptyset(&amp;signals_to_catch);
<a name="l00150"></a>00150       sigaddset(&amp;signals_to_catch, SIGTERM);
<a name="l00151"></a>00151       sigaddset(&amp;signals_to_catch, SIGHUP);
<a name="l00152"></a>00152       <span class="keywordflow">if</span>(sigwait(&amp;signals_to_catch, &amp;signal_caught) != 0)
<a name="l00153"></a>00153         {
<a name="l00154"></a>00154           <a class="code" href="log_8h.html#a8ca2131f27bca0bd0e870c3c2da64cb1">LogFullDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l00155"></a>00155                        <span class="stringliteral">&quot;sigwait exited with error&quot;</span>);
<a name="l00156"></a>00156           <span class="keywordflow">continue</span>;
<a name="l00157"></a>00157         }
<a name="l00158"></a>00158       <span class="keywordflow">if</span>(signal_caught == SIGHUP)
<a name="l00159"></a>00159         {
<a name="l00160"></a>00160           <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a2890c8ed4855f4d1626b0eca088ecd79">COMPONENT_MAIN</a>,
<a name="l00161"></a>00161                    <span class="stringliteral">&quot;SIGHUP_HANDLER: Received SIGHUP.... initiating export list reload&quot;</span>);
<a name="l00162"></a>00162           <a class="code" href="nfs__core_8h.html#ae0da727728340716f894f7801d1d300c">admin_replace_exports</a>();
<a name="l00163"></a>00163         }
<a name="l00164"></a>00164     }
<a name="l00165"></a>00165 
<a name="l00166"></a>00166   <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a2890c8ed4855f4d1626b0eca088ecd79">COMPONENT_MAIN</a>, <span class="stringliteral">&quot;NFS EXIT: stopping NFS service&quot;</span>);
<a name="l00167"></a>00167   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>, <span class="stringliteral">&quot;Stopping worker threads&quot;</span>);
<a name="l00168"></a>00168 
<a name="l00169"></a>00169   <span class="keywordflow">if</span>(<a class="code" href="nfs__tcb_8h.html#a4a7f7658d79b26598da7624fb60806ff">pause_threads</a>(<a class="code" href="nfs__core_8h.html#ac1b04e5653e70fb962e6b912516b83aeac2137323453902d52fbd598132883bd0">PAUSE_SHUTDOWN</a>) != <a class="code" href="nfs__core_8h.html#a4af359b26b6ae1a8a8ba5251c68f0088a76e4de3f46d3338f8d844de27ae3b0b1">PAUSE_EXIT</a>)
<a name="l00170"></a>00170     <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l00171"></a>00171              <span class="stringliteral">&quot;Unexpected return code from pause_threads&quot;</span>);
<a name="l00172"></a>00172   <span class="keywordflow">else</span>
<a name="l00173"></a>00173     <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l00174"></a>00174              <span class="stringliteral">&quot;Done waiting for worker threads to exit&quot;</span>);
<a name="l00175"></a>00175 
<a name="l00176"></a>00176   <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a2890c8ed4855f4d1626b0eca088ecd79">COMPONENT_MAIN</a>, <span class="stringliteral">&quot;NFS EXIT: synchonizing FSAL&quot;</span>);
<a name="l00177"></a>00177 
<a name="l00178"></a>00178   st = <a class="code" href="fsal__glue_8c.html#adabe2f2fc596731b07948fb0f9ae51db">FSAL_terminate</a>();
<a name="l00179"></a>00179 
<a name="l00180"></a>00180   <span class="keywordflow">if</span>(<a class="code" href="fsal_8h.html#a7c2a97ec2fa552dea8e497c7dd8a2b86">FSAL_IS_ERROR</a>(st))
<a name="l00181"></a>00181     <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a2890c8ed4855f4d1626b0eca088ecd79">COMPONENT_MAIN</a>, <span class="stringliteral">&quot;NFS EXIT: ERROR %d.%d while synchonizing FSAL&quot;</span>,
<a name="l00182"></a>00182             st.<a class="code" href="structfsal__status____.html#ab12ffb4b1b65891a5dd5939fc7d543de">major</a>, st.<a class="code" href="structfsal__status____.html#ac260418be3f1105f31b1663083903e83">minor</a>);
<a name="l00183"></a>00183 
<a name="l00184"></a>00184   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>, <span class="stringliteral">&quot;sigmgr thread exiting&quot;</span>);
<a name="l00185"></a>00185 
<a name="l00186"></a>00186   <span class="comment">/* Remove pid file. I do not check for status (best effort, </span>
<a name="l00187"></a>00187 <span class="comment">   * the daemon is stopping anyway */</span>
<a name="l00188"></a>00188   unlink( <a class="code" href="nfs__core_8h.html#a877702fbc03cf868b780d55ba012b777">pidfile_path</a> ) ;
<a name="l00189"></a>00189 
<a name="l00190"></a>00190   <span class="comment">/* Might as well exit - no need for this thread any more */</span>
<a name="l00191"></a>00191   <span class="keywordflow">return</span> <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00192"></a>00192 }                    <span class="comment">/* sigmgr_thread */</span>
<a name="l00193"></a>00193 
<a name="l00198"></a><a class="code" href="nfs__init_8h.html#a4e7a5cb58567f1e205995834bdf796ea">00198</a> <span class="keywordtype">void</span> <a class="code" href="nfs__init_8c.html#a4e7a5cb58567f1e205995834bdf796ea">nfs_prereq_init</a>(<span class="keywordtype">char</span> *program_name, <span class="keywordtype">char</span> *<a class="code" href="fuse__binding_8c.html#af388f5fab916e51b664956b5a912b884">host_name</a>, <span class="keywordtype">int</span> <a class="code" href="fuse__binding_8c.html#a6a7850ecbb72e1e42b73aefa00562183">debug_level</a>, <span class="keywordtype">char</span> *<a class="code" href="fuse__binding_8c.html#a5fb87274eac6a184308c7bd6ec06d7b2">log_path</a>)
<a name="l00199"></a>00199 {
<a name="l00200"></a>00200   <span class="comment">/* Initialize logging */</span>
<a name="l00201"></a>00201   <a class="code" href="log_8h.html#a603806b370608a510a7db12cd482dc2a">SetNamePgm</a>(program_name);
<a name="l00202"></a>00202   <a class="code" href="log_8h.html#aca6ef6a917e3178e7d309664cb668bec">SetNameFunction</a>(<span class="stringliteral">&quot;main&quot;</span>);
<a name="l00203"></a>00203   <a class="code" href="log_8h.html#af6eab31f9b059f44e3222af8d78cbd8b">SetNameHost</a>(host_name);
<a name="l00204"></a>00204   <a class="code" href="log_8h.html#a9c6fd2b1fc6d60ab2f80b2799b0fa81e">InitLogging</a>();
<a name="l00205"></a>00205   <span class="keywordflow">if</span> (log_path[0] != <span class="charliteral">&#39;\0&#39;</span>)
<a name="l00206"></a>00206     <a class="code" href="log_8h.html#ad27b493349e9ab97cbbcc125fc8ea9d5">SetDefaultLogging</a>(log_path);
<a name="l00207"></a>00207 
<a name="l00208"></a>00208   <span class="keywordflow">if</span> (debug_level &gt;= 0)
<a name="l00209"></a>00209     <a class="code" href="log_8h.html#a3cc33c5deeafcbd4e0283efb64801f4e">SetLogLevel</a>(debug_level);
<a name="l00210"></a>00210 
<a name="l00211"></a>00211   <span class="comment">/* Register error families */</span>
<a name="l00212"></a>00212   <a class="code" href="log_8h.html#af22f228d6be08323658b5bd1cc068d56">AddFamilyError</a>(<a class="code" href="log_8h.html#a04c9432b6c88088fb48d7ec396cbb0c7">ERR_POSIX</a>, <span class="stringliteral">&quot;POSIX Errors&quot;</span>, tab_systeme_status);
<a name="l00213"></a>00213   <a class="code" href="log_8h.html#af22f228d6be08323658b5bd1cc068d56">AddFamilyError</a>(<a class="code" href="log_8h.html#a1d5aa144adc9eb234eae520722ffc747">ERR_LRU</a>, <span class="stringliteral">&quot;LRU related Errors&quot;</span>, tab_errctx_LRU);
<a name="l00214"></a>00214   <a class="code" href="log_8h.html#af22f228d6be08323658b5bd1cc068d56">AddFamilyError</a>(<a class="code" href="log_8h.html#aa608a012d9cb1858adf2151707169dbe">ERR_HASHTABLE</a>, <span class="stringliteral">&quot;HashTable related Errors&quot;</span>, tab_errctx_hash);
<a name="l00215"></a>00215   <a class="code" href="log_8h.html#af22f228d6be08323658b5bd1cc068d56">AddFamilyError</a>(<a class="code" href="log_8h.html#ac670535b4e7acd1bcf284058dc7aa586">ERR_FSAL</a>, <span class="stringliteral">&quot;FSAL related Errors&quot;</span>, tab_errstatus_FSAL);
<a name="l00216"></a>00216   <a class="code" href="log_8h.html#af22f228d6be08323658b5bd1cc068d56">AddFamilyError</a>(<a class="code" href="log_8h.html#a00b41c57093f286afc960efaa54d9c95">ERR_CACHE_INODE</a>, <span class="stringliteral">&quot;Cache Inode related Errors&quot;</span>,
<a name="l00217"></a>00217                  tab_errstatus_cache_inode);
<a name="l00218"></a>00218 }
<a name="l00219"></a>00219 
<a name="l00224"></a><a class="code" href="nfs__init_8c.html#ab5056a53bbbc2f294a566cdadf4f256a">00224</a> <span class="keywordtype">void</span> <a class="code" href="nfs__init_8c.html#ab5056a53bbbc2f294a566cdadf4f256a">nfs_print_param_config</a>()
<a name="l00225"></a>00225 {
<a name="l00226"></a>00226   printf(<span class="stringliteral">&quot;NFS_Core_Param\n{\n&quot;</span>);
<a name="l00227"></a>00227 
<a name="l00228"></a>00228   printf(<span class="stringliteral">&quot;\tNFS_Port = %u ;\n&quot;</span>, nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#ace46328f679c68d165dc83aa24435a60">port</a>[<a class="code" href="nfs__core_8h.html#a7f6e26c17a511d03a3e095f595a02907a69c56a6ce312422c90b25f97a43d4dc2">P_NFS</a>]);
<a name="l00229"></a>00229   printf(<span class="stringliteral">&quot;\tMNT_Port = %u ;\n&quot;</span>, nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#ace46328f679c68d165dc83aa24435a60">port</a>[<a class="code" href="nfs__core_8h.html#a7f6e26c17a511d03a3e095f595a02907a9c790ab4adce0dd1d4dde907f1211eb4">P_MNT</a>]);
<a name="l00230"></a>00230   printf(<span class="stringliteral">&quot;\tNFS_Program = %u ;\n&quot;</span>, nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#aa04e466147819b7a92794e45e67ad2c9">program</a>[<a class="code" href="nfs__core_8h.html#a7f6e26c17a511d03a3e095f595a02907a69c56a6ce312422c90b25f97a43d4dc2">P_NFS</a>]);
<a name="l00231"></a>00231   printf(<span class="stringliteral">&quot;\tMNT_Program = %u ;\n&quot;</span>, nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#aa04e466147819b7a92794e45e67ad2c9">program</a>[<a class="code" href="nfs__core_8h.html#a7f6e26c17a511d03a3e095f595a02907a69c56a6ce312422c90b25f97a43d4dc2">P_NFS</a>]);
<a name="l00232"></a>00232   printf(<span class="stringliteral">&quot;\tNb_Worker = %u ; \n&quot;</span>, nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a689e0b5711184d8c694d2f95e8643946">nb_worker</a>);
<a name="l00233"></a>00233   printf(<span class="stringliteral">&quot;\tb_Call_Before_Queue_Avg = %u ; \n&quot;</span>, nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a6c6b1389ddea28156808f65a1b3274a5">nb_call_before_queue_avg</a>);
<a name="l00234"></a>00234   printf(<span class="stringliteral">&quot;\tNb_MaxConcurrentGC = %u ; \n&quot;</span>, nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#ad4146526bb82c81c5fdce64dc1e9aa44">nb_max_concurrent_gc</a>);
<a name="l00235"></a>00235   printf(<span class="stringliteral">&quot;\tDupReq_Expiration = %lu ; \n&quot;</span>, nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#afe5dc76bdf5fa31ad5778dca3a9faf8d">expiration_dupreq</a>);
<a name="l00236"></a>00236   printf(<span class="stringliteral">&quot;\tCore_Dump_Size = %ld ; \n&quot;</span>, nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a1bf281fdce5ca7ffee9a45cdacd33527">core_dump_size</a>);
<a name="l00237"></a>00237   printf(<span class="stringliteral">&quot;\tNb_Max_Fd = %d ; \n&quot;</span>, nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a38534f24769dd04a2669723a26c0acf0">nb_max_fd</a>);
<a name="l00238"></a>00238   printf(<span class="stringliteral">&quot;\tStats_File_Path = %s ; \n&quot;</span>, nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a44f2a7ad144c20c35a06945e7b36b663">stats_file_path</a>);
<a name="l00239"></a>00239   printf(<span class="stringliteral">&quot;\tStats_Update_Delay = %d ; \n&quot;</span>, nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a8bf18791d78c55156e4900cd7d05a581">stats_update_delay</a>);
<a name="l00240"></a>00240   printf(<span class="stringliteral">&quot;\tLong_Processing_Threshold = %d ; \n&quot;</span>, nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a3fbbfb7ec3f8d64cbabfb90c004dbe2f">long_processing_threshold</a>);
<a name="l00241"></a>00241   printf(<span class="stringliteral">&quot;\tTCP_Fridge_Expiration_Delay = %d ; \n&quot;</span>, nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#aedbcad537eb95cd33fe242fd24be84e3">tcp_fridge_expiration_delay</a>);
<a name="l00242"></a>00242   printf(<span class="stringliteral">&quot;\tStats_Per_Client_Directory = %s ; \n&quot;</span>,
<a name="l00243"></a>00243          nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#ae79a8942df7e5ac9c18c9ed749258331">stats_per_client_directory</a>);
<a name="l00244"></a>00244 
<a name="l00245"></a>00245   <span class="keywordflow">if</span>(nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#af0918c2fe1c82991d9bd744fc588d5d1">dump_stats_per_client</a>)
<a name="l00246"></a>00246     printf(<span class="stringliteral">&quot;\tDump_Stats_Per_Client = TRUE ; \n&quot;</span>);
<a name="l00247"></a>00247   <span class="keywordflow">else</span>
<a name="l00248"></a>00248     printf(<span class="stringliteral">&quot;\tDump_Stats_Per_Client = FALSE ;\n&quot;</span>);
<a name="l00249"></a>00249 
<a name="l00250"></a>00250   <span class="keywordflow">if</span>(nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a5bcea5af9eb65c6c4b86f84ea931d351">drop_io_errors</a>)
<a name="l00251"></a>00251     printf(<span class="stringliteral">&quot;\tDrop_IO_Errors = TRUE ; \n&quot;</span>);
<a name="l00252"></a>00252   <span class="keywordflow">else</span>
<a name="l00253"></a>00253     printf(<span class="stringliteral">&quot;\tDrop_IO_Errors = FALSE ;\n&quot;</span>);
<a name="l00254"></a>00254 
<a name="l00255"></a>00255   <span class="keywordflow">if</span>(nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#ad53850a96a7505953b0fcf654679031c">drop_inval_errors</a>)
<a name="l00256"></a>00256     printf(<span class="stringliteral">&quot;\tDrop_Inval_Errors = TRUE ; \n&quot;</span>);
<a name="l00257"></a>00257   <span class="keywordflow">else</span>
<a name="l00258"></a>00258     printf(<span class="stringliteral">&quot;\tDrop_Inval_Errors = FALSE ;\n&quot;</span>);
<a name="l00259"></a>00259 
<a name="l00260"></a>00260   <span class="keywordflow">if</span>(nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a5057124e2ec18a656729078748a6b8c2">drop_delay_errors</a>)
<a name="l00261"></a>00261     printf(<span class="stringliteral">&quot;\tDrop_Delay_Errors = TRUE ; \n&quot;</span>);
<a name="l00262"></a>00262   <span class="keywordflow">else</span>
<a name="l00263"></a>00263     printf(<span class="stringliteral">&quot;\tDrop_Delay_Errors = FALSE ;\n&quot;</span>);
<a name="l00264"></a>00264 
<a name="l00265"></a>00265   printf(<span class="stringliteral">&quot;}\n\n&quot;</span>);
<a name="l00266"></a>00266 
<a name="l00267"></a>00267   printf(<span class="stringliteral">&quot;NFS_Worker_Param\n{\n&quot;</span>);
<a name="l00268"></a>00268   printf(<span class="stringliteral">&quot;}\n\n&quot;</span>);
<a name="l00269"></a>00269 }                               <span class="comment">/* nfs_print_param_config */</span>
<a name="l00270"></a>00270 
<a name="l00275"></a><a class="code" href="nfs__init_8h.html#a87c277e80d9e63d647258b331e26fd23">00275</a> <span class="keywordtype">void</span> <a class="code" href="nfs__init_8c.html#a87c277e80d9e63d647258b331e26fd23">nfs_set_param_default</a>()
<a name="l00276"></a>00276 {
<a name="l00277"></a>00277   <span class="comment">/* Core parameters */</span>
<a name="l00278"></a>00278   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a689e0b5711184d8c694d2f95e8643946">nb_worker</a> = <a class="code" href="nfs__core_8h.html#ae73348c0ad8496e06eec790f45712322">NB_WORKER_THREAD_DEFAULT</a>;
<a name="l00279"></a>00279   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a6c6b1389ddea28156808f65a1b3274a5">nb_call_before_queue_avg</a> = <a class="code" href="nfs__core_8h.html#ac2d55a1fc98e67bcb1e90eeffcb8a263">NB_REQUEST_BEFORE_QUEUE_AVG</a>;
<a name="l00280"></a>00280   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#ad4146526bb82c81c5fdce64dc1e9aa44">nb_max_concurrent_gc</a> = <a class="code" href="nfs__core_8h.html#a75f2b8122b46bc8653b0b732f9a4b6c2">NB_MAX_CONCURRENT_GC</a>;
<a name="l00281"></a>00281   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#afe5dc76bdf5fa31ad5778dca3a9faf8d">expiration_dupreq</a> = <a class="code" href="nfs__core_8h.html#af27dca52e999bffbb7de251230c62ad5">DUPREQ_EXPIRATION</a>;
<a name="l00282"></a>00282   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#ace46328f679c68d165dc83aa24435a60">port</a>[<a class="code" href="nfs__core_8h.html#a7f6e26c17a511d03a3e095f595a02907a69c56a6ce312422c90b25f97a43d4dc2">P_NFS</a>] = <a class="code" href="nfs__core_8h.html#a268f8802f65fbd4c00cc3fafe29b0638">NFS_PORT</a>;
<a name="l00283"></a>00283   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#ace46328f679c68d165dc83aa24435a60">port</a>[<a class="code" href="nfs__core_8h.html#a7f6e26c17a511d03a3e095f595a02907a9c790ab4adce0dd1d4dde907f1211eb4">P_MNT</a>] = 0;
<a name="l00284"></a>00284   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a17832d9eeb4df8e39ecddd3e069408be">bind_addr</a>.sin_family = AF_INET;       <span class="comment">/* IPv4 only right now */</span>
<a name="l00285"></a>00285   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a17832d9eeb4df8e39ecddd3e069408be">bind_addr</a>.sin_addr.s_addr = INADDR_ANY;       <span class="comment">/* All the interfaces on the machine are used */</span>
<a name="l00286"></a>00286   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a17832d9eeb4df8e39ecddd3e069408be">bind_addr</a>.sin_port = 0;       <span class="comment">/* No port specified */</span>
<a name="l00287"></a>00287   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#aa04e466147819b7a92794e45e67ad2c9">program</a>[<a class="code" href="nfs__core_8h.html#a7f6e26c17a511d03a3e095f595a02907a69c56a6ce312422c90b25f97a43d4dc2">P_NFS</a>] = <a class="code" href="nfs23_8h.html#aeffafe01471e18c7ee6fb1529305e0d6">NFS_PROGRAM</a>;
<a name="l00288"></a>00288   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#aa04e466147819b7a92794e45e67ad2c9">program</a>[<a class="code" href="nfs__core_8h.html#a7f6e26c17a511d03a3e095f595a02907a9c790ab4adce0dd1d4dde907f1211eb4">P_MNT</a>] = <a class="code" href="mount_8h.html#a3e9aa9c02ff209cce7910499a3388eb8">MOUNTPROG</a>;
<a name="l00289"></a>00289 <span class="preprocessor">#ifdef _USE_NLM</span>
<a name="l00290"></a>00290 <span class="preprocessor"></span>  nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#aa04e466147819b7a92794e45e67ad2c9">program</a>[P_NLM] = <a class="code" href="nlm4_8h.html#acf057568bd49f400df6c22530894bad5">NLMPROG</a>;
<a name="l00291"></a>00291   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#ace46328f679c68d165dc83aa24435a60">port</a>[P_NLM] = 0;
<a name="l00292"></a>00292 <span class="preprocessor">#endif</span>
<a name="l00293"></a>00293 <span class="preprocessor"></span><span class="preprocessor">#ifdef _USE_9P</span>
<a name="l00294"></a>00294 <span class="preprocessor"></span>  nfs_param._9p_param._9p_port = <a class="code" href="9p_8h.html#af59cc2692ab25c878d4c44fde6a0d78e">_9P_PORT</a> ;
<a name="l00295"></a>00295 <span class="preprocessor">#endif</span>
<a name="l00296"></a>00296 <span class="preprocessor"></span><span class="preprocessor">#ifdef _USE_RQUOTA</span>
<a name="l00297"></a>00297 <span class="preprocessor"></span>  nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#aa04e466147819b7a92794e45e67ad2c9">program</a>[P_RQUOTA] = <a class="code" href="rquota_8h.html#a2a9c6339a4f29e08c39ef0ef10ca3466">RQUOTAPROG</a>;
<a name="l00298"></a>00298   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#ace46328f679c68d165dc83aa24435a60">port</a>[P_RQUOTA] = <a class="code" href="nfs__core_8h.html#a20754fe5aaf0749933953284e69dbc2c">RQUOTA_PORT</a>;
<a name="l00299"></a>00299 <span class="preprocessor">#endif</span>
<a name="l00300"></a>00300 <span class="preprocessor"></span>  nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a5bcea5af9eb65c6c4b86f84ea931d351">drop_io_errors</a> = <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00301"></a>00301   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#ad53850a96a7505953b0fcf654679031c">drop_inval_errors</a> = <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00302"></a>00302   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a5057124e2ec18a656729078748a6b8c2">drop_delay_errors</a> = <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00303"></a>00303   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a1bf281fdce5ca7ffee9a45cdacd33527">core_dump_size</a> = -1;
<a name="l00304"></a>00304   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a38534f24769dd04a2669723a26c0acf0">nb_max_fd</a> = 1024;
<a name="l00305"></a>00305   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a8bf18791d78c55156e4900cd7d05a581">stats_update_delay</a> = 60;
<a name="l00306"></a>00306   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a3fbbfb7ec3f8d64cbabfb90c004dbe2f">long_processing_threshold</a> = 10; <span class="comment">/* seconds */</span>
<a name="l00307"></a>00307   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#aedbcad537eb95cd33fe242fd24be84e3">tcp_fridge_expiration_delay</a> = -1;
<a name="l00308"></a>00308 <span class="comment">/* only NFSv4 is supported for the FSAL_PROXY */</span>
<a name="l00309"></a>00309 <span class="preprocessor">#if ! defined( _USE_PROXY ) || defined ( _HANDLE_MAPPING )</span>
<a name="l00310"></a>00310 <span class="preprocessor"></span>  nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a1c4c04a8f01424eb79f5df47036fbf36">core_options</a> = <a class="code" href="nfs__core_8h.html#a95b77ea227a89897affa6e4286f39d9f">CORE_OPTION_NFSV3</a> | <a class="code" href="nfs__core_8h.html#a909bc686b3f5a599dd38d9f29aaaef68">CORE_OPTION_NFSV4</a>;
<a name="l00311"></a>00311 <span class="preprocessor">#else</span>
<a name="l00312"></a>00312 <span class="preprocessor"></span>  nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a1c4c04a8f01424eb79f5df47036fbf36">core_options</a> = <a class="code" href="nfs__core_8h.html#a909bc686b3f5a599dd38d9f29aaaef68">CORE_OPTION_NFSV4</a>;
<a name="l00313"></a>00313 <span class="preprocessor">#endif                          </span><span class="comment">/* _USE_PROXY */</span>
<a name="l00314"></a>00314 
<a name="l00315"></a>00315   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#af63dd1cd19a534e2421181c4fff2eaf4">use_nfs_commit</a> = <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00316"></a>00316   strncpy(nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a44f2a7ad144c20c35a06945e7b36b663">stats_file_path</a>, <span class="stringliteral">&quot;/tmp/ganesha.stat&quot;</span>, <a class="code" href="tests_8h.html#addfa831c1473e710d2b71b72fd7fcfa5">MAXPATHLEN</a>);
<a name="l00317"></a>00317   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#af0918c2fe1c82991d9bd744fc588d5d1">dump_stats_per_client</a> = 0;
<a name="l00318"></a>00318   strncpy(nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#ae79a8942df7e5ac9c18c9ed749258331">stats_per_client_directory</a>, <span class="stringliteral">&quot;/tmp&quot;</span>, <a class="code" href="tests_8h.html#addfa831c1473e710d2b71b72fd7fcfa5">MAXPATHLEN</a>);
<a name="l00319"></a>00319 
<a name="l00320"></a>00320   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a616aed4a555be40916dae65600033d3e">max_send_buffer_size</a> = <a class="code" href="nfs__core_8h.html#a84863210bcab08f6aa423dc0717c0571">NFS_DEFAULT_SEND_BUFFER_SIZE</a>;
<a name="l00321"></a>00321   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#ab0bed0b8efe6394c594101e24a8a6aa1">max_recv_buffer_size</a> = <a class="code" href="nfs__core_8h.html#a0d066e242904308103dead178ffcc4da">NFS_DEFAULT_RECV_BUFFER_SIZE</a>;
<a name="l00322"></a>00322 
<a name="l00323"></a>00323 <span class="preprocessor">#ifdef _USE_NLM</span>
<a name="l00324"></a>00324 <span class="preprocessor"></span>  nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.nsm_use_caller_name = <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00325"></a>00325 <span class="preprocessor">#endif</span>
<a name="l00326"></a>00326 <span class="preprocessor"></span>
<a name="l00327"></a>00327   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a09d82b62cfbbb25d868ba7fb7cd78ad8">clustered</a> = <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00328"></a>00328 
<a name="l00329"></a>00329   <span class="comment">/* Worker parameters : LRU dupreq */</span>
<a name="l00330"></a>00330   nfs_param.<a class="code" href="structnfs__param____.html#adaf127ebcf4eea500e79011b862c6899">worker_param</a>.<a class="code" href="structnfs__worker__param____.html#a0074e24cd0651d45e97ea9f20db9a55e">lru_dupreq</a>.<a class="code" href="structlru__param____.html#a324abbbd84ddb3829aaa1e4afc4e25b3">nb_call_gc_invalid</a> = 100;
<a name="l00331"></a>00331   nfs_param.<a class="code" href="structnfs__param____.html#adaf127ebcf4eea500e79011b862c6899">worker_param</a>.<a class="code" href="structnfs__worker__param____.html#a0074e24cd0651d45e97ea9f20db9a55e">lru_dupreq</a>.<a class="code" href="structlru__param____.html#aa66d3d7c7822c03adcc0e78e0b849c67">clean_entry</a> = <a class="code" href="nfs__core_8h.html#a0dd9a264f91e9823e807b34e6994f777">clean_entry_dupreq</a>;
<a name="l00332"></a>00332   nfs_param.<a class="code" href="structnfs__param____.html#adaf127ebcf4eea500e79011b862c6899">worker_param</a>.<a class="code" href="structnfs__worker__param____.html#a0074e24cd0651d45e97ea9f20db9a55e">lru_dupreq</a>.<a class="code" href="structlru__param____.html#a0790c6a02f1c7d2f621c904306e5f4cb">entry_to_str</a> = <a class="code" href="nfs__core_8h.html#af812dda060fd0aa4f965adadb15dd22d">print_entry_dupreq</a>;
<a name="l00333"></a>00333   nfs_param.<a class="code" href="structnfs__param____.html#adaf127ebcf4eea500e79011b862c6899">worker_param</a>.<a class="code" href="structnfs__worker__param____.html#a0074e24cd0651d45e97ea9f20db9a55e">lru_dupreq</a>.<a class="code" href="structlru__param____.html#a4122362201bf5d2cebc21a94f4e6099a">lp_name</a> = <span class="stringliteral">&quot;Worker DupReq LRU&quot;</span>;
<a name="l00334"></a>00334 
<a name="l00335"></a>00335   <span class="comment">/* Worker parameters : GC */</span>
<a name="l00336"></a>00336   nfs_param.<a class="code" href="structnfs__param____.html#adaf127ebcf4eea500e79011b862c6899">worker_param</a>.<a class="code" href="structnfs__worker__param____.html#a7f2bbcb47ee048f83c0192de0f3b0e99">nb_before_gc</a> = <a class="code" href="nfs__core_8h.html#a8cf672ba1c09c25b6c51d0d23032db91">NB_REQUEST_BEFORE_GC</a>;
<a name="l00337"></a>00337 
<a name="l00338"></a>00338 <span class="preprocessor">#ifdef _HAVE_GSSAPI</span>
<a name="l00339"></a>00339 <span class="preprocessor"></span>  <span class="comment">/* krb5 parameter */</span>
<a name="l00340"></a>00340   <a class="code" href="common__utils_8h.html#aeb79f86261de904967d433c1b5e9a1de">strlcpy</a>(nfs_param.krb5_param.svc.principal, <a class="code" href="nfs__core_8h.html#a79ad733dd9410d56c5578d504be1b438">DEFAULT_NFS_PRINCIPAL</a>,
<a name="l00341"></a>00341           <span class="keyword">sizeof</span>(nfs_param.krb5_param.svc.principal));
<a name="l00342"></a>00342   <a class="code" href="common__utils_8h.html#aeb79f86261de904967d433c1b5e9a1de">strlcpy</a>(nfs_param.krb5_param.keytab, <a class="code" href="nfs__core_8h.html#a6ca1d4d0e315a15754e6aa8c4d5562c3">DEFAULT_NFS_KEYTAB</a>,
<a name="l00343"></a>00343           <span class="keyword">sizeof</span>(nfs_param.krb5_param.keytab));
<a name="l00344"></a>00344   <a class="code" href="common__utils_8h.html#aeb79f86261de904967d433c1b5e9a1de">strlcpy</a>(nfs_param.krb5_param.ccache_dir, <a class="code" href="nfs__core_8h.html#a3bb2083406ffd23137cdde627f842d45">DEFAULT_NFS_CCACHE_DIR</a>,
<a name="l00345"></a>00345           <span class="keyword">sizeof</span>(nfs_param.krb5_param.ccache_dir));
<a name="l00346"></a>00346   nfs_param.krb5_param.active_krb5 = <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00347"></a>00347   nfs_param.krb5_param.hash_param.index_size = <a class="code" href="nfs__core_8h.html#a3505b5aa2ea8cfba28cc262fe387330a">PRIME_ID_MAPPER</a>;
<a name="l00348"></a>00348   nfs_param.krb5_param.hash_param.alphabet_length = 10;      <span class="comment">/* Not used for UID_MAPPER */</span>
<a name="l00349"></a>00349   nfs_param.krb5_param.hash_param.hash_func_key = <a class="code" href="AuthGss__HashTable_8c.html#a2f4a4d9cfb400f964da48c62c9382a5f">gss_ctx_hash_func</a>;
<a name="l00350"></a>00350   nfs_param.krb5_param.hash_param.hash_func_rbt = <a class="code" href="AuthGss__HashTable_8c.html#ad4312339f9f72a561c39510d48ce8f29">gss_ctx_rbt_hash_func</a>;
<a name="l00351"></a>00351   nfs_param.krb5_param.hash_param.hash_func_both = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ; <span class="comment">/* BUGAZOMEU */</span>
<a name="l00352"></a>00352   nfs_param.krb5_param.hash_param.compare_key = <a class="code" href="AuthGss__HashTable_8c.html#a2d4ecf0dbf49429319ba2415734f14b2">compare_gss_ctx</a>;
<a name="l00353"></a>00353   nfs_param.krb5_param.hash_param.key_to_str = <a class="code" href="AuthGss__HashTable_8c.html#aa767ce3df9e18cadbc658ea907589a0a">display_gss_ctx</a>;
<a name="l00354"></a>00354   nfs_param.krb5_param.hash_param.val_to_str = <a class="code" href="AuthGss__HashTable_8c.html#ada183cf3b5a7e983571cbcd38145af45">display_gss_svc_data</a>;
<a name="l00355"></a>00355   nfs_param.krb5_param.hash_param.ht_name = <span class="stringliteral">&quot;KRB5 ID Mapper&quot;</span>;
<a name="l00356"></a>00356   nfs_param.krb5_param.hash_param.flags = <a class="code" href="group__HTStructs.html#ga434fc2c1badcbf5fd2b5a52c061d3364">HT_FLAG_NONE</a>;
<a name="l00357"></a>00357   nfs_param.krb5_param.hash_param.ht_log_component = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a21e760b50c8323fd5565edf084692370">COMPONENT_IDMAPPER</a>;
<a name="l00358"></a>00358 <span class="preprocessor">#endif</span>
<a name="l00359"></a>00359 <span class="preprocessor"></span>
<a name="l00360"></a>00360   <span class="comment">/* NFSv4 parameter */</span>
<a name="l00361"></a>00361   nfs_param.<a class="code" href="structnfs__param____.html#aa230a949a9346563ed093e442cc1abad">nfsv4_param</a>.<a class="code" href="structnfs__version4__parameter____.html#a46d8cf96d383c3f7425e811c1cf80fbd">lease_lifetime</a> = <a class="code" href="group__NFSprocs.html#ga8787cb2b7224754e9a46b99e5e8aeaa7">NFS4_LEASE_LIFETIME</a>;
<a name="l00362"></a>00362   nfs_param.<a class="code" href="structnfs__param____.html#aa230a949a9346563ed093e442cc1abad">nfsv4_param</a>.<a class="code" href="structnfs__version4__parameter____.html#ab4fc8f64e6866beb660cbe3dbcceee60">fh_expire</a> = <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00363"></a>00363   nfs_param.<a class="code" href="structnfs__param____.html#aa230a949a9346563ed093e442cc1abad">nfsv4_param</a>.<a class="code" href="structnfs__version4__parameter____.html#a67a340de6cefc638c13b7f6f610c2f98">returns_err_fh_expired</a> = <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00364"></a>00364   nfs_param.<a class="code" href="structnfs__param____.html#aa230a949a9346563ed093e442cc1abad">nfsv4_param</a>.<a class="code" href="structnfs__version4__parameter____.html#afed8ac3818ce654bea20d93d2788133a">return_bad_stateid</a> = <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00365"></a>00365   strncpy(nfs_param.<a class="code" href="structnfs__param____.html#aa230a949a9346563ed093e442cc1abad">nfsv4_param</a>.<a class="code" href="structnfs__version4__parameter____.html#a3928baf538bc77b5ba098c4f7c9593fc">domainname</a>, <a class="code" href="group__NFSprocs.html#gad7dcb44575d9f5ad24ed5b429d5d4db0">DEFAULT_DOMAIN</a>, MAXNAMLEN);
<a name="l00366"></a>00366   strncpy(nfs_param.<a class="code" href="structnfs__param____.html#aa230a949a9346563ed093e442cc1abad">nfsv4_param</a>.<a class="code" href="structnfs__version4__parameter____.html#a43501b84b6ac8e850bbbe2d3682bc08b">idmapconf</a>, <a class="code" href="group__NFSprocs.html#ga8abae8cda7d8d1571841e36aa745efc2">DEFAULT_IDMAPCONF</a>, <a class="code" href="tests_8h.html#addfa831c1473e710d2b71b72fd7fcfa5">MAXPATHLEN</a>);
<a name="l00367"></a>00367 
<a name="l00368"></a>00368   <span class="comment">/* Worker parameters : dupreq hash table */</span>
<a name="l00369"></a>00369   nfs_param.<a class="code" href="structnfs__param____.html#a2d21ff3785e77c12c78e362edf40d159">dupreq_param</a>.<a class="code" href="structnfs__rpc__dupreq__param____.html#a5b4378e8179e69873bd49e13e9926d08">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a> = <a class="code" href="nfs__core_8h.html#aa89add2d157630357439bbcf2c35929b">PRIME_DUPREQ</a>;
<a name="l00370"></a>00370   nfs_param.<a class="code" href="structnfs__param____.html#a2d21ff3785e77c12c78e362edf40d159">dupreq_param</a>.<a class="code" href="structnfs__rpc__dupreq__param____.html#a5b4378e8179e69873bd49e13e9926d08">hash_param</a>.<a class="code" href="structhash__param.html#af2b84e6a1d8462616014f5fc691e2611">alphabet_length</a> = 10;    <span class="comment">/* Xid is a numerical decimal value */</span>
<a name="l00371"></a>00371   nfs_param.<a class="code" href="structnfs__param____.html#a2d21ff3785e77c12c78e362edf40d159">dupreq_param</a>.<a class="code" href="structnfs__rpc__dupreq__param____.html#a5b4378e8179e69873bd49e13e9926d08">hash_param</a>.<a class="code" href="structhash__param.html#a3bc93e003e144160ac0e0d24fbbc1251">hash_func_key</a> = <a class="code" href="nfs__dupreq_8h.html#a720f58beecb1f29712e83373b56568d4">dupreq_value_hash_func</a>;
<a name="l00372"></a>00372   nfs_param.<a class="code" href="structnfs__param____.html#a2d21ff3785e77c12c78e362edf40d159">dupreq_param</a>.<a class="code" href="structnfs__rpc__dupreq__param____.html#a5b4378e8179e69873bd49e13e9926d08">hash_param</a>.<a class="code" href="structhash__param.html#a57ac012ef40704e34a53c6ee747ce332">hash_func_rbt</a> = <a class="code" href="nfs__dupreq_8h.html#a62874e829e04af8882e6314fcecf3945">dupreq_rbt_hash_func</a>;
<a name="l00373"></a>00373   nfs_param.<a class="code" href="structnfs__param____.html#a2d21ff3785e77c12c78e362edf40d159">dupreq_param</a>.<a class="code" href="structnfs__rpc__dupreq__param____.html#a5b4378e8179e69873bd49e13e9926d08">hash_param</a>.<a class="code" href="structhash__param.html#ad13b112debfd42b51a5f6a0f58c1e488">compare_key</a> = <a class="code" href="nfs__core_8h.html#ae097a7ca8bfad0e9658feb038835a83c">compare_req</a>;
<a name="l00374"></a>00374   nfs_param.<a class="code" href="structnfs__param____.html#a2d21ff3785e77c12c78e362edf40d159">dupreq_param</a>.<a class="code" href="structnfs__rpc__dupreq__param____.html#a5b4378e8179e69873bd49e13e9926d08">hash_param</a>.<a class="code" href="structhash__param.html#aa3f1857a0bda0200e6972276014b80dd">key_to_str</a> = <a class="code" href="nfs__core_8h.html#ace76340b85dd6bb0f65608bcced8a634">display_req_key</a>;
<a name="l00375"></a>00375   nfs_param.<a class="code" href="structnfs__param____.html#a2d21ff3785e77c12c78e362edf40d159">dupreq_param</a>.<a class="code" href="structnfs__rpc__dupreq__param____.html#a5b4378e8179e69873bd49e13e9926d08">hash_param</a>.<a class="code" href="structhash__param.html#a0b302235f8efa8e84cfb012638a49c70">val_to_str</a> = <a class="code" href="nfs__core_8h.html#a83a5c6ccfa97ddd8c53de02bd77a7277">display_req_val</a>;
<a name="l00376"></a>00376   nfs_param.<a class="code" href="structnfs__param____.html#a2d21ff3785e77c12c78e362edf40d159">dupreq_param</a>.<a class="code" href="structnfs__rpc__dupreq__param____.html#a5b4378e8179e69873bd49e13e9926d08">hash_param</a>.<a class="code" href="structhash__param.html#a99a674ccdf3ec04a7d35689c0c9d90b2">ht_name</a> = <span class="stringliteral">&quot;Duplicate Request Cache&quot;</span>;
<a name="l00377"></a>00377   nfs_param.<a class="code" href="structnfs__param____.html#a2d21ff3785e77c12c78e362edf40d159">dupreq_param</a>.<a class="code" href="structnfs__rpc__dupreq__param____.html#a5b4378e8179e69873bd49e13e9926d08">hash_param</a>.<a class="code" href="structhash__param.html#a816b64cb969ff6c264a6c7d7c3b3135a">flags</a> = <a class="code" href="group__HTStructs.html#ga434fc2c1badcbf5fd2b5a52c061d3364">HT_FLAG_NONE</a>; <span class="comment">/* ! */</span>
<a name="l00378"></a>00378   nfs_param.<a class="code" href="structnfs__param____.html#a2d21ff3785e77c12c78e362edf40d159">dupreq_param</a>.<a class="code" href="structnfs__rpc__dupreq__param____.html#a5b4378e8179e69873bd49e13e9926d08">hash_param</a>.<a class="code" href="structhash__param.html#a91c7547aac3b11d1b3ae82326c565036">ht_log_component</a> = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556ab22e11ab2329da5c014538bee4066181">COMPONENT_DUPREQ</a>;
<a name="l00379"></a>00379 
<a name="l00380"></a>00380   <span class="comment">/*  Worker parameters : IP/name hash table */</span>
<a name="l00381"></a>00381   nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#a0defa27db837d9d02554dec2b92ee2aa">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a> = <a class="code" href="nfs__core_8h.html#a1cb0b3b9a4302216d7576bfc8489dc5e">PRIME_IP_NAME</a>;
<a name="l00382"></a>00382   nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#a0defa27db837d9d02554dec2b92ee2aa">hash_param</a>.<a class="code" href="structhash__param.html#af2b84e6a1d8462616014f5fc691e2611">alphabet_length</a> = 10;   <span class="comment">/* ipaddr is a numerical decimal value */</span>
<a name="l00383"></a>00383   nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#a0defa27db837d9d02554dec2b92ee2aa">hash_param</a>.<a class="code" href="structhash__param.html#a3bc93e003e144160ac0e0d24fbbc1251">hash_func_key</a> = <a class="code" href="nfs__ip__stats_8h.html#a34111750456aee7f8566ee2baf971907">ip_name_value_hash_func</a>;
<a name="l00384"></a>00384   nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#a0defa27db837d9d02554dec2b92ee2aa">hash_param</a>.<a class="code" href="structhash__param.html#a57ac012ef40704e34a53c6ee747ce332">hash_func_rbt</a> = <a class="code" href="nfs__ip__stats_8h.html#a0bc446883147e32e915d81493692830a">ip_name_rbt_hash_func</a>;
<a name="l00385"></a>00385   nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#a0defa27db837d9d02554dec2b92ee2aa">hash_param</a>.<a class="code" href="structhash__param.html#ad13b112debfd42b51a5f6a0f58c1e488">compare_key</a> = <a class="code" href="nfs__ip__stats_8h.html#afe8038be2a8dcdabfd1dc8683d094c57">compare_ip_name</a>;
<a name="l00386"></a>00386   nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#a0defa27db837d9d02554dec2b92ee2aa">hash_param</a>.<a class="code" href="structhash__param.html#aa3f1857a0bda0200e6972276014b80dd">key_to_str</a> = <a class="code" href="nfs__ip__stats_8h.html#acb1fb53c9ae6b3480373507602b2fd80">display_ip_name_key</a>;
<a name="l00387"></a>00387   nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#a0defa27db837d9d02554dec2b92ee2aa">hash_param</a>.<a class="code" href="structhash__param.html#a0b302235f8efa8e84cfb012638a49c70">val_to_str</a> = <a class="code" href="nfs__ip__stats_8h.html#a0356d922575920eb1111f262cab61e3c">display_ip_name_val</a>;
<a name="l00388"></a>00388   nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#a0defa27db837d9d02554dec2b92ee2aa">hash_param</a>.<a class="code" href="structhash__param.html#a99a674ccdf3ec04a7d35689c0c9d90b2">ht_name</a> = <span class="stringliteral">&quot;IP Name&quot;</span>;
<a name="l00389"></a>00389   nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#a0defa27db837d9d02554dec2b92ee2aa">hash_param</a>.<a class="code" href="structhash__param.html#a816b64cb969ff6c264a6c7d7c3b3135a">flags</a> = <a class="code" href="group__HTStructs.html#ga434fc2c1badcbf5fd2b5a52c061d3364">HT_FLAG_NONE</a>;
<a name="l00390"></a>00390   nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#a0defa27db837d9d02554dec2b92ee2aa">hash_param</a>.<a class="code" href="structhash__param.html#a91c7547aac3b11d1b3ae82326c565036">ht_log_component</a> = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556ad6840f4000a2796068317166bcb2e454">COMPONENT_DISPATCH</a>;
<a name="l00391"></a>00391   nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#aa4accb2b415ee89c31966e7368137e22">expiration_time</a> = <a class="code" href="nfs__core_8h.html#a64dc3b7188fa65e7a7a84c9dda8b93c5">IP_NAME_EXPIRATION</a>;
<a name="l00392"></a>00392   strncpy(nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#a98f87047813d8b0e92bf578c86dc6a7b">mapfile</a>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="tests_8h.html#addfa831c1473e710d2b71b72fd7fcfa5">MAXPATHLEN</a>);
<a name="l00393"></a>00393 
<a name="l00394"></a>00394   <span class="comment">/*  Worker parameters : UID_MAPPER hash table */</span>
<a name="l00395"></a>00395   nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a> = <a class="code" href="nfs__core_8h.html#a3505b5aa2ea8cfba28cc262fe387330a">PRIME_ID_MAPPER</a>;
<a name="l00396"></a>00396   nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#af2b84e6a1d8462616014f5fc691e2611">alphabet_length</a> = 10;      <span class="comment">/* Not used for UID_MAPPER */</span>
<a name="l00397"></a>00397   nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a3bc93e003e144160ac0e0d24fbbc1251">hash_func_key</a> = <a class="code" href="idmapper__cache_8c.html#a73d60acc4c9c8373991814e8a63dc5d7">idmapper_value_hash_func</a>;
<a name="l00398"></a>00398   nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a57ac012ef40704e34a53c6ee747ce332">hash_func_rbt</a> = <a class="code" href="idmapper__cache_8c.html#a5601e09bdfff21d9010d606bffca2edb">idmapper_rbt_hash_func</a>;
<a name="l00399"></a>00399   nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#ad13b112debfd42b51a5f6a0f58c1e488">compare_key</a> = <a class="code" href="idmapper__cache_8c.html#a4652d8814116ae81f60dd134517dc4fa">compare_idmapper</a>;
<a name="l00400"></a>00400   nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#aa3f1857a0bda0200e6972276014b80dd">key_to_str</a> = <a class="code" href="idmapper__cache_8c.html#a14ec9f64a8035fdaed98ec6674bdf871">display_idmapper_key</a>;
<a name="l00401"></a>00401   nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a0b302235f8efa8e84cfb012638a49c70">val_to_str</a> = <a class="code" href="idmapper__cache_8c.html#adadfbdb8951a6c3d44a36e536484169b">display_idmapper_val</a>;
<a name="l00402"></a>00402   nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a99a674ccdf3ec04a7d35689c0c9d90b2">ht_name</a> = <span class="stringliteral">&quot;UID Map Cache&quot;</span>;
<a name="l00403"></a>00403   nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a816b64cb969ff6c264a6c7d7c3b3135a">flags</a> = <a class="code" href="group__HTStructs.html#ga434fc2c1badcbf5fd2b5a52c061d3364">HT_FLAG_NONE</a>;
<a name="l00404"></a>00404   nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a91c7547aac3b11d1b3ae82326c565036">ht_log_component</a> = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a21e760b50c8323fd5565edf084692370">COMPONENT_IDMAPPER</a>;
<a name="l00405"></a>00405   strncpy(nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#a702e806a3d97a65900fda88ffb767c78">mapfile</a>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="tests_8h.html#addfa831c1473e710d2b71b72fd7fcfa5">MAXPATHLEN</a>);
<a name="l00406"></a>00406 
<a name="l00407"></a>00407   <span class="comment">/*  Worker parameters : UNAME_MAPPER hash table */</span>
<a name="l00408"></a>00408   nfs_param.<a class="code" href="structnfs__param____.html#a12540d79fdd3dc040fe287c7b2aa8209">unamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a> = <a class="code" href="nfs__core_8h.html#a3505b5aa2ea8cfba28cc262fe387330a">PRIME_ID_MAPPER</a>;
<a name="l00409"></a>00409   nfs_param.<a class="code" href="structnfs__param____.html#a12540d79fdd3dc040fe287c7b2aa8209">unamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#af2b84e6a1d8462616014f5fc691e2611">alphabet_length</a> = 10;    <span class="comment">/* Not used for UID_MAPPER */</span>
<a name="l00410"></a>00410   nfs_param.<a class="code" href="structnfs__param____.html#a12540d79fdd3dc040fe287c7b2aa8209">unamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a3bc93e003e144160ac0e0d24fbbc1251">hash_func_key</a> = <a class="code" href="idmapper__cache_8c.html#a8f5ca5ae9bf62c1a2b6fec2071ed8fb1">namemapper_value_hash_func</a>;
<a name="l00411"></a>00411   nfs_param.<a class="code" href="structnfs__param____.html#a12540d79fdd3dc040fe287c7b2aa8209">unamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a57ac012ef40704e34a53c6ee747ce332">hash_func_rbt</a> = <a class="code" href="idmapper__cache_8c.html#a005d53288383d80f45c71af86bd3a573">namemapper_rbt_hash_func</a>;
<a name="l00412"></a>00412   nfs_param.<a class="code" href="structnfs__param____.html#a12540d79fdd3dc040fe287c7b2aa8209">unamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#ad13b112debfd42b51a5f6a0f58c1e488">compare_key</a> = <a class="code" href="idmapper__cache_8c.html#a03c9e848d4ce5878e380c465d4d81985">compare_namemapper</a>;
<a name="l00413"></a>00413   nfs_param.<a class="code" href="structnfs__param____.html#a12540d79fdd3dc040fe287c7b2aa8209">unamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#aa3f1857a0bda0200e6972276014b80dd">key_to_str</a> = <a class="code" href="idmapper__cache_8c.html#adadfbdb8951a6c3d44a36e536484169b">display_idmapper_val</a>;
<a name="l00414"></a>00414   nfs_param.<a class="code" href="structnfs__param____.html#a12540d79fdd3dc040fe287c7b2aa8209">unamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a0b302235f8efa8e84cfb012638a49c70">val_to_str</a> = <a class="code" href="idmapper__cache_8c.html#a14ec9f64a8035fdaed98ec6674bdf871">display_idmapper_key</a>;
<a name="l00415"></a>00415   nfs_param.<a class="code" href="structnfs__param____.html#a12540d79fdd3dc040fe287c7b2aa8209">unamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a99a674ccdf3ec04a7d35689c0c9d90b2">ht_name</a> = <span class="stringliteral">&quot;UNAME Map Cache&quot;</span>;
<a name="l00416"></a>00416   nfs_param.<a class="code" href="structnfs__param____.html#a12540d79fdd3dc040fe287c7b2aa8209">unamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a816b64cb969ff6c264a6c7d7c3b3135a">flags</a> = <a class="code" href="group__HTStructs.html#ga434fc2c1badcbf5fd2b5a52c061d3364">HT_FLAG_NONE</a>;
<a name="l00417"></a>00417   nfs_param.<a class="code" href="structnfs__param____.html#a12540d79fdd3dc040fe287c7b2aa8209">unamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a91c7547aac3b11d1b3ae82326c565036">ht_log_component</a> = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a21e760b50c8323fd5565edf084692370">COMPONENT_IDMAPPER</a>;
<a name="l00418"></a>00418   strncpy(nfs_param.<a class="code" href="structnfs__param____.html#a12540d79fdd3dc040fe287c7b2aa8209">unamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#a702e806a3d97a65900fda88ffb767c78">mapfile</a>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="tests_8h.html#addfa831c1473e710d2b71b72fd7fcfa5">MAXPATHLEN</a>);
<a name="l00419"></a>00419 
<a name="l00420"></a>00420   <span class="comment">/*  Worker parameters : GID_MAPPER hash table */</span>
<a name="l00421"></a>00421   nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a> = <a class="code" href="nfs__core_8h.html#a3505b5aa2ea8cfba28cc262fe387330a">PRIME_ID_MAPPER</a>;
<a name="l00422"></a>00422   nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#af2b84e6a1d8462616014f5fc691e2611">alphabet_length</a> = 10;      <span class="comment">/* Not used for UID_MAPPER */</span>
<a name="l00423"></a>00423   nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a3bc93e003e144160ac0e0d24fbbc1251">hash_func_key</a> = <a class="code" href="idmapper__cache_8c.html#a73d60acc4c9c8373991814e8a63dc5d7">idmapper_value_hash_func</a>;
<a name="l00424"></a>00424   nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a57ac012ef40704e34a53c6ee747ce332">hash_func_rbt</a> = <a class="code" href="idmapper__cache_8c.html#a5601e09bdfff21d9010d606bffca2edb">idmapper_rbt_hash_func</a>;
<a name="l00425"></a>00425   nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#ad13b112debfd42b51a5f6a0f58c1e488">compare_key</a> = <a class="code" href="idmapper__cache_8c.html#a4652d8814116ae81f60dd134517dc4fa">compare_idmapper</a>;
<a name="l00426"></a>00426   nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#aa3f1857a0bda0200e6972276014b80dd">key_to_str</a> = <a class="code" href="idmapper__cache_8c.html#a14ec9f64a8035fdaed98ec6674bdf871">display_idmapper_key</a>;
<a name="l00427"></a>00427   nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a0b302235f8efa8e84cfb012638a49c70">val_to_str</a> = <a class="code" href="idmapper__cache_8c.html#adadfbdb8951a6c3d44a36e536484169b">display_idmapper_val</a>;
<a name="l00428"></a>00428   nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a99a674ccdf3ec04a7d35689c0c9d90b2">ht_name</a> = <span class="stringliteral">&quot;GID Map Cache&quot;</span>;
<a name="l00429"></a>00429   nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a816b64cb969ff6c264a6c7d7c3b3135a">flags</a> = <a class="code" href="group__HTStructs.html#ga434fc2c1badcbf5fd2b5a52c061d3364">HT_FLAG_NONE</a>;
<a name="l00430"></a>00430   nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a91c7547aac3b11d1b3ae82326c565036">ht_log_component</a> = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a21e760b50c8323fd5565edf084692370">COMPONENT_IDMAPPER</a>;
<a name="l00431"></a>00431   strncpy(nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#a702e806a3d97a65900fda88ffb767c78">mapfile</a>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="tests_8h.html#addfa831c1473e710d2b71b72fd7fcfa5">MAXPATHLEN</a>);
<a name="l00432"></a>00432 
<a name="l00433"></a>00433   <span class="comment">/*  Worker parameters : UID-&gt;GID  hash table (for RPCSEC_GSS) */</span>
<a name="l00434"></a>00434   nfs_param.<a class="code" href="structnfs__param____.html#a7fbe4b193eb53f095faca50ba7999ec9">uidgidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a> = <a class="code" href="nfs__core_8h.html#a3505b5aa2ea8cfba28cc262fe387330a">PRIME_ID_MAPPER</a>;
<a name="l00435"></a>00435   nfs_param.<a class="code" href="structnfs__param____.html#a7fbe4b193eb53f095faca50ba7999ec9">uidgidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#af2b84e6a1d8462616014f5fc691e2611">alphabet_length</a> = 10;   <span class="comment">/* Not used for UID_MAPPER */</span>
<a name="l00436"></a>00436   nfs_param.<a class="code" href="structnfs__param____.html#a7fbe4b193eb53f095faca50ba7999ec9">uidgidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a3bc93e003e144160ac0e0d24fbbc1251">hash_func_key</a> =
<a name="l00437"></a>00437       <a class="code" href="idmapper__cache_8c.html#a8f5ca5ae9bf62c1a2b6fec2071ed8fb1">namemapper_value_hash_func</a>;
<a name="l00438"></a>00438   nfs_param.<a class="code" href="structnfs__param____.html#a7fbe4b193eb53f095faca50ba7999ec9">uidgidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a57ac012ef40704e34a53c6ee747ce332">hash_func_rbt</a> = <a class="code" href="idmapper__cache_8c.html#a005d53288383d80f45c71af86bd3a573">namemapper_rbt_hash_func</a>;
<a name="l00439"></a>00439   nfs_param.<a class="code" href="structnfs__param____.html#a7fbe4b193eb53f095faca50ba7999ec9">uidgidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#ad13b112debfd42b51a5f6a0f58c1e488">compare_key</a> = <a class="code" href="idmapper__cache_8c.html#a03c9e848d4ce5878e380c465d4d81985">compare_namemapper</a>;
<a name="l00440"></a>00440   nfs_param.<a class="code" href="structnfs__param____.html#a7fbe4b193eb53f095faca50ba7999ec9">uidgidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#aa3f1857a0bda0200e6972276014b80dd">key_to_str</a> = <a class="code" href="idmapper__cache_8c.html#a14ec9f64a8035fdaed98ec6674bdf871">display_idmapper_key</a>;
<a name="l00441"></a>00441   nfs_param.<a class="code" href="structnfs__param____.html#a7fbe4b193eb53f095faca50ba7999ec9">uidgidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a0b302235f8efa8e84cfb012638a49c70">val_to_str</a> = <a class="code" href="idmapper__cache_8c.html#a14ec9f64a8035fdaed98ec6674bdf871">display_idmapper_key</a>;
<a name="l00442"></a>00442   nfs_param.<a class="code" href="structnfs__param____.html#a7fbe4b193eb53f095faca50ba7999ec9">uidgidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a99a674ccdf3ec04a7d35689c0c9d90b2">ht_name</a> = <span class="stringliteral">&quot;UID-&gt;GID Map Cache&quot;</span>;
<a name="l00443"></a>00443   nfs_param.<a class="code" href="structnfs__param____.html#a7fbe4b193eb53f095faca50ba7999ec9">uidgidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a816b64cb969ff6c264a6c7d7c3b3135a">flags</a> = <a class="code" href="group__HTStructs.html#ga434fc2c1badcbf5fd2b5a52c061d3364">HT_FLAG_NONE</a>;
<a name="l00444"></a>00444   nfs_param.<a class="code" href="structnfs__param____.html#a7fbe4b193eb53f095faca50ba7999ec9">uidgidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a91c7547aac3b11d1b3ae82326c565036">ht_log_component</a> = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a21e760b50c8323fd5565edf084692370">COMPONENT_IDMAPPER</a>;
<a name="l00445"></a>00445 
<a name="l00446"></a>00446   <span class="comment">/*  Worker parameters : GNAME_MAPPER hash table */</span>
<a name="l00447"></a>00447   nfs_param.<a class="code" href="structnfs__param____.html#af1690c4fb881801c68310e1f4478e662">gnamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a> = <a class="code" href="nfs__core_8h.html#a3505b5aa2ea8cfba28cc262fe387330a">PRIME_ID_MAPPER</a>;
<a name="l00448"></a>00448   nfs_param.<a class="code" href="structnfs__param____.html#af1690c4fb881801c68310e1f4478e662">gnamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#af2b84e6a1d8462616014f5fc691e2611">alphabet_length</a> = 10;    <span class="comment">/* Not used for UID_MAPPER */</span>
<a name="l00449"></a>00449   nfs_param.<a class="code" href="structnfs__param____.html#af1690c4fb881801c68310e1f4478e662">gnamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a3bc93e003e144160ac0e0d24fbbc1251">hash_func_key</a> = <a class="code" href="idmapper__cache_8c.html#a8f5ca5ae9bf62c1a2b6fec2071ed8fb1">namemapper_value_hash_func</a>;
<a name="l00450"></a>00450   nfs_param.<a class="code" href="structnfs__param____.html#af1690c4fb881801c68310e1f4478e662">gnamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a57ac012ef40704e34a53c6ee747ce332">hash_func_rbt</a> = <a class="code" href="idmapper__cache_8c.html#a005d53288383d80f45c71af86bd3a573">namemapper_rbt_hash_func</a>;
<a name="l00451"></a>00451   nfs_param.<a class="code" href="structnfs__param____.html#af1690c4fb881801c68310e1f4478e662">gnamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#ad13b112debfd42b51a5f6a0f58c1e488">compare_key</a> = <a class="code" href="idmapper__cache_8c.html#a03c9e848d4ce5878e380c465d4d81985">compare_namemapper</a>;
<a name="l00452"></a>00452   nfs_param.<a class="code" href="structnfs__param____.html#af1690c4fb881801c68310e1f4478e662">gnamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#aa3f1857a0bda0200e6972276014b80dd">key_to_str</a> = <a class="code" href="idmapper__cache_8c.html#adadfbdb8951a6c3d44a36e536484169b">display_idmapper_val</a>;
<a name="l00453"></a>00453   nfs_param.<a class="code" href="structnfs__param____.html#af1690c4fb881801c68310e1f4478e662">gnamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a0b302235f8efa8e84cfb012638a49c70">val_to_str</a> = <a class="code" href="idmapper__cache_8c.html#a14ec9f64a8035fdaed98ec6674bdf871">display_idmapper_key</a>;
<a name="l00454"></a>00454   nfs_param.<a class="code" href="structnfs__param____.html#af1690c4fb881801c68310e1f4478e662">gnamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a99a674ccdf3ec04a7d35689c0c9d90b2">ht_name</a> = <span class="stringliteral">&quot;GNAME Map Cache&quot;</span>;
<a name="l00455"></a>00455   nfs_param.<a class="code" href="structnfs__param____.html#af1690c4fb881801c68310e1f4478e662">gnamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a816b64cb969ff6c264a6c7d7c3b3135a">flags</a> = <a class="code" href="group__HTStructs.html#ga434fc2c1badcbf5fd2b5a52c061d3364">HT_FLAG_NONE</a>;
<a name="l00456"></a>00456   nfs_param.<a class="code" href="structnfs__param____.html#af1690c4fb881801c68310e1f4478e662">gnamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#a91c7547aac3b11d1b3ae82326c565036">ht_log_component</a> = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a21e760b50c8323fd5565edf084692370">COMPONENT_IDMAPPER</a>;
<a name="l00457"></a>00457   strncpy(nfs_param.<a class="code" href="structnfs__param____.html#af1690c4fb881801c68310e1f4478e662">gnamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#a702e806a3d97a65900fda88ffb767c78">mapfile</a>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="tests_8h.html#addfa831c1473e710d2b71b72fd7fcfa5">MAXPATHLEN</a>);
<a name="l00458"></a>00458 
<a name="l00459"></a>00459   <span class="comment">/*  Worker parameters : IP/stats hash table */</span>
<a name="l00460"></a>00460   nfs_param.<a class="code" href="structnfs__param____.html#aed160b6e7c80a7748e42781b80e09c89">ip_stats_param</a>.<a class="code" href="structnfs__ip__stats__param____.html#a07a0c696e571f6b54311752613fcb221">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a> = <a class="code" href="nfs__core_8h.html#a9edf0e554a796b922e7d53686e15b1e3">PRIME_IP_STATS</a>;
<a name="l00461"></a>00461   nfs_param.<a class="code" href="structnfs__param____.html#aed160b6e7c80a7748e42781b80e09c89">ip_stats_param</a>.<a class="code" href="structnfs__ip__stats__param____.html#a07a0c696e571f6b54311752613fcb221">hash_param</a>.<a class="code" href="structhash__param.html#af2b84e6a1d8462616014f5fc691e2611">alphabet_length</a> = 10;  <span class="comment">/* ipaddr is a numerical decimal value */</span>
<a name="l00462"></a>00462   nfs_param.<a class="code" href="structnfs__param____.html#aed160b6e7c80a7748e42781b80e09c89">ip_stats_param</a>.<a class="code" href="structnfs__ip__stats__param____.html#a07a0c696e571f6b54311752613fcb221">hash_param</a>.<a class="code" href="structhash__param.html#a3bc93e003e144160ac0e0d24fbbc1251">hash_func_key</a> = <a class="code" href="nfs__ip__stats_8h.html#aa39418346474a69f8a9da991011b0577">ip_stats_value_hash_func</a>;
<a name="l00463"></a>00463   nfs_param.<a class="code" href="structnfs__param____.html#aed160b6e7c80a7748e42781b80e09c89">ip_stats_param</a>.<a class="code" href="structnfs__ip__stats__param____.html#a07a0c696e571f6b54311752613fcb221">hash_param</a>.<a class="code" href="structhash__param.html#a57ac012ef40704e34a53c6ee747ce332">hash_func_rbt</a> = <a class="code" href="nfs__ip__stats_8h.html#a3b810d27e5fd77d2ffafb12d906c9c23">ip_stats_rbt_hash_func</a>;
<a name="l00464"></a>00464   nfs_param.<a class="code" href="structnfs__param____.html#aed160b6e7c80a7748e42781b80e09c89">ip_stats_param</a>.<a class="code" href="structnfs__ip__stats__param____.html#a07a0c696e571f6b54311752613fcb221">hash_param</a>.<a class="code" href="structhash__param.html#ad13b112debfd42b51a5f6a0f58c1e488">compare_key</a> = <a class="code" href="nfs__ip__stats_8h.html#afa644f9b00bc7c357cf4ff6c3e325bc2">compare_ip_stats</a>;
<a name="l00465"></a>00465   nfs_param.<a class="code" href="structnfs__param____.html#aed160b6e7c80a7748e42781b80e09c89">ip_stats_param</a>.<a class="code" href="structnfs__ip__stats__param____.html#a07a0c696e571f6b54311752613fcb221">hash_param</a>.<a class="code" href="structhash__param.html#aa3f1857a0bda0200e6972276014b80dd">key_to_str</a> = <a class="code" href="nfs__ip__stats_8h.html#aeeb467026e0e4c5e062aa0a01eb129b4">display_ip_stats_key</a>;
<a name="l00466"></a>00466   nfs_param.<a class="code" href="structnfs__param____.html#aed160b6e7c80a7748e42781b80e09c89">ip_stats_param</a>.<a class="code" href="structnfs__ip__stats__param____.html#a07a0c696e571f6b54311752613fcb221">hash_param</a>.<a class="code" href="structhash__param.html#a0b302235f8efa8e84cfb012638a49c70">val_to_str</a> = <a class="code" href="nfs__ip__stats_8h.html#a2bff62e175e73be328999c708c58409d">display_ip_stats_val</a>;
<a name="l00467"></a>00467   nfs_param.<a class="code" href="structnfs__param____.html#aed160b6e7c80a7748e42781b80e09c89">ip_stats_param</a>.<a class="code" href="structnfs__ip__stats__param____.html#a07a0c696e571f6b54311752613fcb221">hash_param</a>.<a class="code" href="structhash__param.html#a99a674ccdf3ec04a7d35689c0c9d90b2">ht_name</a> = <span class="stringliteral">&quot;IP Stats&quot;</span>;
<a name="l00468"></a>00468   nfs_param.<a class="code" href="structnfs__param____.html#aed160b6e7c80a7748e42781b80e09c89">ip_stats_param</a>.<a class="code" href="structnfs__ip__stats__param____.html#a07a0c696e571f6b54311752613fcb221">hash_param</a>.<a class="code" href="structhash__param.html#a816b64cb969ff6c264a6c7d7c3b3135a">flags</a> = <a class="code" href="group__HTStructs.html#ga434fc2c1badcbf5fd2b5a52c061d3364">HT_FLAG_NONE</a>;
<a name="l00469"></a>00469   nfs_param.<a class="code" href="structnfs__param____.html#aed160b6e7c80a7748e42781b80e09c89">ip_stats_param</a>.<a class="code" href="structnfs__ip__stats__param____.html#a07a0c696e571f6b54311752613fcb221">hash_param</a>.<a class="code" href="structhash__param.html#a91c7547aac3b11d1b3ae82326c565036">ht_log_component</a> = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556ad6840f4000a2796068317166bcb2e454">COMPONENT_DISPATCH</a>;
<a name="l00470"></a>00470 
<a name="l00471"></a>00471   <span class="comment">/*  Worker parameters : NFSv4 Unconfirmed Client id table */</span>
<a name="l00472"></a>00472   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#aa8f22442faac5b2d27ef98b212c37595">cid_unconfirmed_hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a> = <a class="code" href="nfs__core_8h.html#a021ecd4666beb72c63659eb397bd733b">PRIME_CLIENT_ID</a>;
<a name="l00473"></a>00473   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#aa8f22442faac5b2d27ef98b212c37595">cid_unconfirmed_hash_param</a>.<a class="code" href="structhash__param.html#af2b84e6a1d8462616014f5fc691e2611">alphabet_length</a> = 10; <span class="comment">/* ipaddr is a numerical decimal value */</span>
<a name="l00474"></a>00474   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#aa8f22442faac5b2d27ef98b212c37595">cid_unconfirmed_hash_param</a>.<a class="code" href="structhash__param.html#a3bc93e003e144160ac0e0d24fbbc1251">hash_func_key</a> = <a class="code" href="sal__functions_8h.html#aedecced6f057835f00eff526f9ba2988">client_id_value_hash_func</a>;
<a name="l00475"></a>00475   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#aa8f22442faac5b2d27ef98b212c37595">cid_unconfirmed_hash_param</a>.<a class="code" href="structhash__param.html#a57ac012ef40704e34a53c6ee747ce332">hash_func_rbt</a> = <a class="code" href="sal__functions_8h.html#aa81612a6caaedb1375a2ea0d488075a7">client_id_rbt_hash_func</a>;
<a name="l00476"></a>00476   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#aa8f22442faac5b2d27ef98b212c37595">cid_unconfirmed_hash_param</a>.<a class="code" href="structhash__param.html#a5edce657cbb0f0a9a0ef910004845b4b">hash_func_both</a> = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ;
<a name="l00477"></a>00477   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#aa8f22442faac5b2d27ef98b212c37595">cid_unconfirmed_hash_param</a>.<a class="code" href="structhash__param.html#ad13b112debfd42b51a5f6a0f58c1e488">compare_key</a> = <a class="code" href="sal__functions_8h.html#a7657ba09a1d31d97724207f0e2df9367">compare_client_id</a>;
<a name="l00478"></a>00478   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#aa8f22442faac5b2d27ef98b212c37595">cid_unconfirmed_hash_param</a>.<a class="code" href="structhash__param.html#aa3f1857a0bda0200e6972276014b80dd">key_to_str</a> = <a class="code" href="sal__functions_8h.html#a27aedff39477daaaeec0a06229fcd43d">display_client_id_key</a>;
<a name="l00479"></a>00479   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#aa8f22442faac5b2d27ef98b212c37595">cid_unconfirmed_hash_param</a>.<a class="code" href="structhash__param.html#a0b302235f8efa8e84cfb012638a49c70">val_to_str</a> = <a class="code" href="sal__functions_8h.html#a80dae4a1dff1cd9f09a6c819234fc847">display_client_id_val</a>;
<a name="l00480"></a>00480   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#aa8f22442faac5b2d27ef98b212c37595">cid_unconfirmed_hash_param</a>.<a class="code" href="structhash__param.html#a99a674ccdf3ec04a7d35689c0c9d90b2">ht_name</a> = <span class="stringliteral">&quot;Unconfirmed Client ID&quot;</span>;
<a name="l00481"></a>00481   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#aa8f22442faac5b2d27ef98b212c37595">cid_unconfirmed_hash_param</a>.<a class="code" href="structhash__param.html#a816b64cb969ff6c264a6c7d7c3b3135a">flags</a> = <a class="code" href="group__HTStructs.html#ga9328d32743f91cb2c22541ad45bf58bc">HT_FLAG_CACHE</a>;
<a name="l00482"></a>00482   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#aa8f22442faac5b2d27ef98b212c37595">cid_unconfirmed_hash_param</a>.<a class="code" href="structhash__param.html#a91c7547aac3b11d1b3ae82326c565036">ht_log_component</a> = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556ab8d6e09f337eb0d39e1c4a1df59b1a83">COMPONENT_CLIENTID</a>;
<a name="l00483"></a>00483 
<a name="l00484"></a>00484   <span class="comment">/*  Worker parameters : NFSv4 Confirmed Client id table */</span>
<a name="l00485"></a>00485   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a4b881e9bdf331efda653a867ae0b1550">cid_confirmed_hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a> = <a class="code" href="nfs__core_8h.html#a021ecd4666beb72c63659eb397bd733b">PRIME_CLIENT_ID</a>;
<a name="l00486"></a>00486   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a4b881e9bdf331efda653a867ae0b1550">cid_confirmed_hash_param</a>.<a class="code" href="structhash__param.html#af2b84e6a1d8462616014f5fc691e2611">alphabet_length</a> = 10; <span class="comment">/* ipaddr is a numerical decimal value */</span>
<a name="l00487"></a>00487   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a4b881e9bdf331efda653a867ae0b1550">cid_confirmed_hash_param</a>.<a class="code" href="structhash__param.html#a3bc93e003e144160ac0e0d24fbbc1251">hash_func_key</a> = <a class="code" href="sal__functions_8h.html#aedecced6f057835f00eff526f9ba2988">client_id_value_hash_func</a>;
<a name="l00488"></a>00488   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a4b881e9bdf331efda653a867ae0b1550">cid_confirmed_hash_param</a>.<a class="code" href="structhash__param.html#a57ac012ef40704e34a53c6ee747ce332">hash_func_rbt</a> = <a class="code" href="sal__functions_8h.html#aa81612a6caaedb1375a2ea0d488075a7">client_id_rbt_hash_func</a>;
<a name="l00489"></a>00489   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a4b881e9bdf331efda653a867ae0b1550">cid_confirmed_hash_param</a>.<a class="code" href="structhash__param.html#a5edce657cbb0f0a9a0ef910004845b4b">hash_func_both</a> = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ;
<a name="l00490"></a>00490   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a4b881e9bdf331efda653a867ae0b1550">cid_confirmed_hash_param</a>.<a class="code" href="structhash__param.html#ad13b112debfd42b51a5f6a0f58c1e488">compare_key</a> = <a class="code" href="sal__functions_8h.html#a7657ba09a1d31d97724207f0e2df9367">compare_client_id</a>;
<a name="l00491"></a>00491   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a4b881e9bdf331efda653a867ae0b1550">cid_confirmed_hash_param</a>.<a class="code" href="structhash__param.html#aa3f1857a0bda0200e6972276014b80dd">key_to_str</a> = <a class="code" href="sal__functions_8h.html#a27aedff39477daaaeec0a06229fcd43d">display_client_id_key</a>;
<a name="l00492"></a>00492   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a4b881e9bdf331efda653a867ae0b1550">cid_confirmed_hash_param</a>.<a class="code" href="structhash__param.html#a0b302235f8efa8e84cfb012638a49c70">val_to_str</a> = <a class="code" href="sal__functions_8h.html#a80dae4a1dff1cd9f09a6c819234fc847">display_client_id_val</a>;
<a name="l00493"></a>00493   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a4b881e9bdf331efda653a867ae0b1550">cid_confirmed_hash_param</a>.<a class="code" href="structhash__param.html#a99a674ccdf3ec04a7d35689c0c9d90b2">ht_name</a> = <span class="stringliteral">&quot;Confirmed Client ID&quot;</span>;
<a name="l00494"></a>00494   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a4b881e9bdf331efda653a867ae0b1550">cid_confirmed_hash_param</a>.<a class="code" href="structhash__param.html#a816b64cb969ff6c264a6c7d7c3b3135a">flags</a> = <a class="code" href="group__HTStructs.html#ga9328d32743f91cb2c22541ad45bf58bc">HT_FLAG_CACHE</a>;
<a name="l00495"></a>00495   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a4b881e9bdf331efda653a867ae0b1550">cid_confirmed_hash_param</a>.<a class="code" href="structhash__param.html#a91c7547aac3b11d1b3ae82326c565036">ht_log_component</a> = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556ab8d6e09f337eb0d39e1c4a1df59b1a83">COMPONENT_CLIENTID</a>;
<a name="l00496"></a>00496 
<a name="l00497"></a>00497   <span class="comment">/*  Worker parameters : NFSv4 Client Record table */</span>
<a name="l00498"></a>00498   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a7fba98fd0941b6f6f7dff605d9af372e">cr_hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a> = <a class="code" href="nfs__core_8h.html#a021ecd4666beb72c63659eb397bd733b">PRIME_CLIENT_ID</a>;
<a name="l00499"></a>00499   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a7fba98fd0941b6f6f7dff605d9af372e">cr_hash_param</a>.<a class="code" href="structhash__param.html#af2b84e6a1d8462616014f5fc691e2611">alphabet_length</a> = 10; <span class="comment">/* ipaddr is a numerical decimal value */</span>
<a name="l00500"></a>00500   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a7fba98fd0941b6f6f7dff605d9af372e">cr_hash_param</a>.<a class="code" href="structhash__param.html#a3bc93e003e144160ac0e0d24fbbc1251">hash_func_key</a> = <a class="code" href="sal__functions_8h.html#a49383d9c419a6da7b07c09b45f4aaba1">client_record_value_hash_func</a>;
<a name="l00501"></a>00501   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a7fba98fd0941b6f6f7dff605d9af372e">cr_hash_param</a>.<a class="code" href="structhash__param.html#a57ac012ef40704e34a53c6ee747ce332">hash_func_rbt</a> = <a class="code" href="sal__functions_8h.html#a9377206a23c00d16ce1af91445112876">client_record_rbt_hash_func</a>;
<a name="l00502"></a>00502   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a7fba98fd0941b6f6f7dff605d9af372e">cr_hash_param</a>.<a class="code" href="structhash__param.html#a5edce657cbb0f0a9a0ef910004845b4b">hash_func_both</a> = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ;
<a name="l00503"></a>00503   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a7fba98fd0941b6f6f7dff605d9af372e">cr_hash_param</a>.<a class="code" href="structhash__param.html#ad13b112debfd42b51a5f6a0f58c1e488">compare_key</a> = <a class="code" href="sal__functions_8h.html#a1b94a52c61e912071599305646a1eaf5">compare_client_record</a>;
<a name="l00504"></a>00504   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a7fba98fd0941b6f6f7dff605d9af372e">cr_hash_param</a>.<a class="code" href="structhash__param.html#aa3f1857a0bda0200e6972276014b80dd">key_to_str</a> = <a class="code" href="sal__functions_8h.html#ae541fccbc99585f89d94280f25a2977a">display_client_record_key</a>;
<a name="l00505"></a>00505   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a7fba98fd0941b6f6f7dff605d9af372e">cr_hash_param</a>.<a class="code" href="structhash__param.html#a0b302235f8efa8e84cfb012638a49c70">val_to_str</a> = <a class="code" href="sal__functions_8h.html#a5786f008653b8d78f30cf9e4811b6e85">display_client_record_val</a>;
<a name="l00506"></a>00506   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a7fba98fd0941b6f6f7dff605d9af372e">cr_hash_param</a>.<a class="code" href="structhash__param.html#a99a674ccdf3ec04a7d35689c0c9d90b2">ht_name</a> = <span class="stringliteral">&quot;Client Record&quot;</span>;
<a name="l00507"></a>00507   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a7fba98fd0941b6f6f7dff605d9af372e">cr_hash_param</a>.<a class="code" href="structhash__param.html#a816b64cb969ff6c264a6c7d7c3b3135a">flags</a> = <a class="code" href="group__HTStructs.html#ga9328d32743f91cb2c22541ad45bf58bc">HT_FLAG_CACHE</a>;
<a name="l00508"></a>00508   nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a7fba98fd0941b6f6f7dff605d9af372e">cr_hash_param</a>.<a class="code" href="structhash__param.html#a91c7547aac3b11d1b3ae82326c565036">ht_log_component</a> = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556ab8d6e09f337eb0d39e1c4a1df59b1a83">COMPONENT_CLIENTID</a>;
<a name="l00509"></a>00509 
<a name="l00510"></a>00510   <span class="comment">/* NFSv4 State Id hash */</span>
<a name="l00511"></a>00511   nfs_param.<a class="code" href="structnfs__param____.html#a4c7b54bb08eca0018b3461e35fb6cb21">state_id_param</a>.<a class="code" href="structnfs__state__id__param____.html#a78cba30291662d8b189c79e4288b41ae">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a> = <a class="code" href="nfs__core_8h.html#a3aeb08d6ef48142065f17cfadaee5d78">PRIME_STATE_ID</a>;
<a name="l00512"></a>00512   <span class="comment">/* ipaddr is a numerical decimal value */</span>
<a name="l00513"></a>00513   nfs_param.<a class="code" href="structnfs__param____.html#a4c7b54bb08eca0018b3461e35fb6cb21">state_id_param</a>.<a class="code" href="structnfs__state__id__param____.html#a78cba30291662d8b189c79e4288b41ae">hash_param</a>.<a class="code" href="structhash__param.html#af2b84e6a1d8462616014f5fc691e2611">alphabet_length</a> = 10;
<a name="l00514"></a>00514   nfs_param.<a class="code" href="structnfs__param____.html#a4c7b54bb08eca0018b3461e35fb6cb21">state_id_param</a>.<a class="code" href="structnfs__state__id__param____.html#a78cba30291662d8b189c79e4288b41ae">hash_param</a>.<a class="code" href="structhash__param.html#a3bc93e003e144160ac0e0d24fbbc1251">hash_func_key</a> = <a class="code" href="sal__functions_8h.html#a599399b735de0c20bba366c396aea9b2">state_id_value_hash_func</a>;
<a name="l00515"></a>00515   nfs_param.<a class="code" href="structnfs__param____.html#a4c7b54bb08eca0018b3461e35fb6cb21">state_id_param</a>.<a class="code" href="structnfs__state__id__param____.html#a78cba30291662d8b189c79e4288b41ae">hash_param</a>.<a class="code" href="structhash__param.html#a57ac012ef40704e34a53c6ee747ce332">hash_func_rbt</a> = <a class="code" href="sal__functions_8h.html#a07bfadb1bf5851eb55dfc23d40bd38c9">state_id_rbt_hash_func</a>;
<a name="l00516"></a>00516   nfs_param.<a class="code" href="structnfs__param____.html#a4c7b54bb08eca0018b3461e35fb6cb21">state_id_param</a>.<a class="code" href="structnfs__state__id__param____.html#a78cba30291662d8b189c79e4288b41ae">hash_param</a>.<a class="code" href="structhash__param.html#a5edce657cbb0f0a9a0ef910004845b4b">hash_func_both</a> = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00517"></a>00517   nfs_param.<a class="code" href="structnfs__param____.html#a4c7b54bb08eca0018b3461e35fb6cb21">state_id_param</a>.<a class="code" href="structnfs__state__id__param____.html#a78cba30291662d8b189c79e4288b41ae">hash_param</a>.<a class="code" href="structhash__param.html#ad13b112debfd42b51a5f6a0f58c1e488">compare_key</a> = <a class="code" href="nfs__core_8h.html#abca91b3bb257b2f90a96190b8f0967cd">compare_state_id</a>;
<a name="l00518"></a>00518   nfs_param.<a class="code" href="structnfs__param____.html#a4c7b54bb08eca0018b3461e35fb6cb21">state_id_param</a>.<a class="code" href="structnfs__state__id__param____.html#a78cba30291662d8b189c79e4288b41ae">hash_param</a>.<a class="code" href="structhash__param.html#aa3f1857a0bda0200e6972276014b80dd">key_to_str</a> = <a class="code" href="sal__functions_8h.html#aede91a30e87139d02462eb965727e9bd">display_state_id_key</a>;
<a name="l00519"></a>00519   nfs_param.<a class="code" href="structnfs__param____.html#a4c7b54bb08eca0018b3461e35fb6cb21">state_id_param</a>.<a class="code" href="structnfs__state__id__param____.html#a78cba30291662d8b189c79e4288b41ae">hash_param</a>.<a class="code" href="structhash__param.html#a0b302235f8efa8e84cfb012638a49c70">val_to_str</a> = <a class="code" href="sal__functions_8h.html#a67522f355bc2d19e97f29c32075b1801">display_state_id_val</a>;
<a name="l00520"></a>00520   nfs_param.<a class="code" href="structnfs__param____.html#a4c7b54bb08eca0018b3461e35fb6cb21">state_id_param</a>.<a class="code" href="structnfs__state__id__param____.html#a78cba30291662d8b189c79e4288b41ae">hash_param</a>.<a class="code" href="structhash__param.html#a99a674ccdf3ec04a7d35689c0c9d90b2">ht_name</a> = <span class="stringliteral">&quot;State ID&quot;</span>;
<a name="l00521"></a>00521   nfs_param.<a class="code" href="structnfs__param____.html#a4c7b54bb08eca0018b3461e35fb6cb21">state_id_param</a>.<a class="code" href="structnfs__state__id__param____.html#a78cba30291662d8b189c79e4288b41ae">hash_param</a>.<a class="code" href="structhash__param.html#a816b64cb969ff6c264a6c7d7c3b3135a">flags</a> = <a class="code" href="group__HTStructs.html#ga9328d32743f91cb2c22541ad45bf58bc">HT_FLAG_CACHE</a>;
<a name="l00522"></a>00522   nfs_param.<a class="code" href="structnfs__param____.html#a4c7b54bb08eca0018b3461e35fb6cb21">state_id_param</a>.<a class="code" href="structnfs__state__id__param____.html#a78cba30291662d8b189c79e4288b41ae">hash_param</a>.<a class="code" href="structhash__param.html#a91c7547aac3b11d1b3ae82326c565036">ht_log_component</a> = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a10a2ef3a74e9065c1cfd6e7b61e247b9">COMPONENT_STATE</a>;
<a name="l00523"></a>00523 
<a name="l00524"></a>00524 <span class="preprocessor">#ifdef _USE_NFS4_1</span>
<a name="l00525"></a>00525 <span class="preprocessor"></span>  <span class="comment">/* NFSv4 Session Id hash */</span>
<a name="l00526"></a>00526   nfs_param.session_id_param.hash_param.index_size = <a class="code" href="nfs__core_8h.html#a3aeb08d6ef48142065f17cfadaee5d78">PRIME_STATE_ID</a>;
<a name="l00527"></a>00527   <span class="comment">/* ipaddr is a numerical decimal value */</span>
<a name="l00528"></a>00528   nfs_param.session_id_param.hash_param.alphabet_length = 10;
<a name="l00529"></a>00529   nfs_param.session_id_param.hash_param.hash_func_key
<a name="l00530"></a>00530        = <a class="code" href="nfs41__session__id_8c.html#a47c9c0850eaf879fd925d099913116d3">session_id_value_hash_func</a>;
<a name="l00531"></a>00531   nfs_param.session_id_param.hash_param.hash_func_rbt
<a name="l00532"></a>00532        = <a class="code" href="nfs41__session__id_8c.html#a464ea08d1e49c7eef542307ca657fb8e">session_id_rbt_hash_func</a>;
<a name="l00533"></a>00533   nfs_param.session_id_param.hash_param.compare_key = <a class="code" href="nfs41__session__id_8c.html#a313737cc506385fb4527f82ce46719b4">compare_session_id</a>;
<a name="l00534"></a>00534   nfs_param.session_id_param.hash_param.key_to_str = <a class="code" href="nfs41__session__id_8c.html#a25656f33f13a212c2f7eed26d5dee793">display_session_id_key</a>;
<a name="l00535"></a>00535   nfs_param.session_id_param.hash_param.val_to_str = <a class="code" href="nfs41__session__id_8c.html#a65452abd1757d17a0cf198b8eb9d4fa8">display_session_id_val</a>;
<a name="l00536"></a>00536   nfs_param.session_id_param.hash_param.ht_name = <span class="stringliteral">&quot;Session ID&quot;</span>;
<a name="l00537"></a>00537   nfs_param.session_id_param.hash_param.flags = <a class="code" href="group__HTStructs.html#ga9328d32743f91cb2c22541ad45bf58bc">HT_FLAG_CACHE</a>;
<a name="l00538"></a>00538   nfs_param.session_id_param.hash_param.ht_log_component = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a1618722c531bc6257e055cfd2196e33f">COMPONENT_SESSIONS</a>;
<a name="l00539"></a>00539 
<a name="l00540"></a>00540 <span class="preprocessor">#endif                          </span><span class="comment">/* _USE_NFS4_1 */</span>
<a name="l00541"></a>00541 
<a name="l00542"></a>00542   <span class="comment">/* NFSv4 Open Owner hash */</span>
<a name="l00543"></a>00543   nfs_param.<a class="code" href="structnfs__param____.html#acda4eb9229233ac78ac2501e5e63443c">nfs4_owner_param</a>.<a class="code" href="structnfs4__owner__parameter__t.html#a76273dfb0db0af1be844b6d2447c6dd5">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a> = <a class="code" href="nfs__core_8h.html#a3aeb08d6ef48142065f17cfadaee5d78">PRIME_STATE_ID</a>;
<a name="l00544"></a>00544   nfs_param.<a class="code" href="structnfs__param____.html#acda4eb9229233ac78ac2501e5e63443c">nfs4_owner_param</a>.<a class="code" href="structnfs4__owner__parameter__t.html#a76273dfb0db0af1be844b6d2447c6dd5">hash_param</a>.<a class="code" href="structhash__param.html#af2b84e6a1d8462616014f5fc691e2611">alphabet_length</a> = 10;        <span class="comment">/* ipaddr is a numerical decimal value */</span>
<a name="l00545"></a>00545   nfs_param.<a class="code" href="structnfs__param____.html#acda4eb9229233ac78ac2501e5e63443c">nfs4_owner_param</a>.<a class="code" href="structnfs4__owner__parameter__t.html#a76273dfb0db0af1be844b6d2447c6dd5">hash_param</a>.<a class="code" href="structhash__param.html#a3bc93e003e144160ac0e0d24fbbc1251">hash_func_key</a> = <a class="code" href="sal__functions_8h.html#aac8c782f076d86b10fc9b7146dd686b0">nfs4_owner_value_hash_func</a>;
<a name="l00546"></a>00546   nfs_param.<a class="code" href="structnfs__param____.html#acda4eb9229233ac78ac2501e5e63443c">nfs4_owner_param</a>.<a class="code" href="structnfs4__owner__parameter__t.html#a76273dfb0db0af1be844b6d2447c6dd5">hash_param</a>.<a class="code" href="structhash__param.html#a57ac012ef40704e34a53c6ee747ce332">hash_func_rbt</a> = <a class="code" href="sal__functions_8h.html#a1f24e7dbb06f29a5a50c197634b10fb7">nfs4_owner_rbt_hash_func</a>;
<a name="l00547"></a>00547   nfs_param.<a class="code" href="structnfs__param____.html#acda4eb9229233ac78ac2501e5e63443c">nfs4_owner_param</a>.<a class="code" href="structnfs4__owner__parameter__t.html#a76273dfb0db0af1be844b6d2447c6dd5">hash_param</a>.<a class="code" href="structhash__param.html#ad13b112debfd42b51a5f6a0f58c1e488">compare_key</a> = <a class="code" href="sal__functions_8h.html#ad8879f1bb30f05566b58fca4a1ad5f29">compare_nfs4_owner_key</a>;
<a name="l00548"></a>00548   nfs_param.<a class="code" href="structnfs__param____.html#acda4eb9229233ac78ac2501e5e63443c">nfs4_owner_param</a>.<a class="code" href="structnfs4__owner__parameter__t.html#a76273dfb0db0af1be844b6d2447c6dd5">hash_param</a>.<a class="code" href="structhash__param.html#aa3f1857a0bda0200e6972276014b80dd">key_to_str</a> = <a class="code" href="sal__functions_8h.html#a07e1e228ca0f2a77eee69d4e285737ec">display_nfs4_owner_key</a>;
<a name="l00549"></a>00549   nfs_param.<a class="code" href="structnfs__param____.html#acda4eb9229233ac78ac2501e5e63443c">nfs4_owner_param</a>.<a class="code" href="structnfs4__owner__parameter__t.html#a76273dfb0db0af1be844b6d2447c6dd5">hash_param</a>.<a class="code" href="structhash__param.html#a0b302235f8efa8e84cfb012638a49c70">val_to_str</a> = <a class="code" href="sal__functions_8h.html#afeb9bad7f826680be13db86572f6b3f4">display_nfs4_owner_val</a>;
<a name="l00550"></a>00550   nfs_param.<a class="code" href="structnfs__param____.html#acda4eb9229233ac78ac2501e5e63443c">nfs4_owner_param</a>.<a class="code" href="structnfs4__owner__parameter__t.html#a76273dfb0db0af1be844b6d2447c6dd5">hash_param</a>.<a class="code" href="structhash__param.html#a99a674ccdf3ec04a7d35689c0c9d90b2">ht_name</a> = <span class="stringliteral">&quot;NFS4 Owner&quot;</span>;
<a name="l00551"></a>00551   nfs_param.<a class="code" href="structnfs__param____.html#acda4eb9229233ac78ac2501e5e63443c">nfs4_owner_param</a>.<a class="code" href="structnfs4__owner__parameter__t.html#a76273dfb0db0af1be844b6d2447c6dd5">hash_param</a>.<a class="code" href="structhash__param.html#a816b64cb969ff6c264a6c7d7c3b3135a">flags</a> = <a class="code" href="group__HTStructs.html#ga9328d32743f91cb2c22541ad45bf58bc">HT_FLAG_CACHE</a>;
<a name="l00552"></a>00552   nfs_param.<a class="code" href="structnfs__param____.html#acda4eb9229233ac78ac2501e5e63443c">nfs4_owner_param</a>.<a class="code" href="structnfs4__owner__parameter__t.html#a76273dfb0db0af1be844b6d2447c6dd5">hash_param</a>.<a class="code" href="structhash__param.html#a91c7547aac3b11d1b3ae82326c565036">ht_log_component</a> = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a10a2ef3a74e9065c1cfd6e7b61e247b9">COMPONENT_STATE</a>;
<a name="l00553"></a>00553 
<a name="l00554"></a>00554 <span class="preprocessor">#ifdef _USE_NLM</span>
<a name="l00555"></a>00555 <span class="preprocessor"></span>  <span class="comment">/* NSM Client hash */</span>
<a name="l00556"></a>00556   nfs_param.nsm_client_hash_param.index_size = <a class="code" href="nfs__core_8h.html#a3aeb08d6ef48142065f17cfadaee5d78">PRIME_STATE_ID</a>;
<a name="l00557"></a>00557   nfs_param.nsm_client_hash_param.alphabet_length = 10;        <span class="comment">/* ipaddr is a numerical decimal value */</span>
<a name="l00558"></a>00558   nfs_param.nsm_client_hash_param.hash_func_key = <a class="code" href="nlm__owner_8c.html#a980eea9de7166c26d9e2488692009c48">nsm_client_value_hash_func</a>;
<a name="l00559"></a>00559   nfs_param.nsm_client_hash_param.hash_func_rbt = <a class="code" href="nlm__owner_8c.html#ad5110f2ee8fba54cf72b03e4645e9e10">nsm_client_rbt_hash_func</a>;
<a name="l00560"></a>00560   nfs_param.nsm_client_hash_param.compare_key = <a class="code" href="nlm__owner_8c.html#adf867214ef2f168feb37b95d12a5d4e3">compare_nsm_client_key</a>;
<a name="l00561"></a>00561   nfs_param.nsm_client_hash_param.key_to_str = <a class="code" href="nlm__owner_8c.html#a017b1c7b7897ab72c30fc0a6663143c8">display_nsm_client_key</a>;
<a name="l00562"></a>00562   nfs_param.nsm_client_hash_param.val_to_str = <a class="code" href="nlm__owner_8c.html#a8e1a89553820181a61fb6ddb4db9b998">display_nsm_client_val</a>;
<a name="l00563"></a>00563   nfs_param.nsm_client_hash_param.ht_name = <span class="stringliteral">&quot;NSM Client&quot;</span>;
<a name="l00564"></a>00564   nfs_param.nsm_client_hash_param.flags = <a class="code" href="group__HTStructs.html#ga434fc2c1badcbf5fd2b5a52c061d3364">HT_FLAG_NONE</a>;
<a name="l00565"></a>00565   nfs_param.nsm_client_hash_param.ht_log_component = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a10a2ef3a74e9065c1cfd6e7b61e247b9">COMPONENT_STATE</a>;
<a name="l00566"></a>00566 
<a name="l00567"></a>00567   <span class="comment">/* NLM Client hash */</span>
<a name="l00568"></a>00568   nfs_param.nlm_client_hash_param.index_size = <a class="code" href="nfs__core_8h.html#a3aeb08d6ef48142065f17cfadaee5d78">PRIME_STATE_ID</a>;
<a name="l00569"></a>00569   nfs_param.nlm_client_hash_param.alphabet_length = 10;        <span class="comment">/* ipaddr is a numerical decimal value */</span>
<a name="l00570"></a>00570   nfs_param.nlm_client_hash_param.hash_func_key = <a class="code" href="nlm__owner_8c.html#a3d2cd9b824dfc2f3b1da543b4dfa3a65">nlm_client_value_hash_func</a>;
<a name="l00571"></a>00571   nfs_param.nlm_client_hash_param.hash_func_rbt = <a class="code" href="nlm__owner_8c.html#a0d83559cbebcdbf26ad141ef2d08a587">nlm_client_rbt_hash_func</a>;
<a name="l00572"></a>00572   nfs_param.nlm_client_hash_param.compare_key = <a class="code" href="nlm__owner_8c.html#a72a0ecdef676397196badf4e921115b7">compare_nlm_client_key</a>;
<a name="l00573"></a>00573   nfs_param.nlm_client_hash_param.key_to_str = <a class="code" href="nlm__owner_8c.html#ada75d50124536e046cb4b9f0fe8de433">display_nlm_client_key</a>;
<a name="l00574"></a>00574   nfs_param.nlm_client_hash_param.val_to_str = <a class="code" href="nlm__owner_8c.html#a074906e4e6da35b1ee28eae2ea8d719c">display_nlm_client_val</a>;
<a name="l00575"></a>00575   nfs_param.nlm_client_hash_param.ht_name = <span class="stringliteral">&quot;NLM Client&quot;</span>;
<a name="l00576"></a>00576   nfs_param.nlm_client_hash_param.flags = <a class="code" href="group__HTStructs.html#ga434fc2c1badcbf5fd2b5a52c061d3364">HT_FLAG_NONE</a>;
<a name="l00577"></a>00577   nfs_param.nlm_client_hash_param.ht_log_component = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a10a2ef3a74e9065c1cfd6e7b61e247b9">COMPONENT_STATE</a>;
<a name="l00578"></a>00578 
<a name="l00579"></a>00579   <span class="comment">/* NLM Owner hash */</span>
<a name="l00580"></a>00580   nfs_param.nlm_owner_hash_param.index_size = <a class="code" href="nfs__core_8h.html#a3aeb08d6ef48142065f17cfadaee5d78">PRIME_STATE_ID</a>;
<a name="l00581"></a>00581   nfs_param.nlm_owner_hash_param.alphabet_length = 10;        <span class="comment">/* ipaddr is a numerical decimal value */</span>
<a name="l00582"></a>00582   nfs_param.nlm_owner_hash_param.hash_func_key = <a class="code" href="nlm__owner_8c.html#a76626aed79bb835246cd3f00d14006ab">nlm_owner_value_hash_func</a>;
<a name="l00583"></a>00583   nfs_param.nlm_owner_hash_param.hash_func_rbt = <a class="code" href="nlm__owner_8c.html#a3a5254ee84cb5404c3ba3aac0dfecae0">nlm_owner_rbt_hash_func</a>;
<a name="l00584"></a>00584   nfs_param.nlm_owner_hash_param.compare_key = <a class="code" href="nlm__owner_8c.html#a6aa80324707ff61cd8da4e8591176968">compare_nlm_owner_key</a>;
<a name="l00585"></a>00585   nfs_param.nlm_owner_hash_param.key_to_str = <a class="code" href="nlm__owner_8c.html#a64d189646db7bb7e0a455dcc477603fb">display_nlm_owner_key</a>;
<a name="l00586"></a>00586   nfs_param.nlm_owner_hash_param.val_to_str = <a class="code" href="nlm__owner_8c.html#a5a1be717b68a71d30cdf146e8bcdc5c6">display_nlm_owner_val</a>;
<a name="l00587"></a>00587   nfs_param.nlm_owner_hash_param.ht_name = <span class="stringliteral">&quot;NLM Owner&quot;</span>;
<a name="l00588"></a>00588   nfs_param.nlm_owner_hash_param.flags = <a class="code" href="group__HTStructs.html#ga434fc2c1badcbf5fd2b5a52c061d3364">HT_FLAG_NONE</a>;
<a name="l00589"></a>00589   nfs_param.nlm_owner_hash_param.ht_log_component = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a10a2ef3a74e9065c1cfd6e7b61e247b9">COMPONENT_STATE</a>;
<a name="l00590"></a>00590 <span class="preprocessor">#endif</span>
<a name="l00591"></a>00591 <span class="preprocessor"></span><span class="preprocessor">#ifdef _USE_9P</span>
<a name="l00592"></a>00592 <span class="preprocessor"></span>  <span class="comment">/* 9P Lock Owner hash */</span>
<a name="l00593"></a>00593   nfs_param._9p_owner_hash_param.index_size = <a class="code" href="nfs__core_8h.html#a3aeb08d6ef48142065f17cfadaee5d78">PRIME_STATE_ID</a>;
<a name="l00594"></a>00594   nfs_param._9p_owner_hash_param.alphabet_length = 10;        <span class="comment">/* ipaddr is a numerical decimal value */</span>
<a name="l00595"></a>00595   nfs_param._9p_owner_hash_param.hash_func_key = <a class="code" href="9p__owner_8c.html#a9d19ae7c2f311ac4591a8a35129620fe">_9p_owner_value_hash_func</a>;
<a name="l00596"></a>00596   nfs_param._9p_owner_hash_param.hash_func_rbt = <a class="code" href="9p__owner_8c.html#a6833d482e00760ba8e2f9d5c5a1539a7">_9p_owner_rbt_hash_func</a>;
<a name="l00597"></a>00597   nfs_param._9p_owner_hash_param.compare_key = <a class="code" href="9p__owner_8c.html#aa715478d97d98f90c25a2b1581d898ec">compare_9p_owner_key</a>;
<a name="l00598"></a>00598   nfs_param._9p_owner_hash_param.key_to_str = <a class="code" href="9p__owner_8c.html#a712138d9d9ef7aa76de8515a901c14f2">display_9p_owner_key</a>;
<a name="l00599"></a>00599   nfs_param._9p_owner_hash_param.val_to_str = <a class="code" href="9p__owner_8c.html#a1ee8fcf0b8ac778eb60ee904f2f960b4">display_9p_owner_val</a>;
<a name="l00600"></a>00600   nfs_param._9p_owner_hash_param.ht_name = <span class="stringliteral">&quot;9P Owner&quot;</span>;
<a name="l00601"></a>00601 <span class="preprocessor">#endif </span>
<a name="l00602"></a>00602 <span class="preprocessor"></span>
<a name="l00603"></a>00603   <span class="comment">/* Cache inode parameters : hash table */</span>
<a name="l00604"></a>00604   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a401ab6cf8bfa8250739c3ea5a4186510">hparam</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a> = <a class="code" href="nfs__core_8h.html#ae38f8301b1a3065be8ba6de5dce74eaa">PRIME_CACHE_INODE</a>;
<a name="l00605"></a>00605   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a401ab6cf8bfa8250739c3ea5a4186510">hparam</a>.<a class="code" href="structhash__param.html#af2b84e6a1d8462616014f5fc691e2611">alphabet_length</a> = 10;
<a name="l00606"></a>00606   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a401ab6cf8bfa8250739c3ea5a4186510">hparam</a>.<a class="code" href="structhash__param.html#a3bc93e003e144160ac0e0d24fbbc1251">hash_func_key</a> = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00607"></a>00607   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a401ab6cf8bfa8250739c3ea5a4186510">hparam</a>.<a class="code" href="structhash__param.html#a57ac012ef40704e34a53c6ee747ce332">hash_func_rbt</a> = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00608"></a>00608   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a401ab6cf8bfa8250739c3ea5a4186510">hparam</a>.<a class="code" href="structhash__param.html#a5edce657cbb0f0a9a0ef910004845b4b">hash_func_both</a> = <a class="code" href="cache__inode__fsal__hash_8c.html#a129ce28465554788ea4c0f3273373144">cache_inode_fsal_rbt_both</a>;
<a name="l00609"></a>00609   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a401ab6cf8bfa8250739c3ea5a4186510">hparam</a>.<a class="code" href="structhash__param.html#ad13b112debfd42b51a5f6a0f58c1e488">compare_key</a> = <a class="code" href="cache__inode__misc_8c.html#ab2ed61f21523805c300eae3d843ada57" title="Compares two keys used in cache inode.">cache_inode_compare_key_fsal</a>;
<a name="l00610"></a>00610   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a401ab6cf8bfa8250739c3ea5a4186510">hparam</a>.<a class="code" href="structhash__param.html#aa3f1857a0bda0200e6972276014b80dd">key_to_str</a> = <a class="code" href="nfs__tools_8h.html#a5eeaebff3f2862b2b16395d537bce1a1">display_cache</a>;
<a name="l00611"></a>00611   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a401ab6cf8bfa8250739c3ea5a4186510">hparam</a>.<a class="code" href="structhash__param.html#a0b302235f8efa8e84cfb012638a49c70">val_to_str</a> = <a class="code" href="nfs__tools_8h.html#a5eeaebff3f2862b2b16395d537bce1a1">display_cache</a>;
<a name="l00612"></a>00612   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a401ab6cf8bfa8250739c3ea5a4186510">hparam</a>.<a class="code" href="structhash__param.html#a99a674ccdf3ec04a7d35689c0c9d90b2">ht_name</a> = <span class="stringliteral">&quot;Cache Inode&quot;</span>;
<a name="l00613"></a>00613   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a401ab6cf8bfa8250739c3ea5a4186510">hparam</a>.<a class="code" href="structhash__param.html#a816b64cb969ff6c264a6c7d7c3b3135a">flags</a> = <a class="code" href="group__HTStructs.html#ga9328d32743f91cb2c22541ad45bf58bc">HT_FLAG_CACHE</a>;
<a name="l00614"></a>00614   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a401ab6cf8bfa8250739c3ea5a4186510">hparam</a>.<a class="code" href="structhash__param.html#a91c7547aac3b11d1b3ae82326c565036">ht_log_component</a> = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556ac33e4664c7c96ac209167e6809fb2ba3">COMPONENT_CACHE_INODE</a>;
<a name="l00615"></a>00615 
<a name="l00616"></a>00616 <span class="preprocessor">#ifdef _USE_NLM</span>
<a name="l00617"></a>00617 <span class="preprocessor"></span>  <span class="comment">/* Cache inode parameters : cookie hash table */</span>
<a name="l00618"></a>00618   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.cookie_param.index_size = <a class="code" href="nfs__core_8h.html#a3aeb08d6ef48142065f17cfadaee5d78">PRIME_STATE_ID</a>;
<a name="l00619"></a>00619   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.cookie_param.alphabet_length = 10;
<a name="l00620"></a>00620   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.cookie_param.hash_func_key = <a class="code" href="sal__functions_8h.html#aa6a0c164e1747ed1b9f0fda8abf95b14">lock_cookie_value_hash_func</a>;
<a name="l00621"></a>00621   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.cookie_param.hash_func_rbt = <a class="code" href="sal__functions_8h.html#a2efa0877e5656aa6a7feb36641e445f0">lock_cookie_rbt_hash_func</a> ;
<a name="l00622"></a>00622   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.cookie_param.compare_key = <a class="code" href="sal__functions_8h.html#afcffaa0282205d9adda3dc3b08146d96">compare_lock_cookie_key</a>;
<a name="l00623"></a>00623   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.cookie_param.key_to_str = <a class="code" href="sal__functions_8h.html#af55a980d426ac2729a2ec5e558302d84">display_lock_cookie_key</a>;
<a name="l00624"></a>00624   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.cookie_param.val_to_str = <a class="code" href="sal__functions_8h.html#a95b660b8fdd2bca936cb887ea11cae0c">display_lock_cookie_val</a>;
<a name="l00625"></a>00625   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.cookie_param.ht_name = <span class="stringliteral">&quot;Lock Cookie&quot;</span>;
<a name="l00626"></a>00626   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.cookie_param.flags = <a class="code" href="group__HTStructs.html#ga434fc2c1badcbf5fd2b5a52c061d3364">HT_FLAG_NONE</a>;
<a name="l00627"></a>00627   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.cookie_param.ht_log_component = <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a10a2ef3a74e9065c1cfd6e7b61e247b9">COMPONENT_STATE</a>;
<a name="l00628"></a>00628 <span class="preprocessor">#endif</span>
<a name="l00629"></a>00629 <span class="preprocessor"></span>
<a name="l00630"></a>00630   <span class="comment">/* Cache inode parameters: Garbage collection policy */</span>
<a name="l00631"></a>00631   <a class="code" href="cache__inode__misc_8c.html#a10f3ba7df98a25f4b9a73e7cf1a0f33a">cache_inode_gc_policy</a>.<a class="code" href="structcache__inode__gc__policy____.html#a5cc5157724280cd8833ea884a26c6bea">entries_hwmark</a> = 100000;
<a name="l00632"></a>00632   <a class="code" href="cache__inode__misc_8c.html#a10f3ba7df98a25f4b9a73e7cf1a0f33a">cache_inode_gc_policy</a>.<a class="code" href="structcache__inode__gc__policy____.html#a83fa75fe98eaec3ecc15dbd98063fe76">entries_lwmark</a> = 50000;
<a name="l00633"></a>00633   <a class="code" href="cache__inode__misc_8c.html#a10f3ba7df98a25f4b9a73e7cf1a0f33a">cache_inode_gc_policy</a>.<a class="code" href="structcache__inode__gc__policy____.html#ad3477ee19d6386e6c3dc4e43df7219b9">use_fd_cache</a> = <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00634"></a>00634   <a class="code" href="cache__inode__misc_8c.html#a10f3ba7df98a25f4b9a73e7cf1a0f33a">cache_inode_gc_policy</a>.<a class="code" href="structcache__inode__gc__policy____.html#a2a29592981f4fa8f91e930b918ad1aea">lru_run_interval</a> = 600;
<a name="l00635"></a>00635   <a class="code" href="cache__inode__misc_8c.html#a10f3ba7df98a25f4b9a73e7cf1a0f33a">cache_inode_gc_policy</a>.<a class="code" href="structcache__inode__gc__policy____.html#a1f6c5b843f979247ceeb0f51382c4926">fd_limit_percent</a> = 99;
<a name="l00636"></a>00636   <a class="code" href="cache__inode__misc_8c.html#a10f3ba7df98a25f4b9a73e7cf1a0f33a">cache_inode_gc_policy</a>.<a class="code" href="structcache__inode__gc__policy____.html#a413dee58253e3de214dc3b07bab05a62">fd_hwmark_percent</a> = 90;
<a name="l00637"></a>00637   <a class="code" href="cache__inode__misc_8c.html#a10f3ba7df98a25f4b9a73e7cf1a0f33a">cache_inode_gc_policy</a>.<a class="code" href="structcache__inode__gc__policy____.html#ab522b01a60514fef773b677b3d437792">fd_lwmark_percent</a> = 50;
<a name="l00638"></a>00638   <a class="code" href="cache__inode__misc_8c.html#a10f3ba7df98a25f4b9a73e7cf1a0f33a">cache_inode_gc_policy</a>.<a class="code" href="structcache__inode__gc__policy____.html#a29f7027f967666760a1322bfe01b7642">reaper_work</a> = 1000;
<a name="l00639"></a>00639   <a class="code" href="cache__inode__misc_8c.html#a10f3ba7df98a25f4b9a73e7cf1a0f33a">cache_inode_gc_policy</a>.<a class="code" href="structcache__inode__gc__policy____.html#a220c239fb22728fd096d12b7463bfedd">biggest_window</a> = 40;
<a name="l00640"></a>00640   <a class="code" href="cache__inode__misc_8c.html#a10f3ba7df98a25f4b9a73e7cf1a0f33a">cache_inode_gc_policy</a>.<a class="code" href="structcache__inode__gc__policy____.html#ae1c66d9148f63bea52768bf57365e757">required_progress</a> = 5;
<a name="l00641"></a>00641   <a class="code" href="cache__inode__misc_8c.html#a10f3ba7df98a25f4b9a73e7cf1a0f33a">cache_inode_gc_policy</a>.<a class="code" href="structcache__inode__gc__policy____.html#a15b177539b5cc6cbb9a6364dd7bfd9bf">futility_count</a> = 8;
<a name="l00642"></a>00642 
<a name="l00643"></a>00643   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a47bb0de2260144595a49fad6d5e1ca9d">grace_period_attr</a>   = 0;
<a name="l00644"></a>00644   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#af97fd9d642058b8fdb67f0c68ae07e1f">grace_period_link</a>   = 0;
<a name="l00645"></a>00645   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a0ebe5eefd0887d01be30247e7fdf4d8c">grace_period_dirent</a> = 0;
<a name="l00646"></a>00646   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a2d93b4433efdf9e3a782d9481eb949f7">expire_type_attr</a>    = <a class="code" href="cache__inode_8h.html#a75887b45d4dd2cc0a278d49b203f4344ade60f0a5145d3c0ef683486dd8fc14c6">CACHE_INODE_EXPIRE_NEVER</a>;
<a name="l00647"></a>00647   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a56b2d8568a41948e4de98540ca71987c">expire_type_link</a>    = <a class="code" href="cache__inode_8h.html#a75887b45d4dd2cc0a278d49b203f4344ade60f0a5145d3c0ef683486dd8fc14c6">CACHE_INODE_EXPIRE_NEVER</a>;
<a name="l00648"></a>00648   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a36fadbe3b0a8e32c86df8b76a1a0a84f">expire_type_dirent</a>  = <a class="code" href="cache__inode_8h.html#a75887b45d4dd2cc0a278d49b203f4344ade60f0a5145d3c0ef683486dd8fc14c6">CACHE_INODE_EXPIRE_NEVER</a>;
<a name="l00649"></a>00649   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a802c4e84e8611eb415a9534390e4e20a">use_test_access</a> = 1;
<a name="l00650"></a>00650   <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#ad9df5fb133365d177a89498045bba55a">getattr_dir_invalidation</a> = 0;
<a name="l00651"></a>00651 <span class="preprocessor">#ifdef _USE_NFS4_ACL</span>
<a name="l00652"></a>00652 <span class="preprocessor"></span>  <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a36e131762d50c490e179e9d63cae7da8">attrmask</a> = <a class="code" href="nfs__core_8h.html#a5df73234d1c177a16c69ac466a3224f9">FSAL_ATTR_MASK_V4</a>;
<a name="l00653"></a>00653 <span class="preprocessor">#else</span>
<a name="l00654"></a>00654 <span class="preprocessor"></span>  <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a36e131762d50c490e179e9d63cae7da8">attrmask</a> = <a class="code" href="nfs__core_8h.html#a5856bc9cebf6472520f140595b321cde">FSAL_ATTR_MASK_V2_V3</a>;
<a name="l00655"></a>00655 <span class="preprocessor">#endif</span>
<a name="l00656"></a>00656 <span class="preprocessor"></span>  <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a81994b0d1f982c7b76b07fec86dbbcf0">use_fsal_hash</a> = 1;
<a name="l00657"></a>00657 
<a name="l00658"></a>00658   <span class="comment">/* FSAL parameters */</span>
<a name="l00659"></a>00659   nfs_param.<a class="code" href="structnfs__param____.html#a2683c5f1f6bc47f4b2b4b85d7f68c6df">fsal_param</a>.<a class="code" href="structfsal__parameter____.html#aaad600635c6d22d253a970290bdb349d">fsal_info</a>.<a class="code" href="structfsal__init__info____.html#a1722b562b2a7470f122b0ed973730265">max_fs_calls</a> = 30;  <span class="comment">/* No semaphore to access the FSAL */</span>
<a name="l00660"></a>00660 
<a name="l00661"></a>00661   <a class="code" href="fsal__glue_8c.html#aa4c8e7706d68c7f776c02726c89dc8d0">FSAL_SetDefault_FSAL_parameter</a>(&amp;nfs_param.<a class="code" href="structnfs__param____.html#a2683c5f1f6bc47f4b2b4b85d7f68c6df">fsal_param</a>);
<a name="l00662"></a>00662   <a class="code" href="fsal__glue_8c.html#a7626d35bafe1d83233a23dac0309496a">FSAL_SetDefault_FS_common_parameter</a>(&amp;nfs_param.<a class="code" href="structnfs__param____.html#a2683c5f1f6bc47f4b2b4b85d7f68c6df">fsal_param</a>);
<a name="l00663"></a>00663   <a class="code" href="fsal__glue_8c.html#a2c9026a0246b7163c494edfaaed5e8b5">FSAL_SetDefault_FS_specific_parameter</a>(&amp;nfs_param.<a class="code" href="structnfs__param____.html#a2683c5f1f6bc47f4b2b4b85d7f68c6df">fsal_param</a>);
<a name="l00664"></a>00664 
<a name="l00665"></a>00665   nfs_param.<a class="code" href="structnfs__param____.html#ac8fc09bcd317cc133cd1f8b6b3478aa3">pexportlist</a> = <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00666"></a>00666 
<a name="l00667"></a>00667   <span class="comment">/* SNMP ADM parameters */</span>
<a name="l00668"></a>00668 <span class="preprocessor">#ifdef _SNMP_ADM_ACTIVE</span>
<a name="l00669"></a>00669 <span class="preprocessor"></span>  strcpy(nfs_param.<a class="code" href="structnfs__param____.html#a0fd689f762a6802f5129b441aa643b32">extern_param</a>.<a class="code" href="structexternal__tools__parameter____.html#ae93ce680d55175ee9b3522240643bf32">snmp_adm</a>.<a class="code" href="structsnmp__adm__parameter____.html#ac1a52d65f060c9671df5176e98f6d2c2">snmp_agentx_socket</a>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00670"></a>00670   nfs_param.<a class="code" href="structnfs__param____.html#a0fd689f762a6802f5129b441aa643b32">extern_param</a>.<a class="code" href="structexternal__tools__parameter____.html#ae93ce680d55175ee9b3522240643bf32">snmp_adm</a>.<a class="code" href="structsnmp__adm__parameter____.html#ab86bd47ce0d00d8c6e4ac82c6f1bae69">product_id</a> = 1;
<a name="l00671"></a>00671   strcpy(nfs_param.<a class="code" href="structnfs__param____.html#a0fd689f762a6802f5129b441aa643b32">extern_param</a>.<a class="code" href="structexternal__tools__parameter____.html#ae93ce680d55175ee9b3522240643bf32">snmp_adm</a>.<a class="code" href="structsnmp__adm__parameter____.html#a2cf863691599f4de6e5c77cf12b7bb49">snmp_log_file</a>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00672"></a>00672 
<a name="l00673"></a>00673   nfs_param.<a class="code" href="structnfs__param____.html#a0fd689f762a6802f5129b441aa643b32">extern_param</a>.<a class="code" href="structexternal__tools__parameter____.html#ae93ce680d55175ee9b3522240643bf32">snmp_adm</a>.<a class="code" href="structsnmp__adm__parameter____.html#a3bcec9a82c3b94fe0740e6ad625f38d0">export_cache_stats</a> = <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00674"></a>00674   nfs_param.<a class="code" href="structnfs__param____.html#a0fd689f762a6802f5129b441aa643b32">extern_param</a>.<a class="code" href="structexternal__tools__parameter____.html#ae93ce680d55175ee9b3522240643bf32">snmp_adm</a>.<a class="code" href="structsnmp__adm__parameter____.html#a691bc2098431fe10137a10c029ba1dd4">export_requests_stats</a> = <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00675"></a>00675   nfs_param.<a class="code" href="structnfs__param____.html#a0fd689f762a6802f5129b441aa643b32">extern_param</a>.<a class="code" href="structexternal__tools__parameter____.html#ae93ce680d55175ee9b3522240643bf32">snmp_adm</a>.<a class="code" href="structsnmp__adm__parameter____.html#a9e2796d48e43d88349600c684b3e6402">export_maps_stats</a> = <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00676"></a>00676   nfs_param.<a class="code" href="structnfs__param____.html#a0fd689f762a6802f5129b441aa643b32">extern_param</a>.<a class="code" href="structexternal__tools__parameter____.html#ae93ce680d55175ee9b3522240643bf32">snmp_adm</a>.<a class="code" href="structsnmp__adm__parameter____.html#a84fee830e7f2a586ee0343be8a299f27">export_nfs_calls_detail</a> = <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00677"></a>00677   nfs_param.<a class="code" href="structnfs__param____.html#a0fd689f762a6802f5129b441aa643b32">extern_param</a>.<a class="code" href="structexternal__tools__parameter____.html#ae93ce680d55175ee9b3522240643bf32">snmp_adm</a>.<a class="code" href="structsnmp__adm__parameter____.html#a5ffaf25f7498dbd4f827ca65059e88b6">export_fsal_calls_detail</a> = <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00678"></a>00678 <span class="preprocessor">#endif</span>
<a name="l00679"></a>00679 <span class="preprocessor"></span>}                               <span class="comment">/* nfs_set_param_default */</span>
<a name="l00680"></a>00680 
<a name="l00685"></a><a class="code" href="nfs__init_8h.html#ac96b57bb7cc5da71cae9c7441b14efb2">00685</a> <span class="keywordtype">int</span> <a class="code" href="nfs__init_8c.html#ac96b57bb7cc5da71cae9c7441b14efb2">nfs_set_param_from_conf</a>(<a class="code" href="struct____nfs__start__info.html">nfs_start_info_t</a> * p_start_info)
<a name="l00686"></a>00686 {
<a name="l00687"></a>00687   <a class="code" href="config__parsing_8h.html#adfea46b92009fb7b8d52287bd2aa1900">config_file_t</a> config_struct;
<a name="l00688"></a>00688   <span class="keywordtype">int</span> rc;
<a name="l00689"></a>00689   <a class="code" href="structfsal__status____.html">fsal_status_t</a> fsal_status;
<a name="l00690"></a>00690   <a class="code" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> cache_inode_status;
<a name="l00691"></a>00691 
<a name="l00692"></a>00692   <span class="comment">/* First, parse the configuration file */</span>
<a name="l00693"></a>00693 
<a name="l00694"></a>00694   config_struct = <a class="code" href="config__parsing_8c.html#a27122b19350d87c1c46d4c3630a80826">config_ParseFile</a>(<a class="code" href="nfs__core_8h.html#a0f1c0806dfc5944f5a3d98ac5a907974">config_path</a>);
<a name="l00695"></a>00695 
<a name="l00696"></a>00696   <span class="keywordflow">if</span>(!config_struct)
<a name="l00697"></a>00697     {
<a name="l00698"></a>00698       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Error while parsing %s: %s&quot;</span>,
<a name="l00699"></a>00699                <a class="code" href="nfs__core_8h.html#a0f1c0806dfc5944f5a3d98ac5a907974">config_path</a>, <a class="code" href="config__parsing_8c.html#aab9a6d7b5f77cb7b0da504e52ba61adf">config_GetErrorMsg</a>());
<a name="l00700"></a>00700     }
<a name="l00701"></a>00701 
<a name="l00702"></a>00702   <span class="comment">/* Core parameters */</span>
<a name="l00703"></a>00703   <span class="keywordflow">if</span>((rc = <a class="code" href="nfs__core_8h.html#aad656a5aaf2d9d31664ee728806ae2ca">nfs_read_core_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>)) &lt; 0)
<a name="l00704"></a>00704     {
<a name="l00705"></a>00705       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00706"></a>00706               <span class="stringliteral">&quot;Error while parsing core configuration&quot;</span>);
<a name="l00707"></a>00707       <span class="keywordflow">return</span> -1;
<a name="l00708"></a>00708     }
<a name="l00709"></a>00709   <span class="keywordflow">else</span>
<a name="l00710"></a>00710     {
<a name="l00711"></a>00711       <span class="comment">/* No such stanza in configuration file */</span>
<a name="l00712"></a>00712       <span class="keywordflow">if</span>(rc == 1)
<a name="l00713"></a>00713         <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00714"></a>00714              <span class="stringliteral">&quot;No core configuration found in config file, using default&quot;</span>);
<a name="l00715"></a>00715       <span class="keywordflow">else</span>
<a name="l00716"></a>00716         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00717"></a>00717                  <span class="stringliteral">&quot;core configuration read from config file&quot;</span>);
<a name="l00718"></a>00718     }
<a name="l00719"></a>00719 
<a name="l00720"></a>00720   <span class="comment">/* Load FSAL configuration from parsed file */</span>
<a name="l00721"></a>00721   fsal_status =
<a name="l00722"></a>00722       <a class="code" href="fsal__glue_8c.html#a38fe03c0aa0fa100e90f3c0f8698c95e">FSAL_load_FSAL_parameter_from_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#a2683c5f1f6bc47f4b2b4b85d7f68c6df">fsal_param</a>);
<a name="l00723"></a>00723   <span class="keywordflow">if</span>(<a class="code" href="fsal_8h.html#a7c2a97ec2fa552dea8e497c7dd8a2b86">FSAL_IS_ERROR</a>(fsal_status))
<a name="l00724"></a>00724     {
<a name="l00725"></a>00725       <span class="keywordflow">if</span>(fsal_status.<a class="code" href="structfsal__status____.html#ab12ffb4b1b65891a5dd5939fc7d543de">major</a> == <a class="code" href="err__fsal_8h.html#a5fca950e941463a0c2462761a96d20f2afad14ef4f3e93a70727fe0436f935e96">ERR_FSAL_NOENT</a>)
<a name="l00726"></a>00726         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00727"></a>00727                  <span class="stringliteral">&quot;No FSAL parameters found in config file, using default&quot;</span>);
<a name="l00728"></a>00728       <span class="keywordflow">else</span>
<a name="l00729"></a>00729         {
<a name="l00730"></a>00730           <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Error while parsing FSAL parameters&quot;</span>);
<a name="l00731"></a>00731           <a class="code" href="log_8h.html#a367b67f5a0b29160763c3ce8efce0875">LogError</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <a class="code" href="log_8h.html#ac670535b4e7acd1bcf284058dc7aa586">ERR_FSAL</a>, fsal_status.<a class="code" href="structfsal__status____.html#ab12ffb4b1b65891a5dd5939fc7d543de">major</a>, fsal_status.<a class="code" href="structfsal__status____.html#ac260418be3f1105f31b1663083903e83">minor</a>);
<a name="l00732"></a>00732           <span class="keywordflow">return</span> -1;
<a name="l00733"></a>00733         }
<a name="l00734"></a>00734     }
<a name="l00735"></a>00735   <span class="keywordflow">else</span>
<a name="l00736"></a>00736     <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00737"></a>00737              <span class="stringliteral">&quot;FSAL parameters read from config file&quot;</span>);
<a name="l00738"></a>00738 
<a name="l00739"></a>00739   <span class="comment">/* Load FSAL configuration from parsed file */</span>
<a name="l00740"></a>00740   fsal_status =
<a name="l00741"></a>00741       <a class="code" href="fsal__glue_8c.html#a5e93d174a899b934ed30e8bedb143655">FSAL_load_FS_common_parameter_from_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#a2683c5f1f6bc47f4b2b4b85d7f68c6df">fsal_param</a>);
<a name="l00742"></a>00742   <span class="keywordflow">if</span>(<a class="code" href="fsal_8h.html#a7c2a97ec2fa552dea8e497c7dd8a2b86">FSAL_IS_ERROR</a>(fsal_status))
<a name="l00743"></a>00743     {
<a name="l00744"></a>00744       <span class="keywordflow">if</span>(fsal_status.<a class="code" href="structfsal__status____.html#ab12ffb4b1b65891a5dd5939fc7d543de">major</a> == <a class="code" href="err__fsal_8h.html#a5fca950e941463a0c2462761a96d20f2afad14ef4f3e93a70727fe0436f935e96">ERR_FSAL_NOENT</a>)
<a name="l00745"></a>00745         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00746"></a>00746                  <span class="stringliteral">&quot;No FS common configuration found in config file, using default&quot;</span>);
<a name="l00747"></a>00747       <span class="keywordflow">else</span>
<a name="l00748"></a>00748         {
<a name="l00749"></a>00749           <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00750"></a>00750                   <span class="stringliteral">&quot;Error while parsing FS common configuration&quot;</span>);
<a name="l00751"></a>00751           <a class="code" href="log_8h.html#a367b67f5a0b29160763c3ce8efce0875">LogError</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <a class="code" href="log_8h.html#ac670535b4e7acd1bcf284058dc7aa586">ERR_FSAL</a>, fsal_status.<a class="code" href="structfsal__status____.html#ab12ffb4b1b65891a5dd5939fc7d543de">major</a>, fsal_status.<a class="code" href="structfsal__status____.html#ac260418be3f1105f31b1663083903e83">minor</a>);
<a name="l00752"></a>00752           <span class="keywordflow">return</span> -1;
<a name="l00753"></a>00753         }
<a name="l00754"></a>00754     }
<a name="l00755"></a>00755   <span class="keywordflow">else</span>
<a name="l00756"></a>00756     <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00757"></a>00757              <span class="stringliteral">&quot;FS comon configuration read from config file&quot;</span>);
<a name="l00758"></a>00758 
<a name="l00759"></a>00759   <span class="comment">/* Load FSAL configuration from parsed file */</span>
<a name="l00760"></a>00760   fsal_status =
<a name="l00761"></a>00761       <a class="code" href="fsal__glue_8c.html#abe783ef46edfd457473f20e3e5aa4073">FSAL_load_FS_specific_parameter_from_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#a2683c5f1f6bc47f4b2b4b85d7f68c6df">fsal_param</a>);
<a name="l00762"></a>00762   <span class="keywordflow">if</span>(<a class="code" href="fsal_8h.html#a7c2a97ec2fa552dea8e497c7dd8a2b86">FSAL_IS_ERROR</a>(fsal_status))
<a name="l00763"></a>00763     {
<a name="l00764"></a>00764       <span class="keywordflow">if</span>(fsal_status.<a class="code" href="structfsal__status____.html#ab12ffb4b1b65891a5dd5939fc7d543de">major</a> == <a class="code" href="err__fsal_8h.html#a5fca950e941463a0c2462761a96d20f2afad14ef4f3e93a70727fe0436f935e96">ERR_FSAL_NOENT</a>)
<a name="l00765"></a>00765         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00766"></a>00766                  <span class="stringliteral">&quot;No FS specific configuration found in config file, using default&quot;</span>);
<a name="l00767"></a>00767       <span class="keywordflow">else</span>
<a name="l00768"></a>00768         {
<a name="l00769"></a>00769           <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00770"></a>00770                   <span class="stringliteral">&quot;Error while parsing FS specific configuration&quot;</span>);
<a name="l00771"></a>00771           <a class="code" href="log_8h.html#a367b67f5a0b29160763c3ce8efce0875">LogError</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <a class="code" href="log_8h.html#ac670535b4e7acd1bcf284058dc7aa586">ERR_FSAL</a>, fsal_status.<a class="code" href="structfsal__status____.html#ab12ffb4b1b65891a5dd5939fc7d543de">major</a>, fsal_status.<a class="code" href="structfsal__status____.html#ac260418be3f1105f31b1663083903e83">minor</a>);
<a name="l00772"></a>00772           <span class="keywordflow">return</span> -1;
<a name="l00773"></a>00773         }
<a name="l00774"></a>00774     }
<a name="l00775"></a>00775   <span class="keywordflow">else</span>
<a name="l00776"></a>00776     <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00777"></a>00777              <span class="stringliteral">&quot;FS specific configuration read from config file&quot;</span>);
<a name="l00778"></a>00778 
<a name="l00779"></a>00779   <span class="comment">/* Workers parameters */</span>
<a name="l00780"></a>00780   <span class="keywordflow">if</span>((rc = <a class="code" href="nfs__core_8h.html#ab4d5f8858fb8254aae508daddac7c136">nfs_read_worker_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#adaf127ebcf4eea500e79011b862c6899">worker_param</a>)) &lt; 0)
<a name="l00781"></a>00781     {
<a name="l00782"></a>00782       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00783"></a>00783               <span class="stringliteral">&quot;Error while parsing workers configuration&quot;</span>);
<a name="l00784"></a>00784       <span class="keywordflow">return</span> -1;
<a name="l00785"></a>00785     }
<a name="l00786"></a>00786   <span class="keywordflow">else</span>
<a name="l00787"></a>00787     {
<a name="l00788"></a>00788       <span class="comment">/* No such stanza in configuration file */</span>
<a name="l00789"></a>00789       <span class="keywordflow">if</span>(rc == 1)
<a name="l00790"></a>00790         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00791"></a>00791                  <span class="stringliteral">&quot;No workers configuration found in config file, using default&quot;</span>);
<a name="l00792"></a>00792       <span class="keywordflow">else</span>
<a name="l00793"></a>00793         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00794"></a>00794                  <span class="stringliteral">&quot;workers configuration read from config file&quot;</span>);
<a name="l00795"></a>00795     }
<a name="l00796"></a>00796 
<a name="l00797"></a>00797   <span class="comment">/* Worker parameters : dupreq hash table */</span>
<a name="l00798"></a>00798   <span class="keywordflow">if</span>((rc = <a class="code" href="nfs__core_8h.html#a1aec323c55bf14734c686cab1b3c7b72">nfs_read_dupreq_hash_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#a2d21ff3785e77c12c78e362edf40d159">dupreq_param</a>)) &lt; 0)
<a name="l00799"></a>00799     {
<a name="l00800"></a>00800       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00801"></a>00801               <span class="stringliteral">&quot;Error while parsing duplicate request hash table configuration&quot;</span>);
<a name="l00802"></a>00802       <span class="keywordflow">return</span> -1;
<a name="l00803"></a>00803     }
<a name="l00804"></a>00804   <span class="keywordflow">else</span>
<a name="l00805"></a>00805     {
<a name="l00806"></a>00806       <span class="comment">/* No such stanza in configuration file */</span>
<a name="l00807"></a>00807       <span class="keywordflow">if</span>(rc == 1)
<a name="l00808"></a>00808         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00809"></a>00809                  <span class="stringliteral">&quot;No duplicate request hash table configuration found in config file, using default&quot;</span>);
<a name="l00810"></a>00810       <span class="keywordflow">else</span>
<a name="l00811"></a>00811         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00812"></a>00812                  <span class="stringliteral">&quot;duplicate request hash table configuration read from config file&quot;</span>);
<a name="l00813"></a>00813     }
<a name="l00814"></a>00814 
<a name="l00815"></a>00815   <span class="comment">/* Worker paramters: ip/name hash table and expiration for each entry */</span>
<a name="l00816"></a>00816   <span class="keywordflow">if</span>((rc = <a class="code" href="nfs__core_8h.html#ae60e27dbe2971c399bbfbc201bf06c8a">nfs_read_ip_name_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>)) &lt; 0)
<a name="l00817"></a>00817     {
<a name="l00818"></a>00818       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00819"></a>00819               <span class="stringliteral">&quot;Error while parsing IP/name configuration&quot;</span>);
<a name="l00820"></a>00820       <span class="keywordflow">return</span> -1;
<a name="l00821"></a>00821     }
<a name="l00822"></a>00822   <span class="keywordflow">else</span>
<a name="l00823"></a>00823     {
<a name="l00824"></a>00824       <span class="comment">/* No such stanza in configuration file */</span>
<a name="l00825"></a>00825       <span class="keywordflow">if</span>(rc == 1)
<a name="l00826"></a>00826         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00827"></a>00827                  <span class="stringliteral">&quot;No IP/name configuration found in config file, using default&quot;</span>);
<a name="l00828"></a>00828       <span class="keywordflow">else</span>
<a name="l00829"></a>00829         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00830"></a>00830                  <span class="stringliteral">&quot;IP/name configuration read from config file&quot;</span>);
<a name="l00831"></a>00831     }
<a name="l00832"></a>00832 
<a name="l00833"></a>00833   <span class="comment">/* Worker paramters: uid_mapper hash table, same config for uid and uname resolution */</span>
<a name="l00834"></a>00834   <span class="keywordflow">if</span>(((rc = <a class="code" href="nfs__core_8h.html#ab64ea8b581940ec2377468f0a67b6122">nfs_read_uidmap_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>)) &lt; 0)
<a name="l00835"></a>00835      || ((rc = <a class="code" href="nfs__core_8h.html#ab64ea8b581940ec2377468f0a67b6122">nfs_read_uidmap_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#a12540d79fdd3dc040fe287c7b2aa8209">unamemap_cache_param</a>)) &lt;
<a name="l00836"></a>00836          0))
<a name="l00837"></a>00837     {
<a name="l00838"></a>00838       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00839"></a>00839               <span class="stringliteral">&quot;Error while parsing UID_MAPPER configuration&quot;</span>);
<a name="l00840"></a>00840       <span class="keywordflow">return</span> -1;
<a name="l00841"></a>00841     }
<a name="l00842"></a>00842   <span class="keywordflow">else</span>
<a name="l00843"></a>00843     {
<a name="l00844"></a>00844       <span class="comment">/* No such stanza in configuration file */</span>
<a name="l00845"></a>00845       <span class="keywordflow">if</span>(rc == 1)
<a name="l00846"></a>00846         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00847"></a>00847                  <span class="stringliteral">&quot;No UID_MAPPER configuration found in config file, using default&quot;</span>);
<a name="l00848"></a>00848       <span class="keywordflow">else</span>
<a name="l00849"></a>00849         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00850"></a>00850                  <span class="stringliteral">&quot;UID_MAPPER configuration read from config file&quot;</span>);
<a name="l00851"></a>00851     }
<a name="l00852"></a>00852 
<a name="l00853"></a>00853   <span class="comment">/* Worker paramters: gid_mapper hash table, same config for gid and gname resolution */</span>
<a name="l00854"></a>00854   <span class="keywordflow">if</span>(((rc = <a class="code" href="nfs__core_8h.html#a92e59120dfa3baa00e8a99409158fd92">nfs_read_gidmap_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>)) &lt; 0)
<a name="l00855"></a>00855      || ((rc = <a class="code" href="nfs__core_8h.html#a92e59120dfa3baa00e8a99409158fd92">nfs_read_gidmap_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#af1690c4fb881801c68310e1f4478e662">gnamemap_cache_param</a>)) &lt;
<a name="l00856"></a>00856          0))
<a name="l00857"></a>00857     {
<a name="l00858"></a>00858       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00859"></a>00859               <span class="stringliteral">&quot;Error while parsing GID_MAPPER configuration&quot;</span>);
<a name="l00860"></a>00860       <span class="keywordflow">return</span> -1;
<a name="l00861"></a>00861     }
<a name="l00862"></a>00862   <span class="keywordflow">else</span>
<a name="l00863"></a>00863     {
<a name="l00864"></a>00864       <span class="comment">/* No such stanza in configuration file */</span>
<a name="l00865"></a>00865       <span class="keywordflow">if</span>(rc == 1)
<a name="l00866"></a>00866         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00867"></a>00867                  <span class="stringliteral">&quot;No GID_MAPPER configuration found in config file, using default&quot;</span>);
<a name="l00868"></a>00868       <span class="keywordflow">else</span>
<a name="l00869"></a>00869         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00870"></a>00870                  <span class="stringliteral">&quot;GID_MAPPER configuration read from config file&quot;</span>);
<a name="l00871"></a>00871     }
<a name="l00872"></a>00872 
<a name="l00873"></a>00873   <span class="comment">/* Worker paramters: client_id hash table */</span>
<a name="l00874"></a>00874   <span class="keywordflow">if</span>((rc = <a class="code" href="nfs__core_8h.html#ac037d2cb2e08a2f7ca4bf47309d65864">nfs_read_client_id_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>)) &lt; 0)
<a name="l00875"></a>00875     {
<a name="l00876"></a>00876       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00877"></a>00877               <span class="stringliteral">&quot;Error while parsing Client id configuration&quot;</span>);
<a name="l00878"></a>00878       <span class="keywordflow">return</span> -1;
<a name="l00879"></a>00879     }
<a name="l00880"></a>00880   <span class="keywordflow">else</span>
<a name="l00881"></a>00881     {
<a name="l00882"></a>00882       <span class="comment">/* No such stanza in configuration file */</span>
<a name="l00883"></a>00883       <span class="keywordflow">if</span>(rc == 1)
<a name="l00884"></a>00884         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00885"></a>00885                  <span class="stringliteral">&quot;No Client id configuration found in config file, using default&quot;</span>);
<a name="l00886"></a>00886       <span class="keywordflow">else</span>
<a name="l00887"></a>00887         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00888"></a>00888                  <span class="stringliteral">&quot;Client id configuration read from config file&quot;</span>);
<a name="l00889"></a>00889     }
<a name="l00890"></a>00890 
<a name="l00891"></a>00891   <span class="comment">/* Worker paramters: state_id hash table */</span>
<a name="l00892"></a>00892   <span class="keywordflow">if</span>((rc = <a class="code" href="nfs__core_8h.html#a0f1d63e300fa6122405dc714efc32f54">nfs_read_state_id_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#a4c7b54bb08eca0018b3461e35fb6cb21">state_id_param</a>)) &lt; 0)
<a name="l00893"></a>00893     {
<a name="l00894"></a>00894       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00895"></a>00895               <span class="stringliteral">&quot;Error while parsing State id configuration&quot;</span>);
<a name="l00896"></a>00896       <span class="keywordflow">return</span> -1;
<a name="l00897"></a>00897     }
<a name="l00898"></a>00898   <span class="keywordflow">else</span>
<a name="l00899"></a>00899     {
<a name="l00900"></a>00900       <span class="comment">/* No such stanza in configuration file */</span>
<a name="l00901"></a>00901       <span class="keywordflow">if</span>(rc == 1)
<a name="l00902"></a>00902         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00903"></a>00903                  <span class="stringliteral">&quot;No state id configuration found in config file, using default&quot;</span>);
<a name="l00904"></a>00904       <span class="keywordflow">else</span>
<a name="l00905"></a>00905         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00906"></a>00906                  <span class="stringliteral">&quot;state id configuration read from config file&quot;</span>);
<a name="l00907"></a>00907     }
<a name="l00908"></a>00908 
<a name="l00909"></a>00909 <span class="preprocessor">#ifdef _USE_NFS4_1</span>
<a name="l00910"></a>00910 <span class="preprocessor"></span>  <span class="comment">/* Worker paramters: session_id hash table */</span>
<a name="l00911"></a>00911   <span class="keywordflow">if</span>((rc = nfs_read_session_id_conf(config_struct, &amp;nfs_param.session_id_param)) &lt; 0)
<a name="l00912"></a>00912     {
<a name="l00913"></a>00913       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00914"></a>00914               <span class="stringliteral">&quot;Error while parsing session id configuration&quot;</span>);
<a name="l00915"></a>00915       <span class="keywordflow">return</span> -1;
<a name="l00916"></a>00916     }
<a name="l00917"></a>00917   <span class="keywordflow">else</span>
<a name="l00918"></a>00918     {
<a name="l00919"></a>00919       <span class="comment">/* No such stanza in configuration file */</span>
<a name="l00920"></a>00920       <span class="keywordflow">if</span>(rc == 1)
<a name="l00921"></a>00921         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, 
<a name="l00922"></a>00922                  <span class="stringliteral">&quot;No session id configuration found in config file, using default&quot;</span>);
<a name="l00923"></a>00923       <span class="keywordflow">else</span>
<a name="l00924"></a>00924         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00925"></a>00925                  <span class="stringliteral">&quot;session id configuration read from config file&quot;</span>);
<a name="l00926"></a>00926     }
<a name="l00927"></a>00927 
<a name="l00928"></a>00928 <span class="preprocessor">#endif                          </span><span class="comment">/* _USE_NFS4_1 */</span>
<a name="l00929"></a>00929 
<a name="l00930"></a>00930 <span class="preprocessor">#ifdef _HAVE_GSSAPI</span>
<a name="l00931"></a>00931 <span class="preprocessor"></span>  <span class="comment">/* NFS kerberos5 configuration */</span>
<a name="l00932"></a>00932   <span class="keywordflow">if</span>((rc = nfs_read_krb5_conf(config_struct, &amp;nfs_param.krb5_param)) &lt; 0)
<a name="l00933"></a>00933     {
<a name="l00934"></a>00934       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00935"></a>00935               <span class="stringliteral">&quot;Error while parsing NFS/KRB5 configuration for RPCSEC_GSS&quot;</span>);
<a name="l00936"></a>00936       <span class="keywordflow">return</span> -1;
<a name="l00937"></a>00937     }
<a name="l00938"></a>00938   <span class="keywordflow">else</span>
<a name="l00939"></a>00939     {
<a name="l00940"></a>00940       <span class="comment">/* No such stanza in configuration file */</span>
<a name="l00941"></a>00941       <span class="keywordflow">if</span>(rc == 1)
<a name="l00942"></a>00942         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00943"></a>00943                  <span class="stringliteral">&quot;No NFS/KRB5 configuration found in config file, using default&quot;</span>);
<a name="l00944"></a>00944       <span class="keywordflow">else</span>
<a name="l00945"></a>00945         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00946"></a>00946                  <span class="stringliteral">&quot;NFS/KRB5 configuration read from config file&quot;</span>);
<a name="l00947"></a>00947     }
<a name="l00948"></a>00948 <span class="preprocessor">#endif</span>
<a name="l00949"></a>00949 <span class="preprocessor"></span>
<a name="l00950"></a>00950   <span class="comment">/* NFSv4 specific configuration */</span>
<a name="l00951"></a>00951   <span class="keywordflow">if</span>((rc = <a class="code" href="nfs__core_8h.html#ac8214c0bbba9022ba3be91875fd77c5e">nfs_read_version4_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#aa230a949a9346563ed093e442cc1abad">nfsv4_param</a>)) &lt; 0)
<a name="l00952"></a>00952     {
<a name="l00953"></a>00953       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00954"></a>00954               <span class="stringliteral">&quot;Error while parsing NFSv4 specific configuration&quot;</span>);
<a name="l00955"></a>00955       <span class="keywordflow">return</span> -1;
<a name="l00956"></a>00956     }
<a name="l00957"></a>00957   <span class="keywordflow">else</span>
<a name="l00958"></a>00958     {
<a name="l00959"></a>00959       <span class="comment">/* No such stanza in configuration file */</span>
<a name="l00960"></a>00960       <span class="keywordflow">if</span>(rc == 1)
<a name="l00961"></a>00961         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00962"></a>00962                  <span class="stringliteral">&quot;No NFSv4 specific configuration found in config file, using default&quot;</span>);
<a name="l00963"></a>00963       <span class="keywordflow">else</span>
<a name="l00964"></a>00964         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00965"></a>00965                  <span class="stringliteral">&quot;NFSv4 specific configuration read from config file&quot;</span>);
<a name="l00966"></a>00966     }
<a name="l00967"></a>00967 
<a name="l00968"></a>00968 <span class="preprocessor">#ifdef _USE_9P</span>
<a name="l00969"></a>00969 <span class="preprocessor"></span>  <span class="keywordflow">if</span>( ( rc = <a class="code" href="9p_8h.html#acf6b895d6d56162bb2dcb716a4ebff67">_9p_read_conf</a>( config_struct,
<a name="l00970"></a>00970                             &amp;nfs_param._9p_param ) ) &lt; 0 )
<a name="l00971"></a>00971     {
<a name="l00972"></a>00972         <span class="keywordflow">if</span>( rc == -2 )
<a name="l00973"></a>00973           <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00974"></a>00974                    <span class="stringliteral">&quot;No 9P configuration found, using default&quot;</span>);
<a name="l00975"></a>00975         <span class="keywordflow">else</span>
<a name="l00976"></a>00976           {
<a name="l00977"></a>00977              <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>( <a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00978"></a>00978                       <span class="stringliteral">&quot;Error while parsing 9P configuration&quot;</span> ) ;
<a name="l00979"></a>00979              <span class="keywordflow">return</span> -1 ;
<a name="l00980"></a>00980           }
<a name="l00981"></a>00981     }
<a name="l00982"></a>00982 <span class="preprocessor">#endif</span>
<a name="l00983"></a>00983 <span class="preprocessor"></span>
<a name="l00984"></a>00984   <span class="comment">/* Cache inode parameters : hash table */</span>
<a name="l00985"></a>00985   <span class="keywordflow">if</span>((cache_inode_status =
<a name="l00986"></a>00986       <a class="code" href="cache__inode__read__conf_8c.html#a6809dfdf569235e4d734ebc495203b0b" title="Read the configuration for the Cache_inode hash table.">cache_inode_read_conf_hash_parameter</a>(config_struct,
<a name="l00987"></a>00987                                            &amp;<a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>))
<a name="l00988"></a>00988      != <a class="code" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2a3fdbbb2367268ae84ac11d7b189643d8">CACHE_INODE_SUCCESS</a>)
<a name="l00989"></a>00989     {
<a name="l00990"></a>00990       <span class="keywordflow">if</span>(cache_inode_status == <a class="code" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2a49bfbcb4177d74986dd63a1c8aaaadfc">CACHE_INODE_NOT_FOUND</a>)
<a name="l00991"></a>00991         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00992"></a>00992                  <span class="stringliteral">&quot;No Cache Inode Hash Table configuration found, using default&quot;</span>);
<a name="l00993"></a>00993       <span class="keywordflow">else</span>
<a name="l00994"></a>00994         {
<a name="l00995"></a>00995           <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l00996"></a>00996                   <span class="stringliteral">&quot;Error while parsing Cache Inode Hash Table configuration&quot;</span>);
<a name="l00997"></a>00997           <span class="keywordflow">return</span> -1;
<a name="l00998"></a>00998         }
<a name="l00999"></a>00999     }
<a name="l01000"></a>01000   <span class="keywordflow">else</span>
<a name="l01001"></a>01001     <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01002"></a>01002              <span class="stringliteral">&quot;Cache Inode Hash Table configuration read from config file&quot;</span>);
<a name="l01003"></a>01003 
<a name="l01004"></a>01004   <span class="comment">/* Cache inode parameters : Garbage collection policy */</span>
<a name="l01005"></a>01005   <span class="keywordflow">if</span>((cache_inode_status =
<a name="l01006"></a>01006       <a class="code" href="cache__inode__read__conf_8c.html#a82a05191186d965dbdb7a470d8f84b50" title="Read the garbage collection policy.">cache_inode_read_conf_gc_policy</a>(config_struct,
<a name="l01007"></a>01007                                       &amp;<a class="code" href="cache__inode__misc_8c.html#a10f3ba7df98a25f4b9a73e7cf1a0f33a">cache_inode_gc_policy</a>)) !=
<a name="l01008"></a>01008      <a class="code" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2a3fdbbb2367268ae84ac11d7b189643d8">CACHE_INODE_SUCCESS</a>)
<a name="l01009"></a>01009     {
<a name="l01010"></a>01010       <span class="keywordflow">if</span>(cache_inode_status == <a class="code" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2a49bfbcb4177d74986dd63a1c8aaaadfc">CACHE_INODE_NOT_FOUND</a>)
<a name="l01011"></a>01011         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01012"></a>01012                  <span class="stringliteral">&quot;No Cache Inode Garbage Collection Policy configuration found, using default&quot;</span>);
<a name="l01013"></a>01013       <span class="keywordflow">else</span>
<a name="l01014"></a>01014         {
<a name="l01015"></a>01015           <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01016"></a>01016                   <span class="stringliteral">&quot;Error while parsing Cache Inode Garbage Collection Policy configuration&quot;</span>);
<a name="l01017"></a>01017           <span class="keywordflow">return</span> -1;
<a name="l01018"></a>01018         }
<a name="l01019"></a>01019     }
<a name="l01020"></a>01020   <span class="keywordflow">else</span>
<a name="l01021"></a>01021     <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01022"></a>01022              <span class="stringliteral">&quot;Cache Inode Garbage Collection Policy configuration read from config file&quot;</span>);
<a name="l01023"></a>01023 
<a name="l01024"></a>01024   <span class="comment">/* Cache inode client parameters */</span>
<a name="l01025"></a>01025   <span class="keywordflow">if</span>((cache_inode_status
<a name="l01026"></a>01026       = <a class="code" href="cache__inode__read__conf_8c.html#a714afeb5f13ca662dbb8151f40692be2" title="Read the configuration for the Cache inode layer.">cache_inode_read_conf_parameter</a>(config_struct,
<a name="l01027"></a>01027                                         &amp;<a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>))
<a name="l01028"></a>01028      != <a class="code" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2a3fdbbb2367268ae84ac11d7b189643d8">CACHE_INODE_SUCCESS</a>)
<a name="l01029"></a>01029     {
<a name="l01030"></a>01030       <span class="keywordflow">if</span>(cache_inode_status == <a class="code" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2a49bfbcb4177d74986dd63a1c8aaaadfc">CACHE_INODE_NOT_FOUND</a>)
<a name="l01031"></a>01031         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01032"></a>01032                  <span class="stringliteral">&quot;No Cache Inode Client configuration found, using default&quot;</span>);
<a name="l01033"></a>01033       <span class="keywordflow">else</span>
<a name="l01034"></a>01034         {
<a name="l01035"></a>01035           <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01036"></a>01036                   <span class="stringliteral">&quot;Error while parsing Cache Inode Client configuration&quot;</span>);
<a name="l01037"></a>01037           <span class="keywordflow">return</span> 1;
<a name="l01038"></a>01038         }
<a name="l01039"></a>01039     }
<a name="l01040"></a>01040   <span class="keywordflow">else</span>
<a name="l01041"></a>01041     <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01042"></a>01042              <span class="stringliteral">&quot;Cache Inode Client configuration read from config file&quot;</span>);
<a name="l01043"></a>01043 
<a name="l01044"></a>01044 <span class="preprocessor">#ifdef _SNMP_ADM_ACTIVE</span>
<a name="l01045"></a>01045 <span class="preprocessor"></span>  <span class="keywordflow">if</span>(<a class="code" href="external__tools_8h.html#ab4ae960c265b173939614266a851a6e1">get_snmpadm_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#a0fd689f762a6802f5129b441aa643b32">extern_param</a>) != 0)
<a name="l01046"></a>01046     {
<a name="l01047"></a>01047       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01048"></a>01048               <span class="stringliteral">&quot;Error loading SNMP_ADM configuration&quot;</span>);
<a name="l01049"></a>01049       <span class="keywordflow">return</span> -1;
<a name="l01050"></a>01050     }
<a name="l01051"></a>01051   <span class="keywordflow">else</span>
<a name="l01052"></a>01052     {
<a name="l01053"></a>01053       <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01054"></a>01054                <span class="stringliteral">&quot;snmp_adm configuration read from config file&quot;</span>);
<a name="l01055"></a>01055     }
<a name="l01056"></a>01056 <span class="preprocessor">#endif                          </span><span class="comment">/* _SNMP_ADM_ACTIVE */</span>
<a name="l01057"></a>01057 
<a name="l01058"></a>01058 <span class="preprocessor">#ifdef _USE_STAT_EXPORTER</span>
<a name="l01059"></a>01059 <span class="preprocessor"></span>  <span class="keywordflow">if</span>(<a class="code" href="nfs__core_8h.html#a4b80bab3e80e2f2002d723f9a1d7418f">get_stat_exporter_conf</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#a0fd689f762a6802f5129b441aa643b32">extern_param</a>) != 0)
<a name="l01060"></a>01060     {
<a name="l01061"></a>01061       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01062"></a>01062               <span class="stringliteral">&quot;Error loading STAT_EXPORTER configuration&quot;</span>);
<a name="l01063"></a>01063       <span class="keywordflow">return</span> -1;
<a name="l01064"></a>01064     }
<a name="l01065"></a>01065   <span class="keywordflow">else</span>
<a name="l01066"></a>01066       <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01067"></a>01067                <span class="stringliteral">&quot;STAT_EXPORTER configuration read from config file&quot;</span>);
<a name="l01068"></a>01068 <span class="preprocessor">#endif                          </span><span class="comment">/* _USE_STAT_EXPORTER */</span>
<a name="l01069"></a>01069 
<a name="l01070"></a>01070   <span class="comment">/* Load export entries from parsed file</span>
<a name="l01071"></a>01071 <span class="comment">   * returns the number of export entries.</span>
<a name="l01072"></a>01072 <span class="comment">   */</span>
<a name="l01073"></a>01073   rc = <a class="code" href="nfs__tools_8h.html#a635ee898f251e598d2a3938b655758a1">ReadExports</a>(config_struct, &amp;nfs_param.<a class="code" href="structnfs__param____.html#ac8fc09bcd317cc133cd1f8b6b3478aa3">pexportlist</a>);
<a name="l01074"></a>01074   <span class="keywordflow">if</span>(rc &lt; 0)
<a name="l01075"></a>01075     {
<a name="l01076"></a>01076       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01077"></a>01077               <span class="stringliteral">&quot;Error while parsing export entries&quot;</span>);
<a name="l01078"></a>01078       <span class="keywordflow">return</span> -1;
<a name="l01079"></a>01079     }
<a name="l01080"></a>01080   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(rc == 0)
<a name="l01081"></a>01081     {
<a name="l01082"></a>01082       <a class="code" href="log_8h.html#a2f20da18afe4d5ea18fd717136b7f0d4">LogWarn</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01083"></a>01083               <span class="stringliteral">&quot;No export entries found in configuration file !!!&quot;</span>);
<a name="l01084"></a>01084     }
<a name="l01085"></a>01085 
<a name="l01086"></a>01086   <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Configuration file successfully parsed&quot;</span>);
<a name="l01087"></a>01087 
<a name="l01088"></a>01088   <span class="comment">/* freeing syntax tree : */</span>
<a name="l01089"></a>01089 
<a name="l01090"></a>01090   <a class="code" href="config__parsing_8c.html#a21ff635ca4517f5da8111d943372e423">config_Free</a>(config_struct);
<a name="l01091"></a>01091 
<a name="l01092"></a>01092   <span class="keywordflow">return</span> 0;
<a name="l01093"></a>01093 }
<a name="l01094"></a>01094 
<a name="l01098"></a>01098 <span class="keyword">static</span> <span class="keywordtype">int</span> is_prime (<span class="keywordtype">int</span>  v)
<a name="l01099"></a>01099 {
<a name="l01100"></a>01100     <span class="keywordtype">int</span>    i, m;
<a name="l01101"></a>01101 
<a name="l01102"></a>01102     <span class="keywordflow">if</span> (v &lt;= 1)
<a name="l01103"></a>01103         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01104"></a>01104     <span class="keywordflow">if</span> (v == 2)
<a name="l01105"></a>01105         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01106"></a>01106     <span class="keywordflow">if</span> (v % 2 == 0)
<a name="l01107"></a>01107         <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01108"></a>01108     <span class="comment">// dont link with libm just for this</span>
<a name="l01109"></a>01109 <span class="preprocessor">#ifdef LINK_LIBM</span>
<a name="l01110"></a>01110 <span class="preprocessor"></span>    m = (int)sqrt(v);
<a name="l01111"></a>01111 <span class="preprocessor">#else</span>
<a name="l01112"></a>01112 <span class="preprocessor"></span>    m = v;
<a name="l01113"></a>01113 <span class="preprocessor">#endif</span>
<a name="l01114"></a>01114 <span class="preprocessor"></span>    <span class="keywordflow">for</span> (i = 2 ; i &lt;= m; i +=2) {
<a name="l01115"></a>01115         <span class="keywordflow">if</span> (v % i == 0)
<a name="l01116"></a>01116             <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l01117"></a>01117     }
<a name="l01118"></a>01118     <span class="keywordflow">return</span> <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l01119"></a>01119 }
<a name="l01120"></a>01120 
<a name="l01125"></a><a class="code" href="nfs__init_8h.html#a3e9c0b4abf60ce2f7c2b967090465bed">01125</a> <span class="keywordtype">int</span> <a class="code" href="nfs__init_8c.html#a3e9c0b4abf60ce2f7c2b967090465bed">nfs_check_param_consistency</a>()
<a name="l01126"></a>01126 {
<a name="l01127"></a>01127 
<a name="l01130"></a>01130   <span class="keywordflow">if</span>(nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a689e0b5711184d8c694d2f95e8643946">nb_worker</a> &lt;= 0)
<a name="l01131"></a>01131     {
<a name="l01132"></a>01132       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01133"></a>01133               <span class="stringliteral">&quot;BAD PARAMETER: There must be more than %d workers&quot;</span>,
<a name="l01134"></a>01134               nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a689e0b5711184d8c694d2f95e8643946">nb_worker</a>);
<a name="l01135"></a>01135       <span class="keywordflow">return</span> 1;
<a name="l01136"></a>01136     }
<a name="l01137"></a>01137 
<a name="l01138"></a>01138   <span class="keywordflow">if</span>(nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a689e0b5711184d8c694d2f95e8643946">nb_worker</a> &gt; <a class="code" href="nfs__core_8h.html#af2dec24399f7e7e1b4f16ee3fe2ed91f">NB_MAX_WORKER_THREAD</a>)
<a name="l01139"></a>01139     {
<a name="l01140"></a>01140       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01141"></a>01141               <span class="stringliteral">&quot;BAD PARAMETER: number of workers is limited to %d&quot;</span>,
<a name="l01142"></a>01142               <a class="code" href="nfs__core_8h.html#af2dec24399f7e7e1b4f16ee3fe2ed91f">NB_MAX_WORKER_THREAD</a>);
<a name="l01143"></a>01143       <span class="keywordflow">return</span> 1;
<a name="l01144"></a>01144     }
<a name="l01145"></a>01145 
<a name="l01146"></a>01146 <span class="preprocessor">#if 0</span>
<a name="l01147"></a>01147 <span class="preprocessor"></span><span class="comment">/* XXXX this seems somewhat the obvious of what I would have reasoned.</span>
<a name="l01148"></a>01148 <span class="comment"> * Where we had a thread for every connection (but sharing a single</span>
<a name="l01149"></a>01149 <span class="comment"> * fdset for select), dispatching on a small, fixed worker pool, we</span>
<a name="l01150"></a>01150 <span class="comment"> * now had an arbitrary, fixed work pool, with flexible event</span>
<a name="l01151"></a>01151 <span class="comment"> * channels.</span>
<a name="l01152"></a>01152 <span class="comment"> */</span>
<a name="l01153"></a>01153   <span class="keywordflow">if</span> (2*nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a689e0b5711184d8c694d2f95e8643946">nb_worker</a> &gt;
<a name="l01154"></a>01154       nfs_param.cache_layers_param.cache_param.hparam.index_size )
<a name="l01155"></a>01155     {
<a name="l01156"></a>01156       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01157"></a>01157               <span class="stringliteral">&quot;BAD PARAMETER: number of workers is too large compared to &quot;</span>
<a name="l01158"></a>01158               <span class="stringliteral">&quot;Cache_Inode&#39;s index size, it should be smaller than &quot;</span>
<a name="l01159"></a>01159               <span class="stringliteral">&quot;half of it&quot;</span>);
<a name="l01160"></a>01160       <span class="keywordflow">return</span> 1;
<a name="l01161"></a>01161     }
<a name="l01162"></a>01162 <span class="preprocessor">#endif</span>
<a name="l01163"></a>01163 <span class="preprocessor"></span>
<a name="l01164"></a>01164   <span class="comment">// check for parameters which need to be primes</span>
<a name="l01165"></a>01165   <span class="keywordflow">if</span> (!is_prime(nfs_param.<a class="code" href="structnfs__param____.html#a2d21ff3785e77c12c78e362edf40d159">dupreq_param</a>.<a class="code" href="structnfs__rpc__dupreq__param____.html#a5b4378e8179e69873bd49e13e9926d08">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a>) ||
<a name="l01166"></a>01166 #ifdef _HAVE_GSSAPI
<a name="l01167"></a>01167       !is_prime(nfs_param.krb5_param.hash_param.index_size) ||
<a name="l01168"></a>01168 #endif
<a name="l01169"></a>01169       !is_prime(nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#a0defa27db837d9d02554dec2b92ee2aa">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a>) ||
<a name="l01170"></a>01170       !is_prime(nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a>) ||
<a name="l01171"></a>01171       !is_prime(nfs_param.<a class="code" href="structnfs__param____.html#a12540d79fdd3dc040fe287c7b2aa8209">unamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a>) ||
<a name="l01172"></a>01172       !is_prime(nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a>) ||
<a name="l01173"></a>01173       !is_prime(nfs_param.<a class="code" href="structnfs__param____.html#a7fbe4b193eb53f095faca50ba7999ec9">uidgidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a>) ||
<a name="l01174"></a>01174       !is_prime(nfs_param.<a class="code" href="structnfs__param____.html#af1690c4fb881801c68310e1f4478e662">gnamemap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#afc04e12cf4edff5be5949247fa7793b3">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a>) ||
<a name="l01175"></a>01175       !is_prime(nfs_param.<a class="code" href="structnfs__param____.html#aed160b6e7c80a7748e42781b80e09c89">ip_stats_param</a>.<a class="code" href="structnfs__ip__stats__param____.html#a07a0c696e571f6b54311752613fcb221">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a>) ||
<a name="l01176"></a>01176       !is_prime(nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#aa8f22442faac5b2d27ef98b212c37595">cid_unconfirmed_hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a>) ||
<a name="l01177"></a>01177       !is_prime(nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a4b881e9bdf331efda653a867ae0b1550">cid_confirmed_hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a>) ||
<a name="l01178"></a>01178       !is_prime(nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>.<a class="code" href="structnfs__client__id__param____.html#a7fba98fd0941b6f6f7dff605d9af372e">cr_hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a>) ||
<a name="l01179"></a>01179       !is_prime(nfs_param.<a class="code" href="structnfs__param____.html#a4c7b54bb08eca0018b3461e35fb6cb21">state_id_param</a>.<a class="code" href="structnfs__state__id__param____.html#a78cba30291662d8b189c79e4288b41ae">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a>) ||
<a name="l01180"></a>01180 #ifdef _USE_NFS4_1
<a name="l01181"></a>01181       !is_prime(nfs_param.session_id_param.hash_param.index_size) ||
<a name="l01182"></a>01182 #endif
<a name="l01183"></a>01183       !is_prime(nfs_param.<a class="code" href="structnfs__param____.html#acda4eb9229233ac78ac2501e5e63443c">nfs4_owner_param</a>.<a class="code" href="structnfs4__owner__parameter__t.html#a76273dfb0db0af1be844b6d2447c6dd5">hash_param</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a>) ||
<a name="l01184"></a>01184 #ifdef _USE_NLM
<a name="l01185"></a>01185       !is_prime(nfs_param.nsm_client_hash_param.index_size) ||
<a name="l01186"></a>01186       !is_prime(nfs_param.nlm_client_hash_param.index_size) ||
<a name="l01187"></a>01187       !is_prime(nfs_param.nlm_owner_hash_param.index_size) ||
<a name="l01188"></a>01188       !is_prime(<a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.cookie_param.index_size) ||
<a name="l01189"></a>01189 #endif
<a name="l01190"></a>01190       !is_prime(<a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a401ab6cf8bfa8250739c3ea5a4186510">hparam</a>.<a class="code" href="structhash__param.html#ac835083bd319700097c852ab29852d69">index_size</a>))
<a name="l01191"></a>01191   {
<a name="l01192"></a>01192       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;BAD PARAMETER(s) : expected primes&quot;</span>);
<a name="l01193"></a>01193   }
<a name="l01194"></a>01194 
<a name="l01195"></a>01195   <span class="keywordflow">return</span> 0;
<a name="l01196"></a>01196 }
<a name="l01197"></a>01197 
<a name="l01198"></a><a class="code" href="nfs__init_8c.html#a6f0c6ccf6a41145e7475a1d486047a09">01198</a> <span class="keywordtype">void</span> <a class="code" href="nfs__core_8h.html#a6f0c6ccf6a41145e7475a1d486047a09">nfs_reset_stats</a>(<span class="keywordtype">void</span>)
<a name="l01199"></a>01199 {
<a name="l01200"></a>01200   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0;
<a name="l01201"></a>01201   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0;
<a name="l01202"></a>01202 
<a name="l01203"></a>01203   <span class="keywordflow">for</span>(i = 0; i &lt; nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a689e0b5711184d8c694d2f95e8643946">nb_worker</a>; i++)
<a name="l01204"></a>01204     {
<a name="l01205"></a>01205       workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#acdc7df3282a65f80c27e09dacbbd0696">nb_total_req</a> = 0;
<a name="l01206"></a>01206       workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a11f521d19529294cd0ef5c6b33e0819f">nb_udp_req</a> = 0;
<a name="l01207"></a>01207       workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#ab6697fdddba7ab9e25d99156af03e8bf">nb_tcp_req</a> = 0;
<a name="l01208"></a>01208       workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#a0b67f913632c93d738190d19834c89d9">nb_mnt1_req</a> = 0;
<a name="l01209"></a>01209       workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#aabc051af226413651edf344e8e4ecd41">nb_mnt3_req</a> = 0;
<a name="l01210"></a>01210       workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#a08654d68079017705f87f35b2af7dbb3">nb_nfs2_req</a> = 0;
<a name="l01211"></a>01211       workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#ac991994feec985adb64a534cffa9ab23">nb_nfs3_req</a> = 0;
<a name="l01212"></a>01212       workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#a4c6ea0ed927c17c0a20b44a50810e05e">nb_nfs4_req</a> = 0;
<a name="l01213"></a>01213 
<a name="l01214"></a>01214       <span class="keywordflow">for</span>(j = 0; j &lt; <a class="code" href="nfs__stat_8h.html#a386429ad3472fb8ebc5dd152017fc4cc">MNT_V1_NB_COMMAND</a>; j++)
<a name="l01215"></a>01215         {
<a name="l01216"></a>01216           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#ad3893c32a56af0be82bf2fd22aaae72e">stat_req_mnt1</a>[j].<a class="code" href="structnfs__request__stat__item____.html#af1f02fc03cc8092377736a1cd3b9990b">total</a> = 0;
<a name="l01217"></a>01217           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#ad3893c32a56af0be82bf2fd22aaae72e">stat_req_mnt1</a>[j].<a class="code" href="structnfs__request__stat__item____.html#af1263e199bd16c14f18a1540615d05ec">success</a> = 0;
<a name="l01218"></a>01218           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#ad3893c32a56af0be82bf2fd22aaae72e">stat_req_mnt1</a>[j].<a class="code" href="structnfs__request__stat__item____.html#a124dec78d35a86ef1f67b1aedb8f6848">dropped</a> = 0;
<a name="l01219"></a>01219 
<a name="l01220"></a>01220         }
<a name="l01221"></a>01221 
<a name="l01222"></a>01222       <span class="keywordflow">for</span>(j = 0; j &lt; <a class="code" href="nfs__stat_8h.html#ae8b7e6b61766338d4d30cb50a230898e">MNT_V3_NB_COMMAND</a>; j++)
<a name="l01223"></a>01223         {
<a name="l01224"></a>01224           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#a4467b1d4e14497aed11debd9c9ece50d">stat_req_mnt3</a>[j].<a class="code" href="structnfs__request__stat__item____.html#af1f02fc03cc8092377736a1cd3b9990b">total</a> = 0;
<a name="l01225"></a>01225           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#a4467b1d4e14497aed11debd9c9ece50d">stat_req_mnt3</a>[j].<a class="code" href="structnfs__request__stat__item____.html#af1263e199bd16c14f18a1540615d05ec">success</a> = 0;
<a name="l01226"></a>01226           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#a4467b1d4e14497aed11debd9c9ece50d">stat_req_mnt3</a>[j].<a class="code" href="structnfs__request__stat__item____.html#a124dec78d35a86ef1f67b1aedb8f6848">dropped</a> = 0;
<a name="l01227"></a>01227         }
<a name="l01228"></a>01228 
<a name="l01229"></a>01229       <span class="keywordflow">for</span>(j = 0; j &lt; <a class="code" href="nfs__stat_8h.html#ad9e56ce277ee7c095191122d75213cc8">NFS_V2_NB_COMMAND</a>; j++)
<a name="l01230"></a>01230         {
<a name="l01231"></a>01231           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#a8acd1c78848eff04787a261ceafdabe2">stat_req_nfs2</a>[j].<a class="code" href="structnfs__request__stat__item____.html#af1f02fc03cc8092377736a1cd3b9990b">total</a> = 0;
<a name="l01232"></a>01232           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#a8acd1c78848eff04787a261ceafdabe2">stat_req_nfs2</a>[j].<a class="code" href="structnfs__request__stat__item____.html#af1263e199bd16c14f18a1540615d05ec">success</a> = 0;
<a name="l01233"></a>01233           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#a8acd1c78848eff04787a261ceafdabe2">stat_req_nfs2</a>[j].<a class="code" href="structnfs__request__stat__item____.html#a124dec78d35a86ef1f67b1aedb8f6848">dropped</a> = 0;
<a name="l01234"></a>01234         }
<a name="l01235"></a>01235 
<a name="l01236"></a>01236       <span class="keywordflow">for</span>(j = 0; j &lt; <a class="code" href="nfs__stat_8h.html#a0c1c3276b6ce8495e64e870419c09d99">NFS_V3_NB_COMMAND</a>; j++)
<a name="l01237"></a>01237         {
<a name="l01238"></a>01238           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#af874b562c762312cdb9642454f4064f1">stat_req_nfs3</a>[j].<a class="code" href="structnfs__request__stat__item____.html#af1f02fc03cc8092377736a1cd3b9990b">total</a> = 0;
<a name="l01239"></a>01239           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#af874b562c762312cdb9642454f4064f1">stat_req_nfs3</a>[j].<a class="code" href="structnfs__request__stat__item____.html#af1263e199bd16c14f18a1540615d05ec">success</a> = 0;
<a name="l01240"></a>01240           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#af874b562c762312cdb9642454f4064f1">stat_req_nfs3</a>[j].<a class="code" href="structnfs__request__stat__item____.html#a124dec78d35a86ef1f67b1aedb8f6848">dropped</a> = 0;
<a name="l01241"></a>01241         }
<a name="l01242"></a>01242 
<a name="l01243"></a>01243       <span class="keywordflow">for</span>(j = 0; j &lt; <a class="code" href="nfs__stat_8h.html#af3acaa068891a328cd6aca41f340d9e3">NFS_V4_NB_COMMAND</a>; j++)
<a name="l01244"></a>01244         {
<a name="l01245"></a>01245           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#a3507c3f2094b7ae12d771c73221ce333">stat_req_nfs4</a>[j].<a class="code" href="structnfs__request__stat__item____.html#af1f02fc03cc8092377736a1cd3b9990b">total</a> = 0;
<a name="l01246"></a>01246           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#a3507c3f2094b7ae12d771c73221ce333">stat_req_nfs4</a>[j].<a class="code" href="structnfs__request__stat__item____.html#af1263e199bd16c14f18a1540615d05ec">success</a> = 0;
<a name="l01247"></a>01247           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#a3507c3f2094b7ae12d771c73221ce333">stat_req_nfs4</a>[j].<a class="code" href="structnfs__request__stat__item____.html#a124dec78d35a86ef1f67b1aedb8f6848">dropped</a> = 0;
<a name="l01248"></a>01248         }
<a name="l01249"></a>01249 
<a name="l01250"></a>01250       <span class="keywordflow">for</span>(j = 0; j &lt; <a class="code" href="nfs__stat_8h.html#a3fc27dcf174b4517b37d1cb5ea209dec">NFS_V40_NB_OPERATION</a>; j++)
<a name="l01251"></a>01251         {
<a name="l01252"></a>01252           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#aefb020bfed919b255551222e2e75a465">stat_op_nfs40</a>[j].<a class="code" href="structnfs__op__stat__item____.html#a691b8c0e1b078da1487b7cfeb7ce2f6f">total</a> = 0;
<a name="l01253"></a>01253           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#aefb020bfed919b255551222e2e75a465">stat_op_nfs40</a>[j].<a class="code" href="structnfs__op__stat__item____.html#a0920784881c829431e0fc7977adaa23e">success</a> = 0;
<a name="l01254"></a>01254           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#aefb020bfed919b255551222e2e75a465">stat_op_nfs40</a>[j].<a class="code" href="structnfs__op__stat__item____.html#a371af0eb62cc0d3e96a7e0155823c67e">failed</a> = 0;
<a name="l01255"></a>01255         }
<a name="l01256"></a>01256 
<a name="l01257"></a>01257       <span class="keywordflow">for</span>(j = 0; j &lt; <a class="code" href="nfs__stat_8h.html#a2315fbd791f6c7a92752dce7393685f1">NFS_V41_NB_OPERATION</a>; j++)
<a name="l01258"></a>01258         {
<a name="l01259"></a>01259           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#a4552da8c5c240767ce69aeb04f865df3">stat_op_nfs41</a>[j].<a class="code" href="structnfs__op__stat__item____.html#a691b8c0e1b078da1487b7cfeb7ce2f6f">total</a> = 0;
<a name="l01260"></a>01260           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#a4552da8c5c240767ce69aeb04f865df3">stat_op_nfs41</a>[j].<a class="code" href="structnfs__op__stat__item____.html#a0920784881c829431e0fc7977adaa23e">success</a> = 0;
<a name="l01261"></a>01261           workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a345c9ff027546150e6f33573ddc5ee97">stat_req</a>.<a class="code" href="structnfs__request__stat____.html#a4552da8c5c240767ce69aeb04f865df3">stat_op_nfs41</a>[j].<a class="code" href="structnfs__op__stat__item____.html#a371af0eb62cc0d3e96a7e0155823c67e">failed</a> = 0;
<a name="l01262"></a>01262         }
<a name="l01263"></a>01263 
<a name="l01264"></a>01264       workers_data[i].<a class="code" href="structnfs__worker__data____.html#af8c55be2a9a2d1a570e746342d81589c">stats</a>.<a class="code" href="structnfs__worker__stat____.html#a7e9fa4476696e15197aa2f2ef4c17996">last_stat_update</a> = 0;
<a name="l01265"></a>01265       memset(&amp;workers_data[i].<a class="code" href="test__nfs__ip__stats_8c.html#a4d7b4030c58b787ff8bb3b5cdede913f">stats</a>.fsal_stats, 0, <span class="keyword">sizeof</span>(<a class="code" href="structfsal__statistics____.html">fsal_statistics_t</a>));
<a name="l01266"></a>01266     }                           <span class="comment">/* for( i = 0 ; i &lt; nfs_param.core_param.nb_worker ; i++ ) */</span>
<a name="l01267"></a>01267 
<a name="l01268"></a>01268 }                               <span class="comment">/* void nfs_reset_stats( void ) */</span>
<a name="l01269"></a>01269 
<a name="l01270"></a>01270 <span class="keyword">static</span> <span class="keywordtype">void</span> nfs_Start_threads(<span class="keywordtype">void</span>)
<a name="l01271"></a>01271 {
<a name="l01272"></a>01272   <span class="keywordtype">int</span> rc = 0;
<a name="l01273"></a>01273   pthread_attr_t attr_thr;
<a name="l01274"></a>01274   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i = 0;
<a name="l01275"></a>01275 
<a name="l01276"></a>01276   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01277"></a>01277            <span class="stringliteral">&quot;Starting threads&quot;</span>);
<a name="l01278"></a>01278 
<a name="l01279"></a>01279   <span class="comment">/* Init for thread parameter (mostly for scheduling) */</span>
<a name="l01280"></a>01280   <span class="keywordflow">if</span>(pthread_attr_init(&amp;attr_thr) != 0)
<a name="l01281"></a>01281     <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>, <span class="stringliteral">&quot;can&#39;t init pthread&#39;s attributes&quot;</span>);
<a name="l01282"></a>01282 
<a name="l01283"></a>01283   <span class="keywordflow">if</span>(pthread_attr_setscope(&amp;attr_thr, PTHREAD_SCOPE_SYSTEM) != 0)
<a name="l01284"></a>01284     <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>, <span class="stringliteral">&quot;can&#39;t set pthread&#39;s scope&quot;</span>);
<a name="l01285"></a>01285 
<a name="l01286"></a>01286   <span class="keywordflow">if</span>(pthread_attr_setdetachstate(&amp;attr_thr, PTHREAD_CREATE_JOINABLE) != 0)
<a name="l01287"></a>01287     <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>, <span class="stringliteral">&quot;can&#39;t set pthread&#39;s join state&quot;</span>);
<a name="l01288"></a>01288 
<a name="l01289"></a>01289   <span class="keywordflow">if</span>(pthread_attr_setstacksize(&amp;attr_thr, <a class="code" href="nfs__core_8h.html#a90b7a8cb7bc3fdbd98014a3e15ee6e9a">THREAD_STACK_SIZE</a>) != 0)
<a name="l01290"></a>01290     <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>, <span class="stringliteral">&quot;can&#39;t set pthread&#39;s stack size&quot;</span>);
<a name="l01291"></a>01291 
<a name="l01292"></a>01292   <span class="comment">/* Initialisation of Threads&#39;s fridge */</span>
<a name="l01293"></a>01293   <span class="keywordflow">if</span>( <a class="code" href="nfs__core_8h.html#a0179e7326b53e82d59584e57e0ed3d39">fridgethr_init</a>() != 0 )
<a name="l01294"></a>01294    {
<a name="l01295"></a>01295      <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>, <span class="stringliteral">&quot;can&#39;t run fridgethr_init&quot;</span>);
<a name="l01296"></a>01296    }
<a name="l01297"></a>01297 
<a name="l01298"></a>01298   <span class="comment">/* Starting the thread dedicated to signal handling */</span>
<a name="l01299"></a>01299   <span class="keywordflow">if</span>( ( rc = pthread_create( &amp;<a class="code" href="nfs__init_8c.html#a6c8a4c4fc828d4f08a94a211c78de19e">sigmgr_thrid</a>, &amp;attr_thr, <a class="code" href="nfs__core_8h.html#a573c92247c22a1febc30faf9a5fadef2">sigmgr_thread</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) ) != 0 )
<a name="l01300"></a>01300     {
<a name="l01301"></a>01301       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01302"></a>01302                <span class="stringliteral">&quot;Could not create sigmgr_thread, error = %d (%s)&quot;</span>,
<a name="l01303"></a>01303                errno, strerror(errno));
<a name="l01304"></a>01304     }
<a name="l01305"></a>01305   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01306"></a>01306            <span class="stringliteral">&quot;sigmgr thread started&quot;</span>);
<a name="l01307"></a>01307 
<a name="l01308"></a>01308   <span class="comment">/* Starting all of the worker thread */</span>
<a name="l01309"></a>01309   <span class="keywordflow">for</span>(i = 0; i &lt; nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a689e0b5711184d8c694d2f95e8643946">nb_worker</a>; i++)
<a name="l01310"></a>01310     {
<a name="l01311"></a>01311       <span class="keywordflow">if</span>((rc =
<a name="l01312"></a>01312           pthread_create(&amp;(<a class="code" href="nfs__init_8c.html#a8c8588708bf16f62ec7fdb33a22d0fc9">worker_thrid</a>[i]), &amp;attr_thr, <a class="code" href="nfs__core_8h.html#a41686d8afdef1000024e8a353076b3fe">worker_thread</a>, (<span class="keywordtype">void</span> *)i)) != 0)
<a name="l01313"></a>01313         {
<a name="l01314"></a>01314           <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01315"></a>01315                    <span class="stringliteral">&quot;Could not create worker_thread #%lu, error = %d (%s)&quot;</span>,
<a name="l01316"></a>01316                    i, errno, strerror(errno));
<a name="l01317"></a>01317         }
<a name="l01318"></a>01318     }
<a name="l01319"></a>01319   <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01320"></a>01320            <span class="stringliteral">&quot;%d worker threads were started successfully&quot;</span>,
<a name="l01321"></a>01321            nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a689e0b5711184d8c694d2f95e8643946">nb_worker</a>);
<a name="l01322"></a>01322 
<a name="l01323"></a>01323 <span class="preprocessor">#ifdef _USE_BLOCKING_LOCKS</span>
<a name="l01324"></a>01324 <span class="preprocessor"></span>  <span class="comment">/* Start State Async threads */</span>
<a name="l01325"></a>01325   <a class="code" href="state__async_8c.html#aa12f4131f78b9320910bcb6d537a7827">state_async_thread_start</a>();
<a name="l01326"></a>01326 <span class="preprocessor">#endif</span>
<a name="l01327"></a>01327 <span class="preprocessor"></span>
<a name="l01328"></a>01328   <span class="comment">/*</span>
<a name="l01329"></a>01329 <span class="comment">   * Now that all TCB controlled threads (workers, NLM,</span>
<a name="l01330"></a>01330 <span class="comment">   * sigmgr) were created, lets wait for them to fully</span>
<a name="l01331"></a>01331 <span class="comment">   * initialze __before__ we create the threads that listen</span>
<a name="l01332"></a>01332 <span class="comment">   * for incoming requests.</span>
<a name="l01333"></a>01333 <span class="comment">   */</span>
<a name="l01334"></a>01334   <a class="code" href="nfs__tcb_8h.html#ab9d7b0c024adc459118b0da637376b03">wait_for_threads_to_awaken</a>();
<a name="l01335"></a>01335 
<a name="l01336"></a>01336   <span class="comment">/* Start event channel service threads */</span>
<a name="l01337"></a>01337   <a class="code" href="nfs__core_8h.html#a866fa7b91130bec070623dc3bf639da5">nfs_rpc_dispatch_threads</a>(&amp;attr_thr);
<a name="l01338"></a>01338 
<a name="l01339"></a>01339 <span class="preprocessor">#ifdef _USE_9P</span>
<a name="l01340"></a>01340 <span class="preprocessor"></span>  <span class="comment">/* Starting the 9p dispatcher thread */</span>
<a name="l01341"></a>01341   <span class="keywordflow">if</span>((rc = pthread_create(&amp;_9p_dispatcher_thrid, &amp;attr_thr,
<a name="l01342"></a>01342                           <a class="code" href="9p__dispatcher_8c.html#a45e8b7e5ee90845e2231854451414b3d">_9p_dispatcher_thread</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) ) != 0 )
<a name="l01343"></a>01343     {
<a name="l01344"></a>01344       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01345"></a>01345                <span class="stringliteral">&quot;Could not create  9p dispatcher_thread, error = %d (%s)&quot;</span>,
<a name="l01346"></a>01346                errno, strerror(errno));
<a name="l01347"></a>01347     }
<a name="l01348"></a>01348   <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>, <span class="stringliteral">&quot;9p dispatcher thread was started successfully&quot;</span>);
<a name="l01349"></a>01349 <span class="preprocessor">#endif</span>
<a name="l01350"></a>01350 <span class="preprocessor"></span>
<a name="l01351"></a>01351 <span class="preprocessor">#ifdef USE_DBUS</span>
<a name="l01352"></a>01352 <span class="preprocessor"></span>      <span class="comment">/* DBUS event thread */</span>
<a name="l01353"></a>01353       <span class="keywordflow">if</span>((rc = pthread_create(&amp;<a class="code" href="nfs__init_8c.html#ac8fb85dd60a9496f9f6c689cf9cd5ceb">gsh_dbus_thrid</a>, &amp;attr_thr, <a class="code" href="ganesha__dbus_8h.html#a638dcd197448889fcf9b55e17eba27fb">gsh_dbus_thread</a>,
<a name="l01354"></a>01354                               <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) ) != 0 )     
<a name="l01355"></a>01355         {
<a name="l01356"></a>01356             <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01357"></a>01357                      <span class="stringliteral">&quot;Could not create gsh_dbus_thread, error = %d (%s)&quot;</span>,
<a name="l01358"></a>01358                      errno, strerror(errno));
<a name="l01359"></a>01359         }
<a name="l01360"></a>01360       <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>, <span class="stringliteral">&quot;gsh_dbusthread was started successfully&quot;</span>);
<a name="l01361"></a>01361 <span class="preprocessor">#endif</span>
<a name="l01362"></a>01362 <span class="preprocessor"></span>
<a name="l01363"></a>01363   <span class="comment">/* Starting the admin thread */</span>
<a name="l01364"></a>01364   <span class="keywordflow">if</span>((rc = pthread_create(&amp;<a class="code" href="nfs__init_8c.html#a499bd8760892c803ad9d66afd3125d64">admin_thrid</a>, &amp;attr_thr, <a class="code" href="nfs__core_8h.html#ab3728beb036af689f1e97bfaed280071">admin_thread</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) != 0)
<a name="l01365"></a>01365     {
<a name="l01366"></a>01366       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01367"></a>01367                <span class="stringliteral">&quot;Could not create admin_thread, error = %d (%s)&quot;</span>,
<a name="l01368"></a>01368                errno, strerror(errno));
<a name="l01369"></a>01369     }
<a name="l01370"></a>01370   <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>, <span class="stringliteral">&quot;admin thread was started successfully&quot;</span>);
<a name="l01371"></a>01371 
<a name="l01372"></a>01372   <span class="comment">/* Starting the stats thread */</span>
<a name="l01373"></a>01373   <span class="keywordflow">if</span>((rc =
<a name="l01374"></a>01374       pthread_create(&amp;<a class="code" href="nfs__init_8c.html#abc17efd81490605a1e42b272a0d81e73">stat_thrid</a>, &amp;attr_thr, <a class="code" href="nfs__core_8h.html#aa582faf6dd7ed8f998918b5e9e84b5f8">stats_thread</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) != 0)
<a name="l01375"></a>01375     {
<a name="l01376"></a>01376       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01377"></a>01377                <span class="stringliteral">&quot;Could not create stats_thread, error = %d (%s)&quot;</span>,
<a name="l01378"></a>01378                errno, strerror(errno));
<a name="l01379"></a>01379     }
<a name="l01380"></a>01380   <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>, <span class="stringliteral">&quot;statistics thread was started successfully&quot;</span>);
<a name="l01381"></a>01381 
<a name="l01382"></a>01382 <span class="preprocessor">#ifdef _USE_STAT_EXPORTER</span>
<a name="l01383"></a>01383 <span class="preprocessor"></span>
<a name="l01384"></a>01384   <span class="comment">/* Starting the long processing threshold thread */</span>
<a name="l01385"></a>01385   <span class="keywordflow">if</span>((rc =
<a name="l01386"></a>01386       pthread_create(&amp;<a class="code" href="nfs__init_8c.html#abc17efd81490605a1e42b272a0d81e73">stat_thrid</a>, &amp;attr_thr, <a class="code" href="nfs__core_8h.html#a6e2f61ef74ecc4d0370729be7a776eb7">long_processing_thread</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) != 0)
<a name="l01387"></a>01387     {
<a name="l01388"></a>01388       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01389"></a>01389                <span class="stringliteral">&quot;Could not create long_processing_thread, error = %d (%s)&quot;</span>,
<a name="l01390"></a>01390                errno, strerror(errno));
<a name="l01391"></a>01391     }
<a name="l01392"></a>01392   <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01393"></a>01393            <span class="stringliteral">&quot;long processing threshold thread was started successfully&quot;</span>);
<a name="l01394"></a>01394 
<a name="l01395"></a>01395   <span class="comment">/* Starting the stat exporter thread */</span>
<a name="l01396"></a>01396   <span class="keywordflow">if</span>((rc =
<a name="l01397"></a>01397       pthread_create(&amp;<a class="code" href="nfs__init_8c.html#a06e5c43ab019ea359065a405da0fb412">stat_exporter_thrid</a>, &amp;attr_thr, <a class="code" href="nfs__core_8h.html#aa229d2ce40078363a49929553b636c86">stat_exporter_thread</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) != 0)
<a name="l01398"></a>01398     {
<a name="l01399"></a>01399       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01400"></a>01400                <span class="stringliteral">&quot;Could not create stat_exporter_thread, error = %d (%s)&quot;</span>,
<a name="l01401"></a>01401                errno, strerror(errno));
<a name="l01402"></a>01402     }
<a name="l01403"></a>01403   <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01404"></a>01404            <span class="stringliteral">&quot;statistics exporter thread was started successfully&quot;</span>);
<a name="l01405"></a>01405 
<a name="l01406"></a>01406 <span class="preprocessor">#endif      </span><span class="comment">/*  _USE_STAT_EXPORTER */</span>
<a name="l01407"></a>01407 
<a name="l01408"></a>01408   <span class="comment">/* Starting the reaper thread */</span>
<a name="l01409"></a>01409   <span class="keywordflow">if</span>((rc =
<a name="l01410"></a>01410       pthread_create(&amp;<a class="code" href="nfs__init_8c.html#a819a12879d824839884110f4a4b2bd5a">reaper_thrid</a>, &amp;attr_thr, <a class="code" href="nfs__core_8h.html#ac90bcc2751b8bbd5beb833a17c47ac92">reaper_thread</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) != 0)
<a name="l01411"></a>01411     {
<a name="l01412"></a>01412       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01413"></a>01413                <span class="stringliteral">&quot;Could not create reaper_thread, error = %d (%s)&quot;</span>,
<a name="l01414"></a>01414                errno, strerror(errno));
<a name="l01415"></a>01415     }
<a name="l01416"></a>01416   <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01417"></a>01417            <span class="stringliteral">&quot;reaper thread was started successfully&quot;</span>);
<a name="l01418"></a>01418 
<a name="l01419"></a>01419 <span class="preprocessor">#ifdef _USE_UPCALL_SIMULATOR</span>
<a name="l01420"></a>01420 <span class="preprocessor"></span>  <span class="comment">/* Starts the thread that mimics upcalls from the FSAL */</span>
<a name="l01421"></a>01421    <span class="comment">/* Starting the stats thread */</span>
<a name="l01422"></a>01422   <span class="keywordflow">if</span>((rc =
<a name="l01423"></a>01423       pthread_create(&amp;upcall_simulator_thrid, &amp;attr_thr, <a class="code" href="fsal__upcall__simulator__thread_8c.html#a502e8d6a9f81458b2668f55b67053939">upcall_simulator_thread</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) != 0)
<a name="l01424"></a>01424     {
<a name="l01425"></a>01425       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01426"></a>01426                <span class="stringliteral">&quot;Could not create upcall_simulator_thread, error = %d (%s)&quot;</span>,
<a name="l01427"></a>01427                errno, strerror(errno));
<a name="l01428"></a>01428     }
<a name="l01429"></a>01429   <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>, <span class="stringliteral">&quot;upcall_simulator thread was started successfully&quot;</span>);
<a name="l01430"></a>01430 <span class="preprocessor">#endif</span>
<a name="l01431"></a>01431 <span class="preprocessor"></span>
<a name="l01432"></a>01432 <span class="preprocessor">#ifdef _USE_FSAL_UP</span>
<a name="l01433"></a>01433 <span class="preprocessor"></span>  <span class="comment">/* Starting the fsal_up_process thread */</span>
<a name="l01434"></a>01434  <span class="keywordflow">if</span>((rc =
<a name="l01435"></a>01435      pthread_create(&amp;<a class="code" href="nfs__init_8c.html#a7e67a11ccbf16e0c0e8bd32d4328acee">upp_thrid</a>, &amp;attr_thr, <a class="code" href="fsal__up__thread_8c.html#a23d475c4ee7f57eb3ed8fb1bfc6e5980">fsal_up_process_thread</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) != 0)
<a name="l01436"></a>01436    {
<a name="l01437"></a>01437      <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01438"></a>01438               <span class="stringliteral">&quot;Could not create fsal_up_process_thread, error = %d (%s)&quot;</span>,
<a name="l01439"></a>01439               errno, strerror(errno));
<a name="l01440"></a>01440    }
<a name="l01441"></a>01441  <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l01442"></a>01442           <span class="stringliteral">&quot;fsal_up_process_thread was started successfully&quot;</span>);
<a name="l01443"></a>01443 
<a name="l01444"></a>01444   <a class="code" href="fsal__up__thread_8c.html#a0ad899b9f74b20b610f7858956e77367">create_fsal_up_threads</a>();
<a name="l01445"></a>01445 <span class="preprocessor">#endif </span><span class="comment">/* _USE_FSAL_UP */</span>
<a name="l01446"></a>01446 
<a name="l01447"></a>01447 }                               <span class="comment">/* nfs_Start_threads */</span>
<a name="l01448"></a>01448 
<a name="l01460"></a>01460 <span class="keyword">static</span> <span class="keywordtype">void</span> nfs_Init(<span class="keyword">const</span> <a class="code" href="struct____nfs__start__info.html">nfs_start_info_t</a> * p_start_info)
<a name="l01461"></a>01461 {
<a name="l01462"></a>01462   <a class="code" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> cache_status;
<a name="l01463"></a>01463   <a class="code" href="sal__data_8h.html#abaefb535451d8c22b6d4074d63effd5b">state_status_t</a> state_status;
<a name="l01464"></a>01464   <a class="code" href="structfsal__status____.html">fsal_status_t</a> fsal_status;
<a name="l01465"></a>01465   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0;
<a name="l01466"></a>01466   <span class="keywordtype">int</span> rc = 0;
<a name="l01467"></a>01467 <span class="preprocessor">#ifdef _HAVE_GSSAPI</span>
<a name="l01468"></a>01468 <span class="preprocessor"></span>  gss_buffer_desc gss_service_buf;
<a name="l01469"></a>01469   OM_uint32 maj_stat, min_stat;
<a name="l01470"></a>01470   <span class="keywordtype">char</span> GssError[MAXNAMLEN];
<a name="l01471"></a>01471 <span class="preprocessor">#endif</span>
<a name="l01472"></a>01472 <span class="preprocessor"></span>
<a name="l01473"></a>01473   <span class="comment">/* FSAL Initialisation */</span>
<a name="l01474"></a>01474   fsal_status = <a class="code" href="fsal__glue_8c.html#a0be44bf9d728985f8631b3aa8911b36f">FSAL_Init</a>(&amp;nfs_param.<a class="code" href="structnfs__param____.html#a2683c5f1f6bc47f4b2b4b85d7f68c6df">fsal_param</a>);
<a name="l01475"></a>01475   <span class="keywordflow">if</span>(<a class="code" href="fsal_8h.html#a7c2a97ec2fa552dea8e497c7dd8a2b86">FSAL_IS_ERROR</a>(fsal_status))
<a name="l01476"></a>01476     {
<a name="l01477"></a>01477       <span class="comment">/* Failed init */</span>
<a name="l01478"></a>01478       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;FSAL library could not be initialized&quot;</span>);
<a name="l01479"></a>01479     }
<a name="l01480"></a>01480   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;FSAL library successfully initialized&quot;</span>);
<a name="l01481"></a>01481 
<a name="l01482"></a>01482 <span class="preprocessor">#ifdef USE_DBUS</span>
<a name="l01483"></a>01483 <span class="preprocessor"></span>  <span class="comment">/* DBUS init */</span>
<a name="l01484"></a>01484   <a class="code" href="ganesha__dbus_8h.html#ad5e46b708e9f50a9c9a0e07b5071cf8d">gsh_dbus_pkginit</a>();
<a name="l01485"></a>01485 <span class="preprocessor">#endif</span>
<a name="l01486"></a>01486 <span class="preprocessor"></span>
<a name="l01487"></a>01487   <span class="comment">/* Cache Inode Initialisation */</span>
<a name="l01488"></a>01488   <span class="keywordflow">if</span>((fh_to_cache_entry_ht =
<a name="l01489"></a>01489       <a class="code" href="cache__inode__init_8c.html#a8f1debb2bb4d8a5ba0647fbe26105ea2" title="Initialize the caching layer.">cache_inode_init</a>(<a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>, &amp;cache_status)) == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01490"></a>01490     {
<a name="l01491"></a>01491       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01492"></a>01492                <span class="stringliteral">&quot;Cache Inode Layer could not be initialized, status=%s&quot;</span>,
<a name="l01493"></a>01493                <a class="code" href="cache__inode__misc_8c.html#afc3c484c168ba4be4e799b77a6454ea3">cache_inode_err_str</a>(cache_status));
<a name="l01494"></a>01494     }
<a name="l01495"></a>01495 
<a name="l01496"></a>01496   <span class="comment">/* Initialize thread control block */</span>
<a name="l01497"></a>01497   <a class="code" href="nfs__tcb_8h.html#a0c7e5fec18cbe9480aea0fa4632686de">tcb_head_init</a>();
<a name="l01498"></a>01498 
<a name="l01499"></a>01499 <span class="preprocessor">#ifdef _USE_BLOCKING_LOCKS</span>
<a name="l01500"></a>01500 <span class="preprocessor"></span>  <span class="keywordflow">if</span>(<a class="code" href="sal__functions_8h.html#aa664e4bb2b87ea1bdd2058188d4ae6ac">state_lock_init</a>(&amp;state_status,
<a name="l01501"></a>01501                      <a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.cookie_param)
<a name="l01502"></a>01502      != <a class="code" href="sal__data_8h.html#abaefb535451d8c22b6d4074d63effd5ba95fdd6b02cbc698e4bd1a4eafe1661ff">STATE_SUCCESS</a>)
<a name="l01503"></a>01503 <span class="preprocessor">#else</span>
<a name="l01504"></a>01504 <span class="preprocessor"></span>  <span class="keywordflow">if</span>(<a class="code" href="sal__functions_8h.html#aa664e4bb2b87ea1bdd2058188d4ae6ac">state_lock_init</a>(&amp;state_status)
<a name="l01505"></a>01505      != <a class="code" href="sal__data_8h.html#abaefb535451d8c22b6d4074d63effd5ba95fdd6b02cbc698e4bd1a4eafe1661ff">STATE_SUCCESS</a>)
<a name="l01506"></a>01506 <span class="preprocessor">#endif</span>
<a name="l01507"></a>01507 <span class="preprocessor"></span>    {
<a name="l01508"></a>01508       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01509"></a>01509                <span class="stringliteral">&quot;Cache Inode Layer could not be initialized, status=%s&quot;</span>,
<a name="l01510"></a>01510                <a class="code" href="sal__functions_8h.html#a5c251a49aca6c7d4fc07bcc9f925ec07">state_err_str</a>(state_status));
<a name="l01511"></a>01511     }
<a name="l01512"></a>01512   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Cache Inode library successfully initialized&quot;</span>);
<a name="l01513"></a>01513 
<a name="l01514"></a>01514   <span class="comment">/* Cache Inode LRU (call this here, rather than as part of</span>
<a name="l01515"></a>01515 <span class="comment">     cache_inode_init() so the GC policy has been set */</span>
<a name="l01516"></a>01516   <a class="code" href="cache__inode__lru_8c.html#a3867104f4ebef1bafec0d6f67a62b00b">cache_inode_lru_pkginit</a>();
<a name="l01517"></a>01517 
<a name="l01518"></a>01518 <span class="preprocessor">#ifdef _USE_NFS4_1</span>
<a name="l01519"></a>01519 <span class="preprocessor"></span>  <a class="code" href="sal__functions_8h.html#a82f475b20a335088c740abcaa4513020" title="The management of the session id cache.">nfs41_session_pool</a> = pool_init(<span class="stringliteral">&quot;NFSv4.1 session pool&quot;</span>,
<a name="l01520"></a>01520                                  <span class="keyword">sizeof</span>(<a class="code" href="structnfs41__session____.html">nfs41_session_t</a>),
<a name="l01521"></a>01521                                  pool_basic_substrate,
<a name="l01522"></a>01522                                  <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01523"></a>01523 <span class="preprocessor">#endif </span><span class="comment">/* _USE_NFS4_1 */</span>
<a name="l01524"></a>01524 
<a name="l01525"></a>01525   <a class="code" href="nfs__core_8h.html#a018598c904c79ffce5c8a8b997f9fc7c">request_pool</a> = pool_init(<span class="stringliteral">&quot;Request pool&quot;</span>,
<a name="l01526"></a>01526                            <span class="keyword">sizeof</span>(<a class="code" href="structrequest__data____.html">request_data_t</a>),
<a name="l01527"></a>01527                            pool_basic_substrate,
<a name="l01528"></a>01528                            <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l01529"></a>01529                            <a class="code" href="nfs__core_8h.html#a2ce48276283207f656c7475b2fcfdc5a">constructor_request_data_t</a>,
<a name="l01530"></a>01530                            <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01531"></a>01531   <span class="keywordflow">if</span>(!<a class="code" href="nfs__core_8h.html#a018598c904c79ffce5c8a8b997f9fc7c">request_pool</a>)
<a name="l01532"></a>01532     {
<a name="l01533"></a>01533       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01534"></a>01534               <span class="stringliteral">&quot;Error while allocating request pool&quot;</span>);
<a name="l01535"></a>01535       <a class="code" href="log_8h.html#a367b67f5a0b29160763c3ce8efce0875">LogError</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <a class="code" href="log_8h.html#ad9f6cff569b8aaff581efed5a643f26a">ERR_SYS</a>, <a class="code" href="log_8h.html#af5644a8648341ffd4c34f7fb77bf1781">ERR_MALLOC</a>, errno);
<a name="l01536"></a>01536       <a class="code" href="log_8h.html#a3e81b070000b7a60f6dc0bd9fb1c41f9">Fatal</a>();
<a name="l01537"></a>01537     }
<a name="l01538"></a>01538 
<a name="l01539"></a>01539   <a class="code" href="nfs__core_8h.html#abc74f9c5987eaf6c9af98852e40b4653">request_data_pool</a> = pool_init(<span class="stringliteral">&quot;Request Data Pool&quot;</span>,
<a name="l01540"></a>01540                                 <span class="keyword">sizeof</span>(<a class="code" href="structnfs__request__data____.html">nfs_request_data_t</a>),
<a name="l01541"></a>01541                                 pool_basic_substrate,
<a name="l01542"></a>01542                                 <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l01543"></a>01543                                 <a class="code" href="nfs__core_8h.html#ac4058719ae16e170e94396132d8e11ea">constructor_nfs_request_data_t</a>,
<a name="l01544"></a>01544                                 <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01545"></a>01545   <span class="keywordflow">if</span>(!<a class="code" href="nfs__core_8h.html#abc74f9c5987eaf6c9af98852e40b4653">request_data_pool</a>)
<a name="l01546"></a>01546     {
<a name="l01547"></a>01547       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01548"></a>01548               <span class="stringliteral">&quot;Error while allocating request data pool&quot;</span>);
<a name="l01549"></a>01549       <a class="code" href="log_8h.html#a367b67f5a0b29160763c3ce8efce0875">LogError</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <a class="code" href="log_8h.html#ad9f6cff569b8aaff581efed5a643f26a">ERR_SYS</a>, <a class="code" href="log_8h.html#af5644a8648341ffd4c34f7fb77bf1781">ERR_MALLOC</a>, errno);
<a name="l01550"></a>01550       <a class="code" href="log_8h.html#a3e81b070000b7a60f6dc0bd9fb1c41f9">Fatal</a>();
<a name="l01551"></a>01551     }
<a name="l01552"></a>01552 
<a name="l01553"></a>01553   <a class="code" href="nfs__core_8h.html#a120af9c25da978b5bec06f8ca0453219">dupreq_pool</a> = pool_init(<span class="stringliteral">&quot;Duplicate Request Pool&quot;</span>,
<a name="l01554"></a>01554                           <span class="keyword">sizeof</span>(<a class="code" href="structdupreq__entry____.html">dupreq_entry_t</a>),
<a name="l01555"></a>01555                           pool_basic_substrate,
<a name="l01556"></a>01556                           <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01557"></a>01557   <span class="keywordflow">if</span>(!(<a class="code" href="nfs__core_8h.html#a120af9c25da978b5bec06f8ca0453219">dupreq_pool</a>))
<a name="l01558"></a>01558     {
<a name="l01559"></a>01559       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01560"></a>01560               <span class="stringliteral">&quot;Error while allocating duplicate request pool&quot;</span>);
<a name="l01561"></a>01561       <a class="code" href="log_8h.html#a367b67f5a0b29160763c3ce8efce0875">LogError</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <a class="code" href="log_8h.html#ad9f6cff569b8aaff581efed5a643f26a">ERR_SYS</a>, <a class="code" href="log_8h.html#af5644a8648341ffd4c34f7fb77bf1781">ERR_MALLOC</a>, errno);
<a name="l01562"></a>01562       <a class="code" href="log_8h.html#a3e81b070000b7a60f6dc0bd9fb1c41f9">Fatal</a>();
<a name="l01563"></a>01563     }
<a name="l01564"></a>01564 
<a name="l01565"></a>01565   <a class="code" href="nfs__core_8h.html#ae764f3008acff52e16850c39adfd6eda">ip_stats_pool</a> = pool_init(<span class="stringliteral">&quot;IP Stats Cache Pool&quot;</span>,
<a name="l01566"></a>01566                             <span class="keyword">sizeof</span>(<a class="code" href="structnfs__ip__stats____.html">nfs_ip_stats_t</a>),
<a name="l01567"></a>01567                             pool_basic_substrate,
<a name="l01568"></a>01568                             <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01569"></a>01569 
<a name="l01570"></a>01570   <span class="keywordflow">if</span>(!(<a class="code" href="nfs__core_8h.html#ae764f3008acff52e16850c39adfd6eda">ip_stats_pool</a>))
<a name="l01571"></a>01571     {
<a name="l01572"></a>01572       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01573"></a>01573               <span class="stringliteral">&quot;Error while allocating IP stats cache pool&quot;</span>);
<a name="l01574"></a>01574       <a class="code" href="log_8h.html#a367b67f5a0b29160763c3ce8efce0875">LogError</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <a class="code" href="log_8h.html#ad9f6cff569b8aaff581efed5a643f26a">ERR_SYS</a>, <a class="code" href="log_8h.html#af5644a8648341ffd4c34f7fb77bf1781">ERR_MALLOC</a>, errno);
<a name="l01575"></a>01575       <a class="code" href="log_8h.html#a3e81b070000b7a60f6dc0bd9fb1c41f9">Fatal</a>();
<a name="l01576"></a>01576     }
<a name="l01577"></a>01577 
<a name="l01578"></a>01578 <span class="preprocessor">#ifdef _USE_ASYNC_CACHE_INODE</span>
<a name="l01579"></a>01579 <span class="preprocessor"></span>  <span class="comment">/* Start the TAD and synclets for writeback cache inode */</span>
<a name="l01580"></a>01580   cache_inode_async_init(nfs_param.cache_layers_param.cache_inode_client_param);
<a name="l01581"></a>01581 <span class="preprocessor">#endif</span>
<a name="l01582"></a>01582 <span class="preprocessor"></span>
<a name="l01583"></a>01583   <span class="comment">/* If rpcsec_gss is used, set the path to the keytab */</span>
<a name="l01584"></a>01584 <span class="preprocessor">#ifdef _HAVE_GSSAPI</span>
<a name="l01585"></a>01585 <span class="preprocessor"></span><span class="preprocessor">#ifdef HAVE_KRB5</span>
<a name="l01586"></a>01586 <span class="preprocessor"></span>  <span class="keywordflow">if</span>(nfs_param.krb5_param.active_krb5)
<a name="l01587"></a>01587     {
<a name="l01588"></a>01588       OM_uint32 gss_status = GSS_S_COMPLETE;
<a name="l01589"></a>01589 
<a name="l01590"></a>01590       <span class="keywordflow">if</span>(nfs_param.krb5_param.keytab[0] != <span class="charliteral">&#39;\0&#39;</span>)
<a name="l01591"></a>01591         gss_status = krb5_gss_register_acceptor_identity(nfs_param.krb5_param.keytab);
<a name="l01592"></a>01592 
<a name="l01593"></a>01593       <span class="keywordflow">if</span>(gss_status != GSS_S_COMPLETE)
<a name="l01594"></a>01594         {
<a name="l01595"></a>01595           <a class="code" href="Svc__auth__gss_8c.html#a9ba8b087d44bb0ba38b434c708540406">log_sperror_gss</a>(GssError, gss_status, 0);
<a name="l01596"></a>01596           <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01597"></a>01597                    <span class="stringliteral">&quot;Error setting krb5 keytab to value %s is %s&quot;</span>,
<a name="l01598"></a>01598                    nfs_param.krb5_param.keytab, GssError);
<a name="l01599"></a>01599         }
<a name="l01600"></a>01600       <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;krb5 keytab path successfully set to %s&quot;</span>,
<a name="l01601"></a>01601               nfs_param.krb5_param.keytab);
<a name="l01602"></a>01602 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_KRB5 */</span>
<a name="l01603"></a>01603 
<a name="l01604"></a>01604       <span class="comment">/* Set up principal to be use for GSSAPPI within GSSRPC/KRB5 */</span>
<a name="l01605"></a>01605       gss_service_buf.value = nfs_param.krb5_param.svc.principal;
<a name="l01606"></a>01606       gss_service_buf.length = strlen(nfs_param.krb5_param.svc.principal) + 1;      <span class="comment">/* The &#39;+1&#39; is not to be forgotten, for the &#39;\0&#39; at the end */</span>
<a name="l01607"></a>01607 
<a name="l01608"></a>01608       maj_stat = gss_import_name(&amp;min_stat,
<a name="l01609"></a>01609                                  &amp;gss_service_buf,
<a name="l01610"></a>01610                                  (gss_OID) GSS_C_NT_HOSTBASED_SERVICE,
<a name="l01611"></a>01611                                  &amp;nfs_param.krb5_param.svc.gss_name);
<a name="l01612"></a>01612       <span class="keywordflow">if</span>(maj_stat != GSS_S_COMPLETE)
<a name="l01613"></a>01613         {
<a name="l01614"></a>01614           <a class="code" href="Svc__auth__gss_8c.html#a9ba8b087d44bb0ba38b434c708540406">log_sperror_gss</a>(GssError, maj_stat, min_stat);
<a name="l01615"></a>01615           <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01616"></a>01616                    <span class="stringliteral">&quot;Error importing gss principal %s is %s&quot;</span>,
<a name="l01617"></a>01617                    nfs_param.krb5_param.svc.principal, GssError);
<a name="l01618"></a>01618         }
<a name="l01619"></a>01619 
<a name="l01620"></a>01620       <span class="keywordflow">if</span> (nfs_param.krb5_param.svc.gss_name == GSS_C_NO_NAME)
<a name="l01621"></a>01621           <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Regression:  svc.gss_name == GSS_C_NO_NAME&quot;</span>);
<a name="l01622"></a>01622 
<a name="l01623"></a>01623       <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,  <span class="stringliteral">&quot;gss principal \&quot;%s\&quot; successfully set&quot;</span>,
<a name="l01624"></a>01624               nfs_param.krb5_param.svc.principal);
<a name="l01625"></a>01625 
<a name="l01626"></a>01626       <span class="comment">/* Set the principal to GSSRPC */</span>
<a name="l01627"></a>01627       <span class="keywordflow">if</span>(!<a class="code" href="Svc__auth__gss_8c.html#af16e31105547dfb96f8e93c1b8b7110e">Svcauth_gss_set_svc_name</a>(nfs_param.krb5_param.svc.gss_name))
<a name="l01628"></a>01628         {
<a name="l01629"></a>01629           <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Impossible to set gss principal to GSSRPC&quot;</span>);
<a name="l01630"></a>01630         }
<a name="l01631"></a>01631 
<a name="l01632"></a>01632       <span class="comment">/* Don&#39;t release name until shutdown, it will be used by the</span>
<a name="l01633"></a>01633 <span class="comment">       * backchannel. */</span>
<a name="l01634"></a>01634 
<a name="l01635"></a>01635       <span class="comment">/* Init the HashTable */</span>
<a name="l01636"></a>01636       <span class="keywordflow">if</span>(<a class="code" href="AuthGss__HashTable_8c.html#af4ede3fb5b57d2af5e1585e7691060dc">Gss_ctx_Hash_Init</a>(nfs_param.krb5_param) == -1)
<a name="l01637"></a>01637         {
<a name="l01638"></a>01638           <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Impossible to init GSS CTX cache&quot;</span>);
<a name="l01639"></a>01639         }
<a name="l01640"></a>01640       <span class="keywordflow">else</span>
<a name="l01641"></a>01641         <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Gss Context Cache successfully initialized&quot;</span>);
<a name="l01642"></a>01642 
<a name="l01643"></a>01643 <span class="preprocessor">#ifdef HAVE_KRB5</span>
<a name="l01644"></a>01644 <span class="preprocessor"></span>    }                           <span class="comment">/*  if( nfs_param.krb5_param.active_krb5 ) */</span>
<a name="l01645"></a>01645 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_KRB5 */</span>
<a name="l01646"></a>01646 <span class="preprocessor">#endif </span><span class="comment">/* _HAVE_GSSAPI */</span>
<a name="l01647"></a>01647 
<a name="l01648"></a>01648   <span class="comment">/* RPC Initialisation - exits on failure*/</span>
<a name="l01649"></a>01649   <a class="code" href="nfs__core_8h.html#afe2bd0f19315f6634f05be2ac94d15d2">nfs_Init_svc</a>();
<a name="l01650"></a>01650   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,  <span class="stringliteral">&quot;RPC ressources successfully initialized&quot;</span>);
<a name="l01651"></a>01651 
<a name="l01652"></a>01652   <span class="comment">/* Worker initialisation */</span>
<a name="l01653"></a>01653   <span class="keywordflow">if</span>((workers_data =
<a name="l01654"></a>01654       gsh_calloc(nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a689e0b5711184d8c694d2f95e8643946">nb_worker</a>,
<a name="l01655"></a>01655                  <span class="keyword">sizeof</span>(<a class="code" href="structnfs__worker__data____.html">nfs_worker_data_t</a>))) == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01656"></a>01656     {
<a name="l01657"></a>01657       <a class="code" href="log_8h.html#a367b67f5a0b29160763c3ce8efce0875">LogError</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <a class="code" href="log_8h.html#ad9f6cff569b8aaff581efed5a643f26a">ERR_SYS</a>, <a class="code" href="log_8h.html#af5644a8648341ffd4c34f7fb77bf1781">ERR_MALLOC</a>, errno);
<a name="l01658"></a>01658       <a class="code" href="log_8h.html#a3e81b070000b7a60f6dc0bd9fb1c41f9">Fatal</a>();
<a name="l01659"></a>01659     }
<a name="l01660"></a>01660   <span class="keywordflow">if</span>(<a class="code" href="nfs__core_8h.html#a47e8bde054e96db98693ae1d2d74cd43">nfs_Init_gc_counter</a>() != 0)
<a name="l01661"></a>01661     {
<a name="l01662"></a>01662       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Error while initializing worker gc counter&quot;</span>);
<a name="l01663"></a>01663     }
<a name="l01664"></a>01664   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;worker gc counter successfully initialized&quot;</span>);
<a name="l01665"></a>01665 
<a name="l01666"></a>01666   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Initializing workers data structure&quot;</span>);
<a name="l01667"></a>01667 
<a name="l01668"></a>01668   <span class="keywordflow">for</span>(i = 0; i &lt; nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a689e0b5711184d8c694d2f95e8643946">nb_worker</a>; i++)
<a name="l01669"></a>01669     {
<a name="l01670"></a>01670       <span class="keywordtype">char</span> <a class="code" href="mount_8h.html#a2946c588fc7fa2fa5b43ac54b7872725">name</a>[256];
<a name="l01671"></a>01671 
<a name="l01672"></a>01672       <span class="comment">/* Set the index (mostly used for debug purpose */</span>
<a name="l01673"></a>01673       workers_data[i].<a class="code" href="structnfs__worker__data____.html#aa3b3a13558358ef3e6209d8c1f8f91ce">worker_index</a> = i;
<a name="l01674"></a>01674 
<a name="l01675"></a>01675       <span class="comment">/* Fill in workers fields (semaphores and other stangenesses */</span>
<a name="l01676"></a>01676       <span class="keywordflow">if</span>(<a class="code" href="nfs__core_8h.html#a54da0e0072dd8137cb2f1ad3e70fe786">nfs_Init_worker_data</a>(&amp;(workers_data[i])) != 0)
<a name="l01677"></a>01677         <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01678"></a>01678                  <span class="stringliteral">&quot;Error while initializing worker data #%d&quot;</span>, i);
<a name="l01679"></a>01679 
<a name="l01680"></a>01680       sprintf(name, <span class="stringliteral">&quot;IP Stats for worker %d&quot;</span>, i);
<a name="l01681"></a>01681       nfs_param.<a class="code" href="structnfs__param____.html#aed160b6e7c80a7748e42781b80e09c89">ip_stats_param</a>.<a class="code" href="structnfs__ip__stats__param____.html#a07a0c696e571f6b54311752613fcb221">hash_param</a>.<a class="code" href="structhash__param.html#a99a674ccdf3ec04a7d35689c0c9d90b2">ht_name</a> = gsh_strdup(name);
<a name="l01682"></a>01682       ht_ip_stats[i] = <a class="code" href="nfs__core_8h.html#a0d8c2547a2519ab8d1fdc0639ee3fe2a">nfs_Init_ip_stats</a>(nfs_param.<a class="code" href="structnfs__param____.html#aed160b6e7c80a7748e42781b80e09c89">ip_stats_param</a>);
<a name="l01683"></a>01683 
<a name="l01684"></a>01684       <span class="keywordflow">if</span>(ht_ip_stats[i] == <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01685"></a>01685         <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01686"></a>01686                  <span class="stringliteral">&quot;Error while initializing IP/stats cache #%d&quot;</span>, i);
<a name="l01687"></a>01687 
<a name="l01688"></a>01688       workers_data[i].<a class="code" href="structnfs__worker__data____.html#a9aeb8c9c91b24d8a777c7aade7ea8f93">ht_ip_stats</a> = ht_ip_stats[i];
<a name="l01689"></a>01689       <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;worker data #%d successfully initialized&quot;</span>, i);
<a name="l01690"></a>01690     }                           <span class="comment">/* for i */</span>
<a name="l01691"></a>01691 
<a name="l01692"></a>01692   <span class="comment">/* Admin initialisation */</span>
<a name="l01693"></a>01693   <a class="code" href="nfs__core_8h.html#a75b09eaf4a0b03a20f845ecaab438cbf">nfs_Init_admin_data</a>();
<a name="l01694"></a>01694 
<a name="l01695"></a>01695   <span class="comment">/* Set the stats to zero */</span>
<a name="l01696"></a>01696   <a class="code" href="nfs__core_8h.html#a6f0c6ccf6a41145e7475a1d486047a09">nfs_reset_stats</a>();
<a name="l01697"></a>01697 
<a name="l01698"></a>01698   <span class="comment">/* Creates the pseudo fs */</span>
<a name="l01699"></a>01699   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Now building pseudo fs&quot;</span>);
<a name="l01700"></a>01700   <span class="keywordflow">if</span>((rc = <a class="code" href="group__NFSprocs.html#gae156eb83a5dac9ae260de16c6b39799a">nfs4_ExportToPseudoFS</a>(nfs_param.<a class="code" href="structnfs__param____.html#ac8fc09bcd317cc133cd1f8b6b3478aa3">pexportlist</a>)) != 0)
<a name="l01701"></a>01701     <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01702"></a>01702              <span class="stringliteral">&quot;Error %d while initializing NFSv4 pseudo file system&quot;</span>, rc);
<a name="l01703"></a>01703 
<a name="l01704"></a>01704   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01705"></a>01705           <span class="stringliteral">&quot;NFSv4 pseudo file system successfully initialized&quot;</span>);
<a name="l01706"></a>01706 
<a name="l01707"></a>01707   <span class="comment">/* Init duplicate request cache */</span>
<a name="l01708"></a>01708   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Now building duplicate request hash table cache&quot;</span>);
<a name="l01709"></a>01709   <span class="keywordflow">if</span>((rc = <a class="code" href="nfs__core_8h.html#a0e0c7a1fda2f7d756dd1b2f8b4f97db6">nfs_Init_dupreq</a>(nfs_param.<a class="code" href="structnfs__param____.html#a2d21ff3785e77c12c78e362edf40d159">dupreq_param</a>)) != <a class="code" href="nfs__dupreq_8h.html#a8f699cea0366b683501fe91a4dbc37faa081a1934d0972db9961d46f25d264ff9">DUPREQ_SUCCESS</a>)
<a name="l01710"></a>01710     {
<a name="l01711"></a>01711       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01712"></a>01712                <span class="stringliteral">&quot;Error %d while initializing duplicate request hash table cache&quot;</span>,
<a name="l01713"></a>01713                rc);
<a name="l01714"></a>01714     }
<a name="l01715"></a>01715   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01716"></a>01716           <span class="stringliteral">&quot;duplicate request hash table cache successfully initialized&quot;</span>);
<a name="l01717"></a>01717 
<a name="l01718"></a>01718   <span class="comment">/* Init the IP/name cache */</span>
<a name="l01719"></a>01719   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Now building IP/name cache&quot;</span>);
<a name="l01720"></a>01720   <span class="keywordflow">if</span>(<a class="code" href="nfs__core_8h.html#a612791deebb45def97a52c9f3a938435">nfs_Init_ip_name</a>(nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>) != <a class="code" href="nfs__ip__stats_8h.html#ac0454d9757d79c6cd9cf9e67a5314f6b">IP_NAME_SUCCESS</a>)
<a name="l01721"></a>01721     {
<a name="l01722"></a>01722       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01723"></a>01723                <span class="stringliteral">&quot;Error while initializing IP/name cache&quot;</span>);
<a name="l01724"></a>01724     }
<a name="l01725"></a>01725   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01726"></a>01726           <span class="stringliteral">&quot;IP/name cache successfully initialized&quot;</span>);
<a name="l01727"></a>01727 
<a name="l01728"></a>01728   <span class="comment">/* Init the UID_MAPPER cache */</span>
<a name="l01729"></a>01729   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Now building UID_MAPPER cache&quot;</span>);
<a name="l01730"></a>01730   <span class="keywordflow">if</span>((<a class="code" href="idmapper__cache_8c.html#abf9c2ab28fa414eb449b28eaaf3112ba">idmap_uid_init</a>(nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>) != <a class="code" href="nfs__core_8h.html#a4369e01e90c47aa791ed4fb00d60b95f">ID_MAPPER_SUCCESS</a>) ||
<a name="l01731"></a>01731      (<a class="code" href="idmapper__cache_8c.html#a05807941c6f652ce30fea46008172f1f">idmap_uname_init</a>(nfs_param.<a class="code" href="structnfs__param____.html#a12540d79fdd3dc040fe287c7b2aa8209">unamemap_cache_param</a>) != <a class="code" href="nfs__core_8h.html#a4369e01e90c47aa791ed4fb00d60b95f">ID_MAPPER_SUCCESS</a>))
<a name="l01732"></a>01732     {
<a name="l01733"></a>01733       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01734"></a>01734                <span class="stringliteral">&quot;Error while initializing UID_MAPPER cache&quot;</span>);
<a name="l01735"></a>01735     }
<a name="l01736"></a>01736   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01737"></a>01737           <span class="stringliteral">&quot;UID_MAPPER cache successfully initialized&quot;</span>);
<a name="l01738"></a>01738 
<a name="l01739"></a>01739   <span class="comment">/* Init the UIDGID MAPPER Cache */</span>
<a name="l01740"></a>01740   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01741"></a>01741            <span class="stringliteral">&quot;Now building UIDGID MAPPER Cache (for RPCSEC_GSS)&quot;</span>);
<a name="l01742"></a>01742   <span class="keywordflow">if</span>(<a class="code" href="idmapper__cache_8c.html#a0925c482c1d623eaabbe130c2c3f1fc3">uidgidmap_init</a>(nfs_param.<a class="code" href="structnfs__param____.html#a7fbe4b193eb53f095faca50ba7999ec9">uidgidmap_cache_param</a>) != <a class="code" href="nfs__core_8h.html#a4369e01e90c47aa791ed4fb00d60b95f">ID_MAPPER_SUCCESS</a>)
<a name="l01743"></a>01743     {
<a name="l01744"></a>01744       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01745"></a>01745               <span class="stringliteral">&quot;Error while initializing UIDGID_MAPPER cache&quot;</span>);
<a name="l01746"></a>01746     }
<a name="l01747"></a>01747   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01748"></a>01748           <span class="stringliteral">&quot;UIDGID_MAPPER cache successfully initialized&quot;</span>);
<a name="l01749"></a>01749 
<a name="l01750"></a>01750   <span class="comment">/* Init the GID_MAPPER cache */</span>
<a name="l01751"></a>01751   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Now building GID_MAPPER cache&quot;</span>);
<a name="l01752"></a>01752   <span class="keywordflow">if</span>((<a class="code" href="idmapper__cache_8c.html#a2631dd65acc2e38bb9719c4c9fd75193">idmap_gid_init</a>(nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>) != <a class="code" href="nfs__core_8h.html#a4369e01e90c47aa791ed4fb00d60b95f">ID_MAPPER_SUCCESS</a>) ||
<a name="l01753"></a>01753      (<a class="code" href="idmapper__cache_8c.html#ae0cd9a5dca7f19fb5daa33e69607b32b">idmap_gname_init</a>(nfs_param.<a class="code" href="structnfs__param____.html#af1690c4fb881801c68310e1f4478e662">gnamemap_cache_param</a>) != <a class="code" href="nfs__core_8h.html#a4369e01e90c47aa791ed4fb00d60b95f">ID_MAPPER_SUCCESS</a>))
<a name="l01754"></a>01754     {
<a name="l01755"></a>01755       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01756"></a>01756                <span class="stringliteral">&quot;Error while initializing GID_MAPPER cache&quot;</span>);
<a name="l01757"></a>01757     }
<a name="l01758"></a>01758   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01759"></a>01759           <span class="stringliteral">&quot;GID_MAPPER cache successfully initialized&quot;</span>);
<a name="l01760"></a>01760 
<a name="l01761"></a>01761   <span class="comment">/* Init the NFSv4 Clientid cache */</span>
<a name="l01762"></a>01762   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Now building NFSv4 clientid cache&quot;</span>);
<a name="l01763"></a>01763   <span class="keywordflow">if</span>(<a class="code" href="sal__functions_8h.html#a512fb8b9e84633a7c23ff870f2658593">nfs_Init_client_id</a>(&amp;nfs_param.<a class="code" href="structnfs__param____.html#a634fbf1a5e33df7c835475485c9413d3">client_id_param</a>) != <a class="code" href="sal__data_8h.html#a71debec22b9259ec1caf65ae732cf776">CLIENT_ID_SUCCESS</a>)
<a name="l01764"></a>01764     {
<a name="l01765"></a>01765       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01766"></a>01766                <span class="stringliteral">&quot;Error while initializing NFSv4 clientid cache&quot;</span>);
<a name="l01767"></a>01767     }
<a name="l01768"></a>01768   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01769"></a>01769           <span class="stringliteral">&quot;NFSv4 clientid cache successfully initialized&quot;</span>);
<a name="l01770"></a>01770 
<a name="l01771"></a>01771   <span class="comment">/* Init The NFSv4 State id cache */</span>
<a name="l01772"></a>01772   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Now building NFSv4 State Id cache&quot;</span>);
<a name="l01773"></a>01773   <span class="keywordflow">if</span>(<a class="code" href="sal__functions_8h.html#aa0f78aa0d98143a0150de4735567dd73">nfs4_Init_state_id</a>(nfs_param.<a class="code" href="structnfs__param____.html#a4c7b54bb08eca0018b3461e35fb6cb21">state_id_param</a>) != 0)
<a name="l01774"></a>01774     {
<a name="l01775"></a>01775       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01776"></a>01776                <span class="stringliteral">&quot;Error while initializing NFSv4 State Id cache&quot;</span>);
<a name="l01777"></a>01777     }
<a name="l01778"></a>01778   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01779"></a>01779           <span class="stringliteral">&quot;NFSv4 State Id cache successfully initialized&quot;</span>);
<a name="l01780"></a>01780 
<a name="l01781"></a>01781   <span class="comment">/* Init The NFSv4 Open Owner cache */</span>
<a name="l01782"></a>01782   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Now building NFSv4 Owner cache&quot;</span>);
<a name="l01783"></a>01783   <span class="keywordflow">if</span>(<a class="code" href="sal__functions_8h.html#ac21a11eb0de64bbc1f46baab8b7b718a">Init_nfs4_owner</a>(nfs_param.<a class="code" href="structnfs__param____.html#acda4eb9229233ac78ac2501e5e63443c">nfs4_owner_param</a>) != 0)
<a name="l01784"></a>01784     {
<a name="l01785"></a>01785       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01786"></a>01786                <span class="stringliteral">&quot;Error while initializing NFSv4 Owner cache&quot;</span>);
<a name="l01787"></a>01787     }
<a name="l01788"></a>01788   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01789"></a>01789           <span class="stringliteral">&quot;NFSv4 Open Owner cache successfully initialized&quot;</span>);
<a name="l01790"></a>01790 
<a name="l01791"></a>01791 <span class="preprocessor">#ifdef _USE_NLM</span>
<a name="l01792"></a>01792 <span class="preprocessor"></span>  <span class="comment">/* Init The NLM Owner cache */</span>
<a name="l01793"></a>01793   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Now building NLM Owner cache&quot;</span>);
<a name="l01794"></a>01794   <span class="keywordflow">if</span>(<a class="code" href="nlm__owner_8c.html#a4ef498dee5553531c371500c37a3b27b">Init_nlm_hash</a>() != 0)
<a name="l01795"></a>01795     {
<a name="l01796"></a>01796       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01797"></a>01797                <span class="stringliteral">&quot;Error while initializing NLM Owner cache&quot;</span>);
<a name="l01798"></a>01798     }
<a name="l01799"></a>01799   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01800"></a>01800           <span class="stringliteral">&quot;NLM Owner cache successfully initialized&quot;</span>);
<a name="l01801"></a>01801   <a class="code" href="nlm4_8h.html#a83e0ed0f5d94799ddde971f674adaf60">nlm_init</a>();
<a name="l01802"></a>01802 <span class="preprocessor">#endif</span>
<a name="l01803"></a>01803 <span class="preprocessor"></span>
<a name="l01804"></a>01804 <span class="preprocessor">#ifdef _USE_9P</span>
<a name="l01805"></a>01805 <span class="preprocessor"></span>  <span class="comment">/* Init the 9P lock owner cache */</span>
<a name="l01806"></a>01806   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Now building 9P Owner cache&quot;</span>);
<a name="l01807"></a>01807   <span class="keywordflow">if</span>(<a class="code" href="9p__owner_8c.html#a96c62ef3e56d4f92c9d012584f29eccd">Init_9p_hash</a>() != 0)
<a name="l01808"></a>01808     {
<a name="l01809"></a>01809       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01810"></a>01810                <span class="stringliteral">&quot;Error while initializing 9P Owner cache&quot;</span>);
<a name="l01811"></a>01811     }
<a name="l01812"></a>01812   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01813"></a>01813           <span class="stringliteral">&quot;9P Owner cache successfully initialized&quot;</span>);
<a name="l01814"></a>01814 <span class="preprocessor">#endif </span>
<a name="l01815"></a>01815 <span class="preprocessor"></span>
<a name="l01816"></a>01816 <span class="preprocessor">#ifdef _USE_NFS4_1</span>
<a name="l01817"></a>01817 <span class="preprocessor"></span>  <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Now building NFSv4 Session Id cache&quot;</span>);
<a name="l01818"></a>01818   <span class="keywordflow">if</span>(<a class="code" href="nfs41__session__id_8c.html#a8ccd4e57fff2517797ac16cbabe80784">nfs41_Init_session_id</a>(nfs_param.session_id_param) != 0)
<a name="l01819"></a>01819     {
<a name="l01820"></a>01820       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01821"></a>01821                <span class="stringliteral">&quot;Error while initializing NFSv4 Session Id cache&quot;</span>);
<a name="l01822"></a>01822     }
<a name="l01823"></a>01823   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01824"></a>01824           <span class="stringliteral">&quot;NFSv4 Session Id cache successfully initialized&quot;</span>);
<a name="l01825"></a>01825 <span class="preprocessor">#endif</span>
<a name="l01826"></a>01826 <span class="preprocessor"></span>
<a name="l01827"></a>01827 <span class="preprocessor">#ifdef _USE_NFS4_ACL</span>
<a name="l01828"></a>01828 <span class="preprocessor"></span>  <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Now building NFSv4 ACL cache&quot;</span>);
<a name="l01829"></a>01829   <span class="keywordflow">if</span>(<a class="code" href="nfs4__acls_8h.html#a8da9d3931a0f828921d83c4a1a8aa2a5">nfs4_acls_init</a>() != 0)
<a name="l01830"></a>01830     {
<a name="l01831"></a>01831       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01832"></a>01832               <span class="stringliteral">&quot;Error while initializing NFSv4 ACLs&quot;</span>);
<a name="l01833"></a>01833       exit(1);
<a name="l01834"></a>01834     }
<a name="l01835"></a>01835   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01836"></a>01836           <span class="stringliteral">&quot;NFSv4 ACL cache successfully initialized&quot;</span>);
<a name="l01837"></a>01837 <span class="preprocessor">#endif                          </span><span class="comment">/* _USE_NFS4_ACL */</span>
<a name="l01838"></a>01838 
<a name="l01839"></a>01839 <span class="preprocessor">#ifdef _USE_9P</span>
<a name="l01840"></a>01840 <span class="preprocessor"></span>  <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Now building 9P resources&quot;</span>);
<a name="l01841"></a>01841   <span class="keywordflow">if</span>( <a class="code" href="9p_8h.html#ae3216881cff0207498d3693ad47007f9">_9p_init</a>( &amp;nfs_param._9p_param ) )
<a name="l01842"></a>01842     {
<a name="l01843"></a>01843       <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01844"></a>01844               <span class="stringliteral">&quot;Error while initializing 9P Resources&quot;</span>);
<a name="l01845"></a>01845       exit(1);
<a name="l01846"></a>01846     }
<a name="l01847"></a>01847   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01848"></a>01848           <span class="stringliteral">&quot;9P resources successfully initialized&quot;</span>);
<a name="l01849"></a>01849 <span class="preprocessor">#endif </span><span class="comment">/* _USE_9P */</span>
<a name="l01850"></a>01850 
<a name="l01851"></a>01851   <span class="comment">/* Create the root entries for each exported FS */</span>
<a name="l01852"></a>01852   <span class="keywordflow">if</span>((rc = <a class="code" href="nfs__core_8h.html#a9551dfa57fa51795f5293d540a9671f0">nfs_export_create_root_entry</a>(nfs_param.<a class="code" href="structnfs__param____.html#ac8fc09bcd317cc133cd1f8b6b3478aa3">pexportlist</a>)) != <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
<a name="l01853"></a>01853     {
<a name="l01854"></a>01854       <a class="code" href="log_8h.html#a4566d092fb3fb47391fec6b878e8aa7b">LogFatal</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01855"></a>01855                <span class="stringliteral">&quot;Error initializing Cache Inode root entries&quot;</span>);
<a name="l01856"></a>01856     }
<a name="l01857"></a>01857 
<a name="l01858"></a>01858   <span class="comment">/* Creation of FSAL_UP threads */</span>
<a name="l01859"></a>01859   <span class="comment">/* This thread depends on ALL parts of Ganesha being initialized. </span>
<a name="l01860"></a>01860 <span class="comment">   * So initialize Callback interface after everything else. */</span>
<a name="l01861"></a>01861 <span class="preprocessor">#ifdef _USE_FSAL_UP</span>
<a name="l01862"></a>01862 <span class="preprocessor"></span>  <a class="code" href="fsal__up__thread_8c.html#a3a82cb848f3a90a765214de260d0434f">nfs_Init_FSAL_UP</a>(); <span class="comment">/* initalizes an event pool */</span>
<a name="l01863"></a>01863 <span class="preprocessor">#endif </span><span class="comment">/* _USE_FSAL_UP */</span>
<a name="l01864"></a>01864 
<a name="l01865"></a>01865   <span class="comment">/* Create stable storage directory, this should not be necessary */</span>
<a name="l01866"></a>01866   <a class="code" href="sal__functions_8h.html#ac9217611c03e7c7101d43a5c607cf459">nfs4_create_recov_dir</a>();
<a name="l01867"></a>01867 
<a name="l01868"></a>01868   <span class="comment">/* initialize grace and read in the client IDs */</span>
<a name="l01869"></a>01869   <a class="code" href="sal__functions_8h.html#a4e874ffc4b9c8a8e4e4c963874def5f3">nfs4_init_grace</a>();
<a name="l01870"></a>01870   <a class="code" href="sal__functions_8h.html#a966affe70dbf9aa0ce9128f1b6f4db46">nfs4_load_recov_clids</a>(0);
<a name="l01871"></a>01871 
<a name="l01872"></a>01872   <span class="comment">/* Start grace period */</span>
<a name="l01873"></a>01873   <a class="code" href="sal__functions_8h.html#abff493df2389256ea094d89d7ffd66d2">nfs4_start_grace</a>(<a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01874"></a>01874 
<a name="l01875"></a>01875   <a class="code" href="log_8h.html#a12ce2d8580101872ee848b50b59252ae">LogInfo</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l01876"></a>01876           <span class="stringliteral">&quot;Cache Inode root entries successfully created&quot;</span>);
<a name="l01877"></a>01877 
<a name="l01878"></a>01878   <span class="comment">/* Set accesscheck_support value to FSAL context object. */</span>
<a name="l01879"></a>01879 <span class="preprocessor">#ifdef _USE_NFS4_ACL</span>
<a name="l01880"></a>01880 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (nfs_param.<a class="code" href="structnfs__param____.html#ac8fc09bcd317cc133cd1f8b6b3478aa3">pexportlist</a>)
<a name="l01881"></a>01881     {
<a name="l01882"></a>01882       nfs_param.<a class="code" href="structnfs__param____.html#ac8fc09bcd317cc133cd1f8b6b3478aa3">pexportlist</a>-&gt;<a class="code" href="structexportlist____.html#abbe82cf495253f375cd7f4bf47406aca">FS_export_context</a>
<a name="l01883"></a>01883            .<a class="code" href="structfsal__export__context____.html#a70839eaa0e8abf7bb73887260a349f24">fe_static_fs_info</a>-&gt;<a class="code" href="structfsal__staticfsinfo__t.html#a0d504c716adc9c2a86304c0ac00e3c6b">accesscheck_support</a>
<a name="l01884"></a>01884            = !<a class="code" href="cache__inode__misc_8c.html#a5a0812544a4c46658121a4df772b4114">cache_inode_params</a>.<a class="code" href="structcache__inode__parameter____.html#a802c4e84e8611eb415a9534390e4e20a">use_test_access</a>;
<a name="l01885"></a>01885       <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;accesscheck_support is set to %d&quot;</span>,
<a name="l01886"></a>01886            nfs_param.<a class="code" href="structnfs__param____.html#ac8fc09bcd317cc133cd1f8b6b3478aa3">pexportlist</a>-&gt;<a class="code" href="structexportlist____.html#abbe82cf495253f375cd7f4bf47406aca">FS_export_context</a>.<a class="code" href="structfsal__export__context____.html#a70839eaa0e8abf7bb73887260a349f24">fe_static_fs_info</a>-&gt;<a class="code" href="structfsal__staticfsinfo__t.html#a0d504c716adc9c2a86304c0ac00e3c6b">accesscheck_support</a>);
<a name="l01887"></a>01887     }
<a name="l01888"></a>01888 <span class="preprocessor">#endif</span>
<a name="l01889"></a>01889 <span class="preprocessor"></span>
<a name="l01890"></a>01890      <span class="comment">/* callback dispatch */</span>
<a name="l01891"></a>01891      <a class="code" href="nfs__rpc__callback_8h.html#a527a94860db82315e61213bcb8a7d90f">nfs_rpc_cb_pkginit</a>();
<a name="l01892"></a>01892 <span class="preprocessor">#ifdef _USE_CB_SIMULATOR</span>
<a name="l01893"></a>01893 <span class="preprocessor"></span>     <a class="code" href="nfs__rpc__callback__simulator_8h.html#a6d9b53790dc331eac51e406529f19af8">nfs_rpc_cbsim_pkginit</a>();
<a name="l01894"></a>01894 <span class="preprocessor">#endif      </span><span class="comment">/*  _USE_CB_SIMULATOR */</span>
<a name="l01895"></a>01895 
<a name="l01896"></a>01896 }                               <span class="comment">/* nfs_Init */</span>
<a name="l01897"></a>01897 
<a name="l01902"></a><a class="code" href="nfs__init_8h.html#aa368501e32b36967dd1ba2727f72b672">01902</a> <span class="keywordtype">void</span> <a class="code" href="nfs__init_8c.html#aa368501e32b36967dd1ba2727f72b672">nfs_start</a>(<a class="code" href="struct____nfs__start__info.html">nfs_start_info_t</a> * p_start_info)
<a name="l01903"></a>01903 {
<a name="l01904"></a>01904   <span class="keyword">struct </span>rlimit ulimit_data;
<a name="l01905"></a>01905 
<a name="l01906"></a>01906 <span class="preprocessor">#if 0</span>
<a name="l01907"></a>01907 <span class="preprocessor"></span>  <span class="comment">/* Will remain as long as all FSAL are not yet in new format */</span>
<a name="l01908"></a>01908   printf(<span class="stringliteral">&quot;---&gt; fsal_handle_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="unioncephfsal__handle__t.html">cephfsal_handle_t</a>));
<a name="l01909"></a>01909   printf(<span class="stringliteral">&quot;---&gt; fsal_op_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structfsal__op__context____.html">cephfsal_op_context_t</a>));
<a name="l01910"></a>01910   printf(<span class="stringliteral">&quot;---&gt; fsal_file_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structcephfsal__file__t.html">cephfsal_file_t</a>));
<a name="l01911"></a>01911   printf(<span class="stringliteral">&quot;---&gt; fsal_dir_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structcephfsal__dir__t.html">cephfsal_dir_t</a>));
<a name="l01912"></a>01912   printf(<span class="stringliteral">&quot;---&gt; fsal_export_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structfsal__export__context____.html">cephfsal_export_context_t</a>));
<a name="l01913"></a>01913   printf(<span class="stringliteral">&quot;---&gt; fsal_cookie_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="unioncephfsal__cookie__t.html">cephfsal_cookie_t</a>));
<a name="l01914"></a>01914   printf(<span class="stringliteral">&quot;---&gt; fs_specific_initinfo_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structfs__specific__initinfo____.html">cephfs_specific_initinfo_t</a>));
<a name="l01915"></a>01915 <span class="preprocessor">#endif</span>
<a name="l01916"></a>01916 <span class="preprocessor"></span><span class="preprocessor">#if 0</span>
<a name="l01917"></a>01917 <span class="preprocessor"></span>  <span class="comment">/* Will remain as long as all FSAL are not yet in new format */</span>
<a name="l01918"></a>01918   printf(<span class="stringliteral">&quot;---&gt; fsal_handle_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="unionvfsfsal__handle__t.html">vfsfsal_handle_t</a>));
<a name="l01919"></a>01919   printf(<span class="stringliteral">&quot;---&gt; fsal_op_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structvfsfsal__op__context__t.html">vfsfsal_op_context_t</a>));
<a name="l01920"></a>01920   printf(<span class="stringliteral">&quot;---&gt; fsal_file_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structvfsfsal__file__t.html">vfsfsal_file_t</a>));
<a name="l01921"></a>01921   printf(<span class="stringliteral">&quot;---&gt; fsal_dir_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structvfsfsal__dir__t.html">vfsfsal_dir_t</a>));
<a name="l01922"></a>01922   printf(<span class="stringliteral">&quot;---&gt; fsal_export_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structvfsfsal__export__context__t.html">vfsfsal_export_context_t</a>));
<a name="l01923"></a>01923   printf(<span class="stringliteral">&quot;---&gt; fsal_cookie_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="unionvfsfsal__cookie__t.html">vfsfsal_cookie_t</a>));
<a name="l01924"></a>01924   printf(<span class="stringliteral">&quot;---&gt; fs_specific_initinfo_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structvfsfs__specific__initinfo__t.html">vfsfs_specific_initinfo_t</a>));
<a name="l01925"></a>01925 <span class="preprocessor">#endif</span>
<a name="l01926"></a>01926 <span class="preprocessor"></span><span class="preprocessor">#if 0</span>
<a name="l01927"></a>01927 <span class="preprocessor"></span>  <span class="comment">/* Will remain as long as all FSAL are not yet in new format */</span>
<a name="l01928"></a>01928   printf(<span class="stringliteral">&quot;---&gt; fsal_handle_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="unionproxyfsal__handle__t.html">proxyfsal_handle_t</a>));
<a name="l01929"></a>01929   printf(<span class="stringliteral">&quot;---&gt; fsal_op_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structproxyfsal__op__context__t.html">proxyfsal_op_context_t</a>));
<a name="l01930"></a>01930   printf(<span class="stringliteral">&quot;---&gt; fsal_file_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structproxyfsal__file__t.html">proxyfsal_file_t</a>));
<a name="l01931"></a>01931   printf(<span class="stringliteral">&quot;---&gt; fsal_dir_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structproxyfsal__dir__t.html">proxyfsal_dir_t</a>));
<a name="l01932"></a>01932   printf(<span class="stringliteral">&quot;---&gt; fsal_export_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structproxyfsal__export__context__t.html">proxyfsal_export_context_t</a>));
<a name="l01933"></a>01933   printf(<span class="stringliteral">&quot;---&gt; fsal_cookie_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="unionproxyfsal__cookie__t.html">proxyfsal_cookie_t</a>));
<a name="l01934"></a>01934   printf(<span class="stringliteral">&quot;---&gt; fs_specific_initinfo_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structproxyfs__specific__initinfo__t.html">proxyfs_specific_initinfo_t</a>));
<a name="l01935"></a>01935 <span class="preprocessor">#endif</span>
<a name="l01936"></a>01936 <span class="preprocessor"></span><span class="preprocessor">#if 0</span>
<a name="l01937"></a>01937 <span class="preprocessor"></span>  <span class="comment">/* Will remain as long as all FSAL are not yet in new format */</span>
<a name="l01938"></a>01938   printf(<span class="stringliteral">&quot;---&gt; fsal_handle_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="unionxfsfsal__handle__t.html">xfsfsal_handle_t</a>));
<a name="l01939"></a>01939   printf(<span class="stringliteral">&quot;---&gt; fsal_op_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structxfsfsal__op__context__t.html">xfsfsal_op_context_t</a>));
<a name="l01940"></a>01940   printf(<span class="stringliteral">&quot;---&gt; fsal_file_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structxfsfsal__file__t.html">xfsfsal_file_t</a>));
<a name="l01941"></a>01941   printf(<span class="stringliteral">&quot;---&gt; fsal_dir_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structxfsfsal__dir__t.html">xfsfsal_dir_t</a>));
<a name="l01942"></a>01942   printf(<span class="stringliteral">&quot;---&gt; fsal_export_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structxfsfsal__export__context__t.html">xfsfsal_export_context_t</a>));
<a name="l01943"></a>01943   printf(<span class="stringliteral">&quot;---&gt; fsal_cookie_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="unionxfsfsal__cookie__t.html">xfsfsal_cookie_t</a>));
<a name="l01944"></a>01944   printf(<span class="stringliteral">&quot;---&gt; fs_specific_initinfo_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structxfsfs__specific__initinfo__t.html">xfsfs_specific_initinfo_t</a>));
<a name="l01945"></a>01945 <span class="preprocessor">#endif</span>
<a name="l01946"></a>01946 <span class="preprocessor"></span><span class="preprocessor">#if 0</span>
<a name="l01947"></a>01947 <span class="preprocessor"></span>  <span class="comment">/* Will remain as long as all FSAL are not yet in new format */</span>
<a name="l01948"></a>01948   printf(<span class="stringliteral">&quot;---&gt; fsal_handle_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="unionzfsfsal__handle__t.html">zfsfsal_handle_t</a>));
<a name="l01949"></a>01949   printf(<span class="stringliteral">&quot;---&gt; fsal_op_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structzfsfsal__op__context__t.html">zfsfsal_op_context_t</a>));
<a name="l01950"></a>01950   printf(<span class="stringliteral">&quot;---&gt; fsal_file_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structzfsfsal__file__t.html">zfsfsal_file_t</a>));
<a name="l01951"></a>01951   printf(<span class="stringliteral">&quot;---&gt; fsal_dir_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structzfsfsal__dir__t.html">zfsfsal_dir_t</a>));
<a name="l01952"></a>01952   printf(<span class="stringliteral">&quot;---&gt; fsal_export_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structzfsfsal__export__context__t.html">zfsfsal_export_context_t</a>));
<a name="l01953"></a>01953   printf(<span class="stringliteral">&quot;---&gt; fsal_cookie_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="unionzfsfsal__cookie__t.html">zfsfsal_cookie_t</a>));
<a name="l01954"></a>01954   printf(<span class="stringliteral">&quot;---&gt; fs_specific_initinfo_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structzfsfs__specific__initinfo__t.html">zfsfs_specific_initinfo_t</a>));
<a name="l01955"></a>01955 <span class="preprocessor">#endif</span>
<a name="l01956"></a>01956 <span class="preprocessor"></span><span class="preprocessor">#if 0</span>
<a name="l01957"></a>01957 <span class="preprocessor"></span>  <span class="comment">/* Will remain as long as all FSAL are not yet in new format */</span>
<a name="l01958"></a>01958   printf(<span class="stringliteral">&quot;---&gt; fsal_handle_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="unionlustrefsal__handle__t.html">lustrefsal_handle_t</a>));
<a name="l01959"></a>01959   printf(<span class="stringliteral">&quot;---&gt; fsal_op_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structlustrefsal__op__context__t.html">lustrefsal_op_context_t</a>));
<a name="l01960"></a>01960   printf(<span class="stringliteral">&quot;---&gt; fsal_file_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structlustrefsal__file__t.html">lustrefsal_file_t</a>));
<a name="l01961"></a>01961   printf(<span class="stringliteral">&quot;---&gt; fsal_dir_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structlustrefsal__dir__t.html">lustrefsal_dir_t</a>));
<a name="l01962"></a>01962   printf(<span class="stringliteral">&quot;---&gt; fsal_export_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structlustrefsal__export__context__t.html">lustrefsal_export_context_t</a>));
<a name="l01963"></a>01963   printf(<span class="stringliteral">&quot;---&gt; fsal_cookie_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="unionlustrefsal__cookie__t.html">lustrefsal_cookie_t</a>));
<a name="l01964"></a>01964   printf(<span class="stringliteral">&quot;---&gt; fs_specific_initinfo_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structlustrefs__specific__initinfo__t.html">lustrefs_specific_initinfo_t</a>));
<a name="l01965"></a>01965   printf(<span class="stringliteral">&quot;---&gt; fsal_cred_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structlustrefsal__cred____.html">lustrefsal_cred_t</a>));
<a name="l01966"></a>01966 <span class="preprocessor">#endif</span>
<a name="l01967"></a>01967 <span class="preprocessor"></span><span class="preprocessor">#if 0</span>
<a name="l01968"></a>01968 <span class="preprocessor"></span>  <span class="comment">/* Will remain as long as all FSAL are not yet in new format */</span>
<a name="l01969"></a>01969   printf(<span class="stringliteral">&quot;---&gt; fsal_handle_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="unionhpssfsal__handle__t.html">hpssfsal_handle_t</a>));
<a name="l01970"></a>01970   printf(<span class="stringliteral">&quot;---&gt; fsal_op_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structhpssfsal__op__context__t.html">hpssfsal_op_context_t</a>));
<a name="l01971"></a>01971   printf(<span class="stringliteral">&quot;---&gt; fsal_file_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(hpssfsal_file_t));
<a name="l01972"></a>01972   printf(<span class="stringliteral">&quot;---&gt; fsal_dir_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structhpssfsal__dir__t.html">hpssfsal_dir_t</a>));
<a name="l01973"></a>01973   printf(<span class="stringliteral">&quot;---&gt; fsal_export_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="structhpssfsal__export__context__t.html">hpssfsal_export_context_t</a>));
<a name="l01974"></a>01974   printf(<span class="stringliteral">&quot;---&gt; fsal_cookie_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="unionhpssfsal__cookie__t.html">hpssfsal_cookie_t</a>));
<a name="l01975"></a>01975   printf(<span class="stringliteral">&quot;---&gt; fs_specific_initinfo_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(hpssfs_specific_initinfo_t));
<a name="l01976"></a>01976   printf(<span class="stringliteral">&quot;---&gt; fsal_cred_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(hpssfsal_cred_t));
<a name="l01977"></a>01977 <span class="preprocessor">#endif</span>
<a name="l01978"></a>01978 <span class="preprocessor"></span><span class="preprocessor">#if 0</span>
<a name="l01979"></a>01979 <span class="preprocessor"></span>  <span class="comment">/* Will remain as long as all FSAL are not yet in new format */</span>
<a name="l01980"></a>01980   printf(<span class="stringliteral">&quot;---&gt; fsal_handle_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(snmpfsal_handle_t));
<a name="l01981"></a>01981   printf(<span class="stringliteral">&quot;---&gt; fsal_op_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(snmpfsal_op_context_t));
<a name="l01982"></a>01982   printf(<span class="stringliteral">&quot;---&gt; fsal_file_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(snmpfsal_file_t));
<a name="l01983"></a>01983   printf(<span class="stringliteral">&quot;---&gt; fsal_dir_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(snmpfsal_dir_t));
<a name="l01984"></a>01984   printf(<span class="stringliteral">&quot;---&gt; fsal_export_context_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(snmpfsal_export_context_t));
<a name="l01985"></a>01985   printf(<span class="stringliteral">&quot;---&gt; fsal_cookie_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(snmpfsal_cookie_t));
<a name="l01986"></a>01986   printf(<span class="stringliteral">&quot;---&gt; fs_specific_initinfo_t:%lu\n&quot;</span>, <span class="keyword">sizeof</span>(snmpfs_specific_initinfo_t));
<a name="l01987"></a>01987 <span class="preprocessor">#endif</span>
<a name="l01988"></a>01988 <span class="preprocessor"></span>
<a name="l01989"></a>01989   <span class="comment">/* store the start info so it is available for all layers */</span>
<a name="l01990"></a>01990   nfs_start_info = *p_start_info;
<a name="l01991"></a>01991 
<a name="l01992"></a>01992   <span class="keywordflow">if</span>(p_start_info-&gt;<a class="code" href="struct____nfs__start__info.html#a996d4a2e0d9ea00693a2b69f82cfc8bd">dump_default_config</a> == <a class="code" href="HashTable_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)
<a name="l01993"></a>01993     {
<a name="l01994"></a>01994       <a class="code" href="nfs__init_8c.html#ab5056a53bbbc2f294a566cdadf4f256a">nfs_print_param_config</a>();
<a name="l01995"></a>01995       exit(0);
<a name="l01996"></a>01996     }
<a name="l01997"></a>01997 
<a name="l01998"></a>01998   <span class="comment">/* Set the Core dump size if set */</span>
<a name="l01999"></a>01999   <span class="keywordflow">if</span>(nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a1bf281fdce5ca7ffee9a45cdacd33527">core_dump_size</a> != -1)
<a name="l02000"></a>02000     {
<a name="l02001"></a>02001       <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;I set the core size rlimit to %ld&quot;</span>,
<a name="l02002"></a>02002                nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a1bf281fdce5ca7ffee9a45cdacd33527">core_dump_size</a>);
<a name="l02003"></a>02003       ulimit_data.rlim_cur = nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a1bf281fdce5ca7ffee9a45cdacd33527">core_dump_size</a>;
<a name="l02004"></a>02004       ulimit_data.rlim_max = nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a1bf281fdce5ca7ffee9a45cdacd33527">core_dump_size</a>;
<a name="l02005"></a>02005 
<a name="l02006"></a>02006       <span class="keywordflow">if</span>(setrlimit(RLIMIT_CORE, &amp;ulimit_data) != 0)
<a name="l02007"></a>02007         {
<a name="l02008"></a>02008           <a class="code" href="log_8h.html#a367b67f5a0b29160763c3ce8efce0875">LogError</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <a class="code" href="log_8h.html#ad9f6cff569b8aaff581efed5a643f26a">ERR_SYS</a>, <a class="code" href="log_8h.html#ae62e7ee812c1de7b154beb118ba59aae">ERR_SETRLIMIT</a>, errno);
<a name="l02009"></a>02009           <a class="code" href="test__findlog_8c.html#adfd9432c5478fa14c7d678edb301feed">LogCrit</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Impossible to set RLIMIT_CORE to %ld&quot;</span>,
<a name="l02010"></a>02010                   nfs_param.<a class="code" href="structnfs__param____.html#aeef2995e9b54747311db1972d158fd41">core_param</a>.<a class="code" href="structnfs__core__param____.html#a1bf281fdce5ca7ffee9a45cdacd33527">core_dump_size</a>);
<a name="l02011"></a>02011         }
<a name="l02012"></a>02012     }
<a name="l02013"></a>02013 
<a name="l02014"></a>02014   <span class="comment">/* Print the worker parameters in log */</span>
<a name="l02015"></a>02015   <a class="code" href="nfs__core_8h.html#ad3fc1abf808a8133abfe1b29e0266764">Print_param_worker_in_log</a>(&amp;(nfs_param.<a class="code" href="structnfs__param____.html#adaf127ebcf4eea500e79011b862c6899">worker_param</a>));
<a name="l02016"></a>02016 
<a name="l02017"></a>02017   {
<a name="l02018"></a>02018     <span class="comment">/* Set the write verifiers */</span>
<a name="l02019"></a>02019     <span class="keyword">union</span>
<a name="l02020"></a>02020     {
<a name="l02021"></a>02021       <a class="code" href="nfsv40_8h.html#a11442bc5a79d08d82fa18205f01ae61d">verifier4</a>  <a class="code" href="nfs__core_8h.html#aba2f7cc065d516cd61fe9d1751df1aaf">NFS4_write_verifier</a>;  <span class="comment">/* NFS V4 write verifier */</span>
<a name="l02022"></a>02022       <a class="code" href="nfs23_8h.html#ac2493d4bf549f6c3ca66a5fa396273ee">writeverf3</a> <a class="code" href="nfs__core_8h.html#ac75a3dafdfdc69436850ab6d14017097">NFS3_write_verifier</a>; <span class="comment">/* NFS V3 write verifier */</span>
<a name="l02023"></a>02023       <a class="code" href="extended__types_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a>   epoch;
<a name="l02024"></a>02024     } build_verifier;
<a name="l02025"></a>02025 
<a name="l02026"></a>02026     build_verifier.epoch = (<a class="code" href="extended__types_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a>) <a class="code" href="nfs__core_8h.html#a6b4f1d7993315c835596a7e2fff1584b">ServerEpoch</a>;
<a name="l02027"></a>02027 
<a name="l02028"></a>02028     memcpy(<a class="code" href="nfs__core_8h.html#ac75a3dafdfdc69436850ab6d14017097">NFS3_write_verifier</a>, build_verifier.NFS3_write_verifier, <span class="keyword">sizeof</span>(<a class="code" href="nfs__core_8h.html#ac75a3dafdfdc69436850ab6d14017097">NFS3_write_verifier</a>));
<a name="l02029"></a>02029     memcpy(<a class="code" href="nfs__core_8h.html#aba2f7cc065d516cd61fe9d1751df1aaf">NFS4_write_verifier</a>, build_verifier.NFS4_write_verifier, <span class="keyword">sizeof</span>(<a class="code" href="nfs__core_8h.html#aba2f7cc065d516cd61fe9d1751df1aaf">NFS4_write_verifier</a>));
<a name="l02030"></a>02030   }
<a name="l02031"></a>02031   <span class="comment">/* Initialize all layers and service threads */</span>
<a name="l02032"></a>02032   nfs_Init(p_start_info);
<a name="l02033"></a>02033 
<a name="l02034"></a>02034   <span class="comment">/* Spawns service threads */</span>
<a name="l02035"></a>02035   nfs_Start_threads();
<a name="l02036"></a>02036 
<a name="l02037"></a>02037 <span class="preprocessor">#ifdef _USE_NLM</span>
<a name="l02038"></a>02038 <span class="preprocessor"></span>  <span class="comment">/* NSM Unmonitor all */</span>
<a name="l02039"></a>02039   <a class="code" href="nsm_8h.html#afbd9d33bd1381132d039b23f20a66a21">nsm_unmonitor_all</a>();
<a name="l02040"></a>02040 <span class="preprocessor">#endif</span>
<a name="l02041"></a>02041 <span class="preprocessor"></span>
<a name="l02042"></a>02042   <span class="comment">/* Populate the ID_MAPPER file with mapping file if needed */</span>
<a name="l02043"></a>02043   <span class="keywordflow">if</span>(nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#a702e806a3d97a65900fda88ffb767c78">mapfile</a>[0] == <span class="charliteral">&#39;\0&#39;</span>)
<a name="l02044"></a>02044     {
<a name="l02045"></a>02045       <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;No Uid Map file is used&quot;</span>);
<a name="l02046"></a>02046     }
<a name="l02047"></a>02047   <span class="keywordflow">else</span>
<a name="l02048"></a>02048     {
<a name="l02049"></a>02049       <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Populating UID_MAPPER with file %s&quot;</span>,
<a name="l02050"></a>02050                nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#a702e806a3d97a65900fda88ffb767c78">mapfile</a>);
<a name="l02051"></a>02051       <span class="keywordflow">if</span>(<a class="code" href="idmapper__cache_8c.html#ac270ed71910c69af03f5528a0abb444e">idmap_populate</a>(nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#a702e806a3d97a65900fda88ffb767c78">mapfile</a>, <a class="code" href="nfs__core_8h.html#a9dc2472b150777cfd1a198fabc968eb1a647591f3b33aa7046a0751a998190dbf">UIDMAP_TYPE</a>) !=
<a name="l02052"></a>02052          <a class="code" href="nfs__core_8h.html#a4369e01e90c47aa791ed4fb00d60b95f">ID_MAPPER_SUCCESS</a>)
<a name="l02053"></a>02053         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;UID_MAPPER was NOT populated&quot;</span>);
<a name="l02054"></a>02054     }
<a name="l02055"></a>02055 
<a name="l02056"></a>02056   <span class="keywordflow">if</span>(nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#a702e806a3d97a65900fda88ffb767c78">mapfile</a>[0] == <span class="charliteral">&#39;\0&#39;</span>)
<a name="l02057"></a>02057     {
<a name="l02058"></a>02058       <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;No Gid Map file is used&quot;</span>);
<a name="l02059"></a>02059     }
<a name="l02060"></a>02060   <span class="keywordflow">else</span>
<a name="l02061"></a>02061     {
<a name="l02062"></a>02062       <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Populating GID_MAPPER with file %s&quot;</span>,
<a name="l02063"></a>02063                nfs_param.<a class="code" href="structnfs__param____.html#a2d4296db05f343f854bef4d6a2758fbb">uidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#a702e806a3d97a65900fda88ffb767c78">mapfile</a>);
<a name="l02064"></a>02064       <span class="keywordflow">if</span>(<a class="code" href="idmapper__cache_8c.html#ac270ed71910c69af03f5528a0abb444e">idmap_populate</a>(nfs_param.<a class="code" href="structnfs__param____.html#a2fda85da413146bdf3d04104a4af429a">gidmap_cache_param</a>.<a class="code" href="structnfs__idmap__cache__param____.html#a702e806a3d97a65900fda88ffb767c78">mapfile</a>, <a class="code" href="nfs__core_8h.html#a9dc2472b150777cfd1a198fabc968eb1a445fcc4dcec4e3fce240726096ff1426">GIDMAP_TYPE</a>) !=
<a name="l02065"></a>02065          <a class="code" href="nfs__core_8h.html#a4369e01e90c47aa791ed4fb00d60b95f">ID_MAPPER_SUCCESS</a>)
<a name="l02066"></a>02066         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;GID_MAPPER was NOT populated&quot;</span>);
<a name="l02067"></a>02067     }
<a name="l02068"></a>02068 
<a name="l02069"></a>02069   <span class="keywordflow">if</span>(nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#a98f87047813d8b0e92bf578c86dc6a7b">mapfile</a>[0] == <span class="charliteral">&#39;\0&#39;</span>)
<a name="l02070"></a>02070     {
<a name="l02071"></a>02071       <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;No Hosts Map file is used&quot;</span>);
<a name="l02072"></a>02072     }
<a name="l02073"></a>02073   <span class="keywordflow">else</span>
<a name="l02074"></a>02074     {
<a name="l02075"></a>02075       <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;Populating IP_NAME with file %s&quot;</span>,
<a name="l02076"></a>02076                nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#a98f87047813d8b0e92bf578c86dc6a7b">mapfile</a>);
<a name="l02077"></a>02077       <span class="keywordflow">if</span>(<a class="code" href="nfs__ip__stats_8h.html#a2c6b07deab3557e1b1ce872631e31936">nfs_ip_name_populate</a>(nfs_param.<a class="code" href="structnfs__param____.html#a5fc410c6e17f019ea21e01882a70b0db">ip_name_param</a>.<a class="code" href="structnfs__ip__name__param____.html#a98f87047813d8b0e92bf578c86dc6a7b">mapfile</a>) != <a class="code" href="nfs__ip__stats_8h.html#ac0454d9757d79c6cd9cf9e67a5314f6b">IP_NAME_SUCCESS</a>)
<a name="l02078"></a>02078         <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>, <span class="stringliteral">&quot;IP_NAME was NOT populated&quot;</span>);
<a name="l02079"></a>02079     }
<a name="l02080"></a>02080 
<a name="l02081"></a>02081   <span class="comment">/* Wait for the threads to complete their init step */</span>
<a name="l02082"></a>02082   <span class="keywordflow">if</span>(<a class="code" href="nfs__tcb_8h.html#ab9d7b0c024adc459118b0da637376b03">wait_for_threads_to_awaken</a>() != <a class="code" href="nfs__core_8h.html#a4af359b26b6ae1a8a8ba5251c68f0088afe8f43c7cbab95a0895dc07feaccea4e">PAUSE_OK</a>)
<a name="l02083"></a>02083     {
<a name="l02084"></a>02084       <span class="comment">/* Not quite sure what to do here... */</span>
<a name="l02085"></a>02085     }
<a name="l02086"></a>02086   <span class="keywordflow">else</span>
<a name="l02087"></a>02087     {
<a name="l02088"></a>02088       <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l02089"></a>02089                <span class="stringliteral">&quot;-------------------------------------------------&quot;</span>);
<a name="l02090"></a>02090       <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l02091"></a>02091                <span class="stringliteral">&quot;             NFS SERVER INITIALIZED&quot;</span>);
<a name="l02092"></a>02092       <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a816e1179bdca76a9ac641ddaeb1cd3f9">COMPONENT_INIT</a>,
<a name="l02093"></a>02093                <span class="stringliteral">&quot;-------------------------------------------------&quot;</span>);
<a name="l02094"></a>02094     }
<a name="l02095"></a>02095 
<a name="l02096"></a>02096   <span class="comment">/* Wait for dispatcher to exit */</span>
<a name="l02097"></a>02097   <a class="code" href="log_8h.html#aa7aee8ec65b5baafb430f8d2a7588d53">LogDebug</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a5aee8007416da5031516318f3efa4511">COMPONENT_THREAD</a>,
<a name="l02098"></a>02098            <span class="stringliteral">&quot;Wait for sigmgr thread to exit&quot;</span>);
<a name="l02099"></a>02099   pthread_join(<a class="code" href="nfs__init_8c.html#a6c8a4c4fc828d4f08a94a211c78de19e">sigmgr_thrid</a>, <a class="code" href="Getopt_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l02100"></a>02100 
<a name="l02101"></a>02101   <span class="comment">/* Regular exit */</span>
<a name="l02102"></a>02102   <a class="code" href="log_8h.html#a014a663a4d20c38e82ab3f35298667e8">LogEvent</a>(<a class="code" href="log_8h.html#aef38a41286a6a40320bc7d64135b1556a2890c8ed4855f4d1626b0eca088ecd79">COMPONENT_MAIN</a>,
<a name="l02103"></a>02103            <span class="stringliteral">&quot;NFS EXIT: regular exit&quot;</span>);
<a name="l02104"></a>02104 
<a name="l02105"></a>02105   <span class="comment">/* if not in grace period, clean up the old state directory */</span>
<a name="l02106"></a>02106   <span class="keywordflow">if</span>(!<a class="code" href="sal__functions_8h.html#a5876062c9e8ad24e43c379634b5c5461">nfs_in_grace</a>())
<a name="l02107"></a>02107     <a class="code" href="sal__functions_8h.html#a0e34f6fc558093564f77d12b17d02be6">nfs4_clean_old_recov_dir</a>();
<a name="l02108"></a>02108 
<a name="l02109"></a>02109   <a class="code" href="log_8h.html#ac12c72641f72ed55d06126bd351ea1b1">Cleanup</a>();
<a name="l02110"></a>02110 
<a name="l02111"></a>02111   <span class="comment">/* let main return 0 to exit */</span>
<a name="l02112"></a>02112 }                               <span class="comment">/* nfs_start */</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 21 2012 for nfs-ganesha by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
