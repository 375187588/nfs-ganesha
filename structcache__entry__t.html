<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>nfs-ganesha: cache_entry_t Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nfs-ganesha&#160;<span id="projectnumber">1.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-attribs">Public Attributes</a>  </div>
  <div class="headertitle">
<h1>cache_entry_t Struct Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="cache_entry_t" -->
<p>Represents a cached inode.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="cache__inode_8h_source.html">cache_inode.h</a>&gt;</code></p>

<p><a href="structcache__entry__t-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncache__entry__t_1_1cache__inode__fsobj____.html">cache_inode_fsobj__</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfsal__handle____.html">fsal_handle_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__entry__t.html#aaa7abf75d0997dba12395a01c09be705">handle</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structfsal__handle__desc.html">fsal_handle_desc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__entry__t.html#ab0b0e66cae7490cc83e316b2b61a2fad">fh_desc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgweakref__.html">gweakref_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__entry__t.html#abfff4328d362e2e558cc01c519c83446">weakref</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cache__inode_8h.html#ae017962c50fe48834d8638069c7edc99">cache_inode_file_type_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__entry__t.html#afa60c075430da0dbe9d5f4160f336294">type</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="extended__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__entry__t.html#a896c6b9f342fbc763040ae330526bed8">flags</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__entry__t.html#a564df0bd95a95605998780d01032619c">change_time</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__entry__t.html#a855ffe691f605541520b47bf4d12590f">attr_time</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcache__inode__lru____.html">cache_inode_lru_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__entry__t.html#a71a999105c78e3dbad7579f502cd637d">lru</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">pthread_rwlock_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__entry__t.html#aa7bf1f222eb0fcefd928dde61c906b34">attr_lock</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfsal__attrib__list____.html">fsal_attrib_list_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__entry__t.html#aad2a56294dcb57329b3b9fcd56e31f27">attributes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">pthread_rwlock_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__entry__t.html#a5c113e24a9432c130ce0530cf05b7c03">state_lock</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structglist__head.html">glist_head</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__entry__t.html#a53ea7e50b59d2e3c2c8af887ac3dd734">state_list</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">pthread_rwlock_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__entry__t.html#a63cfd2d8617142c19cba82c7086fa101">content_lock</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union <br class="typebreak"/>
<a class="el" href="unioncache__entry__t_1_1cache__inode__fsobj____.html">cache_entry_t::cache_inode_fsobj__</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcache__entry__t.html#a0767b2a90515593d88a51fe20dbcc55e">object</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Represents a cached inode. </p>
<p>Information representing a cached file (inode) including metadata, and for directories and symlinks, pointers to cached content. This is also the anchor for state held on a file.</p>
<p>Regarding the locking discipline:</p>
<p>(1) The attributes field is protected by attr_lock.</p>
<p>(2) content_lock must be held for WRITE when modifying the AVL tree of a directory or any dirent contained therein. It must be held for READ when accessing any of this information.</p>
<p>(3) content_lock must be held for WRITE when caching or disposing of a file descriptor and when writing data into the Ganesha data cache. It must be held for READ when accessing the cached descriptor or reading data out of the data cache.</p>
<p>(4) content_lock must be held for WRITE when updating the cached content of a symlink or when NULLing the object.symlink pointer preparatory to freeing the link structure. It must be held for READ when dereferencing the object.symlink pointer or reading cached content.</p>
<p>(5) state_lock must be held for WRITE when modifying state_list or lock_list. It must be held for READ when traversing or examining the state_list or lock_list. Operations like LRU pinning must hold the state lock for read through the operation of moving the entry from one queue to another.</p>
<p>The handle, weakref, and type fields are unprotected, as they are considered to be immutable throughout the life of the object.</p>
<p>The flags field is unprotected, however it should be modified only through the functions atomic_set_uint32_t_bits and atomic_clear_uint32_t_bits.</p>
<p>The change_time and attr_time fields are unprotected and must only be used for simple comparisons or servicing requests returning <a class="el" href="structchange__info4.html">change_info4</a>.</p>
<p>The lru field as its own mutex to protect it. </p>

<p>Definition at line <a class="el" href="cache__inode_8h_source.html#l00336">336</a> of file <a class="el" href="cache__inode_8h_source.html">cache_inode.h</a>.</p>
</div><hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="aa7bf1f222eb0fcefd928dde61c906b34"></a><!-- doxytag: member="cache_entry_t::attr_lock" ref="aa7bf1f222eb0fcefd928dde61c906b34" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_rwlock_t <a class="el" href="structcache__entry__t.html#aa7bf1f222eb0fcefd928dde61c906b34">cache_entry_t::attr_lock</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode_8h_source.html#l00354">354</a> of file <a class="el" href="cache__inode_8h_source.html">cache_inode.h</a>.</p>

</div>
</div>
<a class="anchor" id="a855ffe691f605541520b47bf4d12590f"></a><!-- doxytag: member="cache_entry_t::attr_time" ref="a855ffe691f605541520b47bf4d12590f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t <a class="el" href="structcache__entry__t.html#a855ffe691f605541520b47bf4d12590f">cache_entry_t::attr_time</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode_8h_source.html#l00352">352</a> of file <a class="el" href="cache__inode_8h_source.html">cache_inode.h</a>.</p>

</div>
</div>
<a class="anchor" id="aad2a56294dcb57329b3b9fcd56e31f27"></a><!-- doxytag: member="cache_entry_t::attributes" ref="aad2a56294dcb57329b3b9fcd56e31f27" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsal__attrib__list____.html">fsal_attrib_list_t</a> <a class="el" href="structcache__entry__t.html#aad2a56294dcb57329b3b9fcd56e31f27">cache_entry_t::attributes</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode_8h_source.html#l00355">355</a> of file <a class="el" href="cache__inode_8h_source.html">cache_inode.h</a>.</p>

</div>
</div>
<a class="anchor" id="a564df0bd95a95605998780d01032619c"></a><!-- doxytag: member="cache_entry_t::change_time" ref="a564df0bd95a95605998780d01032619c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t <a class="el" href="structcache__entry__t.html#a564df0bd95a95605998780d01032619c">cache_entry_t::change_time</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode_8h_source.html#l00347">347</a> of file <a class="el" href="cache__inode_8h_source.html">cache_inode.h</a>.</p>

</div>
</div>
<a class="anchor" id="a63cfd2d8617142c19cba82c7086fa101"></a><!-- doxytag: member="cache_entry_t::content_lock" ref="a63cfd2d8617142c19cba82c7086fa101" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_rwlock_t <a class="el" href="structcache__entry__t.html#a63cfd2d8617142c19cba82c7086fa101">cache_entry_t::content_lock</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode_8h_source.html#l00367">367</a> of file <a class="el" href="cache__inode_8h_source.html">cache_inode.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab0b0e66cae7490cc83e316b2b61a2fad"></a><!-- doxytag: member="cache_entry_t::fh_desc" ref="ab0b0e66cae7490cc83e316b2b61a2fad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structfsal__handle__desc.html">fsal_handle_desc</a> <a class="el" href="structcache__entry__t.html#ab0b0e66cae7490cc83e316b2b61a2fad">cache_entry_t::fh_desc</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode_8h_source.html#l00339">339</a> of file <a class="el" href="cache__inode_8h_source.html">cache_inode.h</a>.</p>

</div>
</div>
<a class="anchor" id="a896c6b9f342fbc763040ae330526bed8"></a><!-- doxytag: member="cache_entry_t::flags" ref="a896c6b9f342fbc763040ae330526bed8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="extended__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="structcache__entry__t.html#a896c6b9f342fbc763040ae330526bed8">cache_entry_t::flags</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode_8h_source.html#l00346">346</a> of file <a class="el" href="cache__inode_8h_source.html">cache_inode.h</a>.</p>

</div>
</div>
<a class="anchor" id="aaa7abf75d0997dba12395a01c09be705"></a><!-- doxytag: member="cache_entry_t::handle" ref="aaa7abf75d0997dba12395a01c09be705" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsal__handle____.html">fsal_handle_t</a> <a class="el" href="structcache__entry__t.html#aaa7abf75d0997dba12395a01c09be705">cache_entry_t::handle</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode_8h_source.html#l00338">338</a> of file <a class="el" href="cache__inode_8h_source.html">cache_inode.h</a>.</p>

</div>
</div>
<a class="anchor" id="a71a999105c78e3dbad7579f502cd637d"></a><!-- doxytag: member="cache_entry_t::lru" ref="a71a999105c78e3dbad7579f502cd637d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcache__inode__lru____.html">cache_inode_lru_t</a> <a class="el" href="structcache__entry__t.html#a71a999105c78e3dbad7579f502cd637d">cache_entry_t::lru</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode_8h_source.html#l00353">353</a> of file <a class="el" href="cache__inode_8h_source.html">cache_inode.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0767b2a90515593d88a51fe20dbcc55e"></a><!-- doxytag: member="cache_entry_t::object" ref="a0767b2a90515593d88a51fe20dbcc55e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">union <a class="el" href="unioncache__entry__t_1_1cache__inode__fsobj____.html">cache_entry_t::cache_inode_fsobj__</a>  <a class="el" href="structcache__entry__t.html#a0767b2a90515593d88a51fe20dbcc55e">cache_entry_t::object</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a53ea7e50b59d2e3c2c8af887ac3dd734"></a><!-- doxytag: member="cache_entry_t::state_list" ref="a53ea7e50b59d2e3c2c8af887ac3dd734" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structglist__head.html">glist_head</a> <a class="el" href="structcache__entry__t.html#a53ea7e50b59d2e3c2c8af887ac3dd734">cache_entry_t::state_list</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode_8h_source.html#l00366">366</a> of file <a class="el" href="cache__inode_8h_source.html">cache_inode.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5c113e24a9432c130ce0530cf05b7c03"></a><!-- doxytag: member="cache_entry_t::state_lock" ref="a5c113e24a9432c130ce0530cf05b7c03" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_rwlock_t <a class="el" href="structcache__entry__t.html#a5c113e24a9432c130ce0530cf05b7c03">cache_entry_t::state_lock</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode_8h_source.html#l00356">356</a> of file <a class="el" href="cache__inode_8h_source.html">cache_inode.h</a>.</p>

</div>
</div>
<a class="anchor" id="afa60c075430da0dbe9d5f4160f336294"></a><!-- doxytag: member="cache_entry_t::type" ref="afa60c075430da0dbe9d5f4160f336294" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cache__inode_8h.html#ae017962c50fe48834d8638069c7edc99">cache_inode_file_type_t</a> <a class="el" href="structcache__entry__t.html#afa60c075430da0dbe9d5f4160f336294">cache_entry_t::type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode_8h_source.html#l00345">345</a> of file <a class="el" href="cache__inode_8h_source.html">cache_inode.h</a>.</p>

</div>
</div>
<a class="anchor" id="abfff4328d362e2e558cc01c519c83446"></a><!-- doxytag: member="cache_entry_t::weakref" ref="abfff4328d362e2e558cc01c519c83446" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgweakref__.html">gweakref_t</a> <a class="el" href="structcache__entry__t.html#abfff4328d362e2e558cc01c519c83446">cache_entry_t::weakref</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cache__inode_8h_source.html#l00341">341</a> of file <a class="el" href="cache__inode_8h_source.html">cache_inode.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="cache__inode_8h_source.html">cache_inode.h</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 21 2012 for nfs-ganesha by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
