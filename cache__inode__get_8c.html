<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>nfs-ganesha: cache_inode_get.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nfs-ganesha&#160;<span id="projectnumber">1.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>cache_inode_get.c File Reference</h1>  </div>
</div>
<div class="contents">

<p>Get and eventually cache an entry.  
<a href="#_details">More...</a></p>
<div class="textblock"><code>#include &quot;LRU_List.h&quot;</code><br/>
<code>#include &quot;log.h&quot;</code><br/>
<code>#include &quot;HashData.h&quot;</code><br/>
<code>#include &quot;HashTable.h&quot;</code><br/>
<code>#include &quot;fsal.h&quot;</code><br/>
<code>#include &quot;cache_inode.h&quot;</code><br/>
<code>#include &quot;cache_inode_lru.h&quot;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;sys/param.h&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &lt;assert.h&gt;</code><br/>
</div>
<p><a href="cache__inode__get_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__get_8c.html#af93e3320581ae2ea6e5633598d5a2c77">cache_inode_get</a> (<a class="el" href="structcache__inode__fsal__data____.html">cache_inode_fsal_data_t</a> *fsdata, <a class="el" href="structfsal__attrib__list____.html">fsal_attrib_list_t</a> *attr, <a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *context, <a class="el" href="structcache__entry__t.html">cache_entry_t</a> *associated, <a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *status)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets an entry by using its fsdata as a key and caches it if needed.  <a href="#af93e3320581ae2ea6e5633598d5a2c77"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__get_8c.html#a8ff682b5012ccc7a46cb876664d0a7a2">cache_inode_put</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *entry)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Get and eventually cache an entry. </p>
<dl class="author"><dt><b>Author:</b></dt><dd></dd></dl>
<dl class="rcs"><dt><b>Author:</b></dt><dd>deniel </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd></dd></dl>
<dl class="rcs"><dt><b>Date:</b></dt><dd>2005/11/28 17:02:26 </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd></dd></dl>
<dl class="rcs"><dt><b>Revision:</b></dt><dd>1.26 </dd></dl>
<p><a class="el" href="cache__inode__get_8c.html" title="Get and eventually cache an entry.">cache_inode_get.c</a> : Get and eventually cache an entry. </p>

<p>Definition in file <a class="el" href="cache__inode__get_8c_source.html">cache_inode_get.c</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="af93e3320581ae2ea6e5633598d5a2c77"></a><!-- doxytag: member="cache_inode_get.c::cache_inode_get" ref="af93e3320581ae2ea6e5633598d5a2c77" args="(cache_inode_fsal_data_t *fsdata, fsal_attrib_list_t *attr, fsal_op_context_t *context, cache_entry_t *associated, cache_inode_status_t *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcache__entry__t.html">cache_entry_t</a>* cache_inode_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__inode__fsal__data____.html">cache_inode_fsal_data_t</a> *&#160;</td>
          <td class="paramname"><em>fsdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__attrib__list____.html">fsal_attrib_list_t</a> *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>associated</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets an entry by using its fsdata as a key and caches it if needed. </p>
<p>Gets an entry by using its fsdata as a key and caches it if needed.</p>
<p>If a cache entry is returned, its refcount is incremented by one.</p>
<p>It turns out we do need cache_inode_get_located functionality for cases like lookupp on an entry returning itself when it isn't a root. Therefore, if the 'associated' parameter is equal to the got cache entry, a reference count is incremented but the structure pointed to by attr is NOT filled in.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fsdata</td><td>File system data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">attr</td><td>The attributes of the got entry </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>FSAL credentials </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">associated</td><td>Entry that may be equal to the got entry </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Returned status</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>If successful, the pointer to the entry; NULL otherwise </dd></dl>

<p>Definition at line <a class="el" href="cache__inode__get_8c_source.html#l00084">84</a> of file <a class="el" href="cache__inode__get_8c_source.html">cache_inode_get.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8ff682b5012ccc7a46cb876664d0a7a2"></a><!-- doxytag: member="cache_inode_get.c::cache_inode_put" ref="a8ff682b5012ccc7a46cb876664d0a7a2" args="(cache_entry_t *entry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cache_inode_put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>cache_inode_put: release logical reference to a cache entry conferred by a previous call to cache_inode_get (cache_inode_get_located).</p>
<p>The result is typically to decrement the reference count on entry, but additional side effects include LRU adjustment, movement to/from the protected LRU partition, or recyling if the caller has raced an operation which made entry unreachable (and this current caller has the last reference). Caller MUST NOT make further accesses to the memory pointed to by entry.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>Cache entry being returned</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>CACHE_INDOE_STATUS or error codes </dd></dl>

<p>Definition at line <a class="el" href="cache__inode__get_8c_source.html#l00269">269</a> of file <a class="el" href="cache__inode__get_8c_source.html">cache_inode_get.c</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 21 2012 for nfs-ganesha by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
