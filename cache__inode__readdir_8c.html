<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>nfs-ganesha: cache_inode_readdir.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nfs-ganesha&#160;<span id="projectnumber">1.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>cache_inode_readdir.c File Reference</h1>  </div>
</div>
<div class="contents">

<p>Reads the content of a directory.  
<a href="#_details">More...</a></p>
<div class="textblock"><code>#include &quot;abstract_atomic.h&quot;</code><br/>
<code>#include &quot;log.h&quot;</code><br/>
<code>#include &quot;HashData.h&quot;</code><br/>
<code>#include &quot;HashTable.h&quot;</code><br/>
<code>#include &quot;fsal.h&quot;</code><br/>
<code>#include &quot;cache_inode.h&quot;</code><br/>
<code>#include &quot;cache_inode_lru.h&quot;</code><br/>
<code>#include &quot;cache_inode_avl.h&quot;</code><br/>
<code>#include &quot;cache_inode_weakref.h&quot;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;sys/param.h&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &lt;assert.h&gt;</code><br/>
</div>
<p><a href="cache__inode__readdir_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__readdir_8c.html#a71db87a36331a75b6ff7987f609cd58b">cache_inode_invalidate_all_cached_dirent</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *entry, <a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *status)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Invalidates all cached entries for a directory.  <a href="#a71db87a36331a75b6ff7987f609cd58b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__readdir_8c.html#ab3ddec50026559a17735910f48f49cee">cache_inode_operate_cached_dirent</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *directory, <a class="el" href="structfsal__name____.html">fsal_name_t</a> *<a class="el" href="mount_8h.html#a2946c588fc7fa2fa5b43ac54b7872725">name</a>, <a class="el" href="structfsal__name____.html">fsal_name_t</a> *newname, <a class="el" href="cache__inode_8h.html#a4961f3249c42b3ee87cc1799b3421ffd">cache_inode_dirent_op_t</a> dirent_op)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform an operation on it on a cached entry.  <a href="#ab3ddec50026559a17735910f48f49cee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__readdir_8c.html#a812cc6580870ef10e5a773b4be496969">cache_inode_add_cached_dirent</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *parent, <a class="el" href="structfsal__name____.html">fsal_name_t</a> *<a class="el" href="mount_8h.html#a2946c588fc7fa2fa5b43ac54b7872725">name</a>, <a class="el" href="structcache__entry__t.html">cache_entry_t</a> *entry, <a class="el" href="structcache__inode__dir__entry____.html">cache_inode_dir_entry_t</a> **dir_entry, <a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *status)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a directory entry to a cached directory.  <a href="#a812cc6580870ef10e5a773b4be496969"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__readdir_8c.html#aaf48f8a77f45fb31c001b0c7e0405e4a">cache_inode_remove_cached_dirent</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *directory, <a class="el" href="structfsal__name____.html">fsal_name_t</a> *<a class="el" href="mount_8h.html#a2946c588fc7fa2fa5b43ac54b7872725">name</a>, <a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *status)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes an entry from a cached directory.  <a href="#aaf48f8a77f45fb31c001b0c7e0405e4a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__readdir_8c.html#aa159b2619535ae3c7da6ccd44dd7c020">cache_inode_readdir_populate</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *directory, <a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *context, <a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *status)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Cache complete directory contents.  <a href="#aa159b2619535ae3c7da6ccd44dd7c020"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__readdir_8c.html#a4bedd92e6b201a9fff52ba1751f0b770">cache_inode_readdir</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *directory, <a class="el" href="extended__types_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a> cookie, unsigned int *nbfound, bool_t *eod_met, <a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *context, <a class="el" href="cache__inode_8h.html#ae15b4790d2635a17e60170281546aa01">cache_inode_readdir_cb_t</a> cb, void *cb_opaque, <a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *status)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a directory.  <a href="#a4bedd92e6b201a9fff52ba1751f0b770"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Reads the content of a directory. </p>
<dl class="author"><dt><b>Author:</b></dt><dd></dd></dl>
<dl class="rcs"><dt><b>Author:</b></dt><dd>deniel </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd></dd></dl>
<dl class="rcs"><dt><b>Date:</b></dt><dd>2006/01/24 11:43:05 </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd></dd></dl>
<dl class="rcs"><dt><b>Revision:</b></dt><dd>1.50 </dd></dl>
<p>Reads the content of a directory, also includes support functions for cached directories. </p>

<p>Definition in file <a class="el" href="cache__inode__readdir_8c_source.html">cache_inode_readdir.c</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a812cc6580870ef10e5a773b4be496969"></a><!-- doxytag: member="cache_inode_readdir.c::cache_inode_add_cached_dirent" ref="a812cc6580870ef10e5a773b4be496969" args="(cache_entry_t *parent, fsal_name_t *name, cache_entry_t *entry, cache_inode_dir_entry_t **dir_entry, cache_inode_status_t *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> cache_inode_add_cached_dirent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__name____.html">fsal_name_t</a> *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcache__inode__dir__entry____.html">cache_inode_dir_entry_t</a> **&#160;</td>
          <td class="paramname"><em>dir_entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds a directory entry to a cached directory. </p>
<p>This function adds a new directory entry to a directory. Directory entries have only weak references, so they do not prevent recycling or freeing the entry they locate. This function may be called either once (for handling creation) or iteratively in directory population.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">parent</td><td>Cache entry of the directory being updated </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>The name to add to the entry </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>The cache entry associated with name </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dir_entry</td><td>The directory entry newly added (optional) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Same as return value</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>CACHE_INODE_SUCCESS or errors on failure. </dd></dl>

<p>Definition at line <a class="el" href="cache__inode__readdir_8c_source.html#l00260">260</a> of file <a class="el" href="cache__inode__readdir_8c_source.html">cache_inode_readdir.c</a>.</p>

</div>
</div>
<a class="anchor" id="a71db87a36331a75b6ff7987f609cd58b"></a><!-- doxytag: member="cache_inode_readdir.c::cache_inode_invalidate_all_cached_dirent" ref="a71db87a36331a75b6ff7987f609cd58b" args="(cache_entry_t *entry, cache_inode_status_t *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> cache_inode_invalidate_all_cached_dirent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Invalidates all cached entries for a directory. </p>
<p>Invalidates all the entries for a cached directory. The content lock must be held when this function is called.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">entry</td><td>The directory to be managed </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Returned status.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the same as *status </dd></dl>

<p>Definition at line <a class="el" href="cache__inode__readdir_8c_source.html#l00076">76</a> of file <a class="el" href="cache__inode__readdir_8c_source.html">cache_inode_readdir.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab3ddec50026559a17735910f48f49cee"></a><!-- doxytag: member="cache_inode_readdir.c::cache_inode_operate_cached_dirent" ref="ab3ddec50026559a17735910f48f49cee" args="(cache_entry_t *directory, fsal_name_t *name, fsal_name_t *newname, cache_inode_dirent_op_t dirent_op)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> cache_inode_operate_cached_dirent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>directory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__name____.html">fsal_name_t</a> *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__name____.html">fsal_name_t</a> *&#160;</td>
          <td class="paramname"><em>newname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cache__inode_8h.html#a4961f3249c42b3ee87cc1799b3421ffd">cache_inode_dirent_op_t</a>&#160;</td>
          <td class="paramname"><em>dirent_op</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Perform an operation on it on a cached entry. </p>
<p>This function looks up an entry in the drectory cache and performs the indicated operation. If the directory has not been populated, it will not return not found errors.</p>
<p>The caller must hold the content lock on the directory.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">directory</td><td>The directory to be operated upon </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>The name of the relevant entry </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">newname</td><td>The new name for renames </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dirent_op</td><td>The operation (LOOKUP, REMOVE, or RENAME) to perform</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">CACHE_INODE_SUCCESS</td><td>on success or failure in an unpopulated directory. </td></tr>
    <tr><td class="paramname">CACHE_INODE_BAD_TYPE</td><td>if the supplied cache entry is not a directory. </td></tr>
    <tr><td class="paramname">CACHE_INODE_NOT_FOUND</td><td>on lookup failure in a populated directory. </td></tr>
    <tr><td class="paramname">CACHE_INODE_ENTRY_EXISTS</td><td>on rename collission in a populated directory. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cache__inode__readdir_8c_source.html#l00126">126</a> of file <a class="el" href="cache__inode__readdir_8c_source.html">cache_inode_readdir.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4bedd92e6b201a9fff52ba1751f0b770"></a><!-- doxytag: member="cache_inode_readdir.c::cache_inode_readdir" ref="a4bedd92e6b201a9fff52ba1751f0b770" args="(cache_entry_t *directory, uint64_t cookie, unsigned int *nbfound, bool_t *eod_met, fsal_op_context_t *context, cache_inode_readdir_cb_t cb, void *cb_opaque, cache_inode_status_t *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> cache_inode_readdir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>directory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="extended__types_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a>&#160;</td>
          <td class="paramname"><em>cookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>nbfound</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool_t *&#160;</td>
          <td class="paramname"><em>eod_met</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cache__inode_8h.html#ae15b4790d2635a17e60170281546aa01">cache_inode_readdir_cb_t</a>&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cb_opaque</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads a directory. </p>
<p>This function iterates over the cached directory entries (possibly after populating the cache) and invokes a supplied callback function for each one.</p>
<p>The caller must not hold the attribute or content locks on directory.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">directory</td><td>The directory to be read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cookie</td><td>Starting cookie for the readdir operation </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nbfound</td><td>Number of entries returned. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">eod_met</td><td>Whether the end of directory was met </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>FSAL credentials </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>The callback function to receive entries </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb_opaque</td><td>A pointer passed as the first argument to cb </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Returned status</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">CACHE_INODE_SUCCESS</td><td>if operation is a success </td></tr>
    <tr><td class="paramname">CACHE_INODE_BAD_TYPE</td><td>if entry is not related to a directory </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cache__inode__readdir_8c_source.html#l00601">601</a> of file <a class="el" href="cache__inode__readdir_8c_source.html">cache_inode_readdir.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa159b2619535ae3c7da6ccd44dd7c020"></a><!-- doxytag: member="cache_inode_readdir.c::cache_inode_readdir_populate" ref="aa159b2619535ae3c7da6ccd44dd7c020" args="(cache_entry_t *directory, fsal_op_context_t *context, cache_inode_status_t *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> cache_inode_readdir_populate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>directory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cache complete directory contents. </p>
<p>This function reads a complete directory from the FSAL and caches both the names and filess. The content lock must be held on the directory being read.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">directory</td><td>Entry for the parent directory to be read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>FSAL credentials </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Returned status </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cache__inode__readdir_8c_source.html#l00374">374</a> of file <a class="el" href="cache__inode__readdir_8c_source.html">cache_inode_readdir.c</a>.</p>

</div>
</div>
<a class="anchor" id="aaf48f8a77f45fb31c001b0c7e0405e4a"></a><!-- doxytag: member="cache_inode_readdir.c::cache_inode_remove_cached_dirent" ref="aaf48f8a77f45fb31c001b0c7e0405e4a" args="(cache_entry_t *directory, fsal_name_t *name, cache_inode_status_t *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> cache_inode_remove_cached_dirent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>directory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__name____.html">fsal_name_t</a> *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes an entry from a cached directory. </p>
<p>This function removes the named entry from a cached directory. The caller must hold the content lock.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">directory</td><td>The cache entry representing the directory </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>The name indicating the entry to remove </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Returned status</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">CACHE_INODE_SUCCESS</td><td>on success. </td></tr>
    <tr><td class="paramname">CACHE_INODE_BAD_TYPE</td><td>if directory is not a directory. </td></tr>
    <tr><td class="paramname">The</td><td>result of cache_inode_operate_cached_dirent </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cache__inode__readdir_8c_source.html#l00337">337</a> of file <a class="el" href="cache__inode__readdir_8c_source.html">cache_inode_readdir.c</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 21 2012 for nfs-ganesha by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
