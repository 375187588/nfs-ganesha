<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>nfs-ganesha: nfs_dupreq.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nfs-ganesha&#160;<span id="projectnumber">1.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>nfs_dupreq.c File Reference</h1>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;ctype.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;dirent.h&gt;</code><br/>
<code>#include &lt;netdb.h&gt;</code><br/>
<code>#include &lt;netinet/in.h&gt;</code><br/>
<code>#include &lt;arpa/inet.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;sys/file.h&gt;</code><br/>
<code>#include &lt;pwd.h&gt;</code><br/>
<code>#include &lt;grp.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="rpcal_8h_source.html">rpcal.h</a>&quot;</code><br/>
<code>#include &quot;LRU_List.h&quot;</code><br/>
<code>#include &quot;HashData.h&quot;</code><br/>
<code>#include &quot;HashTable.h&quot;</code><br/>
<code>#include &quot;log.h&quot;</code><br/>
<code>#include &quot;nfs_core.h&quot;</code><br/>
<code>#include &quot;nfs23.h&quot;</code><br/>
<code>#include &quot;nfs4.h&quot;</code><br/>
<code>#include &quot;fsal.h&quot;</code><br/>
<code>#include &quot;nfs_tools.h&quot;</code><br/>
<code>#include &quot;nfs_exports.h&quot;</code><br/>
<code>#include &quot;nfs_file_handle.h&quot;</code><br/>
<code>#include &quot;nfs_dupreq.h&quot;</code><br/>
</div>
<p><a href="nfs__dupreq_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a19a92c1cca2c6d33998dddd4094eef7f">LogDupReq</a> (const char *label, <a class="el" href="ganesha__rpc_8h.html#a42f3261a45141da24a6d18194eae1c91">sockaddr_t</a> *addr, long xid, u_long rq_prog)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#af812dda060fd0aa4f965adadb15dd22d">print_entry_dupreq</a> (<a class="el" href="structLRU__data____.html">LRU_data_t</a> data, char *str)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#ad30cdf2e72a3a44f95f951cc1572198d">nfs_dupreq_delete</a> (struct svc_req *req)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a0dd9a264f91e9823e807b34e6994f777">clean_entry_dupreq</a> (<a class="el" href="structlru__entry____.html">LRU_entry_t</a> *pentry, void *addparam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="extended__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a720f58beecb1f29712e83373b56568d4">dupreq_value_hash_func</a> (<a class="el" href="structhash__param.html">hash_parameter_t</a> *p_hparam, <a class="el" href="structhash__buff.html">hash_buffer_t</a> *buffclef)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="extended__types_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a62874e829e04af8882e6314fcecf3945">dupreq_rbt_hash_func</a> (<a class="el" href="structhash__param.html">hash_parameter_t</a> *p_hparam, <a class="el" href="structhash__buff.html">hash_buffer_t</a> *buffclef)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#ae097a7ca8bfad0e9658feb038835a83c">compare_req</a> (<a class="el" href="structhash__buff.html">hash_buffer_t</a> *buff1, <a class="el" href="structhash__buff.html">hash_buffer_t</a> *buff2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#ace76340b85dd6bb0f65608bcced8a634">display_req_key</a> (<a class="el" href="structhash__buff.html">hash_buffer_t</a> *pbuff, char *str)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a83a5c6ccfa97ddd8c53de02bd77a7277">display_req_val</a> (<a class="el" href="structhash__buff.html">hash_buffer_t</a> *pbuff, char *str)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a0e0c7a1fda2f7d756dd1b2f8b4f97db6">nfs_Init_dupreq</a> (<a class="el" href="structnfs__rpc__dupreq__param____.html">nfs_rpc_dupreq_parameter_t</a> <a class="el" href="Connectathon__config__parsing_8c.html#a84f6f668b79957f185ab5a6c535f2e7c">param</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#accd676b25fd8adda77faf10c37f5a71b">nfs_dupreq_add_not_finished</a> (struct svc_req *req, <a class="el" href="unionnfs__res____.html">nfs_res_t</a> *res_nfs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#aabab915e080d080a9a4cdd0df471044d">nfs_dupreq_finish</a> (struct svc_req *req, <a class="el" href="unionnfs__res____.html">nfs_res_t</a> *p_res_nfs, <a class="el" href="structlru__list____.html">LRU_list_t</a> *lru_dupreq)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="unionnfs__res____.html">nfs_res_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a49e397d60fa354b43179f2926daa2256">nfs_dupreq_get</a> (struct svc_req *req, int *pstatus)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a35d644f1f1b2c333ddc223251d615205">nfs_dupreq_gc_function</a> (<a class="el" href="structlru__entry____.html">LRU_entry_t</a> *pentry, void *addparam)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#ad36745bd28b69a188cd5092a390a3ca2">nfs_dupreq_get_stats</a> (<a class="el" href="structhash__stat.html">hash_stat_t</a> *phstat_udp, <a class="el" href="structhash__stat.html">hash_stat_t</a> *phstat_tcp)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnfs__function__desc____.html">nfs_function_desc_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#ad1973964670037b91a33fd6b6e4c40bc">nfs2_func_desc</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnfs__function__desc____.html">nfs_function_desc_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a177ddde86497df151d3b3ff5c876d90a">nfs3_func_desc</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnfs__function__desc____.html">nfs_function_desc_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#ade3381a451007489495bf0b92585520f">nfs4_func_desc</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnfs__function__desc____.html">nfs_function_desc_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a331b43564c209696c670c70673d544e1">mnt1_func_desc</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnfs__function__desc____.html">nfs_function_desc_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a7bcfef9b974d9b55a0f057d959a13bb8">mnt3_func_desc</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structhash__table.html">hash_table_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#ab41dfb8f9862268dfce85547de3d5ee9">ht_dupreq_udp</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structhash__table.html">hash_table_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a6886caab6efa0f98e18c1fc2b2bec54b">ht_dupreq_tcp</a></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a0dd9a264f91e9823e807b34e6994f777"></a><!-- doxytag: member="nfs_dupreq.c::clean_entry_dupreq" ref="a0dd9a264f91e9823e807b34e6994f777" args="(LRU_entry_t *pentry, void *addparam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int clean_entry_dupreq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlru__entry____.html">LRU_entry_t</a> *&#160;</td>
          <td class="paramname"><em>pentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>addparam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>clean_entry_dupreq: cleans an entry in the dupreq cache.</p>
<p>cleans an entry in the dupreq cache.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pentry</td><td>[INOUT] entry to be cleaned. </td></tr>
    <tr><td class="paramname">addparam</td><td>[IN] additional parameter used for cleaning.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if ok, other values mean an error. </dd></dl>

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00295">295</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae097a7ca8bfad0e9658feb038835a83c"></a><!-- doxytag: member="nfs_dupreq.c::compare_req" ref="ae097a7ca8bfad0e9658feb038835a83c" args="(hash_buffer_t *buff1, hash_buffer_t *buff2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int compare_req </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhash__buff.html">hash_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buff1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhash__buff.html">hash_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buff2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>compare_req: compares the xid, ip, and port stored in the key buffers. may also compare the checksum if the relevant option was enabled during compile.</p>
<p>compare the xid, ip, and port stored in the key buffers. This function is to be used as 'compare_key' field in the hashtable storing the nfs duplicated requests.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buff1</td><td>[IN] first key </td></tr>
    <tr><td class="paramname">buff2</td><td>[IN] second key</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if keys are identifical, 1 if they are different. </dd></dl>

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00390">390</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="ace76340b85dd6bb0f65608bcced8a634"></a><!-- doxytag: member="nfs_dupreq.c::display_req_key" ref="ace76340b85dd6bb0f65608bcced8a634" args="(hash_buffer_t *pbuff, char *str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int display_req_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhash__buff.html">hash_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>pbuff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>display_req_key: displays the key stored in the buffer.</p>
<p>displays the key stored in the buffer. This function is to be used as 'key_to_str' field in the hashtable storing the nfs duplicated requests.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buff1</td><td>[IN] buffer to display </td></tr>
    <tr><td class="paramname">buff2</td><td>[OUT] output string</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of character written. </dd></dl>

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00417">417</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="a83a5c6ccfa97ddd8c53de02bd77a7277"></a><!-- doxytag: member="nfs_dupreq.c::display_req_val" ref="a83a5c6ccfa97ddd8c53de02bd77a7277" args="(hash_buffer_t *pbuff, char *str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int display_req_val </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhash__buff.html">hash_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>pbuff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>display_req_val: displays the value stored in the buffer.</p>
<p>displays the value stored in the buffer. This function is to be used as 'val_to_str' field in the hashtable storing the nfs duplicated requests.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buff1</td><td>[IN] buffer to display </td></tr>
    <tr><td class="paramname">buff2</td><td>[OUT] output string</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of character written. </dd></dl>

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00442">442</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="a62874e829e04af8882e6314fcecf3945"></a><!-- doxytag: member="nfs_dupreq.c::dupreq_rbt_hash_func" ref="a62874e829e04af8882e6314fcecf3945" args="(hash_parameter_t *p_hparam, hash_buffer_t *buffclef)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="extended__types_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a> dupreq_rbt_hash_func </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhash__param.html">hash_parameter_t</a> *&#160;</td>
          <td class="paramname"><em>p_hparam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhash__buff.html">hash_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buffclef</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dupreq_rbt_hash_func: computes the rbt value for the entry in dupreq cache.</p>
<p>Computes the rbt value for the entry in dupreq cache. In fact, it just use the Xid itself (which is an unsigned integer) as the rbt value. This function is called internal in the HasTable_* function</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hparam</td><td>[IN] hash table parameter. </td></tr>
    <tr><td class="paramname">buffcleff[in]</td><td>pointer to the hash key buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the computed rbt value.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__HTExported.html#ga49502e8329739f9789ec4423289235d2" title="Initialize a new hash table.">HashTable_Init</a> </dd></dl>

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00365">365</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="a720f58beecb1f29712e83373b56568d4"></a><!-- doxytag: member="nfs_dupreq.c::dupreq_value_hash_func" ref="a720f58beecb1f29712e83373b56568d4" args="(hash_parameter_t *p_hparam, hash_buffer_t *buffclef)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="extended__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> dupreq_value_hash_func </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhash__param.html">hash_parameter_t</a> *&#160;</td>
          <td class="paramname"><em>p_hparam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhash__buff.html">hash_buffer_t</a> *&#160;</td>
          <td class="paramname"><em>buffclef</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>dupreq_rbt_hash_func: computes the hash value for the entry in dupreq cache.</p>
<p>Computes the hash value for the entry in dupreq cache. In fact, it just uses the xid modulo the hash array size.</p>
<p>This function is called internal in the HasTable_* function</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">hparam</td><td>[IN] hash table parameter. </td></tr>
    <tr><td class="paramname">buffcleff[in]</td><td>pointer to the hash key buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the computed hash value.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__HTExported.html#ga49502e8329739f9789ec4423289235d2" title="Initialize a new hash table.">HashTable_Init</a> </dd></dl>

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00340">340</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="a19a92c1cca2c6d33998dddd4094eef7f"></a><!-- doxytag: member="nfs_dupreq.c::LogDupReq" ref="a19a92c1cca2c6d33998dddd4094eef7f" args="(const char *label, sockaddr_t *addr, long xid, u_long rq_prog)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LogDupReq </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ganesha__rpc_8h.html#a42f3261a45141da24a6d18194eae1c91">sockaddr_t</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>xid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_long&#160;</td>
          <td class="paramname"><em>rq_prog</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00087">87</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="accd676b25fd8adda77faf10c37f5a71b"></a><!-- doxytag: member="nfs_dupreq.c::nfs_dupreq_add_not_finished" ref="accd676b25fd8adda77faf10c37f5a71b" args="(struct svc_req *req, nfs_res_t *res_nfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nfs_dupreq_add_not_finished </td>
          <td>(</td>
          <td class="paramtype">struct svc_req *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unionnfs__res____.html">nfs_res_t</a> *&#160;</td>
          <td class="paramname"><em>res_nfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>nfs_dupreq_add_not_finished: adds an entry in the duplicate requests cache.</p>
<p>Adds an entry in the duplicate requests cache.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">xid</td><td>[IN] the transfer id to be used as key </td></tr>
    <tr><td class="paramname">pnfsreq</td><td>[IN] the request pointer to cache</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DUPREQ_SUCCESS if successfull<br/>
. </dd>
<dd>
DUPREQ_INSERT_MALLOC_ERROR if an error occured during the insertion process. </dd></dl>

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00499">499</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad30cdf2e72a3a44f95f951cc1572198d"></a><!-- doxytag: member="nfs_dupreq.c::nfs_dupreq_delete" ref="ad30cdf2e72a3a44f95f951cc1572198d" args="(struct svc_req *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nfs_dupreq_delete </td>
          <td>(</td>
          <td class="paramtype">struct svc_req *&#160;</td>
          <td class="paramname"><em>req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00239">239</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="aabab915e080d080a9a4cdd0df471044d"></a><!-- doxytag: member="nfs_dupreq.c::nfs_dupreq_finish" ref="aabab915e080d080a9a4cdd0df471044d" args="(struct svc_req *req, nfs_res_t *p_res_nfs, LRU_list_t *lru_dupreq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nfs_dupreq_finish </td>
          <td>(</td>
          <td class="paramtype">struct svc_req *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unionnfs__res____.html">nfs_res_t</a> *&#160;</td>
          <td class="paramname"><em>p_res_nfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlru__list____.html">LRU_list_t</a> *&#160;</td>
          <td class="paramname"><em>lru_dupreq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>nfs_dupreq_finish: Changes the being_processed flag in a dupreq to 0 and adds the reply info to the buffval.</p>
<p>Changes the being_processed flag in a dupreq to 0 and adds the reply info to the buffval. Used after the duplicate request has already been added to the dupreq cache but has not been fully processed yet.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">xid</td><td>[IN] the transfer id to be used as key </td></tr>
    <tr><td class="paramname">pnfsreq</td><td>[IN] the request pointer to cache</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>DUPREQ_SUCCESS if successfull<br/>
. </dd>
<dd>
DUPREQ_INSERT_MALLOC_ERROR if an error occured during the insertion process. </dd></dl>

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00612">612</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="a35d644f1f1b2c333ddc223251d615205"></a><!-- doxytag: member="nfs_dupreq.c::nfs_dupreq_gc_function" ref="a35d644f1f1b2c333ddc223251d615205" args="(LRU_entry_t *pentry, void *addparam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nfs_dupreq_gc_function </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlru__entry____.html">LRU_entry_t</a> *&#160;</td>
          <td class="paramname"><em>pentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>addparam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>nfs_dupreq_gc_function: Tests is an entry in dupreq cache is to be set invalid (has expired).</p>
<p>Tests is an entry in dupreq cache is to be set invalid (has expired).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pentry</td><td>[IN] pointer to the entry to test</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 if entry must be set invalid, 0 if not.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__LRUExportedFunctions.html#ga7dd2fad27347334adf7270b46fdd2d19">LRU_invalidate_by_function</a> </dd>
<dd>
<a class="el" href="group__LRUExportedFunctions.html#gaeaff4bce3efdf4087b96ba83912388bd">LRU_gc_invalid</a> </dd></dl>

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00736">736</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="a49e397d60fa354b43179f2926daa2256"></a><!-- doxytag: member="nfs_dupreq.c::nfs_dupreq_get" ref="a49e397d60fa354b43179f2926daa2256" args="(struct svc_req *req, int *pstatus)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="unionnfs__res____.html">nfs_res_t</a> nfs_dupreq_get </td>
          <td>(</td>
          <td class="paramtype">struct svc_req *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pstatus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>nfs_dupreq_get: Tries to get a duplicated requests for dupreq cache</p>
<p>Tries to get a duplicated requests for dupreq cache.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>[IN] svc_req whose xid we are looking for </td></tr>
    <tr><td class="paramname">xprt</td><td>[IN] xprt the related xprt (but we could use req-&gt;rq_xprt) XXX </td></tr>
    <tr><td class="paramname">pstatus</td><td>[OUT] the pointer to the status for the operation</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the result previously set if *pstatus == DUPREQ_SUCCESS </dd></dl>

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00675">675</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad36745bd28b69a188cd5092a390a3ca2"></a><!-- doxytag: member="nfs_dupreq.c::nfs_dupreq_get_stats" ref="ad36745bd28b69a188cd5092a390a3ca2" args="(hash_stat_t *phstat_udp, hash_stat_t *phstat_tcp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nfs_dupreq_get_stats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhash__stat.html">hash_stat_t</a> *&#160;</td>
          <td class="paramname"><em>phstat_udp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhash__stat.html">hash_stat_t</a> *&#160;</td>
          <td class="paramname"><em>phstat_tcp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>nfs_dupreq_get_stats: gets the hash table statistics for the duplicate requests.</p>
<p>Gets the hash table statistics for the duplicate requests.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">phstat</td><td>[OUT] pointer to the resulting stats.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>nothing (void function)</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__HTExported.html#gab876ef4cbcedd8049233ed0026cc2ac2" title="Get information on the hash table.">HashTable_GetStats</a> </dd></dl>

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00762">762</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0e0c7a1fda2f7d756dd1b2f8b4f97db6"></a><!-- doxytag: member="nfs_dupreq.c::nfs_Init_dupreq" ref="a0e0c7a1fda2f7d756dd1b2f8b4f97db6" args="(nfs_rpc_dupreq_parameter_t param)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nfs_Init_dupreq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnfs__rpc__dupreq__param____.html">nfs_rpc_dupreq_parameter_t</a>&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>nfs_Init_dupreq: Init the hashtable and LRU for duplicate request cache</p>
<p>Perform all the required initialization for hashtable and LRU for duplicate request cache</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">param</td><td>[IN] parameter used to init the duplicate request cache</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if successful, -1 otherwise </dd></dl>

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00465">465</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="af812dda060fd0aa4f965adadb15dd22d"></a><!-- doxytag: member="nfs_dupreq.c::print_entry_dupreq" ref="af812dda060fd0aa4f965adadb15dd22d" args="(LRU_data_t data, char *str)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int print_entry_dupreq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structLRU__data____.html">LRU_data_t</a>&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>print_entry_dupreq: prints an entry in the LRU list.</p>
<p>prints an entry in the LRU list.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>[IN] data stored in a LRU entry to be printed. </td></tr>
    <tr><td class="paramname">str</td><td>[OUT] string used to store the result.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if ok, other values mean an error. </dd></dl>

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00127">127</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a6886caab6efa0f98e18c1fc2b2bec54b"></a><!-- doxytag: member="nfs_dupreq.c::ht_dupreq_tcp" ref="a6886caab6efa0f98e18c1fc2b2bec54b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhash__table.html">hash_table_t</a>* <a class="el" href="nfs__dupreq_8c.html#a6886caab6efa0f98e18c1fc2b2bec54b">ht_dupreq_tcp</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00085">85</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab41dfb8f9862268dfce85547de3d5ee9"></a><!-- doxytag: member="nfs_dupreq.c::ht_dupreq_udp" ref="ab41dfb8f9862268dfce85547de3d5ee9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhash__table.html">hash_table_t</a>* <a class="el" href="nfs__dupreq_8c.html#ab41dfb8f9862268dfce85547de3d5ee9">ht_dupreq_udp</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nfs__dupreq_8c_source.html#l00084">84</a> of file <a class="el" href="nfs__dupreq_8c_source.html">nfs_dupreq.c</a>.</p>

</div>
</div>
<a class="anchor" id="a331b43564c209696c670c70673d544e1"></a><!-- doxytag: member="nfs_dupreq.c::mnt1_func_desc" ref="a331b43564c209696c670c70673d544e1" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnfs__function__desc____.html">nfs_function_desc_t</a> <a class="el" href="nfs__dupreq_8c.html#a331b43564c209696c670c70673d544e1">mnt1_func_desc</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nfs__worker__thread_8c_source.html#l00229">229</a> of file <a class="el" href="nfs__worker__thread_8c_source.html">nfs_worker_thread.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7bcfef9b974d9b55a0f057d959a13bb8"></a><!-- doxytag: member="nfs_dupreq.c::mnt3_func_desc" ref="a7bcfef9b974d9b55a0f057d959a13bb8" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnfs__function__desc____.html">nfs_function_desc_t</a> <a class="el" href="nfs__dupreq_8c.html#a7bcfef9b974d9b55a0f057d959a13bb8">mnt3_func_desc</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nfs__worker__thread_8c_source.html#l00250">250</a> of file <a class="el" href="nfs__worker__thread_8c_source.html">nfs_worker_thread.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad1973964670037b91a33fd6b6e4c40bc"></a><!-- doxytag: member="nfs_dupreq.c::nfs2_func_desc" ref="ad1973964670037b91a33fd6b6e4c40bc" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnfs__function__desc____.html">nfs_function_desc_t</a> <a class="el" href="nfs__dupreq_8c.html#ad1973964670037b91a33fd6b6e4c40bc">nfs2_func_desc</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nfs__worker__thread_8c_source.html#l00093">93</a> of file <a class="el" href="nfs__worker__thread_8c_source.html">nfs_worker_thread.c</a>.</p>

</div>
</div>
<a class="anchor" id="a177ddde86497df151d3b3ff5c876d90a"></a><!-- doxytag: member="nfs_dupreq.c::nfs3_func_desc" ref="a177ddde86497df151d3b3ff5c876d90a" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnfs__function__desc____.html">nfs_function_desc_t</a> <a class="el" href="nfs__dupreq_8c.html#a177ddde86497df151d3b3ff5c876d90a">nfs3_func_desc</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nfs__worker__thread_8c_source.html#l00150">150</a> of file <a class="el" href="nfs__worker__thread_8c_source.html">nfs_worker_thread.c</a>.</p>

</div>
</div>
<a class="anchor" id="ade3381a451007489495bf0b92585520f"></a><!-- doxytag: member="nfs_dupreq.c::nfs4_func_desc" ref="ade3381a451007489495bf0b92585520f" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnfs__function__desc____.html">nfs_function_desc_t</a> <a class="el" href="nfs__dupreq_8c.html#ade3381a451007489495bf0b92585520f">nfs4_func_desc</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="nfs__worker__thread_8c_source.html#l00221">221</a> of file <a class="el" href="nfs__worker__thread_8c_source.html">nfs_worker_thread.c</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 21 2012 for nfs-ganesha by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
