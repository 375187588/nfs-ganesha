<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>nfs-ganesha: fsal_lookup.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nfs-ganesha&#160;<span id="projectnumber">1.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>fsal_lookup.c File Reference</h1>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;fsal.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="FSAL__ZFS_2fsal__internal_8h_source.html">fsal_internal.h</a>&quot;</code><br/>
<code>#include &quot;fsal_convert.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="FSAL__ZFS_2fsal__common_8h_source.html">fsal_common.h</a>&quot;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
</div>
<p><a href="FSAL__ZFS_2fsal__lookup_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfsal__status____.html">fsal_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FSAL__ZFS_2fsal__lookup_8c.html#a8a09bcd80ddb2bd3dddcb9a4e0f31875">ZFSFSAL_lookup</a> (<a class="el" href="structfsal__handle____.html">fsal_handle_t</a> *parent_hdl, <a class="el" href="structfsal__name____.html">fsal_name_t</a> *p_filename, <a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *context, <a class="el" href="structfsal__handle____.html">fsal_handle_t</a> *obj_handle, <a class="el" href="structfsal__attrib__list____.html">fsal_attrib_list_t</a> *object_attributes)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfsal__status____.html">fsal_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FSAL__ZFS_2fsal__lookup_8c.html#acf62a6b98f8442631f90c9767d5e17c3">ZFSFSAL_lookupJunction</a> (<a class="el" href="structfsal__handle____.html">fsal_handle_t</a> *p_junction_handle, <a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *p_context, <a class="el" href="structfsal__handle____.html">fsal_handle_t</a> *p_fsoot_handle, <a class="el" href="structfsal__attrib__list____.html">fsal_attrib_list_t</a> *p_fsroot_attributes)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfsal__status____.html">fsal_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FSAL__ZFS_2fsal__lookup_8c.html#a57baaa3bb098a5169b3820b8f8057343">ZFSFSAL_lookupPath</a> (<a class="el" href="structfsal__path____.html">fsal_path_t</a> *p_path, <a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *p_context, <a class="el" href="structfsal__handle____.html">fsal_handle_t</a> *object_handle, <a class="el" href="structfsal__attrib__list____.html">fsal_attrib_list_t</a> *object_attributes)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FSAL__ZFS_2fsal__lookup_8c.html#ad861c1b4a6ecceb5db57bc8cf39f9d29">i_snapshots</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsnapshot__t.html">snapshot_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FSAL__ZFS_2fsal__lookup_8c.html#aa82f26badf6aa64d71716f29a354423c">p_snapshots</a></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a8a09bcd80ddb2bd3dddcb9a4e0f31875"></a><!-- doxytag: member="FSAL_ZFS/fsal_lookup.c::ZFSFSAL_lookup" ref="a8a09bcd80ddb2bd3dddcb9a4e0f31875" args="(fsal_handle_t *parent_hdl, fsal_name_t *p_filename, fsal_op_context_t *context, fsal_handle_t *obj_handle, fsal_attrib_list_t *object_attributes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsal__status____.html">fsal_status_t</a> ZFSFSAL_lookup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsal__handle____.html">fsal_handle_t</a> *&#160;</td>
          <td class="paramname"><em>parent_hdl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__name____.html">fsal_name_t</a> *&#160;</td>
          <td class="paramname"><em>p_filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__handle____.html">fsal_handle_t</a> *&#160;</td>
          <td class="paramname"><em>obj_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__attrib__list____.html">fsal_attrib_list_t</a> *&#160;</td>
          <td class="paramname"><em>object_attributes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>FSAL_lookup : Looks up for an object into a directory.</p>
<p>Note : if parent handle and filename are NULL, this retrieves root's handle.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">parent_directory_handle</td><td>(input) Handle of the parent directory to search the object in. </td></tr>
    <tr><td class="paramname">filename</td><td>(input) The name of the object to find. </td></tr>
    <tr><td class="paramname">p_context</td><td>(input) Authentication context for the operation (user,...). </td></tr>
    <tr><td class="paramname">object_handle</td><td>(output) The handle of the object corresponding to filename. </td></tr>
    <tr><td class="paramname">object_attributes</td><td>(optional input/output) Pointer to the attributes of the object we found. As input, it defines the attributes that the caller wants to retrieve (by positioning flags into this structure) and the output is built considering this input (it fills the structure according to the flags it contains). It can be NULL (increases performances).</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Major error codes :<ul>
<li>ERR_FSAL_NO_ERROR (no error)</li>
<li>ERR_FSAL_STALE (parent_directory_handle does not address an existing object)</li>
<li>ERR_FSAL_NOTDIR (parent_directory_handle does not address a directory)</li>
<li>ERR_FSAL_NOENT (the object designated by p_filename does not exist)</li>
<li>ERR_FSAL_XDEV (tried to operate a lookup on a filesystem junction. Use FSAL_lookupJunction instead)</li>
<li>ERR_FSAL_FAULT (a NULL pointer was passed as mandatory argument)</li>
<li>Other error codes can be returned : ERR_FSAL_ACCESS, ERR_FSAL_IO, ... </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="FSAL__ZFS_2fsal__lookup_8c_source.html#l00062">62</a> of file <a class="el" href="FSAL__ZFS_2fsal__lookup_8c_source.html">FSAL_ZFS/fsal_lookup.c</a>.</p>

</div>
</div>
<a class="anchor" id="acf62a6b98f8442631f90c9767d5e17c3"></a><!-- doxytag: member="FSAL_ZFS/fsal_lookup.c::ZFSFSAL_lookupJunction" ref="acf62a6b98f8442631f90c9767d5e17c3" args="(fsal_handle_t *p_junction_handle, fsal_op_context_t *p_context, fsal_handle_t *p_fsoot_handle, fsal_attrib_list_t *p_fsroot_attributes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsal__status____.html">fsal_status_t</a> ZFSFSAL_lookupJunction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsal__handle____.html">fsal_handle_t</a> *&#160;</td>
          <td class="paramname"><em>p_junction_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *&#160;</td>
          <td class="paramname"><em>p_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__handle____.html">fsal_handle_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsoot_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__attrib__list____.html">fsal_attrib_list_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsroot_attributes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>FSAL_lookupJunction : Get the fileset root for a junction.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">p_junction_handle</td><td>(input) Handle of the junction to be looked up. </td></tr>
    <tr><td class="paramname">cred</td><td>(input) Authentication context for the operation (user,...). </td></tr>
    <tr><td class="paramname">p_fsroot_handle</td><td>(output) The handle of root directory of the fileset. </td></tr>
    <tr><td class="paramname">p_fsroot_attributes</td><td>(optional input/output) Pointer to the attributes of the root directory for the fileset. As input, it defines the attributes that the caller wants to retrieve (by positioning flags into this structure) and the output is built considering this input (it fills the structure according to the flags it contains). It can be NULL (increases performances).</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Major error codes :<ul>
<li>ERR_FSAL_NO_ERROR (no error)</li>
<li>ERR_FSAL_STALE (p_junction_handle does not address an existing object)</li>
<li>ERR_FSAL_FAULT (a NULL pointer was passed as mandatory argument)</li>
<li>Other error codes can be returned : ERR_FSAL_ACCESS, ERR_FSAL_IO, ... </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="FSAL__ZFS_2fsal__lookup_8c_source.html#l00263">263</a> of file <a class="el" href="FSAL__ZFS_2fsal__lookup_8c_source.html">FSAL_ZFS/fsal_lookup.c</a>.</p>

</div>
</div>
<a class="anchor" id="a57baaa3bb098a5169b3820b8f8057343"></a><!-- doxytag: member="FSAL_ZFS/fsal_lookup.c::ZFSFSAL_lookupPath" ref="a57baaa3bb098a5169b3820b8f8057343" args="(fsal_path_t *p_path, fsal_op_context_t *p_context, fsal_handle_t *object_handle, fsal_attrib_list_t *object_attributes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsal__status____.html">fsal_status_t</a> ZFSFSAL_lookupPath </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsal__path____.html">fsal_path_t</a> *&#160;</td>
          <td class="paramname"><em>p_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *&#160;</td>
          <td class="paramname"><em>p_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__handle____.html">fsal_handle_t</a> *&#160;</td>
          <td class="paramname"><em>object_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__attrib__list____.html">fsal_attrib_list_t</a> *&#160;</td>
          <td class="paramname"><em>object_attributes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>FSAL_lookupPath : Looks up for an object into the namespace.</p>
<p>Note : if path equals "/", this retrieves root's handle.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>(input) The path of the object to find. </td></tr>
    <tr><td class="paramname">p_context</td><td>(input) Authentication context for the operation (user,...). </td></tr>
    <tr><td class="paramname">object_handle</td><td>(output) The handle of the object corresponding to filename. </td></tr>
    <tr><td class="paramname">object_attributes</td><td>(optional input/output) Pointer to the attributes of the object we found. As input, it defines the attributes that the caller wants to retrieve (by positioning flags into this structure) and the output is built considering this input (it fills the structure according to the flags it contains). It can be NULL (increases performances).</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Major error codes :<ul>
<li>ERR_FSAL_NO_ERROR (no error)</li>
<li>ERR_FSAL_FAULT (a NULL pointer was passed as mandatory argument)</li>
<li>ERR_FSAL_INVAL (the path argument is not absolute)</li>
<li>ERR_FSAL_NOENT (an element in the path does not exist)</li>
<li>ERR_FSAL_NOTDIR (an element in the path is not a directory)</li>
<li>ERR_FSAL_XDEV (tried to cross a filesystem junction, whereas is has not been authorized in the server configuration - FSAL::auth_xdev_export parameter)</li>
<li>Other error codes can be returned : ERR_FSAL_ACCESS, ERR_FSAL_IO, ... </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="FSAL__ZFS_2fsal__lookup_8c_source.html#l00335">335</a> of file <a class="el" href="FSAL__ZFS_2fsal__lookup_8c_source.html">FSAL_ZFS/fsal_lookup.c</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ad861c1b4a6ecceb5db57bc8cf39f9d29"></a><!-- doxytag: member="FSAL_ZFS/fsal_lookup.c::i_snapshots" ref="ad861c1b4a6ecceb5db57bc8cf39f9d29" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="FSAL__ZFS_2fsal__lookup_8c.html#ad861c1b4a6ecceb5db57bc8cf39f9d29">i_snapshots</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Common FS tools for internal use in the FSAL. </p>

<p>Definition at line <a class="el" href="FSAL__ZFS_2fsal__internal_8c_source.html#l00035">35</a> of file <a class="el" href="FSAL__ZFS_2fsal__internal_8c_source.html">FSAL_ZFS/fsal_internal.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa82f26badf6aa64d71716f29a354423c"></a><!-- doxytag: member="FSAL_ZFS/fsal_lookup.c::p_snapshots" ref="aa82f26badf6aa64d71716f29a354423c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsnapshot__t.html">snapshot_t</a>* <a class="el" href="FSAL__ZFS_2fsal__lookup_8c.html#aa82f26badf6aa64d71716f29a354423c">p_snapshots</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="FSAL__ZFS_2fsal__internal_8c_source.html#l00036">36</a> of file <a class="el" href="FSAL__ZFS_2fsal__internal_8c_source.html">FSAL_ZFS/fsal_internal.c</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 21 2012 for nfs-ganesha by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
