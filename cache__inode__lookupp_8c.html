<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>nfs-ganesha: cache_inode_lookupp.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nfs-ganesha&#160;<span id="projectnumber">1.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>cache_inode_lookupp.c File Reference</h1>  </div>
</div>
<div class="contents">

<p>Perform lookup through the cache to get the parent entry for a directory.  
<a href="#_details">More...</a></p>
<div class="textblock"><code>#include &quot;log.h&quot;</code><br/>
<code>#include &quot;HashData.h&quot;</code><br/>
<code>#include &quot;HashTable.h&quot;</code><br/>
<code>#include &quot;fsal.h&quot;</code><br/>
<code>#include &quot;cache_inode.h&quot;</code><br/>
<code>#include &quot;cache_inode_lru.h&quot;</code><br/>
<code>#include &quot;cache_inode_weakref.h&quot;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;sys/param.h&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &lt;assert.h&gt;</code><br/>
</div>
<p><a href="cache__inode__lookupp_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__lookupp_8c.html#aec2852f8ac37de4be9716cfa81f9a129">cache_inode_lookupp_impl</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *entry, <a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *context, <a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *status)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements parent lookup functionality.  <a href="#aec2852f8ac37de4be9716cfa81f9a129"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__inode__lookupp_8c.html#a67ba9f31113205922a6a17cc37971a9c">cache_inode_lookupp</a> (<a class="el" href="structcache__entry__t.html">cache_entry_t</a> *entry, <a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *context, <a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *status)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Public function to look up a directory's parent.  <a href="#a67ba9f31113205922a6a17cc37971a9c"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Perform lookup through the cache to get the parent entry for a directory. </p>
<dl class="author"><dt><b>Author:</b></dt><dd></dd></dl>
<dl class="rcs"><dt><b>Author:</b></dt><dd>deniel </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd></dd></dl>
<dl class="rcs"><dt><b>Date:</b></dt><dd>2005/11/28 17:02:26 </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd></dd></dl>
<dl class="rcs"><dt><b>Revision:</b></dt><dd>1.5 </dd></dl>
<p><a class="el" href="cache__inode__lookupp_8c.html" title="Perform lookup through the cache to get the parent entry for a directory.">cache_inode_lookupp.c</a> : Perform lookup through the cache to get the parent entry for a directory. </p>

<p>Definition in file <a class="el" href="cache__inode__lookupp_8c_source.html">cache_inode_lookupp.c</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a67ba9f31113205922a6a17cc37971a9c"></a><!-- doxytag: member="cache_inode_lookupp.c::cache_inode_lookupp" ref="a67ba9f31113205922a6a17cc37971a9c" args="(cache_entry_t *entry, fsal_op_context_t *context, cache_inode_status_t *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcache__entry__t.html">cache_entry_t</a>* cache_inode_lookupp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Public function to look up a directory's parent. </p>
<p>This function looks up (and potentially caches) the parent of a directory.</p>
<p>If a cache entry is returned, its refcount is +1.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>Entry whose parent is to be obtained. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>FSAL credentials </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Returned status</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the found entry or NULL on error. </dd></dl>

<p>Definition at line <a class="el" href="cache__inode__lookupp_8c_source.html#l00183">183</a> of file <a class="el" href="cache__inode__lookupp_8c_source.html">cache_inode_lookupp.c</a>.</p>

</div>
</div>
<a class="anchor" id="aec2852f8ac37de4be9716cfa81f9a129"></a><!-- doxytag: member="cache_inode_lookupp.c::cache_inode_lookupp_impl" ref="aec2852f8ac37de4be9716cfa81f9a129" args="(cache_entry_t *entry, fsal_op_context_t *context, cache_inode_status_t *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcache__entry__t.html">cache_entry_t</a>* cache_inode_lookupp_impl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcache__entry__t.html">cache_entry_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsal__op__context____.html">fsal_op_context_t</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cache__inode_8h.html#aa6929668cedf7463f35a22998b8e08d2">cache_inode_status_t</a> *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements parent lookup functionality. </p>
<p>Looks up (and caches) the parent directory for a directory. If an entry is returned, that entry's refcount is incremented by one. The caller must hold a reference on the entry. It is expected that the caller holds the directory lock on entry. It is also expected that the caller will relinquish the directory lock after return. If result was not cached, the function will drop the read lock and acquire a write lock so it can add the result to the cache.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>Entry whose parent is to be obtained </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>FSAL operation context </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>Returned status</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the found entry or NULL on error. </dd></dl>

<p>Definition at line <a class="el" href="cache__inode__lookupp_8c_source.html#l00081">81</a> of file <a class="el" href="cache__inode__lookupp_8c_source.html">cache_inode_lookupp.c</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 21 2012 for nfs-ganesha by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
