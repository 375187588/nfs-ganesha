\section{nfs\_\-mnt\_\-list.c File Reference}
\label{nfs__mnt__list_8c}\index{nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}}
routines for managing the mount list. 

{\tt \#include $<$stdio.h$>$}\par
{\tt \#include $<$sys/types.h$>$}\par
{\tt \#include $<$ctype.h$>$}\par
{\tt \#include $<$stdlib.h$>$}\par
{\tt \#include $<$dirent.h$>$}\par
{\tt \#include $<$netdb.h$>$}\par
{\tt \#include $<$netinet/in.h$>$}\par
{\tt \#include $<$arpa/inet.h$>$}\par
{\tt \#include $<$string.h$>$}\par
{\tt \#include $<$pthread.h$>$}\par
{\tt \#include $<$fcntl.h$>$}\par
{\tt \#include $<$sys/file.h$>$}\par
{\tt \#include $<$pwd.h$>$}\par
{\tt \#include $<$grp.h$>$}\par
{\tt \#include $<$rpc/types.h$>$}\par
{\tt \#include $<$rpc/rpc.h$>$}\par
{\tt \#include $<$rpc/auth.h$>$}\par
{\tt \#include $<$rpc/pmap\_\-clnt.h$>$}\par
{\tt \#include \char`\"{}log\_\-functions.h\char`\"{}}\par
{\tt \#include \char`\"{}stuff\_\-alloc.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs\_\-core.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs23.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs4.h\char`\"{}}\par
{\tt \#include \char`\"{}fsal.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs\_\-tools.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs\_\-exports.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs\_\-file\_\-handle.h\char`\"{}}\par
\subsection*{Functions}
\begin{CompactItemize}
\item 
int {\bf nfs\_\-Add\_\-Mount\-List\_\-Entry} (char $\ast$hostname, char $\ast$dirpath)
\item 
int {\bf nfs\_\-Remove\_\-Mount\-List\_\-Entry} (char $\ast$hostname, char $\ast$dirpath)
\item 
int {\bf nfs\_\-Purge\_\-Mount\-List} (void)
\item 
int {\bf nfs\_\-Init\_\-Mount\-List} (void)
\item 
mountlist {\bf nfs\_\-Get\_\-Mount\-List} (void)
\item 
void {\bf nfs\_\-Print\_\-Mount\-List} (void)
\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
mountlist {\bf MNT\_\-List\_\-head} = NULL
\item 
mountlist {\bf MNT\_\-List\_\-tail} = NULL
\end{CompactItemize}


\subsection{Detailed Description}
routines for managing the mount list. 

\begin{Desc}
\item[Author:]\begin{Desc}
\item[Author]deniel \end{Desc}
\end{Desc}
\begin{Desc}
\item[Date:]\begin{Desc}
\item[Date]2005/11/28 17:03:03 \end{Desc}
\end{Desc}
\begin{Desc}
\item[Version:]\begin{Desc}
\item[Revision]1.7 \end{Desc}
\end{Desc}
{\bf nfs\_\-mnt\_\-list.c}{\rm (p.\,\pageref{nfs__mnt__list_8c})} : routines for managing the mount list.

\begin{Desc}
\item[Header]/cea/home/cvs/cvs/SHERPA/Base\-Cvs/GANESHA/src/support/nfs\_\-mnt\_\-list.c,v 1.7 2005/11/28 17:03:03 deniel Exp \end{Desc}


\begin{Desc}
\item[Log]{\bf nfs\_\-mnt\_\-list.c}{\rm (p.\,\pageref{nfs__mnt__list_8c})},v \end{Desc}
Revision 1.7 2005/11/28 17:03:03 deniel Added Ce\-CILL headers

Revision 1.6 2005/11/24 13:44:29 deniel ajout du remove dans ipname track list in nfs\_\-mnt\_\-listc.

Revision 1.5 2005/10/07 09:33:22 leibovic Correcting bug in nfs\_\-Add\_\-Mount\-List\_\-Entry function ( pnew\_\-mnt\_\-list\_\-entry-$>$ml\_\-next not initialized ).

Revision 1.4 2005/10/05 14:03:31 deniel DEBUG ifdef are now much cleaner

Revision 1.3 2005/08/11 12:37:28 deniel Added statistics management

Revision 1.2 2005/08/03 13:13:59 deniel memset to zero before building the filehandles

Revision 1.1 2005/08/03 06:57:54 deniel Added a libsupport for miscellaneous service functions

Revision 1.1 2005/07/20 11:49:47 deniel Mount protocol V1/V3 support almost complete

Definition in file {\bf nfs\_\-mnt\_\-list.c}.

\subsection{Function Documentation}
\index{nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}!nfs_Add_MountList_Entry@{nfs\_\-Add\_\-MountList\_\-Entry}}
\index{nfs_Add_MountList_Entry@{nfs\_\-Add\_\-MountList\_\-Entry}!nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int nfs\_\-Add\_\-Mount\-List\_\-Entry (char $\ast$ {\em hostname}, char $\ast$ {\em dirpath})}\label{nfs__mnt__list_8c_a2}


nfs\_\-Add\_\-Mount\-List\_\-Entry: Adds a client to the mount list.

Adds a client to the mount list.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em hostname}][IN] the hostname for the client \item[{\em dirpath}][IN] the mounted path\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]1 if successful, 0 otherwise \end{Desc}


Definition at line 173 of file nfs\_\-mnt\_\-list.c.

References MNT\_\-List\_\-head, MNT\_\-List\_\-tail, and nfs\_\-Print\_\-Mount\-List().\index{nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}!nfs_Get_MountList@{nfs\_\-Get\_\-MountList}}
\index{nfs_Get_MountList@{nfs\_\-Get\_\-MountList}!nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}mountlist nfs\_\-Get\_\-Mount\-List (void)}\label{nfs__mnt__list_8c_a6}


nfs\_\-Get\_\-Mount\-List: Returns the mount list.

Returns the mount list.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em none}](take no argument)\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the mount list (NULL if mount list is empty) \end{Desc}


Definition at line 433 of file nfs\_\-mnt\_\-list.c.

References nfs\_\-Print\_\-Mount\-List().\index{nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}!nfs_Init_MountList@{nfs\_\-Init\_\-MountList}}
\index{nfs_Init_MountList@{nfs\_\-Init\_\-MountList}!nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int nfs\_\-Init\_\-Mount\-List (void)}\label{nfs__mnt__list_8c_a5}


nfs\_\-Init\_\-Mount\-List: Initializes the mount list.

Initializes the mount list.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em none}](take no argument)\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]1 if successful, 0 otherwise \end{Desc}


Definition at line 409 of file nfs\_\-mnt\_\-list.c.

References MNT\_\-List\_\-head, MNT\_\-List\_\-tail, and nfs\_\-Print\_\-Mount\-List().\index{nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}!nfs_Print_MountList@{nfs\_\-Print\_\-MountList}}
\index{nfs_Print_MountList@{nfs\_\-Print\_\-MountList}!nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void nfs\_\-Print\_\-Mount\-List (void)}\label{nfs__mnt__list_8c_a7}


nfs\_\-Print\_\-Mount\-List: Prints the mount list (for debugging purpose).

Prints the mount list (for debugging purpose).

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em none}](take no argument)\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]nothing (void function) \end{Desc}


Definition at line 453 of file nfs\_\-mnt\_\-list.c.

References MNT\_\-List\_\-head.

Referenced by nfs\_\-Add\_\-Mount\-List\_\-Entry(), nfs\_\-Get\_\-Mount\-List(), nfs\_\-Init\_\-Mount\-List(), nfs\_\-Purge\_\-Mount\-List(), and nfs\_\-Remove\_\-Mount\-List\_\-Entry().\index{nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}!nfs_Purge_MountList@{nfs\_\-Purge\_\-MountList}}
\index{nfs_Purge_MountList@{nfs\_\-Purge\_\-MountList}!nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int nfs\_\-Purge\_\-Mount\-List (void)}\label{nfs__mnt__list_8c_a4}


nfs\_\-Purge\_\-Mount\-List: Purges the whole mount list.

Purges the whole mount list.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em none}](take no argument)\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]1 if successful, 0 otherwise \end{Desc}


Definition at line 367 of file nfs\_\-mnt\_\-list.c.

References MNT\_\-List\_\-head, MNT\_\-List\_\-tail, and nfs\_\-Print\_\-Mount\-List().\index{nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}!nfs_Remove_MountList_Entry@{nfs\_\-Remove\_\-MountList\_\-Entry}}
\index{nfs_Remove_MountList_Entry@{nfs\_\-Remove\_\-MountList\_\-Entry}!nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int nfs\_\-Remove\_\-Mount\-List\_\-Entry (char $\ast$ {\em hostname}, char $\ast$ {\em dirpath})}\label{nfs__mnt__list_8c_a3}


nfs\_\-Remove\_\-Mount\-List\_\-Entry: Removes a client to the mount list.

Removes a client to the mount list.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em hostname}][IN] the hostname for the client \item[{\em path}][IN] the mounted path\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]1 if successful, 0 otherwise \end{Desc}


Definition at line 286 of file nfs\_\-mnt\_\-list.c.

References MNT\_\-List\_\-head, MNT\_\-List\_\-tail, and nfs\_\-Print\_\-Mount\-List().

\subsection{Variable Documentation}
\index{nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}!MNT_List_head@{MNT\_\-List\_\-head}}
\index{MNT_List_head@{MNT\_\-List\_\-head}!nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}mountlist {\bf MNT\_\-List\_\-head} = NULL}\label{nfs__mnt__list_8c_a0}




Definition at line 158 of file nfs\_\-mnt\_\-list.c.

Referenced by nfs\_\-Add\_\-Mount\-List\_\-Entry(), nfs\_\-Init\_\-Mount\-List(), nfs\_\-Print\_\-Mount\-List(), nfs\_\-Purge\_\-Mount\-List(), and nfs\_\-Remove\_\-Mount\-List\_\-Entry().\index{nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}!MNT_List_tail@{MNT\_\-List\_\-tail}}
\index{MNT_List_tail@{MNT\_\-List\_\-tail}!nfs_mnt_list.c@{nfs\_\-mnt\_\-list.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}mountlist {\bf MNT\_\-List\_\-tail} = NULL}\label{nfs__mnt__list_8c_a1}




Definition at line 159 of file nfs\_\-mnt\_\-list.c.

Referenced by nfs\_\-Add\_\-Mount\-List\_\-Entry(), nfs\_\-Init\_\-Mount\-List(), nfs\_\-Purge\_\-Mount\-List(), and nfs\_\-Remove\_\-Mount\-List\_\-Entry().