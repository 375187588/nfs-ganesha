\section{nfs\_\-ip\_\-name.c File Reference}
\label{nfs__ip__name_8c}\index{nfs\_\-ip\_\-name.c@{nfs\_\-ip\_\-name.c}}
The management of the IP/name cache.  


{\tt \#include \char`\"{}HashData.h\char`\"{}}\par
{\tt \#include \char`\"{}HashTable.h\char`\"{}}\par
{\tt \#include \char`\"{}log\_\-functions.h\char`\"{}}\par
{\tt \#include \char`\"{}stuff\_\-alloc.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs\_\-core.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs\_\-exports.h\char`\"{}}\par
{\tt \#include \char`\"{}config\_\-parsing.h\char`\"{}}\par
{\tt \#include $<$stdlib.h$>$}\par
{\tt \#include $<$string.h$>$}\par
{\tt \#include $<$sys/socket.h$>$}\par
{\tt \#include $<$netinet/in.h$>$}\par
{\tt \#include $<$arpa/inet.h$>$}\par
\subsection*{Functions}
\begin{CompactItemize}
\item 
unsigned long int {\bf ip\_\-name\_\-value\_\-hash\_\-func} (hash\_\-parameter\_\-t $\ast$p\_\-hparam, hash\_\-buffer\_\-t $\ast$buffclef)
\item 
unsigned long int {\bf ip\_\-name\_\-rbt\_\-hash\_\-func} (hash\_\-parameter\_\-t $\ast$p\_\-hparam, hash\_\-buffer\_\-t $\ast$buffclef)
\item 
int {\bf compare\_\-ip\_\-name} (hash\_\-buffer\_\-t $\ast$buff1, hash\_\-buffer\_\-t $\ast$buff2)
\item 
int {\bf display\_\-ip\_\-name} (hash\_\-buffer\_\-t $\ast$pbuff, char $\ast$str)
\item 
int {\bf display\_\-ip\_\-value} (hash\_\-buffer\_\-t $\ast$pbuff, char $\ast$str)
\item 
int {\bf nfs\_\-ip\_\-name\_\-add} (unsigned int ipaddr, char $\ast$hostname)
\item 
int {\bf nfs\_\-ip\_\-name\_\-get} (unsigned int ipaddr, char $\ast$hostname)
\item 
int {\bf nfs\_\-ip\_\-name\_\-remove} (int ipaddr)
\item 
int {\bf nfs\_\-Init\_\-ip\_\-name} (nfs\_\-ip\_\-name\_\-parameter\_\-t param)
\item 
int {\bf nfs\_\-ip\_\-name\_\-populate} (char $\ast$path)
\item 
void {\bf nfs\_\-ip\_\-name\_\-get\_\-stats} (hash\_\-stat\_\-t $\ast$phstat)
\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
hash\_\-table\_\-t $\ast$ {\bf ht\_\-ip\_\-name}
\item 
nfs\_\-parameter\_\-t {\bf nfs\_\-param}
\item 
unsigned int {\bf expiration\_\-time}
\end{CompactItemize}


\subsection{Detailed Description}
The management of the IP/name cache. 

\begin{Desc}
\item[Author:]\end{Desc}
\begin{Desc}
\item[Author]leibovic \end{Desc}
\begin{Desc}
\item[Date:]\end{Desc}
\begin{Desc}
\item[Date]2006/01/20 07:39:23 \end{Desc}
\begin{Desc}
\item[Version:]\end{Desc}
\begin{Desc}
\item[Revision]1.6 \end{Desc}
\doxyref{nfs\_\-ip\_\-name.c}{p.}{nfs__ip__name_8c} : The management of the IP/name cache. 

Definition in file {\bf nfs\_\-ip\_\-name.c}.

\subsection{Function Documentation}
\index{nfs\_\-ip\_\-name.c@{nfs\_\-ip\_\-name.c}!compare\_\-ip\_\-name@{compare\_\-ip\_\-name}}
\index{compare\_\-ip\_\-name@{compare\_\-ip\_\-name}!nfs_ip_name.c@{nfs\_\-ip\_\-name.c}}
\subsubsection[{compare\_\-ip\_\-name}]{\setlength{\rightskip}{0pt plus 5cm}int compare\_\-ip\_\-name (hash\_\-buffer\_\-t $\ast$ {\em buff1}, \/  hash\_\-buffer\_\-t $\ast$ {\em buff2})}\label{nfs__ip__name_8c_fe8038be2a8dcdabfd1dc8683d094c57}


compare\_\-ip\_\-name: compares the ip address stored in the key buffers.

compare the ip address stored in the key buffers. This function is to be used as 'compare\_\-key' field in the hashtable storing the nfs duplicated requests.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em buff1}][IN] first key \item[{\em buff2}][IN] second key\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]0 if keys are identifical, 1 if they are different. \end{Desc}


Definition at line 171 of file nfs\_\-ip\_\-name.c.\index{nfs\_\-ip\_\-name.c@{nfs\_\-ip\_\-name.c}!display\_\-ip\_\-name@{display\_\-ip\_\-name}}
\index{display\_\-ip\_\-name@{display\_\-ip\_\-name}!nfs_ip_name.c@{nfs\_\-ip\_\-name.c}}
\subsubsection[{display\_\-ip\_\-name}]{\setlength{\rightskip}{0pt plus 5cm}int display\_\-ip\_\-name (hash\_\-buffer\_\-t $\ast$ {\em pbuff}, \/  char $\ast$ {\em str})}\label{nfs__ip__name_8c_4db54e83cedf16402b5b29d89ad5a297}


display\_\-ip\_\-name: displays the ip\_\-name stored in the buffer.

displays the ip\_\-name stored in the buffer. This function is to be used as 'key\_\-to\_\-str' field in the hashtable storing the nfs duplicated requests.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em buff1}][IN] buffer to display \item[{\em buff2}][OUT] output string\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]number of character written. \end{Desc}


Definition at line 192 of file nfs\_\-ip\_\-name.c.\index{nfs\_\-ip\_\-name.c@{nfs\_\-ip\_\-name.c}!display\_\-ip\_\-value@{display\_\-ip\_\-value}}
\index{display\_\-ip\_\-value@{display\_\-ip\_\-value}!nfs_ip_name.c@{nfs\_\-ip\_\-name.c}}
\subsubsection[{display\_\-ip\_\-value}]{\setlength{\rightskip}{0pt plus 5cm}int display\_\-ip\_\-value (hash\_\-buffer\_\-t $\ast$ {\em pbuff}, \/  char $\ast$ {\em str})}\label{nfs__ip__name_8c_fba9cbfec188896a7353bfadd6ce6799}




Definition at line 204 of file nfs\_\-ip\_\-name.c.\index{nfs\_\-ip\_\-name.c@{nfs\_\-ip\_\-name.c}!ip\_\-name\_\-rbt\_\-hash\_\-func@{ip\_\-name\_\-rbt\_\-hash\_\-func}}
\index{ip\_\-name\_\-rbt\_\-hash\_\-func@{ip\_\-name\_\-rbt\_\-hash\_\-func}!nfs_ip_name.c@{nfs\_\-ip\_\-name.c}}
\subsubsection[{ip\_\-name\_\-rbt\_\-hash\_\-func}]{\setlength{\rightskip}{0pt plus 5cm}unsigned long int ip\_\-name\_\-rbt\_\-hash\_\-func (hash\_\-parameter\_\-t $\ast$ {\em p\_\-hparam}, \/  hash\_\-buffer\_\-t $\ast$ {\em buffclef})}\label{nfs__ip__name_8c_07a3a37f16af2aae054a5f15ee13861f}


ip\_\-name\_\-rbt\_\-hash\_\-func: computes the rbt value for the entry in IP/name cache.

Computes the rbt value for the entry in IP/name cache. In fact, it just use the address value itself (which is an unsigned integer) as the rbt value. This function is called internal in the HasTable\_\-$\ast$ function

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em hparam}][IN] hash table parameter. \item[{\em buffcleff\mbox{[}in\mbox{]}}]pointer to the hash key buffer\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the computed rbt value.\end{Desc}
\begin{Desc}
\item[See also:]HashTable\_\-Init \end{Desc}


Definition at line 152 of file nfs\_\-ip\_\-name.c.\index{nfs\_\-ip\_\-name.c@{nfs\_\-ip\_\-name.c}!ip\_\-name\_\-value\_\-hash\_\-func@{ip\_\-name\_\-value\_\-hash\_\-func}}
\index{ip\_\-name\_\-value\_\-hash\_\-func@{ip\_\-name\_\-value\_\-hash\_\-func}!nfs_ip_name.c@{nfs\_\-ip\_\-name.c}}
\subsubsection[{ip\_\-name\_\-value\_\-hash\_\-func}]{\setlength{\rightskip}{0pt plus 5cm}unsigned long int ip\_\-name\_\-value\_\-hash\_\-func (hash\_\-parameter\_\-t $\ast$ {\em p\_\-hparam}, \/  hash\_\-buffer\_\-t $\ast$ {\em buffclef})}\label{nfs__ip__name_8c_8ae4b30f714eb77ca1084aa6d3f778ac}


ip\_\-name\_\-rbt\_\-hash\_\-func: computes the hash value for the entry in IP/name cache.

Computes the hash value for the entry in IP/name cache. In fact, it just use addresse as value (identity function) modulo the size of the hash. This function is called internal in the HasTable\_\-$\ast$ function

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em hparam}][IN] hash table parameter. \item[{\em buffcleff\mbox{[}in\mbox{]}}]pointer to the hash key buffer\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the computed hash value.\end{Desc}
\begin{Desc}
\item[See also:]HashTable\_\-Init \end{Desc}


Definition at line 130 of file nfs\_\-ip\_\-name.c.\index{nfs\_\-ip\_\-name.c@{nfs\_\-ip\_\-name.c}!nfs\_\-Init\_\-ip\_\-name@{nfs\_\-Init\_\-ip\_\-name}}
\index{nfs\_\-Init\_\-ip\_\-name@{nfs\_\-Init\_\-ip\_\-name}!nfs_ip_name.c@{nfs\_\-ip\_\-name.c}}
\subsubsection[{nfs\_\-Init\_\-ip\_\-name}]{\setlength{\rightskip}{0pt plus 5cm}int nfs\_\-Init\_\-ip\_\-name (nfs\_\-ip\_\-name\_\-parameter\_\-t {\em param})}\label{nfs__ip__name_8c_612791deebb45def97a52c9f3a938435}


nfs\_\-Init\_\-ip\_\-name: Init the hashtable for IP/name cache.

Perform all the required initialization for hashtable IP/name cache

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em param}][IN] parameter used to init the ip name cache\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]0 if successful, -1 otherwise \end{Desc}


Definition at line 376 of file nfs\_\-ip\_\-name.c.\index{nfs\_\-ip\_\-name.c@{nfs\_\-ip\_\-name.c}!nfs\_\-ip\_\-name\_\-add@{nfs\_\-ip\_\-name\_\-add}}
\index{nfs\_\-ip\_\-name\_\-add@{nfs\_\-ip\_\-name\_\-add}!nfs_ip_name.c@{nfs\_\-ip\_\-name.c}}
\subsubsection[{nfs\_\-ip\_\-name\_\-add}]{\setlength{\rightskip}{0pt plus 5cm}int nfs\_\-ip\_\-name\_\-add (unsigned int {\em ipaddr}, \/  char $\ast$ {\em hostname})}\label{nfs__ip__name_8c_2dfcc5a3f453ea9e621f9f6015db9793}


nfs\_\-ip\_\-name\_\-add: adds an entry in the duplicate requests cache.

Adds an entry in the duplicate requests cache.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em ipaddr}][IN] the ipaddr to be used as key \item[{\em hostname}][IN] the hostname added (found by using gethostbyaddr)\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]IP\_\-NAME\_\-SUCCESS if successfull\par
. 

IP\_\-NAME\_\-INSERT\_\-MALLOC\_\-ERROR if an error occured during the insertion process \par
 

IP\_\-NAME\_\-NETDB\_\-ERROR if an error occured during the netdb query (via gethostbyaddr). \end{Desc}


Definition at line 233 of file nfs\_\-ip\_\-name.c.\index{nfs\_\-ip\_\-name.c@{nfs\_\-ip\_\-name.c}!nfs\_\-ip\_\-name\_\-get@{nfs\_\-ip\_\-name\_\-get}}
\index{nfs\_\-ip\_\-name\_\-get@{nfs\_\-ip\_\-name\_\-get}!nfs_ip_name.c@{nfs\_\-ip\_\-name.c}}
\subsubsection[{nfs\_\-ip\_\-name\_\-get}]{\setlength{\rightskip}{0pt plus 5cm}int nfs\_\-ip\_\-name\_\-get (unsigned int {\em ipaddr}, \/  char $\ast$ {\em hostname})}\label{nfs__ip__name_8c_b1619464f771a20111dae3185f46cf03}


nfs\_\-ip\_\-name\_\-get: Tries to get an entry for ip\_\-name cache.

Tries to get an entry for ip\_\-name cache.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em ipaddr}][IN] the ip address requested \item[{\em hostname}][OUT] the hostname\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the result previously set if $\ast$pstatus == IP\_\-NAME\_\-SUCCESS \end{Desc}


Definition at line 302 of file nfs\_\-ip\_\-name.c.\index{nfs\_\-ip\_\-name.c@{nfs\_\-ip\_\-name.c}!nfs\_\-ip\_\-name\_\-get\_\-stats@{nfs\_\-ip\_\-name\_\-get\_\-stats}}
\index{nfs\_\-ip\_\-name\_\-get\_\-stats@{nfs\_\-ip\_\-name\_\-get\_\-stats}!nfs_ip_name.c@{nfs\_\-ip\_\-name.c}}
\subsubsection[{nfs\_\-ip\_\-name\_\-get\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}void nfs\_\-ip\_\-name\_\-get\_\-stats (hash\_\-stat\_\-t $\ast$ {\em phstat})}\label{nfs__ip__name_8c_d811431e97ee867d8810380117145dd9}


nfs\_\-ip\_\-name\_\-get\_\-stats: gets the hash table statistics for the IP\_\-NAME Table.

Gets the hash table statistics for the IP\_\-NAME Table.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em phstat}][OUT] pointer to the resulting stats.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]nothing (void function)\end{Desc}
\begin{Desc}
\item[See also:]HashTable\_\-GetStats \end{Desc}


Definition at line 494 of file nfs\_\-ip\_\-name.c.\index{nfs\_\-ip\_\-name.c@{nfs\_\-ip\_\-name.c}!nfs\_\-ip\_\-name\_\-populate@{nfs\_\-ip\_\-name\_\-populate}}
\index{nfs\_\-ip\_\-name\_\-populate@{nfs\_\-ip\_\-name\_\-populate}!nfs_ip_name.c@{nfs\_\-ip\_\-name.c}}
\subsubsection[{nfs\_\-ip\_\-name\_\-populate}]{\setlength{\rightskip}{0pt plus 5cm}int nfs\_\-ip\_\-name\_\-populate (char $\ast$ {\em path})}\label{nfs__ip__name_8c_2c6b07deab3557e1b1ce872631e31936}




Definition at line 391 of file nfs\_\-ip\_\-name.c.\index{nfs\_\-ip\_\-name.c@{nfs\_\-ip\_\-name.c}!nfs\_\-ip\_\-name\_\-remove@{nfs\_\-ip\_\-name\_\-remove}}
\index{nfs\_\-ip\_\-name\_\-remove@{nfs\_\-ip\_\-name\_\-remove}!nfs_ip_name.c@{nfs\_\-ip\_\-name.c}}
\subsubsection[{nfs\_\-ip\_\-name\_\-remove}]{\setlength{\rightskip}{0pt plus 5cm}int nfs\_\-ip\_\-name\_\-remove (int {\em ipaddr})}\label{nfs__ip__name_8c_ecbe661c31b38258fbf5321f2fc576b3}


nfs\_\-ip\_\-name\_\-remove: Tries to remove an entry for ip\_\-name cache

Tries to remove an entry for ip\_\-name cache.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em ipaddr}][IN] the ip address to be uncached.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the result previously set if $\ast$pstatus == IP\_\-NAME\_\-SUCCESS \end{Desc}


Definition at line 340 of file nfs\_\-ip\_\-name.c.

\subsection{Variable Documentation}
\index{nfs\_\-ip\_\-name.c@{nfs\_\-ip\_\-name.c}!expiration\_\-time@{expiration\_\-time}}
\index{expiration\_\-time@{expiration\_\-time}!nfs_ip_name.c@{nfs\_\-ip\_\-name.c}}
\subsubsection[{expiration\_\-time}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int {\bf expiration\_\-time}}\label{nfs__ip__name_8c_544f7c05ec828d69dab5ac370f978695}




Definition at line 111 of file nfs\_\-ip\_\-name.c.\index{nfs\_\-ip\_\-name.c@{nfs\_\-ip\_\-name.c}!ht\_\-ip\_\-name@{ht\_\-ip\_\-name}}
\index{ht\_\-ip\_\-name@{ht\_\-ip\_\-name}!nfs_ip_name.c@{nfs\_\-ip\_\-name.c}}
\subsubsection[{ht\_\-ip\_\-name}]{\setlength{\rightskip}{0pt plus 5cm}hash\_\-table\_\-t$\ast$ {\bf ht\_\-ip\_\-name}}\label{nfs__ip__name_8c_5251176180528d659fc5112ebd2ef27c}




Definition at line 109 of file nfs\_\-ip\_\-name.c.\index{nfs\_\-ip\_\-name.c@{nfs\_\-ip\_\-name.c}!nfs\_\-param@{nfs\_\-param}}
\index{nfs\_\-param@{nfs\_\-param}!nfs_ip_name.c@{nfs\_\-ip\_\-name.c}}
\subsubsection[{nfs\_\-param}]{\setlength{\rightskip}{0pt plus 5cm}nfs\_\-parameter\_\-t {\bf nfs\_\-param}}\label{nfs__ip__name_8c_eb8fc46586993cf210777049fca03969}


