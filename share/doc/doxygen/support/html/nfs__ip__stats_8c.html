<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Support routines layer: nfs_ip_stats.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>nfs_ip_stats.c File Reference</h1>The management of the IP stats per machines. <a href="#_details">More...</a>
<p>
<code>#include "HashData.h"</code><br>
<code>#include "HashTable.h"</code><br>
<code>#include "log_functions.h"</code><br>
<code>#include "stuff_alloc.h"</code><br>
<code>#include "nfs_core.h"</code><br>
<code>#include "nfs_exports.h"</code><br>
<code>#include "config_parsing.h"</code><br>
<code>#include "nfs_ip_stats.h"</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>

<p>
<a href="nfs__ip__stats_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned long int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__ip__stats_8c.html#a2">ip_stats_value_hash_func</a> (hash_parameter_t *p_hparam, hash_buffer_t *buffclef)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned long int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__ip__stats_8c.html#a3">ip_stats_rbt_hash_func</a> (hash_parameter_t *p_hparam, hash_buffer_t *buffclef)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__ip__stats_8c.html#a4">compare_ip_stats</a> (hash_buffer_t *buff1, hash_buffer_t *buff2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__ip__stats_8c.html#a5">display_ip_stats</a> (hash_buffer_t *pbuff, char *str)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__ip__stats_8c.html#a6">nfs_ip_stats_add</a> (hash_table_t *ht_ip_stats, unsigned int ipaddr, nfs_ip_stats_t *nfs_ip_stats_pool)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__ip__stats_8c.html#a7">nfs_ip_stats_incr</a> (hash_table_t *ht_ip_stats, unsigned int ipaddr, unsigned int nfs_prog, unsigned int mnt_prog, struct svc_req *ptr_req)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__ip__stats_8c.html#a8">nfs_ip_stats_get</a> (hash_table_t *ht_ip_stats, unsigned int ipaddr, nfs_ip_stats_t **pnfs_ip_stats)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__ip__stats_8c.html#a9">nfs_ip_stats_remove</a> (hash_table_t *ht_ip_stats, int ipaddr, nfs_ip_stats_t *nfs_ip_stats_pool)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">hash_table_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__ip__stats_8c.html#a10">nfs_Init_ip_stats</a> (nfs_ip_stats_parameter_t param)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__ip__stats_8c.html#a11">nfs_ip_stats_dump</a> (hash_table_t **ht_ip_stats, unsigned int nb_worker, char *path_stat)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">nfs_parameter_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__ip__stats_8c.html#a0">nfs_param</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__ip__stats_8c.html#a1">expiration_time</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The management of the IP stats per machines. 
<p>
<dl compact><dt><b>Author:</b></dt><dd><dl compact><dt><b>Author</b></dt><dd>leibovic </dd></dl>
</dd></dl>
<dl compact><dt><b>Date:</b></dt><dd><dl compact><dt><b>Date</b></dt><dd>2006/01/24 13:49:12 </dd></dl>
</dd></dl>
<dl compact><dt><b>Version:</b></dt><dd><dl compact><dt><b>Revision</b></dt><dd>1.4 </dd></dl>
</dd></dl>
<a class="el" href="nfs__ip__stats_8c.html">nfs_ip_stats.c</a> : The management of the IP stats per machines.<p>
<dl compact><dt><b>Header</b></dt><dd>/cea/S/home/cvs/cvs/SHERPA/BaseCvs/GANESHA/src/support/nfs_ip_stats.c,v 1.4 2006/01/24 13:49:12 leibovic Exp </dd></dl>
<p>
<dl compact><dt><b>Log</b></dt><dd><a class="el" href="nfs__ip__stats_8c.html">nfs_ip_stats.c</a>,v </dd></dl>
Revision 1.4 2006/01/24 13:49:12 leibovic Adding missing includes.<p>
Revision 1.3 2006/01/20 07:39:23 leibovic Back to the previous version.<p>
Revision 1.1 2005/11/30 09:28:42 deniel IP/stats cache per thread (no bottleneck) is complete
<p>
Definition in file <a class="el" href="nfs__ip__stats_8c-source.html">nfs_ip_stats.c</a>.<hr><h2>Function Documentation</h2>
<a class="anchor" name="a4" doxytag="nfs_ip_stats.c::compare_ip_stats"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int compare_ip_stats           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hash_buffer_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>buff1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>hash_buffer_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>buff2</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
compare_ip_stats: compares the ip address stored in the key buffers.<p>
compare the ip address stored in the key buffers. This function is to be used as 'compare_key' field in the hashtable storing the nfs duplicated requests.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buff1</em>&nbsp;</td><td>[IN] first key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buff2</em>&nbsp;</td><td>[IN] second key</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if keys are identifical, 1 if they are different. </dd></dl>

<p>
Definition at line <a class="el" href="nfs__ip__stats_8c-source.html#l00178">178</a> of file <a class="el" href="nfs__ip__stats_8c-source.html">nfs_ip_stats.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="nfs_ip_stats.c::display_ip_stats"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int display_ip_stats           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hash_buffer_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>pbuff</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>str</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
display_ip_stats: displays the ip_stats stored in the buffer.<p>
displays the ip_stats stored in the buffer. This function is to be used as 'key_to_str' field in the hashtable storing the nfs duplicated requests.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buff1</em>&nbsp;</td><td>[IN] buffer to display </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buff2</em>&nbsp;</td><td>[OUT] output string</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>number of character written. </dd></dl>

<p>
Definition at line <a class="el" href="nfs__ip__stats_8c-source.html#l00199">199</a> of file <a class="el" href="nfs__ip__stats_8c-source.html">nfs_ip_stats.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="nfs_ip_stats.c::ip_stats_rbt_hash_func"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned long int ip_stats_rbt_hash_func           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hash_parameter_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>p_hparam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>hash_buffer_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffclef</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
ip_stats_rbt_hash_func: computes the rbt value for the entry in IP stats cache.<p>
Computes the rbt value for the entry in IP stats cache. In fact, it just use the address value itself (which is an unsigned integer) as the rbt value. This function is called internal in the HasTable_* function<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hparam</em>&nbsp;</td><td>[IN] hash table parameter. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffcleff[in]</em>&nbsp;</td><td>pointer to the hash key buffer</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the computed rbt value.</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>HashTable_Init </dd></dl>

<p>
Definition at line <a class="el" href="nfs__ip__stats_8c-source.html#l00159">159</a> of file <a class="el" href="nfs__ip__stats_8c-source.html">nfs_ip_stats.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="nfs_ip_stats.c::ip_stats_value_hash_func"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned long int ip_stats_value_hash_func           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hash_parameter_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>p_hparam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>hash_buffer_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffclef</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
ip_stats_rbt_hash_func: computes the hash value for the entry in IP stats cache.<p>
Computes the hash value for the entry in IP stats cache. In fact, it just use addresse as value (identity function) modulo the size of the hash. This function is called internal in the HasTable_* function<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hparam</em>&nbsp;</td><td>[IN] hash table parameter. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffcleff[in]</em>&nbsp;</td><td>pointer to the hash key buffer</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the computed hash value.</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>HashTable_Init </dd></dl>

<p>
Definition at line <a class="el" href="nfs__ip__stats_8c-source.html#l00137">137</a> of file <a class="el" href="nfs__ip__stats_8c-source.html">nfs_ip_stats.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="nfs_ip_stats.c::nfs_Init_ip_stats"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">hash_table_t* nfs_Init_ip_stats           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">nfs_ip_stats_parameter_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>param</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
nfs_Init_ip_stats: Init the hashtable for IP stats cache.<p>
Perform all the required initialization for hashtable IP stats cache<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>param</em>&nbsp;</td><td>[IN] parameter used to init the duplicate request cache</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if successful, -1 otherwise </dd></dl>

<p>
Definition at line <a class="el" href="nfs__ip__stats_8c-source.html#l00469">469</a> of file <a class="el" href="nfs__ip__stats_8c-source.html">nfs_ip_stats.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="nfs_ip_stats.c::nfs_ip_stats_add"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int nfs_ip_stats_add           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hash_table_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>ht_ip_stats</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>ipaddr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>nfs_ip_stats_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>nfs_ip_stats_pool</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
nfs_ip_stats_add: adds an entry in the duplicate requests cache.<p>
Adds an entry in the duplicate requests cache.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ipaddr</em>&nbsp;</td><td>[IN] the ipaddr to be used as key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nfs_ip_stats_pool</em>&nbsp;</td><td>[INOUT] values pool for hash table</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>IP_STATS_SUCCESS if successfull<br>
. <p>
IP_STATS_INSERT_MALLOC_ERROR if an error occured during the insertion process <br>
 <p>
IP_STATS_NETDB_ERROR if an error occured during the netdb query (via gethostbyaddr). </dd></dl>

<p>
Definition at line <a class="el" href="nfs__ip__stats_8c-source.html#l00227">227</a> of file <a class="el" href="nfs__ip__stats_8c-source.html">nfs_ip_stats.c</a>.
<p>
References <a class="el" href="test__clientid_8c-source.html#l00146">nfs_param</a>.
<p>
Referenced by <a class="el" href="exports_8c-source.html#l02030">nfs_export_check_access()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="nfs_ip_stats.c::nfs_ip_stats_dump"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void nfs_ip_stats_dump           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hash_table_t **&nbsp;</td>
          <td class="mdname" nowrap> <em>ht_ip_stats</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>nb_worker</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>path_stat</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
nfs_ip_stats_dump: Dumps the IP Stats for each client to a file per client<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ht_ip_stats</em>&nbsp;</td><td>[IN] hash table to be dumped </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>path_stat</em>&nbsp;</td><td>[IN] pattern used to build path used for dumping stats</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing (void function). </dd></dl>

<p>
Definition at line <a class="el" href="nfs__ip__stats_8c-source.html#l00493">493</a> of file <a class="el" href="nfs__ip__stats_8c-source.html">nfs_ip_stats.c</a>.
<p>
References <a class="el" href="nfs__ip__stats_8c-source.html#l00381">nfs_ip_stats_get()</a>, and <a class="el" href="test__clientid_8c-source.html#l00146">nfs_param</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="nfs_ip_stats.c::nfs_ip_stats_get"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int nfs_ip_stats_get           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hash_table_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>ht_ip_stats</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>ipaddr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>nfs_ip_stats_t **&nbsp;</td>
          <td class="mdname" nowrap> <em>pnfs_ip_stats</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
nfs_ip_stats_get: gets the stats value.<p>
gets the stats value.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ipaddr</em>&nbsp;</td><td>[IN] the ip address requested</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the computed number of call for this ipaddr. Negative value is a failure </dd></dl>

<p>
Definition at line <a class="el" href="nfs__ip__stats_8c-source.html#l00381">381</a> of file <a class="el" href="nfs__ip__stats_8c-source.html">nfs_ip_stats.c</a>.
<p>
References <a class="el" href="test__clientid_8c-source.html#l00146">nfs_param</a>.
<p>
Referenced by <a class="el" href="nfs__ip__stats_8c-source.html#l00493">nfs_ip_stats_dump()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="nfs_ip_stats.c::nfs_ip_stats_incr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int nfs_ip_stats_incr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hash_table_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>ht_ip_stats</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>ipaddr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>nfs_prog</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>mnt_prog</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct svc_req *&nbsp;</td>
          <td class="mdname" nowrap> <em>ptr_req</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
nfs_ip_stats_incr: increments the stats value.<p>
increments the stats value.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ipaddr</em>&nbsp;</td><td>[IN] the ip address requested</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the computed number of call for this ipaddr. Negative value is a failure </dd></dl>

<p>
Definition at line <a class="el" href="nfs__ip__stats_8c-source.html#l00302">302</a> of file <a class="el" href="nfs__ip__stats_8c-source.html">nfs_ip_stats.c</a>.
<p>
References <a class="el" href="test__clientid_8c-source.html#l00146">nfs_param</a>.
<p>
Referenced by <a class="el" href="exports_8c-source.html#l02030">nfs_export_check_access()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="nfs_ip_stats.c::nfs_ip_stats_remove"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int nfs_ip_stats_remove           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hash_table_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>ht_ip_stats</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>ipaddr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>nfs_ip_stats_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>nfs_ip_stats_pool</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
nfs_ip_stats_remove: Tries to remove an entry for ip_stats cache<p>
Tries to remove an entry for ip_stats cache.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ipaddr</em>&nbsp;</td><td>[IN] the ip address to be uncached. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nfs_ip_stats_pool</em>&nbsp;</td><td>[INOUT] values pool for hash table</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the result previously set if *pstatus == IP_STATS_SUCCESS </dd></dl>

<p>
Definition at line <a class="el" href="nfs__ip__stats_8c-source.html#l00424">424</a> of file <a class="el" href="nfs__ip__stats_8c-source.html">nfs_ip_stats.c</a>.
<p>
References <a class="el" href="test__clientid_8c-source.html#l00146">nfs_param</a>.    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a1" doxytag="nfs_ip_stats.c::expiration_time"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned int <a class="el" href="nfs__ip__stats_8c.html#a1">expiration_time</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="nfs__ip__stats_8c-source.html#l00118">118</a> of file <a class="el" href="nfs__ip__stats_8c-source.html">nfs_ip_stats.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="nfs_ip_stats.c::nfs_param"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">nfs_parameter_t <a class="el" href="test__clientid_8c.html#a0">nfs_param</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="test__clientid_8c-source.html#l00146">146</a> of file <a class="el" href="test__clientid_8c-source.html">test_clientid.c</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Wed Apr 9 08:24:41 2008 for Support routines layer by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
