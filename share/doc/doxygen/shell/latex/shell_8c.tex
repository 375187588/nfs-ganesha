\section{shell.c File Reference}
\label{shell_8c}\index{shell.c@{shell.c}}


Internal routines for the shell.  
{\ttfamily \#include \char`\"{}shell.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}shell\_\-utils.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}shell\_\-vars.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}log\_\-functions.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}commands.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}cmd\_\-tools.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}BuddyMalloc.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}stuff\_\-alloc.h\char`\"{}}\par
{\ttfamily \#include $<$unistd.h$>$}\par
{\ttfamily \#include $<$string.h$>$}\par
{\ttfamily \#include $<$stdio.h$>$}\par
{\ttfamily \#include $<$pthread.h$>$}\par
{\ttfamily \#include $<$sys/time.h$>$}\par
\subsection*{Defines}
\begin{DoxyCompactItemize}
\item 
\#define {\bf MAX\_\-OUTPUT\_\-LEN}~(1024$\ast$1024)
\item 
\#define {\bf TRACEBUFFSIZE}~1024
\item 
\#define {\bf PROMPTSIZE}~64
\item 
\#define {\bf P}(\_\-mutex\_\-)~pthread\_\-mutex\_\-lock( \&\_\-mutex\_\- )
\item 
\#define {\bf V}(\_\-mutex\_\-)~pthread\_\-mutex\_\-unlock( \&\_\-mutex\_\- )
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int {\bf shell\_\-BarrierInit} (int nb\_\-threads)
\item 
int {\bf shell\_\-Init} (int {\bf verbose}, char $\ast$input\_\-file, char $\ast$prompt, int shell\_\-index)
\item 
int {\bf shell\_\-Launch} ()
\item 
int {\bf shell\_\-ParseLine} (char $\ast$in\_\-out\_\-line, char $\ast$$\ast$out\_\-arglist, int $\ast$p\_\-argcount)
\item 
int {\bf shell\_\-SolveArgs} (int argc, char $\ast$$\ast$in\_\-out\_\-argv, int $\ast$out\_\-allocated)
\item 
void {\bf shell\_\-CleanArgs} (int argc, char $\ast$$\ast$in\_\-out\_\-argv, int $\ast$in\_\-allocated)
\item 
int {\bf shell\_\-Execute} (int argc, char $\ast$$\ast$argv, FILE $\ast$output)
\item 
void {\bf shell\_\-PrintError} ({\bf shell\_\-state\_\-t} $\ast$context, char $\ast$error\_\-msg)
\item 
void {\bf shell\_\-PrintTrace} ({\bf shell\_\-state\_\-t} $\ast$context, char $\ast$msg)
\item 
int {\bf shell\_\-SetLayer} ({\bf shell\_\-state\_\-t} $\ast$context, char $\ast$layer\_\-name)
\item 
{\bf layer\_\-def\_\-t} $\ast$ {\bf shell\_\-GetLayer} ({\bf shell\_\-state\_\-t} $\ast$context)
\item 
int {\bf shell\_\-SetStatus} ({\bf shell\_\-state\_\-t} $\ast$context, int returned\_\-status)
\item 
int {\bf shell\_\-GetStatus} ({\bf shell\_\-state\_\-t} $\ast$context)
\item 
int {\bf shell\_\-SetVerbose} ({\bf shell\_\-state\_\-t} $\ast$context, char $\ast$str\_\-verbose)
\item 
int {\bf shell\_\-GetVerbose} ({\bf shell\_\-state\_\-t} $\ast$context)
\item 
int {\bf shell\_\-SetDbgLvl} ({\bf shell\_\-state\_\-t} $\ast$context, char $\ast$str\_\-debug\_\-level)
\item 
int {\bf shell\_\-GetDbgLvl} ({\bf shell\_\-state\_\-t} $\ast$context)
\item 
int {\bf shell\_\-SetInput} ({\bf shell\_\-state\_\-t} $\ast$context, char $\ast$file\_\-name)
\item 
FILE $\ast$ {\bf shell\_\-GetInputStream} ({\bf shell\_\-state\_\-t} $\ast$context)
\item 
int {\bf shell\_\-SetPrompt} ({\bf shell\_\-state\_\-t} $\ast$context, char $\ast$str\_\-prompt)
\item 
char $\ast$ {\bf shell\_\-GetPrompt} ({\bf shell\_\-state\_\-t} $\ast$context)
\item 
int {\bf shell\_\-SetShellId} ({\bf shell\_\-state\_\-t} $\ast$context, int shell\_\-index)
\item 
int {\bf shell\_\-SetLine} ({\bf shell\_\-state\_\-t} $\ast$context, int lineno)
\item 
int {\bf shell\_\-GetLine} ({\bf shell\_\-state\_\-t} $\ast$context)
\item 
int {\bf shellcmd\_\-help} (int argc, char $\ast$$\ast$argv, FILE $\ast$output)
\item 
int {\bf shellcmd\_\-if} (int argc, char $\ast$$\ast$argv, FILE $\ast$output)
\item 
int {\bf shellcmd\_\-interactive} (int argc, char $\ast$$\ast$argv, FILE $\ast$output)
\item 
int {\bf shellcmd\_\-set} (int argc, char $\ast$$\ast$argv, FILE $\ast$output)
\item 
int {\bf shellcmd\_\-unset} (int argc, char $\ast$$\ast$argv, FILE $\ast$output)
\item 
int {\bf shellcmd\_\-print} (int argc, char $\ast$$\ast$argv, FILE $\ast$output)
\item 
int {\bf shellcmd\_\-varlist} (int argc, char $\ast$$\ast$argv, FILE $\ast$output)
\item 
int {\bf shellcmd\_\-time} (int argc, char $\ast$$\ast$argv, FILE $\ast$output)
\item 
int {\bf shellcmd\_\-quit} (int argc, char $\ast$$\ast$argv, FILE $\ast$output)
\item 
int {\bf shellcmd\_\-barrier} (int argc, char $\ast$$\ast$argv, FILE $\ast$output)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
{\bf layer\_\-def\_\-t} {\bf layer\_\-list} [$\,$]
\item 
char $\ast$ {\bf shell\_\-special\_\-vars} [$\,$]
\item 
{\bf command\_\-def\_\-t} {\bf shell\_\-utils} [$\,$]
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Internal routines for the shell. \begin{DoxyAuthor}{Author}

\end{DoxyAuthor}
Author}
leibovic \begin{DoxyDate}{Date}

\end{DoxyDate}
Date}
2006/02/24 08:33:44 \begin{DoxyVersion}{Version}

\end{DoxyVersion}
Revision}
1.20 Log}
\doxyref{shell.c}{p.}{shell_8c},v Revision 1.20 2006/02/24 08:33:44 leibovic shellid is read only.

Revision 1.19 2006/02/23 07:42:53 leibovic Adding -\/n option to shell.

Revision 1.18 2006/02/08 12:50:00 leibovic changing NIV\_\-EVNMT to NIV\_\-EVENT.

Revision 1.17 2006/01/17 14:56:22 leibovic Adaptation de HPSS 6.2.

Revision 1.15 2005/09/27 09:30:16 leibovic Removing non-\/thread safe trace buffer.

Revision 1.14 2005/09/27 08:15:13 leibovic Adding traces and changhing readexport prototype.

Revision 1.13 2005/08/12 12:15:33 leibovic Erreur d'init.

Revision 1.12 2005/08/12 11:21:27 leibovic Now, set cat concatenate strings.

Revision 1.11 2005/08/05 07:59:21 leibovic Better help printing.

Revision 1.10 2005/07/29 13:34:28 leibovic Changing \_\-FULL\_\-DEBUG to \_\-DEBUG\_\-SHELL

Revision 1.9 2005/07/26 12:54:47 leibovic Multi-\/thread shell with synchronisation routines.

Revision 1.8 2005/07/25 12:50:45 leibovic Adding thr\_\-create and thr\_\-join commands.

Revision 1.7 2005/05/11 15:53:37 leibovic Adding time function.

Revision 1.6 2005/05/11 07:25:58 leibovic Escaped char support.

Revision 1.5 2005/05/10 14:02:27 leibovic Fixed bug in log management.

Revision 1.4 2005/05/10 11:38:07 leibovic Adding log initialization.

Revision 1.3 2005/05/10 11:07:21 leibovic Adapting to ganeshell v2.

Revision 1.2 2005/05/09 14:54:59 leibovic Adding if.

Revision 1.1 2005/05/09 12:23:55 leibovic Version 2 of ganeshell. 

Definition in file {\bf shell.c}.

\subsection{Define Documentation}
\index{shell.c@{shell.c}!MAX\_\-OUTPUT\_\-LEN@{MAX\_\-OUTPUT\_\-LEN}}
\index{MAX\_\-OUTPUT\_\-LEN@{MAX\_\-OUTPUT\_\-LEN}!shell.c@{shell.c}}
\subsubsection[{MAX\_\-OUTPUT\_\-LEN}]{\setlength{\rightskip}{0pt plus 5cm}\#define MAX\_\-OUTPUT\_\-LEN~(1024$\ast$1024)}\label{shell_8c_a6f47cadd2e292d89353544ae32672e9b}


Definition at line 127 of file shell.c.\index{shell.c@{shell.c}!P@{P}}
\index{P@{P}!shell.c@{shell.c}}
\subsubsection[{P}]{\setlength{\rightskip}{0pt plus 5cm}\#define P(\_\-mutex\_\-)~pthread\_\-mutex\_\-lock( \&\_\-mutex\_\- )}\label{shell_8c_a13190861330e48fe885da6b2671876a9}


Definition at line 190 of file shell.c.\index{shell.c@{shell.c}!PROMPTSIZE@{PROMPTSIZE}}
\index{PROMPTSIZE@{PROMPTSIZE}!shell.c@{shell.c}}
\subsubsection[{PROMPTSIZE}]{\setlength{\rightskip}{0pt plus 5cm}\#define PROMPTSIZE~64}\label{shell_8c_ae42811a75f9b628dda3bc808b0964bef}


Definition at line 131 of file shell.c.\index{shell.c@{shell.c}!TRACEBUFFSIZE@{TRACEBUFFSIZE}}
\index{TRACEBUFFSIZE@{TRACEBUFFSIZE}!shell.c@{shell.c}}
\subsubsection[{TRACEBUFFSIZE}]{\setlength{\rightskip}{0pt plus 5cm}\#define TRACEBUFFSIZE~1024}\label{shell_8c_a28e936757f32aa866a183f44f124ef9c}


Definition at line 129 of file shell.c.\index{shell.c@{shell.c}!V@{V}}
\index{V@{V}!shell.c@{shell.c}}
\subsubsection[{V}]{\setlength{\rightskip}{0pt plus 5cm}\#define V(\_\-mutex\_\-)~pthread\_\-mutex\_\-unlock( \&\_\-mutex\_\- )}\label{shell_8c_a5a9b6f8030959507eee365b226d63b00}


Definition at line 191 of file shell.c.

\subsection{Function Documentation}
\index{shell.c@{shell.c}!shell\_\-BarrierInit@{shell\_\-BarrierInit}}
\index{shell\_\-BarrierInit@{shell\_\-BarrierInit}!shell.c@{shell.c}}
\subsubsection[{shell\_\-BarrierInit}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-BarrierInit (int {\em nb\_\-threads})}\label{shell_8c_ae15db0838c4622e178a261efb83bf2b1}
Initialize the barrier for shell synchronization routines. The number of threads to wait for is given as parameter. 

Definition at line 211 of file shell.c.\index{shell.c@{shell.c}!shell\_\-CleanArgs@{shell\_\-CleanArgs}}
\index{shell\_\-CleanArgs@{shell\_\-CleanArgs}!shell.c@{shell.c}}
\subsubsection[{shell\_\-CleanArgs}]{\setlength{\rightskip}{0pt plus 5cm}void shell\_\-CleanArgs (int {\em argc}, \/  char $\ast$$\ast$ {\em in\_\-out\_\-argv}, \/  int $\ast$ {\em in\_\-allocated})}\label{shell_8c_a9bb7a4a254006386f1135857f11d01e4}
shell\_\-CleanArgs: Free allocated arguments.


\begin{DoxyParams}{Parameters}
\item[{\em argc}]The number of command line tokens. \item[{\em in\_\-out\_\-argv}]The list of command line tokens (modified). \item[{\em in\_\-allocated}]Indicates which tokens must be freed. \end{DoxyParams}


Definition at line 1062 of file shell.c.\index{shell.c@{shell.c}!shell\_\-Execute@{shell\_\-Execute}}
\index{shell\_\-Execute@{shell\_\-Execute}!shell.c@{shell.c}}
\subsubsection[{shell\_\-Execute}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-Execute (int {\em argc}, \/  char $\ast$$\ast$ {\em argv}, \/  FILE $\ast$ {\em output})}\label{shell_8c_a10dd9a60b110b6c798b902af2378e212}
shell\_\-Execute: Commands dispatcher.


\begin{DoxyParams}{Parameters}
\item[{\em argc}]The number of arguments of this command. \item[{\em argv}]The arguments for this command. \item[{\em output}]The output stream of this command.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The returned status of this command. 
\end{DoxyReturn}


Definition at line 1093 of file shell.c.\index{shell.c@{shell.c}!shell\_\-GetDbgLvl@{shell\_\-GetDbgLvl}}
\index{shell\_\-GetDbgLvl@{shell\_\-GetDbgLvl}!shell.c@{shell.c}}
\subsubsection[{shell\_\-GetDbgLvl}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-GetDbgLvl ({\bf shell\_\-state\_\-t} $\ast$ {\em context})}\label{shell_8c_ae8266753e0ec315e4f060c49f70dfc24}
shell\_\-GetDbgLvl Get the special variable \$DEBUG\_\-LEVEL and \$DBG\_\-LVL (internal use). 

Definition at line 1495 of file shell.c.\index{shell.c@{shell.c}!shell\_\-GetInputStream@{shell\_\-GetInputStream}}
\index{shell\_\-GetInputStream@{shell\_\-GetInputStream}!shell.c@{shell.c}}
\subsubsection[{shell\_\-GetInputStream}]{\setlength{\rightskip}{0pt plus 5cm}FILE$\ast$ shell\_\-GetInputStream ({\bf shell\_\-state\_\-t} $\ast$ {\em context})}\label{shell_8c_a9b53e69fbe0514fd49aa9f8da1a2a331}
shell\_\-GetInputStream Get the input stream for reading commands (internal use). 

Definition at line 1617 of file shell.c.\index{shell.c@{shell.c}!shell\_\-GetLayer@{shell\_\-GetLayer}}
\index{shell\_\-GetLayer@{shell\_\-GetLayer}!shell.c@{shell.c}}
\subsubsection[{shell\_\-GetLayer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf layer\_\-def\_\-t}$\ast$ shell\_\-GetLayer ({\bf shell\_\-state\_\-t} $\ast$ {\em context})}\label{shell_8c_a87cc52ddf5ce6b0b8b6ea2655fe846cf}
shell\_\-GetLayer: Retrieves the current active layer (internal use). 

Definition at line 1319 of file shell.c.\index{shell.c@{shell.c}!shell\_\-GetLine@{shell\_\-GetLine}}
\index{shell\_\-GetLine@{shell\_\-GetLine}!shell.c@{shell.c}}
\subsubsection[{shell\_\-GetLine}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-GetLine ({\bf shell\_\-state\_\-t} $\ast$ {\em context})}\label{shell_8c_a70c732e9d24a5285ce46c7812e213bd0}
shell\_\-GetLine Get the special variable \$LINE 

Definition at line 1708 of file shell.c.\index{shell.c@{shell.c}!shell\_\-GetPrompt@{shell\_\-GetPrompt}}
\index{shell\_\-GetPrompt@{shell\_\-GetPrompt}!shell.c@{shell.c}}
\subsubsection[{shell\_\-GetPrompt}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ shell\_\-GetPrompt ({\bf shell\_\-state\_\-t} $\ast$ {\em context})}\label{shell_8c_a44bbab19233a13358d0ea0ecc8250575}
shell\_\-GetPrompt Get the special variable \$PROMPT 

Definition at line 1648 of file shell.c.\index{shell.c@{shell.c}!shell\_\-GetStatus@{shell\_\-GetStatus}}
\index{shell\_\-GetStatus@{shell\_\-GetStatus}!shell.c@{shell.c}}
\subsubsection[{shell\_\-GetStatus}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-GetStatus ({\bf shell\_\-state\_\-t} $\ast$ {\em context})}\label{shell_8c_abad4a8ae0b0a2e36b9285c330a6fb973}
shell\_\-GetStatus Get the special variables \$? or \$STATUS (internal use). 

Definition at line 1366 of file shell.c.\index{shell.c@{shell.c}!shell\_\-GetVerbose@{shell\_\-GetVerbose}}
\index{shell\_\-GetVerbose@{shell\_\-GetVerbose}!shell.c@{shell.c}}
\subsubsection[{shell\_\-GetVerbose}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-GetVerbose ({\bf shell\_\-state\_\-t} $\ast$ {\em context})}\label{shell_8c_a20edf96684135c0d368f0b2c868e2271}
shell\_\-GetVerbose Get the special variable \$VERBOSE (internal use). 

Definition at line 1431 of file shell.c.\index{shell.c@{shell.c}!shell\_\-Init@{shell\_\-Init}}
\index{shell\_\-Init@{shell\_\-Init}!shell.c@{shell.c}}
\subsubsection[{shell\_\-Init}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-Init (int {\em verbose}, \/  char $\ast$ {\em input\_\-file}, \/  char $\ast$ {\em prompt}, \/  int {\em shell\_\-index})}\label{shell_8c_ac0d310f037d01a4a5b18a3d1cf98dd60}
Initialize the shell. The command line for the shell is given as parameter. 
\begin{DoxyParams}{Parameters}
\item[{\em input\_\-file}]the file to read from (NULL if stdin). \end{DoxyParams}


Definition at line 353 of file shell.c.\index{shell.c@{shell.c}!shell\_\-Launch@{shell\_\-Launch}}
\index{shell\_\-Launch@{shell\_\-Launch}!shell.c@{shell.c}}
\subsubsection[{shell\_\-Launch}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-Launch ()}\label{shell_8c_a271d58bff569ae83aaca4c6545537c82}
Run the interpreter. 

Definition at line 471 of file shell.c.\index{shell.c@{shell.c}!shell\_\-ParseLine@{shell\_\-ParseLine}}
\index{shell\_\-ParseLine@{shell\_\-ParseLine}!shell.c@{shell.c}}
\subsubsection[{shell\_\-ParseLine}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-ParseLine (char $\ast$ {\em in\_\-out\_\-line}, \/  char $\ast$$\ast$ {\em out\_\-arglist}, \/  int $\ast$ {\em p\_\-argcount})}\label{shell_8c_a4e27122a4ac0f624fd479497156da7fe}
shell\_\-ParseLine: Extract an arglist from a command line.


\begin{DoxyParams}{Parameters}
\item[{\em in\_\-out\_\-line}]The command line (modified). \item[{\em out\_\-arglist}]The list of command line tokens. \item[{\em p\_\-argcount}]The number of command line tokens.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if no errors. 
\end{DoxyReturn}


Definition at line 681 of file shell.c.\index{shell.c@{shell.c}!shell\_\-PrintError@{shell\_\-PrintError}}
\index{shell\_\-PrintError@{shell\_\-PrintError}!shell.c@{shell.c}}
\subsubsection[{shell\_\-PrintError}]{\setlength{\rightskip}{0pt plus 5cm}void shell\_\-PrintError ({\bf shell\_\-state\_\-t} $\ast$ {\em context}, \/  char $\ast$ {\em error\_\-msg})}\label{shell_8c_a18ca6567e360fb3becf28c1e64b8c617}
shell\_\-PrintError: Prints an error. 

Definition at line 1224 of file shell.c.\index{shell.c@{shell.c}!shell\_\-PrintTrace@{shell\_\-PrintTrace}}
\index{shell\_\-PrintTrace@{shell\_\-PrintTrace}!shell.c@{shell.c}}
\subsubsection[{shell\_\-PrintTrace}]{\setlength{\rightskip}{0pt plus 5cm}void shell\_\-PrintTrace ({\bf shell\_\-state\_\-t} $\ast$ {\em context}, \/  char $\ast$ {\em msg})}\label{shell_8c_ab3fcf0204b77c7bf2d1464eaff1a1b6f}
shell\_\-PrintTrace: Prints a verbose trace. 

Definition at line 1238 of file shell.c.\index{shell.c@{shell.c}!shell\_\-SetDbgLvl@{shell\_\-SetDbgLvl}}
\index{shell\_\-SetDbgLvl@{shell\_\-SetDbgLvl}!shell.c@{shell.c}}
\subsubsection[{shell\_\-SetDbgLvl}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-SetDbgLvl ({\bf shell\_\-state\_\-t} $\ast$ {\em context}, \/  char $\ast$ {\em str\_\-debug\_\-level})}\label{shell_8c_a9566cc8471ed064191fab46360448790}
shell\_\-SetDbgLvl Set the special variables \$DEBUG\_\-LEVEL and \$DBG\_\-LVL 

Definition at line 1440 of file shell.c.\index{shell.c@{shell.c}!shell\_\-SetInput@{shell\_\-SetInput}}
\index{shell\_\-SetInput@{shell\_\-SetInput}!shell.c@{shell.c}}
\subsubsection[{shell\_\-SetInput}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-SetInput ({\bf shell\_\-state\_\-t} $\ast$ {\em context}, \/  char $\ast$ {\em file\_\-name})}\label{shell_8c_a9b5002423a565157f01c09748f87cf75}
shell\_\-SetInput Set the input for reading commands and set the value of \$INPUT and \$INTERACTIVE.


\begin{DoxyParams}{Parameters}
\item[{\em file\_\-name,:}]a script file or NULL for reading from stdin. \end{DoxyParams}


Definition at line 1508 of file shell.c.\index{shell.c@{shell.c}!shell\_\-SetLayer@{shell\_\-SetLayer}}
\index{shell\_\-SetLayer@{shell\_\-SetLayer}!shell.c@{shell.c}}
\subsubsection[{shell\_\-SetLayer}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-SetLayer ({\bf shell\_\-state\_\-t} $\ast$ {\em context}, \/  char $\ast$ {\em layer\_\-name})}\label{shell_8c_a451b3514751a63ed4efd5d209e2e268b}
shell\_\-SetLayer: Set the current active layer. \begin{DoxyReturn}{Returns}
0 if OK. else, an error code. 
\end{DoxyReturn}


Definition at line 1263 of file shell.c.\index{shell.c@{shell.c}!shell\_\-SetLine@{shell\_\-SetLine}}
\index{shell\_\-SetLine@{shell\_\-SetLine}!shell.c@{shell.c}}
\subsubsection[{shell\_\-SetLine}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-SetLine ({\bf shell\_\-state\_\-t} $\ast$ {\em context}, \/  int {\em lineno})}\label{shell_8c_a45ff35a9de18915830a83de3bd62f2a1}
shell\_\-SetLine Set the special variable \$LINE 

Definition at line 1681 of file shell.c.\index{shell.c@{shell.c}!shell\_\-SetPrompt@{shell\_\-SetPrompt}}
\index{shell\_\-SetPrompt@{shell\_\-SetPrompt}!shell.c@{shell.c}}
\subsubsection[{shell\_\-SetPrompt}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-SetPrompt ({\bf shell\_\-state\_\-t} $\ast$ {\em context}, \/  char $\ast$ {\em str\_\-prompt})}\label{shell_8c_abaa1753ce1fbddda297f2c4234f90082}
shell\_\-SetPrompt Set the special variable \$PROMPT 

Definition at line 1629 of file shell.c.\index{shell.c@{shell.c}!shell\_\-SetShellId@{shell\_\-SetShellId}}
\index{shell\_\-SetShellId@{shell\_\-SetShellId}!shell.c@{shell.c}}
\subsubsection[{shell\_\-SetShellId}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-SetShellId ({\bf shell\_\-state\_\-t} $\ast$ {\em context}, \/  int {\em shell\_\-index})}\label{shell_8c_a74327c02354c2791d81e49b207b82882}
shell\_\-SetShellId Set the special variable \$SHELLID 

Definition at line 1657 of file shell.c.\index{shell.c@{shell.c}!shell\_\-SetStatus@{shell\_\-SetStatus}}
\index{shell\_\-SetStatus@{shell\_\-SetStatus}!shell.c@{shell.c}}
\subsubsection[{shell\_\-SetStatus}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-SetStatus ({\bf shell\_\-state\_\-t} $\ast$ {\em context}, \/  int {\em returned\_\-status})}\label{shell_8c_a203bdb77c7bc5de688f3eabc1b70c16a}
shell\_\-SetStatus Set the special variables \$? and \$STATUS. 

Definition at line 1330 of file shell.c.\index{shell.c@{shell.c}!shell\_\-SetVerbose@{shell\_\-SetVerbose}}
\index{shell\_\-SetVerbose@{shell\_\-SetVerbose}!shell.c@{shell.c}}
\subsubsection[{shell\_\-SetVerbose}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-SetVerbose ({\bf shell\_\-state\_\-t} $\ast$ {\em context}, \/  char $\ast$ {\em str\_\-verbose})}\label{shell_8c_afd975f5d6931ed03c6a3f65c6c2a0a2b}
shell\_\-SetVerbose Set the special variable \$VERBOSE. 

Definition at line 1375 of file shell.c.\index{shell.c@{shell.c}!shell\_\-SolveArgs@{shell\_\-SolveArgs}}
\index{shell\_\-SolveArgs@{shell\_\-SolveArgs}!shell.c@{shell.c}}
\subsubsection[{shell\_\-SolveArgs}]{\setlength{\rightskip}{0pt plus 5cm}int shell\_\-SolveArgs (int {\em argc}, \/  char $\ast$$\ast$ {\em in\_\-out\_\-argv}, \/  int $\ast$ {\em out\_\-allocated})}\label{shell_8c_a08079380ae3f2e90dd30c836469eb476}
shell\_\-SolveArgs: Interprets arguments if they are vars or commands.


\begin{DoxyParams}{Parameters}
\item[{\em argc}]The number of command line tokens. \item[{\em in\_\-out\_\-argv}]The list of command line tokens (modified). \item[{\em out\_\-allocated}]Indicates which tokens must be freed.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if no errors. 
\end{DoxyReturn}


Definition at line 785 of file shell.c.\index{shell.c@{shell.c}!shellcmd\_\-barrier@{shellcmd\_\-barrier}}
\index{shellcmd\_\-barrier@{shellcmd\_\-barrier}!shell.c@{shell.c}}
\subsubsection[{shellcmd\_\-barrier}]{\setlength{\rightskip}{0pt plus 5cm}int shellcmd\_\-barrier (int {\em argc}, \/  char $\ast$$\ast$ {\em argv}, \/  FILE $\ast$ {\em output})}\label{shell_8c_ac90cbb87117d5e2de6759b6689d93d81}


Definition at line 2183 of file shell.c.\index{shell.c@{shell.c}!shellcmd\_\-help@{shellcmd\_\-help}}
\index{shellcmd\_\-help@{shellcmd\_\-help}!shell.c@{shell.c}}
\subsubsection[{shellcmd\_\-help}]{\setlength{\rightskip}{0pt plus 5cm}int shellcmd\_\-help (int {\em argc}, \/  char $\ast$$\ast$ {\em argv}, \/  FILE $\ast$ {\em output})}\label{shell_8c_a899a09f6793b7f4710e8e99a60a8bc5e}


Definition at line 1717 of file shell.c.\index{shell.c@{shell.c}!shellcmd\_\-if@{shellcmd\_\-if}}
\index{shellcmd\_\-if@{shellcmd\_\-if}!shell.c@{shell.c}}
\subsubsection[{shellcmd\_\-if}]{\setlength{\rightskip}{0pt plus 5cm}int shellcmd\_\-if (int {\em argc}, \/  char $\ast$$\ast$ {\em argv}, \/  FILE $\ast$ {\em output})}\label{shell_8c_aad4894a22c4fb42b1c283550b645a08e}


Definition at line 1788 of file shell.c.\index{shell.c@{shell.c}!shellcmd\_\-interactive@{shellcmd\_\-interactive}}
\index{shellcmd\_\-interactive@{shellcmd\_\-interactive}!shell.c@{shell.c}}
\subsubsection[{shellcmd\_\-interactive}]{\setlength{\rightskip}{0pt plus 5cm}int shellcmd\_\-interactive (int {\em argc}, \/  char $\ast$$\ast$ {\em argv}, \/  FILE $\ast$ {\em output})}\label{shell_8c_a65d6f4320066d4ebbd24d495c3197db3}


Definition at line 1878 of file shell.c.\index{shell.c@{shell.c}!shellcmd\_\-print@{shellcmd\_\-print}}
\index{shellcmd\_\-print@{shellcmd\_\-print}!shell.c@{shell.c}}
\subsubsection[{shellcmd\_\-print}]{\setlength{\rightskip}{0pt plus 5cm}int shellcmd\_\-print (int {\em argc}, \/  char $\ast$$\ast$ {\em argv}, \/  FILE $\ast$ {\em output})}\label{shell_8c_a10a8c42cadb842e426fea11044c8ca09}


Definition at line 2069 of file shell.c.\index{shell.c@{shell.c}!shellcmd\_\-quit@{shellcmd\_\-quit}}
\index{shellcmd\_\-quit@{shellcmd\_\-quit}!shell.c@{shell.c}}
\subsubsection[{shellcmd\_\-quit}]{\setlength{\rightskip}{0pt plus 5cm}int shellcmd\_\-quit (int {\em argc}, \/  char $\ast$$\ast$ {\em argv}, \/  FILE $\ast$ {\em output})}\label{shell_8c_ad21971f2f359ed0dab17c56affe4666e}


Definition at line 2158 of file shell.c.\index{shell.c@{shell.c}!shellcmd\_\-set@{shellcmd\_\-set}}
\index{shellcmd\_\-set@{shellcmd\_\-set}!shell.c@{shell.c}}
\subsubsection[{shellcmd\_\-set}]{\setlength{\rightskip}{0pt plus 5cm}int shellcmd\_\-set (int {\em argc}, \/  char $\ast$$\ast$ {\em argv}, \/  FILE $\ast$ {\em output})}\label{shell_8c_a2c49685b957c7ac4d00a3ec0f0054225}


Definition at line 1904 of file shell.c.\index{shell.c@{shell.c}!shellcmd\_\-time@{shellcmd\_\-time}}
\index{shellcmd\_\-time@{shellcmd\_\-time}!shell.c@{shell.c}}
\subsubsection[{shellcmd\_\-time}]{\setlength{\rightskip}{0pt plus 5cm}int shellcmd\_\-time (int {\em argc}, \/  char $\ast$$\ast$ {\em argv}, \/  FILE $\ast$ {\em output})}\label{shell_8c_aaa214b88c7f47effc68fad8d6d833305}


Definition at line 2113 of file shell.c.\index{shell.c@{shell.c}!shellcmd\_\-unset@{shellcmd\_\-unset}}
\index{shellcmd\_\-unset@{shellcmd\_\-unset}!shell.c@{shell.c}}
\subsubsection[{shellcmd\_\-unset}]{\setlength{\rightskip}{0pt plus 5cm}int shellcmd\_\-unset (int {\em argc}, \/  char $\ast$$\ast$ {\em argv}, \/  FILE $\ast$ {\em output})}\label{shell_8c_a15fa32a0d835185c2c4a70a37ba0c700}


Definition at line 2011 of file shell.c.\index{shell.c@{shell.c}!shellcmd\_\-varlist@{shellcmd\_\-varlist}}
\index{shellcmd\_\-varlist@{shellcmd\_\-varlist}!shell.c@{shell.c}}
\subsubsection[{shellcmd\_\-varlist}]{\setlength{\rightskip}{0pt plus 5cm}int shellcmd\_\-varlist (int {\em argc}, \/  char $\ast$$\ast$ {\em argv}, \/  FILE $\ast$ {\em output})}\label{shell_8c_a1ad9c62ea92ab2d02f5f2eb5d5c1fcb6}


Definition at line 2087 of file shell.c.

\subsection{Variable Documentation}
\index{shell.c@{shell.c}!layer\_\-list@{layer\_\-list}}
\index{layer\_\-list@{layer\_\-list}!shell.c@{shell.c}}
\subsubsection[{layer\_\-list}]{\setlength{\rightskip}{0pt plus 5cm}{\bf layer\_\-def\_\-t} {\bf layer\_\-list}[$\,$]}\label{shell_8c_ae751cf5f3c0928b64ffd28ab9b1fe17d}
{\bfseries Initial value:}
\begin{DoxyCode}
 {
  {"FSAL", commands_FSAL, "File system abstraction layer", 
      fsal_layer_SetLogLevel}
  ,
  {"Cache_inode", commands_Cache_inode, "Cache inode layer", 
      Cache_inode_layer_SetLogLevel}
  ,
  {"NFS", commands_NFS,
   "NFSv2, NFSv3, MNTv1, MNTv3 protocols (direct calls, not through RPCs)",
   nfs_layer_SetLogLevel}
  ,
  {"NFS_remote", commands_NFS_remote,
   "NFSv2, NFSv3, MNTv1, MNTv3 protocols (calls through RPCs)",
   nfs_remote_layer_SetLogLevel}
  ,




  {NULL, NULL, NULL, NULL}      
}
\end{DoxyCode}
Layer list. 

Definition at line 133 of file shell.c.\index{shell.c@{shell.c}!shell\_\-special\_\-vars@{shell\_\-special\_\-vars}}
\index{shell\_\-special\_\-vars@{shell\_\-special\_\-vars}!shell.c@{shell.c}}
\subsubsection[{shell\_\-special\_\-vars}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ {\bf shell\_\-special\_\-vars}[$\,$]}\label{shell_8c_a1e3eb6c0416edacc075dcb2c77cba33d}
{\bfseries Initial value:}
\begin{DoxyCode}
 {
  "INPUT",                      
  "INTERACTIVE",                
  "LAYER",                      
  "STATUS",                     
  "?",                          
  "VERBOSE",                    
  "DEBUG_LEVEL",                
  "DBG_LVL",                    
  "PROMPT",                     
  "LINE",                       

  
  NULL
}
\end{DoxyCode}
List of the shell special variables 

Definition at line 153 of file shell.c.\index{shell.c@{shell.c}!shell\_\-utils@{shell\_\-utils}}
\index{shell\_\-utils@{shell\_\-utils}!shell.c@{shell.c}}
\subsubsection[{shell\_\-utils}]{\setlength{\rightskip}{0pt plus 5cm}{\bf command\_\-def\_\-t} {\bf shell\_\-utils}[$\,$]}\label{shell_8c_a089ef543a695145d27ee13a0de2de5ff}
{\bfseries Initial value:}
\begin{DoxyCode}
 {
  {"chomp", util_chomp, "removes final newline character"},
  {"cmp", util_cmp, "compares two expressions"},
  {"diff", util_diff, "lists differences between two expressions"},
  {"eq", util_cmp, "test if two expressions are equal"},
  {"meminfo", util_meminfo, "prints information about memory use"},
  {"ne", util_cmp, "test if two expressions are different"},
  {"shell", util_shell, "executes a real shell command"},
  {"sleep", util_sleep, "suspends script execution for some time"},
  {"timer", util_timer, "timer management command"},
  {"wc", util_wc, "counts the number of char/words/lines in a string"},

  {NULL, NULL, NULL}            
}
\end{DoxyCode}


Definition at line 169 of file shell.c.