\section{nfs\_\-proto\_\-tools.c File Reference}
\label{nfs__proto__tools_8c}\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}}
A set of functions used to managed NFS.  


{\tt \#include $<$stdio.h$>$}\par
{\tt \#include $<$string.h$>$}\par
{\tt \#include $<$pthread.h$>$}\par
{\tt \#include $<$fcntl.h$>$}\par
{\tt \#include $<$sys/file.h$>$}\par
{\tt \#include $<$pwd.h$>$}\par
{\tt \#include $<$grp.h$>$}\par
{\tt \#include \char`\"{}HashData.h\char`\"{}}\par
{\tt \#include \char`\"{}HashTable.h\char`\"{}}\par
{\tt \#include $<$rpc/types.h$>$}\par
{\tt \#include $<$rpc/rpc.h$>$}\par
{\tt \#include $<$rpc/auth.h$>$}\par
{\tt \#include $<$rpc/pmap\_\-clnt.h$>$}\par
{\tt \#include \char`\"{}log\_\-functions.h\char`\"{}}\par
{\tt \#include \char`\"{}stuff\_\-alloc.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs23.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs4.h\char`\"{}}\par
{\tt \#include \char`\"{}mount.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs\_\-core.h\char`\"{}}\par
{\tt \#include \char`\"{}cache\_\-inode.h\char`\"{}}\par
{\tt \#include \char`\"{}cache\_\-content.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs\_\-exports.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs\_\-creds.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs\_\-proto\_\-functions.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs\_\-tools.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs\_\-file\_\-handle.h\char`\"{}}\par
{\tt \#include \char`\"{}nfs\_\-proto\_\-tools.h\char`\"{}}\par
\subsection*{Functions}
\begin{CompactItemize}
\item 
cache\_\-entry\_\-t $\ast$ {\bf nfs\_\-FhandleToCache} (u\_\-long rq\_\-vers, fhandle2 $\ast$pfh2, nfs\_\-fh3 $\ast$pfh3, nfs\_\-fh4 $\ast$pfh4, nfsstat2 $\ast$pstatus2, nfsstat3 $\ast$pstatus3, nfsstat4 $\ast$pstatus4, fsal\_\-attrib\_\-list\_\-t $\ast$pattr, fsal\_\-op\_\-context\_\-t $\ast$pcontext, cache\_\-inode\_\-client\_\-t $\ast$pclient, hash\_\-table\_\-t $\ast$ht, int $\ast$prc)
\item 
int {\bf nfs\_\-SetPostOpAttr} (fsal\_\-op\_\-context\_\-t $\ast$pcontext, exportlist\_\-t $\ast$pexport, cache\_\-entry\_\-t $\ast$pentry, fsal\_\-attrib\_\-list\_\-t $\ast$pfsal\_\-attr, post\_\-op\_\-attr $\ast$presult)
\item 
void {\bf nfs\_\-SetPreOpAttr} (fsal\_\-attrib\_\-list\_\-t $\ast$pfsal\_\-attr, pre\_\-op\_\-attr $\ast$pattr)
\item 
void {\bf nfs\_\-SetWccData} (fsal\_\-op\_\-context\_\-t $\ast$pcontext, exportlist\_\-t $\ast$pexport, cache\_\-entry\_\-t $\ast$pentry, fsal\_\-attrib\_\-list\_\-t $\ast$pbefore\_\-attr, fsal\_\-attrib\_\-list\_\-t $\ast$pafter\_\-attr, wcc\_\-data $\ast$pwcc\_\-data)
\item 
int {\bf nfs\_\-RetryableError} (cache\_\-inode\_\-status\_\-t cache\_\-status)
\item 
void {\bf nfs\_\-SetFailedStatus} (fsal\_\-op\_\-context\_\-t $\ast$pcontext, exportlist\_\-t $\ast$pexport, int version, cache\_\-inode\_\-status\_\-t status, nfsstat2 $\ast$pstatus2, nfsstat3 $\ast$pstatus3, cache\_\-entry\_\-t $\ast$pentry0, post\_\-op\_\-attr $\ast$ppost\_\-op\_\-attr, cache\_\-entry\_\-t $\ast$pentry1, fsal\_\-attrib\_\-list\_\-t $\ast$ppre\_\-vattr1, wcc\_\-data $\ast$pwcc\_\-data1, cache\_\-entry\_\-t $\ast$pentry2, fsal\_\-attrib\_\-list\_\-t $\ast$ppre\_\-vattr2, wcc\_\-data $\ast$pwcc\_\-data2)
\item 
int {\bf nfs4\_\-FSALattr\_\-To\_\-Fattr} (exportlist\_\-t $\ast$pexport, fsal\_\-attrib\_\-list\_\-t $\ast$pattr, fattr4 $\ast$Fattr, compound\_\-data\_\-t $\ast$data, nfs\_\-fh4 $\ast$objFH, bitmap4 $\ast$Bitmap)
\item 
int {\bf nfs3\_\-Sattr\_\-To\_\-FSALattr} (fsal\_\-attrib\_\-list\_\-t $\ast$pFSAL\_\-attr, sattr3 $\ast$psattr)
\item 
int {\bf nfs2\_\-FSALattr\_\-To\_\-Fattr} (exportlist\_\-t $\ast$pexport, fsal\_\-attrib\_\-list\_\-t $\ast$pFSAL\_\-attr, fattr2 $\ast$pFattr)
\item 
int {\bf nfs4\_\-SetCompoundExport} (compound\_\-data\_\-t $\ast$data)
\item 
int {\bf nfs4\_\-FhandleToExId} (nfs\_\-fh4 $\ast$fh4p, unsigned short $\ast$ExIdp)
\item 
void {\bf nfs4\_\-stringid\_\-split} (char $\ast$buff, char $\ast$uidname, char $\ast$domainname)
\item 
int {\bf utf82str} (char $\ast$str, utf8string $\ast$utf8str)
\item 
int {\bf str2utf8} (char $\ast$str, utf8string $\ast$utf8str)
\item 
seqid4 {\bf nfs4\_\-NextSeqId} (seqid4 seqid)
\item 
void {\bf nfs4\_\-bitmap4\_\-to\_\-list} (bitmap4 $\ast$b, uint\_\-t $\ast$plen, uint32\_\-t $\ast$pval)
\item 
void {\bf nfs4\_\-list\_\-to\_\-bitmap4} (bitmap4 $\ast$b, uint\_\-t $\ast$plen, uint32\_\-t $\ast$pval)
\item 
int {\bf nfs3\_\-FSALattr\_\-To\_\-Fattr} (exportlist\_\-t $\ast$pexport, fsal\_\-attrib\_\-list\_\-t $\ast$FSAL\_\-attr, fattr3 $\ast$Fattr)
\item 
int {\bf nfs2\_\-Sattr\_\-To\_\-FSALattr} (fsal\_\-attrib\_\-list\_\-t $\ast$pFSAL\_\-attr, sattr2 $\ast$Fattr)
\item 
int {\bf nfs4\_\-Fattr\_\-Check\_\-Access} (fattr4 $\ast$Fattr, int access)
\item 
int {\bf nfs4\_\-Fattr\_\-Check\_\-Access\_\-Bitmap} (bitmap4 $\ast$pbitmap, int access)
\item 
int {\bf nfs4\_\-Fattr\_\-Supported} (fattr4 $\ast$Fattr)
\item 
int {\bf nfs4\_\-Fattr\_\-Supported\_\-Bitmap} (bitmap4 $\ast$pbitmap)
\item 
int {\bf nfs4\_\-Fattr\_\-cmp} (fattr4 $\ast$Fattr1, fattr4 $\ast$Fattr2)
\item 
int {\bf nfs4\_\-Fattr\_\-To\_\-FSAL\_\-attr} (fsal\_\-attrib\_\-list\_\-t $\ast$pFSAL\_\-attr, fattr4 $\ast$Fattr)
\item 
nfsstat4 {\bf nfs4\_\-Errno} (cache\_\-inode\_\-status\_\-t error)
\item 
nfsstat3 {\bf nfs3\_\-Errno} (cache\_\-inode\_\-status\_\-t error)
\item 
nfsstat2 {\bf nfs2\_\-Errno} (cache\_\-inode\_\-status\_\-t error)
\item 
int {\bf nfs4\_\-AllocateFH} (nfs\_\-fh4 $\ast$fh)
\item 
int {\bf nfs4\_\-MakeCred} (compound\_\-data\_\-t $\ast$data)
\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
nfs\_\-parameter\_\-t {\bf nfs\_\-param}
\end{CompactItemize}


\subsection{Detailed Description}
A set of functions used to managed NFS. 

\begin{Desc}
\item[Author:]\end{Desc}
\begin{Desc}
\item[Author]leibovic \end{Desc}
\begin{Desc}
\item[Date:]\end{Desc}
\begin{Desc}
\item[Date]2006/01/31 10:06:00 \end{Desc}
\begin{Desc}
\item[Version:]\end{Desc}
\begin{Desc}
\item[Revision]1.48 \end{Desc}
\doxyref{nfs\_\-proto\_\-tools.c}{p.}{nfs__proto__tools_8c} - A set of functions used to managed NFS. 

Definition in file {\bf nfs\_\-proto\_\-tools.c}.

\subsection{Function Documentation}
\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs2\_\-Errno@{nfs2\_\-Errno}}
\index{nfs2\_\-Errno@{nfs2\_\-Errno}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs2\_\-Errno}]{\setlength{\rightskip}{0pt plus 5cm}nfsstat2 nfs2\_\-Errno (cache\_\-inode\_\-status\_\-t {\em error})}\label{nfs__proto__tools_8c_90fe1b6090478dd005254a847ecb287e}


nfs2\_\-Errno: Converts a cache\_\-inode status to a nfsv2 status.

Converts a cache\_\-inode status to a nfsv2 status.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em error}][IN] Input cache inode ewrror.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the converted NFSv2 status. \end{Desc}


Definition at line 3353 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs2\_\-FSALattr\_\-To\_\-Fattr@{nfs2\_\-FSALattr\_\-To\_\-Fattr}}
\index{nfs2\_\-FSALattr\_\-To\_\-Fattr@{nfs2\_\-FSALattr\_\-To\_\-Fattr}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs2\_\-FSALattr\_\-To\_\-Fattr}]{\setlength{\rightskip}{0pt plus 5cm}int nfs2\_\-FSALattr\_\-To\_\-Fattr (exportlist\_\-t $\ast$ {\em pexport}, \/  fsal\_\-attrib\_\-list\_\-t $\ast$ {\em pFSAL\_\-attr}, \/  fattr2 $\ast$ {\em pFattr})}\label{nfs__proto__tools_8c_c4a0005c73ef75953f6980cd4566aac4}


nfs2\_\-FSALattr\_\-To\_\-Fattr: Converts FSAL Attributes to NFSv2 attributes.

Converts FSAL Attributes to NFSv2 attributes.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em pexport}][IN] the related export entry. \item[{\em FSAL\_\-attr}][IN] pointer to FSAL attributes. \item[{\em Fattr}][OUT] pointer to NFSv2 attributes.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]1 if successful, 0 otherwise. \end{Desc}


\begin{Desc}
\item[{\bf Todo}]mode mask ? \end{Desc}


\begin{Desc}
\item[{\bf Todo}]mode mask ? \end{Desc}


Definition at line 1681 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs2\_\-Sattr\_\-To\_\-FSALattr@{nfs2\_\-Sattr\_\-To\_\-FSALattr}}
\index{nfs2\_\-Sattr\_\-To\_\-FSALattr@{nfs2\_\-Sattr\_\-To\_\-FSALattr}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs2\_\-Sattr\_\-To\_\-FSALattr}]{\setlength{\rightskip}{0pt plus 5cm}int nfs2\_\-Sattr\_\-To\_\-FSALattr (fsal\_\-attrib\_\-list\_\-t $\ast$ {\em pFSAL\_\-attr}, \/  sattr2 $\ast$ {\em Fattr})}\label{nfs__proto__tools_8c_aed2fe122b07a4b259a3184a61fa057f}


nfs2\_\-Sattr\_\-To\_\-FSALattr: Converts NFSv2 Set Attributes to FSAL attributes.

Converts NFSv2 Set Attributes to FSAL attributes.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em FSAL\_\-attr}][IN] pointer to FSAL attributes. \item[{\em Fattr}][OUT] pointer to NFSv2 set attributes.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]1 if successful, 0 otherwise. \end{Desc}


Definition at line 2240 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs3\_\-Errno@{nfs3\_\-Errno}}
\index{nfs3\_\-Errno@{nfs3\_\-Errno}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs3\_\-Errno}]{\setlength{\rightskip}{0pt plus 5cm}nfsstat3 nfs3\_\-Errno (cache\_\-inode\_\-status\_\-t {\em error})}\label{nfs__proto__tools_8c_a4f9710cdfa7157d9b730110d4cb0621}


nfs3\_\-Errno: Converts a cache\_\-inode status to a nfsv3 status.

Converts a cache\_\-inode status to a nfsv3 status.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em error}][IN] Input cache inode ewrror.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the converted NFSv3 status. \end{Desc}


\begin{Desc}
\item[{\bf Todo}]: Check if this works by making stress tests \end{Desc}


Definition at line 3234 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs3\_\-FSALattr\_\-To\_\-Fattr@{nfs3\_\-FSALattr\_\-To\_\-Fattr}}
\index{nfs3\_\-FSALattr\_\-To\_\-Fattr@{nfs3\_\-FSALattr\_\-To\_\-Fattr}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs3\_\-FSALattr\_\-To\_\-Fattr}]{\setlength{\rightskip}{0pt plus 5cm}int nfs3\_\-FSALattr\_\-To\_\-Fattr (exportlist\_\-t $\ast$ {\em pexport}, \/  fsal\_\-attrib\_\-list\_\-t $\ast$ {\em FSAL\_\-attr}, \/  fattr3 $\ast$ {\em Fattr})}\label{nfs__proto__tools_8c_c8abe56c4ae2bd2c2f7b54ab4b8af81e}


nfs3\_\-FSALattr\_\-To\_\-Fattr: Converts FSAL Attributes to NFSv3 attributes.

Converts FSAL Attributes to NFSv3 attributes.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em pexport}][IN] the related export entry \item[{\em FSAL\_\-attr}][IN] pointer to FSAL attributes. \item[{\em Fattr}][OUT] pointer to NFSv3 attributes.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]1 if successful, 0 otherwise. \end{Desc}


Definition at line 2143 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs3\_\-Sattr\_\-To\_\-FSALattr@{nfs3\_\-Sattr\_\-To\_\-FSALattr}}
\index{nfs3\_\-Sattr\_\-To\_\-FSALattr@{nfs3\_\-Sattr\_\-To\_\-FSALattr}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs3\_\-Sattr\_\-To\_\-FSALattr}]{\setlength{\rightskip}{0pt plus 5cm}int nfs3\_\-Sattr\_\-To\_\-FSALattr (fsal\_\-attrib\_\-list\_\-t $\ast$ {\em pFSAL\_\-attr}, \/  sattr3 $\ast$ {\em psattr})}\label{nfs__proto__tools_8c_fa5cb503998a8ee2352fbe0486578cf1}


nfs3\_\-Sattr\_\-To\_\-FSALattr: Converts NFSv3 Sattr to FSAL Attributes.

Converts NFSv3 Sattr to FSAL Attributes.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em pFSAL\_\-attr}][OUT] computed FSAL attributes. \item[{\em psattr}][IN] NFSv3 sattr to be set.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]0 if failed, 1 if successful. \end{Desc}


Definition at line 1573 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-AllocateFH@{nfs4\_\-AllocateFH}}
\index{nfs4\_\-AllocateFH@{nfs4\_\-AllocateFH}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-AllocateFH}]{\setlength{\rightskip}{0pt plus 5cm}int nfs4\_\-AllocateFH (nfs\_\-fh4 $\ast$ {\em fh})}\label{nfs__proto__tools_8c_9f988a714dadc7d8a6c107bc864d30ff}


nfs4\_\-AllocateFH: Allocates a buffer to be used for storing a NFSv4 filehandle.

Allocates a buffer to be used for storing a NFSv4 filehandle.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em fh}][INOUT] the filehandle to manage.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]NFS4\_\-OK if successful, NFS3ERR\_\-SERVERFAULT, NFS4ERR\_\-RESOURCE or NFS4ERR\_\-STALE otherwise. \end{Desc}


Definition at line 3456 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-bitmap4\_\-to\_\-list@{nfs4\_\-bitmap4\_\-to\_\-list}}
\index{nfs4\_\-bitmap4\_\-to\_\-list@{nfs4\_\-bitmap4\_\-to\_\-list}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-bitmap4\_\-to\_\-list}]{\setlength{\rightskip}{0pt plus 5cm}void nfs4\_\-bitmap4\_\-to\_\-list (bitmap4 $\ast$ {\em b}, \/  uint\_\-t $\ast$ {\em plen}, \/  uint32\_\-t $\ast$ {\em pval})}\label{nfs__proto__tools_8c_bd872db7513463c6ddadeec986c69051}


nfs\_\-bitmap4\_\-to\_\-list: convert an attribute's bitmap to a list of attributes.

Convert an attribute's bitmap to a list of attributes.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em b}][IN] bitmap to convert. \item[{\em plen}][OUT] list's length. \item[{\em plval}][OUT] list's values.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]nothing (void function) \end{Desc}


Definition at line 2020 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-Errno@{nfs4\_\-Errno}}
\index{nfs4\_\-Errno@{nfs4\_\-Errno}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-Errno}]{\setlength{\rightskip}{0pt plus 5cm}nfsstat4 nfs4\_\-Errno (cache\_\-inode\_\-status\_\-t {\em error})}\label{nfs__proto__tools_8c_e5dbdad76b79459bab895e61f800278d}


nfs4\_\-Errno: Converts a cache\_\-inode status to a nfsv4 status.

Converts a cache\_\-inode status to a nfsv4 status.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em error}][IN] Input cache inode ewrror.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the converted NFSv4 status. \end{Desc}


Definition at line 3114 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-Fattr\_\-Check\_\-Access@{nfs4\_\-Fattr\_\-Check\_\-Access}}
\index{nfs4\_\-Fattr\_\-Check\_\-Access@{nfs4\_\-Fattr\_\-Check\_\-Access}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-Fattr\_\-Check\_\-Access}]{\setlength{\rightskip}{0pt plus 5cm}int nfs4\_\-Fattr\_\-Check\_\-Access (fattr4 $\ast$ {\em Fattr}, \/  int {\em access})}\label{nfs__proto__tools_8c_b6df9722693803a2f08f7c8b161999ee}


nfs4\_\-Fattr\_\-Check\_\-Access: checks if attributes have READ or WRITE access.

Checks if attributes have READ or WRITE access.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em Fattr}][IN] pointer to NFSv4 attributes. \item[{\em access}][IN] access to be checked, either FATTR4\_\-ATTR\_\-READ or FATTR4\_\-ATTR\_\-WRITE\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]1 if successful, 0 otherwise. \end{Desc}


Definition at line 2336 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-Fattr\_\-Check\_\-Access\_\-Bitmap@{nfs4\_\-Fattr\_\-Check\_\-Access\_\-Bitmap}}
\index{nfs4\_\-Fattr\_\-Check\_\-Access\_\-Bitmap@{nfs4\_\-Fattr\_\-Check\_\-Access\_\-Bitmap}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-Fattr\_\-Check\_\-Access\_\-Bitmap}]{\setlength{\rightskip}{0pt plus 5cm}int nfs4\_\-Fattr\_\-Check\_\-Access\_\-Bitmap (bitmap4 $\ast$ {\em pbitmap}, \/  int {\em access})}\label{nfs__proto__tools_8c_1b540b58ace7db01da59ffae1c434b7d}


nfs4\_\-Fattr\_\-Check\_\-Access\_\-Bitmap: checks if attributes bitmaps have READ or WRITE access.

Checks if attributes have READ or WRITE access.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em pbitmap}][IN] pointer to NFSv4 attributes. \item[{\em access}][IN] access to be checked, either FATTR4\_\-ATTR\_\-READ or FATTR4\_\-ATTR\_\-WRITE\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]1 if successful, 0 otherwise. \end{Desc}


Definition at line 2383 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-Fattr\_\-cmp@{nfs4\_\-Fattr\_\-cmp}}
\index{nfs4\_\-Fattr\_\-cmp@{nfs4\_\-Fattr\_\-cmp}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-Fattr\_\-cmp}]{\setlength{\rightskip}{0pt plus 5cm}int nfs4\_\-Fattr\_\-cmp (fattr4 $\ast$ {\em Fattr1}, \/  fattr4 $\ast$ {\em Fattr2})}\label{nfs__proto__tools_8c_d200b7297f523e28015b9da6df084f0d}


nfs4\_\-Fattr\_\-cmp: compares 2 fattr4 buffers.

Compares 2 fattr4 buffers.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em Fattr1}][IN] pointer to NFSv4 attributes. \item[{\em Fattr2}][IN] pointer to NFSv4 attributes.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]TRUE if attributes are the same, FALSE otherwise, but -1 if RDATTR\_\-ERROR is set \end{Desc}


Definition at line 2523 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-Fattr\_\-Supported@{nfs4\_\-Fattr\_\-Supported}}
\index{nfs4\_\-Fattr\_\-Supported@{nfs4\_\-Fattr\_\-Supported}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-Fattr\_\-Supported}]{\setlength{\rightskip}{0pt plus 5cm}int nfs4\_\-Fattr\_\-Supported (fattr4 $\ast$ {\em Fattr})}\label{nfs__proto__tools_8c_ddc36314c9324c0075e3cc510f3fa3d3}


nfs4\_\-Fattr\_\-Supported: Checks if an attribute is supported.

Checks if an attribute is supported.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em Fattr}][IN] pointer to NFSv4 attributes.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]1 if successful, 0 otherwise. \end{Desc}


Definition at line 2429 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-Fattr\_\-Supported\_\-Bitmap@{nfs4\_\-Fattr\_\-Supported\_\-Bitmap}}
\index{nfs4\_\-Fattr\_\-Supported\_\-Bitmap@{nfs4\_\-Fattr\_\-Supported\_\-Bitmap}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-Fattr\_\-Supported\_\-Bitmap}]{\setlength{\rightskip}{0pt plus 5cm}int nfs4\_\-Fattr\_\-Supported\_\-Bitmap (bitmap4 $\ast$ {\em pbitmap})}\label{nfs__proto__tools_8c_777415bca67416b566197f41ae273435}


nfs4\_\-Fattr\_\-Supported: Checks if an attribute is supported.

Checks if an attribute is supported.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em Fattr}][IN] pointer to NFSv4 attributes.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]1 if successful, 0 otherwise. \end{Desc}


Definition at line 2476 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-Fattr\_\-To\_\-FSAL\_\-attr@{nfs4\_\-Fattr\_\-To\_\-FSAL\_\-attr}}
\index{nfs4\_\-Fattr\_\-To\_\-FSAL\_\-attr@{nfs4\_\-Fattr\_\-To\_\-FSAL\_\-attr}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-Fattr\_\-To\_\-FSAL\_\-attr}]{\setlength{\rightskip}{0pt plus 5cm}int nfs4\_\-Fattr\_\-To\_\-FSAL\_\-attr (fsal\_\-attrib\_\-list\_\-t $\ast$ {\em pFSAL\_\-attr}, \/  fattr4 $\ast$ {\em Fattr})}\label{nfs__proto__tools_8c_2bc1c0e13e12ae4b8655041c2e924e94}


nfs4\_\-Fattr\_\-To\_\-FSAL\_\-attr: Converts NFSv4 attributes buffer to a FSAL attributes structure.

Converts NFSv4 attributes buffer to a FSAL attributes structure.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em pFSAL\_\-attr}][OUT] pointer to FSAL attributes. \item[{\em Fattr}][IN] pointer to NFSv4 attributes.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]1 if successful, 0 if not supported, -1 if argument is badly formed \end{Desc}


Definition at line 2694 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-FhandleToExId@{nfs4\_\-FhandleToExId}}
\index{nfs4\_\-FhandleToExId@{nfs4\_\-FhandleToExId}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-FhandleToExId}]{\setlength{\rightskip}{0pt plus 5cm}int nfs4\_\-FhandleToExId (nfs\_\-fh4 $\ast$ {\em fh4p}, \/  unsigned short $\ast$ {\em ExIdp})}\label{nfs__proto__tools_8c_992c1d741c7335ee2f5870c131190f29}


nfs4\_\-FhandleToExId

This routine extracts the export id from the filehandle

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em fh4p}][IN] pointer to file handle to be used. \item[{\em ExIdp}][OUT] pointer to buffer in which found export id will be stored.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]TRUE is successful, FALSE otherwise. \end{Desc}


Definition at line 1823 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-FSALattr\_\-To\_\-Fattr@{nfs4\_\-FSALattr\_\-To\_\-Fattr}}
\index{nfs4\_\-FSALattr\_\-To\_\-Fattr@{nfs4\_\-FSALattr\_\-To\_\-Fattr}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-FSALattr\_\-To\_\-Fattr}]{\setlength{\rightskip}{0pt plus 5cm}int nfs4\_\-FSALattr\_\-To\_\-Fattr (exportlist\_\-t $\ast$ {\em pexport}, \/  fsal\_\-attrib\_\-list\_\-t $\ast$ {\em pattr}, \/  fattr4 $\ast$ {\em Fattr}, \/  compound\_\-data\_\-t $\ast$ {\em data}, \/  nfs\_\-fh4 $\ast$ {\em objFH}, \/  bitmap4 $\ast$ {\em Bitmap})}\label{nfs__proto__tools_8c_9e8f27b3fcc6c910f3d30f3aeaf29c9f}


nfs4\_\-FSALattr\_\-To\_\-Fattr: Converts FSAL Attributes to NFSv4 Fattr buffer.

Converts FSAL Attributes to NFSv4 Fattr buffer.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em pexport}][IN] the related export entry. \item[{\em pattr}][IN] pointer to FSAL attributes. \item[{\em Fattr}][OUT] NFSv4 Fattr buffer \item[{\em data}][IN] NFSv4 compoud request's data. \item[{\em Bitmap}][OUT] NFSv4 attributes bitmap to the Fattr buffer.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]-1 if failed, 0 if successful. \end{Desc}


\begin{Desc}
\item[{\bf Todo}]: not the right answer, actual quotas should be implemented \end{Desc}


\begin{Desc}
\item[{\bf Todo}]: not the right answer, actual quotas should be implemented \end{Desc}


Definition at line 508 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-list\_\-to\_\-bitmap4@{nfs4\_\-list\_\-to\_\-bitmap4}}
\index{nfs4\_\-list\_\-to\_\-bitmap4@{nfs4\_\-list\_\-to\_\-bitmap4}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-list\_\-to\_\-bitmap4}]{\setlength{\rightskip}{0pt plus 5cm}void nfs4\_\-list\_\-to\_\-bitmap4 (bitmap4 $\ast$ {\em b}, \/  uint\_\-t $\ast$ {\em plen}, \/  uint32\_\-t $\ast$ {\em pval})}\label{nfs__proto__tools_8c_ce19ec7de38a21ce9aecf64fadedc507}


nfs4\_\-list\_\-to\_\-bitmap4: convert a list of attributes to an attributes's bitmap.

Convert a list of attributes to an attributes's bitmap.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em b}][OUT] computed bitmap \item[{\em plen}][IN] list's length \item[{\em pval}][IN] list's array\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]nothing (void function). \end{Desc}


Definition at line 2098 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-MakeCred@{nfs4\_\-MakeCred}}
\index{nfs4\_\-MakeCred@{nfs4\_\-MakeCred}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-MakeCred}]{\setlength{\rightskip}{0pt plus 5cm}int nfs4\_\-MakeCred (compound\_\-data\_\-t $\ast$ {\em data})}\label{nfs__proto__tools_8c_c5009440881d6a4d6789eff4c3609224}


nfs4\_\-MakeCred

This routine fills in the pcontext field in the compound data.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em pfh}][INOUT] pointer to compound data to be used. NOT YET IMPLEMENTED\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]NFS4\_\-OK if successful, NFS4ERR\_\-WRONGSEC otherwise. \end{Desc}


Definition at line 3498 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-NextSeqId@{nfs4\_\-NextSeqId}}
\index{nfs4\_\-NextSeqId@{nfs4\_\-NextSeqId}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-NextSeqId}]{\setlength{\rightskip}{0pt plus 5cm}seqid4 nfs4\_\-NextSeqId (seqid4 {\em seqid})}\label{nfs__proto__tools_8c_c572290aea3c97830aab4602d4ebd6e3}


nfs4\_\-NextSeqId: compute the next nfsv4 sequence id.

Compute the next nfsv4 sequence id.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em seqid}][IN] previous sequence number.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]the requested sequence number. \end{Desc}


Definition at line 1963 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-SetCompoundExport@{nfs4\_\-SetCompoundExport}}
\index{nfs4\_\-SetCompoundExport@{nfs4\_\-SetCompoundExport}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-SetCompoundExport}]{\setlength{\rightskip}{0pt plus 5cm}int nfs4\_\-SetCompoundExport (compound\_\-data\_\-t $\ast$ {\em data})}\label{nfs__proto__tools_8c_10fae48fe98b321c91a8332850977ab1}


nfs4\_\-SetCompoundExport

This routine fills in the pexport field in the compound data.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em pfh}][OUT] pointer to compound data to be used.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]NFS4\_\-OK if successfull. Possible errors are NFS4ERR\_\-BADHANDLE and NFS4ERR\_\-WRONGSEC. \end{Desc}


Definition at line 1788 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs4\_\-stringid\_\-split@{nfs4\_\-stringid\_\-split}}
\index{nfs4\_\-stringid\_\-split@{nfs4\_\-stringid\_\-split}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs4\_\-stringid\_\-split}]{\setlength{\rightskip}{0pt plus 5cm}void nfs4\_\-stringid\_\-split (char $\ast$ {\em buff}, \/  char $\ast$ {\em uidname}, \/  char $\ast$ {\em domainname})}\label{nfs__proto__tools_8c_c22b02db820e76d8c29039a8590b3bf0}


nfs4\_\-stringid\_\-split: Splits a domain stamped name in two different parts.

Splits a domain stamped name in two different parts.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em buff}][IN] the input string \item[{\em uidname}][OUT] the extracted uid name \item[{\em domainname}][OUT] the extracted fomain name\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]nothing (void function) \end{Desc}


Definition at line 1855 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs\_\-FhandleToCache@{nfs\_\-FhandleToCache}}
\index{nfs\_\-FhandleToCache@{nfs\_\-FhandleToCache}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs\_\-FhandleToCache}]{\setlength{\rightskip}{0pt plus 5cm}cache\_\-entry\_\-t$\ast$ nfs\_\-FhandleToCache (u\_\-long {\em rq\_\-vers}, \/  fhandle2 $\ast$ {\em pfh2}, \/  nfs\_\-fh3 $\ast$ {\em pfh3}, \/  nfs\_\-fh4 $\ast$ {\em pfh4}, \/  nfsstat2 $\ast$ {\em pstatus2}, \/  nfsstat3 $\ast$ {\em pstatus3}, \/  nfsstat4 $\ast$ {\em pstatus4}, \/  fsal\_\-attrib\_\-list\_\-t $\ast$ {\em pattr}, \/  fsal\_\-op\_\-context\_\-t $\ast$ {\em pcontext}, \/  cache\_\-inode\_\-client\_\-t $\ast$ {\em pclient}, \/  hash\_\-table\_\-t $\ast$ {\em ht}, \/  int $\ast$ {\em prc})}\label{nfs__proto__tools_8c_23b31825c77acbdf14159a818cfc5bb6}


nfs\_\-FhandleToCache: Gets a cache entry using a file handle (v2 or v3) as input.

Gets a cache entry using a file handle (v2 or v3) as input.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em rq\_\-vers}][IN] version of the NFS protocol to be used \item[{\em pfh2}][IN] NFSv2 file handle or NULL \item[{\em pfh3}][IN] NFSv3 file handle or NULL \item[{\em pfh4}][IN] NFSv4 file handle or NULL \item[{\em pstatus2}][OUT] pointer to NFSv2 status or NULL \item[{\em pstatus3}][OUT] pointer to NFSv3 status or NULL \item[{\em pstatus4}][OUT] pointer to NFSv4 status or NULL \item[{\em pattr}][OUT] FSAL attributes related to this cache entry \item[{\em pcontext}][IN] client's FSAL credentials \item[{\em pclient}][IN] client's ressources to be used for accessing the Cache Inode \item[{\em ht}][INOUT] Hash Table used to address the Cache Inode \item[{\em prc}][OUT] internal status for the request (NFS\_\-REQ\_\-DROP or NFS\_\-REQ\_\-OK)\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]a pointer to the related pentry if successful, NULL is returned in case of a failure. \end{Desc}


Definition at line 156 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs\_\-RetryableError@{nfs\_\-RetryableError}}
\index{nfs\_\-RetryableError@{nfs\_\-RetryableError}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs\_\-RetryableError}]{\setlength{\rightskip}{0pt plus 5cm}int nfs\_\-RetryableError (cache\_\-inode\_\-status\_\-t {\em cache\_\-status})}\label{nfs__proto__tools_8c_42b9be27d5c5fd939c1eeb7e8b9e96df}


nfs\_\-RetryableError: Indicates if an error is retryable or not.

Indicates if an error is retryable or not.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em cache\_\-status}][IN] input Cache Inode Status value, to be tested.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]TRUE if retryable, FALSE otherwise.\end{Desc}
\begin{Desc}
\item[{\bf Todo}]: Not implemented for NOW BUGAZEOMEU\end{Desc}


Definition at line 372 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs\_\-SetFailedStatus@{nfs\_\-SetFailedStatus}}
\index{nfs\_\-SetFailedStatus@{nfs\_\-SetFailedStatus}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs\_\-SetFailedStatus}]{\setlength{\rightskip}{0pt plus 5cm}void nfs\_\-SetFailedStatus (fsal\_\-op\_\-context\_\-t $\ast$ {\em pcontext}, \/  exportlist\_\-t $\ast$ {\em pexport}, \/  int {\em version}, \/  cache\_\-inode\_\-status\_\-t {\em status}, \/  nfsstat2 $\ast$ {\em pstatus2}, \/  nfsstat3 $\ast$ {\em pstatus3}, \/  cache\_\-entry\_\-t $\ast$ {\em pentry0}, \/  post\_\-op\_\-attr $\ast$ {\em ppost\_\-op\_\-attr}, \/  cache\_\-entry\_\-t $\ast$ {\em pentry1}, \/  fsal\_\-attrib\_\-list\_\-t $\ast$ {\em ppre\_\-vattr1}, \/  wcc\_\-data $\ast$ {\em pwcc\_\-data1}, \/  cache\_\-entry\_\-t $\ast$ {\em pentry2}, \/  fsal\_\-attrib\_\-list\_\-t $\ast$ {\em ppre\_\-vattr2}, \/  wcc\_\-data $\ast$ {\em pwcc\_\-data2})}\label{nfs__proto__tools_8c_c2de99fb1ffdf13ba2047ff934da0956}




Definition at line 454 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs\_\-SetPostOpAttr@{nfs\_\-SetPostOpAttr}}
\index{nfs\_\-SetPostOpAttr@{nfs\_\-SetPostOpAttr}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs\_\-SetPostOpAttr}]{\setlength{\rightskip}{0pt plus 5cm}int nfs\_\-SetPostOpAttr (fsal\_\-op\_\-context\_\-t $\ast$ {\em pcontext}, \/  exportlist\_\-t $\ast$ {\em pexport}, \/  cache\_\-entry\_\-t $\ast$ {\em pentry}, \/  fsal\_\-attrib\_\-list\_\-t $\ast$ {\em pfsal\_\-attr}, \/  post\_\-op\_\-attr $\ast$ {\em presult})}\label{nfs__proto__tools_8c_e97b4e7d590d92266c94bf1e921e1318}


nfs\_\-SetPostOpAttr: Converts FSAL Attributes to NFSv3 PostOp Attributes structure.

Converts FSAL Attributes to NFSv3 PostOp Attributes structure.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em pexport}][IN] the related export entry \item[{\em pfsal\_\-attr}][IN] FSAL attributes \item[{\em pattr}][OUT] NFSv3 PostOp structure attributes.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]0 in all cases (making it a void function maybe a good idea) \end{Desc}


Definition at line 261 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs\_\-SetPreOpAttr@{nfs\_\-SetPreOpAttr}}
\index{nfs\_\-SetPreOpAttr@{nfs\_\-SetPreOpAttr}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs\_\-SetPreOpAttr}]{\setlength{\rightskip}{0pt plus 5cm}void nfs\_\-SetPreOpAttr (fsal\_\-attrib\_\-list\_\-t $\ast$ {\em pfsal\_\-attr}, \/  pre\_\-op\_\-attr $\ast$ {\em pattr})}\label{nfs__proto__tools_8c_1af0b19592ea464c9a7aadd563a42e92}


nfs\_\-SetPreOpAttr: Converts FSAL Attributes to NFSv3 PreOp Attributes structure.

Converts FSAL Attributes to NFSv3 PreOp Attributes structure.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em pfsal\_\-attr}][IN] FSAL attributes. \item[{\em pattr}][OUT] NFSv3 PreOp structure attributes.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]nothing (void function) \end{Desc}


Definition at line 300 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs\_\-SetWccData@{nfs\_\-SetWccData}}
\index{nfs\_\-SetWccData@{nfs\_\-SetWccData}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs\_\-SetWccData}]{\setlength{\rightskip}{0pt plus 5cm}void nfs\_\-SetWccData (fsal\_\-op\_\-context\_\-t $\ast$ {\em pcontext}, \/  exportlist\_\-t $\ast$ {\em pexport}, \/  cache\_\-entry\_\-t $\ast$ {\em pentry}, \/  fsal\_\-attrib\_\-list\_\-t $\ast$ {\em pbefore\_\-attr}, \/  fsal\_\-attrib\_\-list\_\-t $\ast$ {\em pafter\_\-attr}, \/  wcc\_\-data $\ast$ {\em pwcc\_\-data})}\label{nfs__proto__tools_8c_59e0bde56bc1855420c304e57334a8ec}


nfs\_\-SetWccData: Sets NFSv3 Weak Cache Coherency structure.

Sets NFSv3 Weak Cache Coherency structure.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em pcontext}][IN] credentials \item[{\em pentry}][IN] related pentry \item[{\em pbefore\_\-attr}][IN] the attributes before the operation. \item[{\em pafter\_\-attr}][IN] the attributes after the operation \item[{\em pwcc\_\-data}][OUT] the Weak Cache Coherency structure\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]nothing (void function). \end{Desc}


Definition at line 338 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!str2utf8@{str2utf8}}
\index{str2utf8@{str2utf8}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{str2utf8}]{\setlength{\rightskip}{0pt plus 5cm}int str2utf8 (char $\ast$ {\em str}, \/  utf8string $\ast$ {\em utf8str})}\label{nfs__proto__tools_8c_1113f595b919b5c955131797fcf8715f}


str2utf8: converts a string buffer into a UTF8 string descriptor.

Converts a string buffer into a UTF8 string descriptor.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em str}][IN] input string \item[{\em utf8str}][OUT] computed UTF8 string\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]-1 if failed, 0 if successful. \end{Desc}


Definition at line 1928 of file nfs\_\-proto\_\-tools.c.\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!utf82str@{utf82str}}
\index{utf82str@{utf82str}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{utf82str}]{\setlength{\rightskip}{0pt plus 5cm}int utf82str (char $\ast$ {\em str}, \/  utf8string $\ast$ {\em utf8str})}\label{nfs__proto__tools_8c_a48e0669eae8c05f43ed96006a494221}


utf82str: converts a UTF8 string buffer into a string descriptor.

Converts a UTF8 string buffer into a string descriptor.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em str}][OUT] computed output string \item[{\em utf8str}][IN] input UTF8 string\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]-1 if failed, 0 if successful. \end{Desc}


Definition at line 1886 of file nfs\_\-proto\_\-tools.c.

\subsection{Variable Documentation}
\index{nfs\_\-proto\_\-tools.c@{nfs\_\-proto\_\-tools.c}!nfs\_\-param@{nfs\_\-param}}
\index{nfs\_\-param@{nfs\_\-param}!nfs_proto_tools.c@{nfs\_\-proto\_\-tools.c}}
\subsubsection[{nfs\_\-param}]{\setlength{\rightskip}{0pt plus 5cm}nfs\_\-parameter\_\-t {\bf nfs\_\-param}}\label{nfs__proto__tools_8c_eb8fc46586993cf210777049fca03969}


