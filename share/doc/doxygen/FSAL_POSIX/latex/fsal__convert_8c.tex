\section{fsal\_\-convert.c File Reference}
\label{fsal__convert_8c}\index{fsal\_\-convert.c@{fsal\_\-convert.c}}


HPSS-\/FSAL type translation functions.  
{\ttfamily \#include \char`\"{}fsal\_\-convert.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}fsal\_\-internal.h\char`\"{}}\par
{\ttfamily \#include $<$sys/types.h$>$}\par
{\ttfamily \#include $<$sys/stat.h$>$}\par
{\ttfamily \#include $<$errno.h$>$}\par
{\ttfamily \#include $<$string.h$>$}\par
\subsection*{Defines}
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries MAX\_\-2}(x, y)~( (x) $>$ (y) ? (x) : (y) )\label{fsal__convert_8c_a29bc465820d0719bc24cb339e75806d0}

\item 
\#define {\bfseries MAX\_\-3}(x, y, z)~( (x) $>$ (y) ? MAX\_\-2((x),(z)) : MAX\_\-2((y),(z)) )\label{fsal__convert_8c_ae28623bae2af7d233caa8038601aa853}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int {\bf posix2fsal\_\-error} (int posix\_\-errorcode)
\item 
int {\bf fsal2posix\_\-openflags} (fsal\_\-openflags\_\-t fsal\_\-flags, int $\ast$p\_\-posix\_\-flags)
\item 
fsal\_\-status\_\-t {\bfseries posix2fsal\_\-attributes} (struct stat $\ast$p\_\-buffstat, fsal\_\-attrib\_\-list\_\-t $\ast$p\_\-fsalattr\_\-out)\label{fsal__convert_8c_aadd7b590c15483d42c8b635e4810f506}

\item 
fsal\_\-status\_\-t {\bf posixdb2fsal\_\-error} (fsal\_\-posixdb\_\-status\_\-t statusdb)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
HPSS-\/FSAL type translation functions. \begin{DoxyAuthor}{Author}

\end{DoxyAuthor}
Author}
leibovic \begin{DoxyDate}{Date}

\end{DoxyDate}
Date}
2006/01/17 15:53:39 \begin{DoxyVersion}{Version}

\end{DoxyVersion}
Revision}
1.31 

Definition in file {\bf fsal\_\-convert.c}.

\subsection{Function Documentation}
\index{fsal\_\-convert.c@{fsal\_\-convert.c}!fsal2posix\_\-openflags@{fsal2posix\_\-openflags}}
\index{fsal2posix\_\-openflags@{fsal2posix\_\-openflags}!fsal_convert.c@{fsal\_\-convert.c}}
\subsubsection[{fsal2posix\_\-openflags}]{\setlength{\rightskip}{0pt plus 5cm}int fsal2posix\_\-openflags (fsal\_\-openflags\_\-t {\em fsal\_\-flags}, \/  int $\ast$ {\em p\_\-posix\_\-flags})}\label{fsal__convert_8c_a2b4be17ec15f5e77eca96578468b6488}
fsal2posix\_\-openflags: Convert FSAL open flags to Posix open flags.


\begin{DoxyParams}{Parameters}
\item[{\em fsal\_\-flags}](input): The FSAL open flags to be translated. \item[{\em p\_\-hpss\_\-flags}](output): Pointer to the POSIX open flags.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/ ERR\_\-FSAL\_\-NO\_\-ERROR (no error).
\begin{DoxyItemize}
\item ERR\_\-FSAL\_\-FAULT (p\_\-hpss\_\-flags is a NULL pointer).
\item ERR\_\-FSAL\_\-INVAL (invalid or incompatible input flags). 
\end{DoxyItemize}
\end{DoxyReturn}


Definition at line 233 of file fsal\_\-convert.c.

Referenced by POSIXFSAL\_\-open().\index{fsal\_\-convert.c@{fsal\_\-convert.c}!posix2fsal\_\-error@{posix2fsal\_\-error}}
\index{posix2fsal\_\-error@{posix2fsal\_\-error}!fsal_convert.c@{fsal\_\-convert.c}}
\subsubsection[{posix2fsal\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}int posix2fsal\_\-error (int {\em posix\_\-errorcode})}\label{fsal__convert_8c_ad420f004b68f6720ab45980298177bd9}
posix2fsal\_\-error : Convert POSIX error codes to FSAL error codes.


\begin{DoxyParams}{Parameters}
\item[{\em posix\_\-errorcode}](input): The error code returned from POSIX.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The FSAL error code associated to posix\_\-errorcode. 
\end{DoxyReturn}


\begin{Desc}
\item[{\bf Todo}]: The EBADF error also happens when file is opened for reading, and we try writting in it. In this case, we return ERR\_\-FSAL\_\-NOT\_\-OPENED, but it doesn't seems to be a correct error translation. \end{Desc}


\begin{DoxyWarning}{Warning}
AIX returns EEXIST where BSD uses ENOTEMPTY; We want ENOTEMPTY to be interpreted anyway on AIX plateforms. Thus, we explicitely write its value (87).
\end{DoxyWarning}


Definition at line 39 of file fsal\_\-convert.c.

Referenced by POSIXFSAL\_\-close(), POSIXFSAL\_\-closedir(), POSIXFSAL\_\-create(), POSIXFSAL\_\-dynamic\_\-fsinfo(), POSIXFSAL\_\-get\_\-quota(), POSIXFSAL\_\-link(), POSIXFSAL\_\-lookup(), POSIXFSAL\_\-mkdir(), POSIXFSAL\_\-mknode(), POSIXFSAL\_\-open(), POSIXFSAL\_\-opendir(), POSIXFSAL\_\-rcp(), POSIXFSAL\_\-read(), POSIXFSAL\_\-readdir(), POSIXFSAL\_\-readlink(), POSIXFSAL\_\-rename(), POSIXFSAL\_\-set\_\-quota(), POSIXFSAL\_\-setattrs(), POSIXFSAL\_\-symlink(), POSIXFSAL\_\-truncate(), POSIXFSAL\_\-unlink(), and POSIXFSAL\_\-write().\index{fsal\_\-convert.c@{fsal\_\-convert.c}!posixdb2fsal\_\-error@{posixdb2fsal\_\-error}}
\index{posixdb2fsal\_\-error@{posixdb2fsal\_\-error}!fsal_convert.c@{fsal\_\-convert.c}}
\subsubsection[{posixdb2fsal\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}fsal\_\-status\_\-t posixdb2fsal\_\-error (fsal\_\-posixdb\_\-status\_\-t {\em statusdb})}\label{fsal__convert_8c_a9ea1023587982b3087afb63e2afe32b4}
Concert fsal\_\-posixdb\_\-status\_\-t to fsal\_\-status\_\-t 

Definition at line 411 of file fsal\_\-convert.c.

Referenced by fsal\_\-internal\_\-getInfoFromChildrenList(), fsal\_\-internal\_\-getInfoFromName(), fsal\_\-internal\_\-getPathFromHandle(), POSIXFSAL\_\-readdir(), POSIXFSAL\_\-rename(), and POSIXFSAL\_\-unlink().