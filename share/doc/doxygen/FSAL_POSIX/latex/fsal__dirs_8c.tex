\section{fsal\_\-dirs.c File Reference}
\label{fsal__dirs_8c}\index{fsal\_\-dirs.c@{fsal\_\-dirs.c}}


Directory browsing operations.  
{\ttfamily \#include \char`\"{}fsal.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}fsal\_\-internal.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}fsal\_\-convert.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}stuff\_\-alloc.h\char`\"{}}\par
{\ttfamily \#include $<$string.h$>$}\par
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
fsal\_\-status\_\-t {\bf POSIXFSAL\_\-opendir} (posixfsal\_\-handle\_\-t $\ast$p\_\-dir\_\-handle, posixfsal\_\-op\_\-context\_\-t $\ast$p\_\-context, posixfsal\_\-dir\_\-t $\ast$p\_\-dir\_\-descriptor, fsal\_\-attrib\_\-list\_\-t $\ast$p\_\-dir\_\-attributes)
\item 
fsal\_\-status\_\-t {\bf POSIXFSAL\_\-readdir} (posixfsal\_\-dir\_\-t $\ast$p\_\-dir\_\-descriptor, posixfsal\_\-cookie\_\-t start\_\-position, fsal\_\-attrib\_\-mask\_\-t get\_\-attr\_\-mask, fsal\_\-mdsize\_\-t buffersize, fsal\_\-dirent\_\-t $\ast$p\_\-pdirent, posixfsal\_\-cookie\_\-t $\ast$p\_\-end\_\-position, fsal\_\-count\_\-t $\ast$p\_\-nb\_\-entries, fsal\_\-boolean\_\-t $\ast$p\_\-end\_\-of\_\-dir)
\item 
fsal\_\-status\_\-t {\bf POSIXFSAL\_\-closedir} (posixfsal\_\-dir\_\-t $\ast$p\_\-dir\_\-descriptor)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Directory browsing operations. \begin{DoxyAuthor}{Author}

\end{DoxyAuthor}
Author}
leibovic \begin{DoxyDate}{Date}

\end{DoxyDate}
Date}
2005/07/29 09:39:04 \begin{DoxyVersion}{Version}

\end{DoxyVersion}
Revision}
1.10 

Definition in file {\bf fsal\_\-dirs.c}.

\subsection{Function Documentation}
\index{fsal\_\-dirs.c@{fsal\_\-dirs.c}!POSIXFSAL\_\-closedir@{POSIXFSAL\_\-closedir}}
\index{POSIXFSAL\_\-closedir@{POSIXFSAL\_\-closedir}!fsal_dirs.c@{fsal\_\-dirs.c}}
\subsubsection[{POSIXFSAL\_\-closedir}]{\setlength{\rightskip}{0pt plus 5cm}fsal\_\-status\_\-t POSIXFSAL\_\-closedir (posixfsal\_\-dir\_\-t $\ast$ {\em p\_\-dir\_\-descriptor})}\label{fsal__dirs_8c_a99a2e0802ca2e796d14c4cf2d2d2558d}
FSAL\_\-closedir : Free the resources allocated for reading directory entries.


\begin{DoxyParams}{Parameters}
\item[{\em dir\_\-descriptor}](input): Pointer to a directory descriptor filled by FSAL\_\-opendir.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Major error codes :
\begin{DoxyItemize}
\item ERR\_\-FSAL\_\-NO\_\-ERROR (no error)
\item Another error code if an error occured. 
\end{DoxyItemize}
\end{DoxyReturn}


Definition at line 343 of file fsal\_\-dirs.c.

References posix2fsal\_\-error().\index{fsal\_\-dirs.c@{fsal\_\-dirs.c}!POSIXFSAL\_\-opendir@{POSIXFSAL\_\-opendir}}
\index{POSIXFSAL\_\-opendir@{POSIXFSAL\_\-opendir}!fsal_dirs.c@{fsal\_\-dirs.c}}
\subsubsection[{POSIXFSAL\_\-opendir}]{\setlength{\rightskip}{0pt plus 5cm}fsal\_\-status\_\-t POSIXFSAL\_\-opendir (posixfsal\_\-handle\_\-t $\ast$ {\em p\_\-dir\_\-handle}, \/  posixfsal\_\-op\_\-context\_\-t $\ast$ {\em p\_\-context}, \/  posixfsal\_\-dir\_\-t $\ast$ {\em p\_\-dir\_\-descriptor}, \/  fsal\_\-attrib\_\-list\_\-t $\ast$ {\em p\_\-dir\_\-attributes})}\label{fsal__dirs_8c_a5f229baa77f95d6ddd0a4b4852c2ad5e}
FSAL\_\-opendir : Opens a directory for reading its content.


\begin{DoxyParams}{Parameters}
\item[{\em dir\_\-handle}](input) the handle of the directory to be opened. \item[{\em cred}](input) Permission context for the operation (user,...). \item[{\em dir\_\-descriptor}](output) pointer to an allocated structure that will receive directory stream informations, on successfull completion. \item[{\em dir\_\-attributes}](optional output) On successfull completion,the structure pointed by dir\_\-attributes receives the new directory attributes. May be NULL.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Major error codes :
\begin{DoxyItemize}
\item ERR\_\-FSAL\_\-NO\_\-ERROR (no error)
\item Another error code if an error occured. 
\end{DoxyItemize}
\end{DoxyReturn}


Definition at line 44 of file fsal\_\-dirs.c.

References fsal\_\-internal\_\-getPathFromHandle(), posix2fsal\_\-error(), and TakeTokenFSCall().\index{fsal\_\-dirs.c@{fsal\_\-dirs.c}!POSIXFSAL\_\-readdir@{POSIXFSAL\_\-readdir}}
\index{POSIXFSAL\_\-readdir@{POSIXFSAL\_\-readdir}!fsal_dirs.c@{fsal\_\-dirs.c}}
\subsubsection[{POSIXFSAL\_\-readdir}]{\setlength{\rightskip}{0pt plus 5cm}fsal\_\-status\_\-t POSIXFSAL\_\-readdir (posixfsal\_\-dir\_\-t $\ast$ {\em p\_\-dir\_\-descriptor}, \/  posixfsal\_\-cookie\_\-t {\em start\_\-position}, \/  fsal\_\-attrib\_\-mask\_\-t {\em get\_\-attr\_\-mask}, \/  fsal\_\-mdsize\_\-t {\em buffersize}, \/  fsal\_\-dirent\_\-t $\ast$ {\em p\_\-pdirent}, \/  posixfsal\_\-cookie\_\-t $\ast$ {\em p\_\-end\_\-position}, \/  fsal\_\-count\_\-t $\ast$ {\em p\_\-nb\_\-entries}, \/  fsal\_\-boolean\_\-t $\ast$ {\em p\_\-end\_\-of\_\-dir})}\label{fsal__dirs_8c_a2828071d036ab63c6cd74e2c9110e0b6}
FSAL\_\-readdir : Read the entries of an opened directory.


\begin{DoxyParams}{Parameters}
\item[{\em dir\_\-descriptor}](input): Pointer to the directory descriptor filled by FSAL\_\-opendir. \item[{\em start\_\-position}](input): Cookie that indicates the first object to be read during this readdir operation. This should be :
\begin{DoxyItemize}
\item FSAL\_\-READDIR\_\-FROM\_\-BEGINNING for reading the content of the directory from the beginning.
\item The end\_\-position parameter returned by the previous call to FSAL\_\-readdir. 
\end{DoxyItemize}\item[{\em get\_\-attr\_\-mask}](input) Specify the set of attributes to be retrieved for directory entries. \item[{\em buffersize}](input) The size (in bytes) of the buffer where the direntries are to be stored. \item[{\em pdirent}](output) Adresse of the buffer where the direntries are to be stored. \item[{\em end\_\-position}](output) Cookie that indicates the current position in the directory. \item[{\em nb\_\-entries}](output) Pointer to the number of entries read during the call. \item[{\em end\_\-of\_\-dir}](output) Pointer to a boolean that indicates if the end of dir has been reached during the call.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Major error codes :
\begin{DoxyItemize}
\item ERR\_\-FSAL\_\-NO\_\-ERROR (no error)
\item Another error code if an error occured. 
\end{DoxyItemize}
\end{DoxyReturn}


Definition at line 155 of file fsal\_\-dirs.c.

References fsal\_\-internal\_\-appendFSALNameToFSALPath(), fsal\_\-internal\_\-getInfoFromChildrenList(), fsal\_\-internal\_\-getInfoFromName(), fsal\_\-internal\_\-posix2posixdb\_\-fileinfo(), posix2fsal\_\-error(), posixdb2fsal\_\-error(), and TakeTokenFSCall().