\section{fsal\_\-init.c File Reference}
\label{fsal__init_8c}\index{fsal\_\-init.c@{fsal\_\-init.c}}
Initialization functions.  


{\tt \#include \char`\"{}fsal.h\char`\"{}}\par
{\tt \#include \char`\"{}fsal\_\-internal.h\char`\"{}}\par
\subsection*{Defines}
\begin{CompactItemize}
\item 
\#define \textbf{SET\_\-BITMAP\_\-PARAM}(api\_\-cfg, p\_\-init\_\-info, \_\-field)
\item 
\#define \textbf{SET\_\-INTEGER\_\-PARAM}(api\_\-cfg, p\_\-init\_\-info, \_\-field)
\item 
\#define \textbf{SET\_\-STRING\_\-PARAM}(api\_\-cfg, p\_\-init\_\-info, \_\-field)
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
fsal\_\-status\_\-t {\bf FSAL\_\-Init} (fsal\_\-parameter\_\-t $\ast$init\_\-info)
\item 
fsal\_\-status\_\-t \textbf{FSAL\_\-terminate} ()\label{fsal__init_8c_dabe2f2fc596731b07948fb0f9ae51db}

\end{CompactItemize}


\subsection{Detailed Description}
Initialization functions. 

\begin{Desc}
\item[Author:]\end{Desc}
\begin{Desc}
\item[Author]leibovic \end{Desc}
\begin{Desc}
\item[Date:]\end{Desc}
\begin{Desc}
\item[Date]2006/01/24 13:45:37 \end{Desc}
\begin{Desc}
\item[Version:]\end{Desc}
\begin{Desc}
\item[Revision]1.20 \end{Desc}


Definition in file {\bf fsal\_\-init.c}.

\subsection{Define Documentation}
\index{fsal\_\-init.c@{fsal\_\-init.c}!SET\_\-BITMAP\_\-PARAM@{SET\_\-BITMAP\_\-PARAM}}
\index{SET\_\-BITMAP\_\-PARAM@{SET\_\-BITMAP\_\-PARAM}!fsal_init.c@{fsal\_\-init.c}}
\subsubsection[{SET\_\-BITMAP\_\-PARAM}]{\setlength{\rightskip}{0pt plus 5cm}\#define SET\_\-BITMAP\_\-PARAM(api\_\-cfg, \/  p\_\-init\_\-info, \/  \_\-field)}\label{fsal__init_8c_d4acf7e55a5ad7300edb9d27c5865001}


\textbf{Value:}

\begin{Code}\begin{verbatim}switch( (p_init_info)->behaviors._field ){                \
      case FSAL_INIT_FORCE_VALUE :                            \
        /* force the value in any case */                     \
        api_cfg._field = (p_init_info)->hpss_config._field;   \
        break;                                                \
      case FSAL_INIT_MAX_LIMIT :                              \
        /* remove the flags not specified by user (AND) */    \
        api_cfg._field &= (p_init_info)->hpss_config._field;  \
        break;                                                \
      case FSAL_INIT_MIN_LIMIT :                              \
        /* add the flags specified by user (OR) */            \
        api_cfg._field |= (p_init_info)->hpss_config._field;  \
        break;                                                \
    /* In the other cases, we keep the default value. */      \
    }                                                         \
\end{verbatim}
\end{Code}


Definition at line 22 of file fsal\_\-init.c.\index{fsal\_\-init.c@{fsal\_\-init.c}!SET\_\-INTEGER\_\-PARAM@{SET\_\-INTEGER\_\-PARAM}}
\index{SET\_\-INTEGER\_\-PARAM@{SET\_\-INTEGER\_\-PARAM}!fsal_init.c@{fsal\_\-init.c}}
\subsubsection[{SET\_\-INTEGER\_\-PARAM}]{\setlength{\rightskip}{0pt plus 5cm}\#define SET\_\-INTEGER\_\-PARAM(api\_\-cfg, \/  p\_\-init\_\-info, \/  \_\-field)}\label{fsal__init_8c_802153fcb81fd9f7b272dbf6eb477aec}


\textbf{Value:}

\begin{Code}\begin{verbatim}switch( (p_init_info)->behaviors._field ){                    \
    case FSAL_INIT_FORCE_VALUE :                                  \
        /* force the value in any case */                         \
        api_cfg._field = (p_init_info)->hpss_config._field;       \
        break;                                                \
    case FSAL_INIT_MAX_LIMIT :                                    \
      /* check the higher limit */                                \
      if ( api_cfg._field > (p_init_info)->hpss_config._field )   \
        api_cfg._field = (p_init_info)->hpss_config._field ;      \
        break;                                                \
    case FSAL_INIT_MIN_LIMIT :                                    \
      /* check the lower limit */                                 \
      if ( api_cfg._field < (p_init_info)->hpss_config._field )   \
        api_cfg._field = (p_init_info)->hpss_config._field ;      \
        break;                                                \
    /* In the other cases, we keep the default value. */          \
    }                                                             \
\end{verbatim}
\end{Code}


Definition at line 40 of file fsal\_\-init.c.\index{fsal\_\-init.c@{fsal\_\-init.c}!SET\_\-STRING\_\-PARAM@{SET\_\-STRING\_\-PARAM}}
\index{SET\_\-STRING\_\-PARAM@{SET\_\-STRING\_\-PARAM}!fsal_init.c@{fsal\_\-init.c}}
\subsubsection[{SET\_\-STRING\_\-PARAM}]{\setlength{\rightskip}{0pt plus 5cm}\#define SET\_\-STRING\_\-PARAM(api\_\-cfg, \/  p\_\-init\_\-info, \/  \_\-field)}\label{fsal__init_8c_7e81fe711a5c74c6137e9ee255672ff7}


\textbf{Value:}

\begin{Code}\begin{verbatim}switch( (p_init_info)->behaviors._field ){                    \
    case FSAL_INIT_FORCE_VALUE :                                  \
      /* force the value in any case */                           \
      strcpy(api_cfg._field,(p_init_info)->hpss_config._field);   \
      break;                                                \
    /* In the other cases, we keep the default value. */          \
    }                                                             \
\end{verbatim}
\end{Code}


Definition at line 60 of file fsal\_\-init.c.

\subsection{Function Documentation}
\index{fsal\_\-init.c@{fsal\_\-init.c}!FSAL\_\-Init@{FSAL\_\-Init}}
\index{FSAL\_\-Init@{FSAL\_\-Init}!fsal_init.c@{fsal\_\-init.c}}
\subsubsection[{FSAL\_\-Init}]{\setlength{\rightskip}{0pt plus 5cm}fsal\_\-status\_\-t FSAL\_\-Init (fsal\_\-parameter\_\-t $\ast$ {\em init\_\-info})}\label{fsal__init_8c_0be44bf9d728985f8631b3aa8911b36f}


FSAL\_\-Init : Initializes the FileSystem Abstraction Layer.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em init\_\-info}](input, fsal\_\-parameter\_\-t $\ast$) : Pointer to a structure that contains all initialization parameters for the FSAL. Specifically, it contains settings about the filesystem on which the FSAL is based, security settings, logging policy and outputs, and other general FSAL options.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]Major error codes : ERR\_\-FSAL\_\-NO\_\-ERROR (initialisation OK) ERR\_\-FSAL\_\-FAULT (init\_\-info pointer is null) ERR\_\-FSAL\_\-SERVERFAULT (misc FSAL error) ERR\_\-FSAL\_\-ALREADY\_\-INIT (The FS is already initialized) ERR\_\-FSAL\_\-BAD\_\-INIT (FS specific init error, minor error code gives the reason for this error.) ERR\_\-FSAL\_\-SEC\_\-INIT (Security context init error). \end{Desc}


Definition at line 91 of file fsal\_\-init.c.