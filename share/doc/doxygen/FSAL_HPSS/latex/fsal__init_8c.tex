\section{fsal\_\-init.c File Reference}
\label{fsal__init_8c}\index{fsal\_\-init.c@{fsal\_\-init.c}}


Initialization functions.  
{\ttfamily \#include \char`\"{}fsal.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}fsal\_\-internal.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}fsal\_\-common.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}HPSSclapiExt/hpssclapiext.h\char`\"{}}\par
\subsection*{Defines}
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries SET\_\-BITMAP\_\-PARAM}(api\_\-cfg, p\_\-init\_\-info, \_\-field)
\item 
\#define {\bfseries SET\_\-INTEGER\_\-PARAM}(api\_\-cfg, p\_\-init\_\-info, \_\-field)
\item 
\#define {\bfseries SET\_\-STRING\_\-PARAM}(api\_\-cfg, p\_\-init\_\-info, \_\-field)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
fsal\_\-status\_\-t {\bf HPSSFSAL\_\-Init} (fsal\_\-parameter\_\-t $\ast$init\_\-info)
\item 
fsal\_\-status\_\-t {\bfseries HPSSFSAL\_\-terminate} ()\label{fsal__init_8c_aa178b47940a983f9d86443df3bc61fab}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Initialization functions. \begin{DoxyAuthor}{Author}

\end{DoxyAuthor}
Author}
leibovic \begin{DoxyDate}{Date}

\end{DoxyDate}
Date}
2006/01/24 13:45:37 \begin{DoxyVersion}{Version}

\end{DoxyVersion}
Revision}
1.20 

Definition in file {\bf fsal\_\-init.c}.

\subsection{Define Documentation}
\index{fsal\_\-init.c@{fsal\_\-init.c}!SET\_\-BITMAP\_\-PARAM@{SET\_\-BITMAP\_\-PARAM}}
\index{SET\_\-BITMAP\_\-PARAM@{SET\_\-BITMAP\_\-PARAM}!fsal_init.c@{fsal\_\-init.c}}
\subsubsection[{SET\_\-BITMAP\_\-PARAM}]{\setlength{\rightskip}{0pt plus 5cm}\#define SET\_\-BITMAP\_\-PARAM(api\_\-cfg, \/  p\_\-init\_\-info, \/  \_\-field)}\label{fsal__init_8c_ad4acf7e55a5ad7300edb9d27c5865001}
{\bfseries Value:}
\begin{DoxyCode}
switch( (p_init_info)->behaviors._field ){                \
      case FSAL_INIT_FORCE_VALUE :                            \
        /* force the value in any case */                     \
        api_cfg._field = (p_init_info)->hpss_config._field;   \
        break;                                                \
      case FSAL_INIT_MAX_LIMIT :                              \
        /* remove the flags not specified by user (AND) */    \
        api_cfg._field &= (p_init_info)->hpss_config._field;  \
        break;                                                \
      case FSAL_INIT_MIN_LIMIT :                              \
        /* add the flags specified by user (OR) */            \
        api_cfg._field |= (p_init_info)->hpss_config._field;  \
        break;                                                \
    /* In the other cases, we keep the default value. */      \
    }                                                         \
\end{DoxyCode}


Definition at line 81 of file fsal\_\-init.c.\index{fsal\_\-init.c@{fsal\_\-init.c}!SET\_\-INTEGER\_\-PARAM@{SET\_\-INTEGER\_\-PARAM}}
\index{SET\_\-INTEGER\_\-PARAM@{SET\_\-INTEGER\_\-PARAM}!fsal_init.c@{fsal\_\-init.c}}
\subsubsection[{SET\_\-INTEGER\_\-PARAM}]{\setlength{\rightskip}{0pt plus 5cm}\#define SET\_\-INTEGER\_\-PARAM(api\_\-cfg, \/  p\_\-init\_\-info, \/  \_\-field)}\label{fsal__init_8c_a802153fcb81fd9f7b272dbf6eb477aec}
{\bfseries Value:}
\begin{DoxyCode}
switch( (p_init_info)->behaviors._field ){                    \
    case FSAL_INIT_FORCE_VALUE :                                  \
        /* force the value in any case */                         \
        api_cfg._field = (p_init_info)->hpss_config._field;       \
        break;                                                \
    case FSAL_INIT_MAX_LIMIT :                                    \
      /* check the higher limit */                                \
      if ( api_cfg._field > (p_init_info)->hpss_config._field )   \
        api_cfg._field = (p_init_info)->hpss_config._field ;      \
        break;                                                \
    case FSAL_INIT_MIN_LIMIT :                                    \
      /* check the lower limit */                                 \
      if ( api_cfg._field < (p_init_info)->hpss_config._field )   \
        api_cfg._field = (p_init_info)->hpss_config._field ;      \
        break;                                                \
    /* In the other cases, we keep the default value. */          \
    }                                                             \
\end{DoxyCode}


Definition at line 99 of file fsal\_\-init.c.\index{fsal\_\-init.c@{fsal\_\-init.c}!SET\_\-STRING\_\-PARAM@{SET\_\-STRING\_\-PARAM}}
\index{SET\_\-STRING\_\-PARAM@{SET\_\-STRING\_\-PARAM}!fsal_init.c@{fsal\_\-init.c}}
\subsubsection[{SET\_\-STRING\_\-PARAM}]{\setlength{\rightskip}{0pt plus 5cm}\#define SET\_\-STRING\_\-PARAM(api\_\-cfg, \/  p\_\-init\_\-info, \/  \_\-field)}\label{fsal__init_8c_a7e81fe711a5c74c6137e9ee255672ff7}
{\bfseries Value:}
\begin{DoxyCode}
switch( (p_init_info)->behaviors._field ){                    \
    case FSAL_INIT_FORCE_VALUE :                                  \
      /* force the value in any case */                           \
      strcpy(api_cfg._field,(p_init_info)->hpss_config._field);   \
      break;                                                \
    /* In the other cases, we keep the default value. */          \
    }                                                             \
\end{DoxyCode}


Definition at line 119 of file fsal\_\-init.c.

\subsection{Function Documentation}
\index{fsal\_\-init.c@{fsal\_\-init.c}!HPSSFSAL\_\-Init@{HPSSFSAL\_\-Init}}
\index{HPSSFSAL\_\-Init@{HPSSFSAL\_\-Init}!fsal_init.c@{fsal\_\-init.c}}
\subsubsection[{HPSSFSAL\_\-Init}]{\setlength{\rightskip}{0pt plus 5cm}fsal\_\-status\_\-t HPSSFSAL\_\-Init (fsal\_\-parameter\_\-t $\ast$ {\em init\_\-info})}\label{fsal__init_8c_a40e78ed47f8aee6bd33536a3dbe6c495}
FSAL\_\-Init : Initializes the FileSystem Abstraction Layer.


\begin{DoxyParams}{Parameters}
\item[{\em init\_\-info}](input, fsal\_\-parameter\_\-t $\ast$) : Pointer to a structure that contains all initialization parameters for the FSAL. Specifically, it contains settings about the filesystem on which the FSAL is based, security settings, logging policy and outputs, and other general FSAL options.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Major error codes : ERR\_\-FSAL\_\-NO\_\-ERROR (initialisation OK) ERR\_\-FSAL\_\-FAULT (init\_\-info pointer is null) ERR\_\-FSAL\_\-SERVERFAULT (misc FSAL error) ERR\_\-FSAL\_\-ALREADY\_\-INIT (The FS is already initialized) ERR\_\-FSAL\_\-BAD\_\-INIT (FS specific init error, minor error code gives the reason for this error.) ERR\_\-FSAL\_\-SEC\_\-INIT (Security context init error). 
\end{DoxyReturn}


Definition at line 254 of file fsal\_\-init.c.

References fsal\_\-internal\_\-SetCredentialLifetime(), and fsal\_\-internal\_\-SetReturnInconsistentDirent().