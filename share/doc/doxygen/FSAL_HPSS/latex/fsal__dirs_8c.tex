\section{fsal\_\-dirs.c File Reference}
\label{fsal__dirs_8c}\index{fsal\_\-dirs.c@{fsal\_\-dirs.c}}


Directory browsing operations.  
{\ttfamily \#include \char`\"{}stuff\_\-alloc.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}fsal.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}fsal\_\-internal.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}fsal\_\-convert.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}HPSSclapiExt/hpssclapiext.h\char`\"{}}\par
{\ttfamily \#include $<$string.h$>$}\par
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
fsal\_\-status\_\-t {\bf HPSSFSAL\_\-opendir} (hpssfsal\_\-handle\_\-t $\ast$dir\_\-handle, hpssfsal\_\-op\_\-context\_\-t $\ast$p\_\-context, hpssfsal\_\-dir\_\-t $\ast$dir\_\-descriptor, fsal\_\-attrib\_\-list\_\-t $\ast$dir\_\-attributes)
\item 
fsal\_\-status\_\-t {\bf HPSSFSAL\_\-readdir} (hpssfsal\_\-dir\_\-t $\ast$dir\_\-descriptor, hpssfsal\_\-cookie\_\-t start\_\-position, fsal\_\-attrib\_\-mask\_\-t get\_\-attr\_\-mask, fsal\_\-mdsize\_\-t buffersize, fsal\_\-dirent\_\-t $\ast$pdirent, hpssfsal\_\-cookie\_\-t $\ast$end\_\-position, fsal\_\-count\_\-t $\ast$nb\_\-entries, fsal\_\-boolean\_\-t $\ast$end\_\-of\_\-dir)
\item 
fsal\_\-status\_\-t {\bf HPSSFSAL\_\-closedir} (hpssfsal\_\-dir\_\-t $\ast$dir\_\-descriptor)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Directory browsing operations. \begin{DoxyAuthor}{Author}

\end{DoxyAuthor}
Author}
leibovic \begin{DoxyDate}{Date}

\end{DoxyDate}
Date}
2005/07/29 09:39:04 \begin{DoxyVersion}{Version}

\end{DoxyVersion}
Revision}
1.10 

Definition in file {\bf fsal\_\-dirs.c}.

\subsection{Function Documentation}
\index{fsal\_\-dirs.c@{fsal\_\-dirs.c}!HPSSFSAL\_\-closedir@{HPSSFSAL\_\-closedir}}
\index{HPSSFSAL\_\-closedir@{HPSSFSAL\_\-closedir}!fsal_dirs.c@{fsal\_\-dirs.c}}
\subsubsection[{HPSSFSAL\_\-closedir}]{\setlength{\rightskip}{0pt plus 5cm}fsal\_\-status\_\-t HPSSFSAL\_\-closedir (hpssfsal\_\-dir\_\-t $\ast$ {\em dir\_\-descriptor})}\label{fsal__dirs_8c_a8347fe62bde5d79f93a016ee0087ec4a}
FSAL\_\-closedir : Free the resources allocated for reading directory entries.


\begin{DoxyParams}{Parameters}
\item[{\em dir\_\-descriptor}](input): Pointer to a directory descriptor filled by FSAL\_\-opendir.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Major error codes :
\begin{DoxyItemize}
\item ERR\_\-FSAL\_\-NO\_\-ERROR (no error)
\item ERR\_\-FSAL\_\-FAULT (a NULL pointer was passed as mandatory argument)
\item Other error codes can be returned : ERR\_\-FSAL\_\-IO, ... 
\end{DoxyItemize}
\end{DoxyReturn}


Definition at line 307 of file fsal\_\-dirs.c.\index{fsal\_\-dirs.c@{fsal\_\-dirs.c}!HPSSFSAL\_\-opendir@{HPSSFSAL\_\-opendir}}
\index{HPSSFSAL\_\-opendir@{HPSSFSAL\_\-opendir}!fsal_dirs.c@{fsal\_\-dirs.c}}
\subsubsection[{HPSSFSAL\_\-opendir}]{\setlength{\rightskip}{0pt plus 5cm}fsal\_\-status\_\-t HPSSFSAL\_\-opendir (hpssfsal\_\-handle\_\-t $\ast$ {\em dir\_\-handle}, \/  hpssfsal\_\-op\_\-context\_\-t $\ast$ {\em p\_\-context}, \/  hpssfsal\_\-dir\_\-t $\ast$ {\em dir\_\-descriptor}, \/  fsal\_\-attrib\_\-list\_\-t $\ast$ {\em dir\_\-attributes})}\label{fsal__dirs_8c_ad74771cb884cb7b3d3022c9d84d00b73}
FSAL\_\-opendir : Opens a directory for reading its content.


\begin{DoxyParams}{Parameters}
\item[{\em dir\_\-handle}](input) the handle of the directory to be opened. \item[{\em p\_\-context}](input) Permission context for the operation (user, export context...). \item[{\em dir\_\-descriptor}](output) pointer to an allocated structure that will receive directory stream informations, on successfull completion. \item[{\em dir\_\-attributes}](optional output) On successfull completion,the structure pointed by dir\_\-attributes receives the new directory attributes. Can be NULL.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Major error codes :
\begin{DoxyItemize}
\item ERR\_\-FSAL\_\-NO\_\-ERROR (no error)
\item ERR\_\-FSAL\_\-ACCESS (user does not have read permission on directory)
\item ERR\_\-FSAL\_\-STALE (dir\_\-handle does not address an existing object)
\item ERR\_\-FSAL\_\-FAULT (a NULL pointer was passed as mandatory argument)
\item Other error codes can be returned : ERR\_\-FSAL\_\-IO, ... 
\end{DoxyItemize}
\end{DoxyReturn}


Definition at line 48 of file fsal\_\-dirs.c.

References HPSSFSAL\_\-access().\index{fsal\_\-dirs.c@{fsal\_\-dirs.c}!HPSSFSAL\_\-readdir@{HPSSFSAL\_\-readdir}}
\index{HPSSFSAL\_\-readdir@{HPSSFSAL\_\-readdir}!fsal_dirs.c@{fsal\_\-dirs.c}}
\subsubsection[{HPSSFSAL\_\-readdir}]{\setlength{\rightskip}{0pt plus 5cm}fsal\_\-status\_\-t HPSSFSAL\_\-readdir (hpssfsal\_\-dir\_\-t $\ast$ {\em dir\_\-descriptor}, \/  hpssfsal\_\-cookie\_\-t {\em start\_\-position}, \/  fsal\_\-attrib\_\-mask\_\-t {\em get\_\-attr\_\-mask}, \/  fsal\_\-mdsize\_\-t {\em buffersize}, \/  fsal\_\-dirent\_\-t $\ast$ {\em pdirent}, \/  hpssfsal\_\-cookie\_\-t $\ast$ {\em end\_\-position}, \/  fsal\_\-count\_\-t $\ast$ {\em nb\_\-entries}, \/  fsal\_\-boolean\_\-t $\ast$ {\em end\_\-of\_\-dir})}\label{fsal__dirs_8c_a6a594c04436c41ca84f4ce6d1ea3e02b}
FSAL\_\-readdir : Read the entries of an opened directory.


\begin{DoxyParams}{Parameters}
\item[{\em dir\_\-descriptor}](input): Pointer to the directory descriptor filled by FSAL\_\-opendir. \item[{\em start\_\-position}](input): Cookie that indicates the first object to be read during this readdir operation. This should be :
\begin{DoxyItemize}
\item FSAL\_\-READDIR\_\-FROM\_\-BEGINNING for reading the content of the directory from the beginning.
\item The end\_\-position parameter returned by the previous call to FSAL\_\-readdir. 
\end{DoxyItemize}\item[{\em get\_\-attr\_\-mask}](input) Specify the set of attributes to be retrieved for directory entries. \item[{\em buffersize}](input) The size (in bytes) of the buffer where the direntries are to be stored. \item[{\em pdirent}](output) Adresse of the buffer where the direntries are to be stored. \item[{\em end\_\-position}](output) Cookie that indicates the current position in the directory. \item[{\em nb\_\-entries}](output) Pointer to the number of entries read during the call. \item[{\em end\_\-of\_\-dir}](output) Pointer to a boolean that indicates if the end of dir has been reached during the call.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Major error codes :
\begin{DoxyItemize}
\item ERR\_\-FSAL\_\-NO\_\-ERROR (no error)
\item ERR\_\-FSAL\_\-FAULT (a NULL pointer was passed as mandatory argument)
\item Other error codes can be returned : ERR\_\-FSAL\_\-IO, ... 
\end{DoxyItemize}
\end{DoxyReturn}


\begin{Desc}
\item[{\bf Todo}]: does handle provide mounted\_\-on\_\-fileid ? \end{Desc}


\begin{Desc}
\item[{\bf Todo}]: test returned status \end{Desc}


Definition at line 115 of file fsal\_\-dirs.c.

References hpss2fsal\_\-attributes(), hpss2fsal\_\-error(), hpss2fsal\_\-type(), hpssHandle2fsalAttributes(), and TakeTokenFSCall().