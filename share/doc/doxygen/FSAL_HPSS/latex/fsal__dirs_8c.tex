\section{fsal\_\-dirs.c File Reference}
\label{fsal__dirs_8c}\index{fsal_dirs.c@{fsal\_\-dirs.c}}
Directory browsing operations. 

{\tt \#include \char`\"{}fsal.h\char`\"{}}\par
{\tt \#include \char`\"{}fsal\_\-internal.h\char`\"{}}\par
{\tt \#include \char`\"{}fsal\_\-convert.h\char`\"{}}\par
{\tt \#include \char`\"{}HPSSclapi\-Ext/hpssclapiext.h\char`\"{}}\par
{\tt \#include $<$string.h$>$}\par
\subsection*{Functions}
\begin{CompactItemize}
\item 
fsal\_\-status\_\-t {\bf FSAL\_\-opendir} (fsal\_\-handle\_\-t $\ast$dir\_\-handle, fsal\_\-op\_\-context\_\-t $\ast$p\_\-context, fsal\_\-dir\_\-t $\ast$dir\_\-descriptor, fsal\_\-attrib\_\-list\_\-t $\ast$dir\_\-attributes)
\item 
fsal\_\-status\_\-t {\bf FSAL\_\-readdir} (fsal\_\-dir\_\-t $\ast$dir\_\-descriptor, fsal\_\-cookie\_\-t start\_\-position, fsal\_\-attrib\_\-mask\_\-t get\_\-attr\_\-mask, fsal\_\-mdsize\_\-t buffersize, fsal\_\-dirent\_\-t $\ast$pdirent, fsal\_\-cookie\_\-t $\ast$end\_\-position, fsal\_\-count\_\-t $\ast$nb\_\-entries, fsal\_\-boolean\_\-t $\ast$end\_\-of\_\-dir)
\item 
fsal\_\-status\_\-t {\bf FSAL\_\-closedir} (fsal\_\-dir\_\-t $\ast$dir\_\-descriptor)
\end{CompactItemize}


\subsection{Detailed Description}
Directory browsing operations. 

\begin{Desc}
\item[Author:]\begin{Desc}
\item[Author]leibovic \end{Desc}
\end{Desc}
\begin{Desc}
\item[Date:]\begin{Desc}
\item[Date]2005/07/29 09:39:04 \end{Desc}
\end{Desc}
\begin{Desc}
\item[Version:]\begin{Desc}
\item[Revision]1.10 \end{Desc}
\end{Desc}


Definition in file {\bf fsal\_\-dirs.c}.

\subsection{Function Documentation}
\index{fsal_dirs.c@{fsal\_\-dirs.c}!FSAL_closedir@{FSAL\_\-closedir}}
\index{FSAL_closedir@{FSAL\_\-closedir}!fsal_dirs.c@{fsal\_\-dirs.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}fsal\_\-status\_\-t FSAL\_\-closedir (fsal\_\-dir\_\-t $\ast$ {\em dir\_\-descriptor})}\label{fsal__dirs_8c_a2}


FSAL\_\-closedir : Free the resources allocated for reading directory entries.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em dir\_\-descriptor}](input): Pointer to a directory descriptor filled by FSAL\_\-opendir.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]Major error codes :\begin{itemize}
\item ERR\_\-FSAL\_\-NO\_\-ERROR (no error)\item ERR\_\-FSAL\_\-FAULT (a NULL pointer was passed as mandatory argument)\item Other error codes can be returned : ERR\_\-FSAL\_\-IO, ... \end{itemize}
\end{Desc}


Definition at line 304 of file fsal\_\-dirs.c.\index{fsal_dirs.c@{fsal\_\-dirs.c}!FSAL_opendir@{FSAL\_\-opendir}}
\index{FSAL_opendir@{FSAL\_\-opendir}!fsal_dirs.c@{fsal\_\-dirs.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}fsal\_\-status\_\-t FSAL\_\-opendir (fsal\_\-handle\_\-t $\ast$ {\em dir\_\-handle}, fsal\_\-op\_\-context\_\-t $\ast$ {\em p\_\-context}, fsal\_\-dir\_\-t $\ast$ {\em dir\_\-descriptor}, fsal\_\-attrib\_\-list\_\-t $\ast$ {\em dir\_\-attributes})}\label{fsal__dirs_8c_a0}


FSAL\_\-opendir : Opens a directory for reading its content.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em dir\_\-handle}](input) the handle of the directory to be opened. \item[{\em p\_\-context}](input) Permission context for the operation (user, export context...). \item[{\em dir\_\-descriptor}](output) pointer to an allocated structure that will receive directory stream informations, on successfull completion. \item[{\em dir\_\-attributes}](optional output) On successfull completion,the structure pointed by dir\_\-attributes receives the new directory attributes. Can be NULL.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]Major error codes :\begin{itemize}
\item ERR\_\-FSAL\_\-NO\_\-ERROR (no error)\item ERR\_\-FSAL\_\-ACCESS (user does not have read permission on directory)\item ERR\_\-FSAL\_\-STALE (dir\_\-handle does not address an existing object)\item ERR\_\-FSAL\_\-FAULT (a NULL pointer was passed as mandatory argument)\item Other error codes can be returned : ERR\_\-FSAL\_\-IO, ... \end{itemize}
\end{Desc}


Definition at line 49 of file fsal\_\-dirs.c.

References FSAL\_\-access().\index{fsal_dirs.c@{fsal\_\-dirs.c}!FSAL_readdir@{FSAL\_\-readdir}}
\index{FSAL_readdir@{FSAL\_\-readdir}!fsal_dirs.c@{fsal\_\-dirs.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}fsal\_\-status\_\-t FSAL\_\-readdir (fsal\_\-dir\_\-t $\ast$ {\em dir\_\-descriptor}, fsal\_\-cookie\_\-t {\em start\_\-position}, fsal\_\-attrib\_\-mask\_\-t {\em get\_\-attr\_\-mask}, fsal\_\-mdsize\_\-t {\em buffersize}, fsal\_\-dirent\_\-t $\ast$ {\em pdirent}, fsal\_\-cookie\_\-t $\ast$ {\em end\_\-position}, fsal\_\-count\_\-t $\ast$ {\em nb\_\-entries}, fsal\_\-boolean\_\-t $\ast$ {\em end\_\-of\_\-dir})}\label{fsal__dirs_8c_a1}


FSAL\_\-readdir : Read the entries of an opened directory.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em dir\_\-descriptor}](input): Pointer to the directory descriptor filled by FSAL\_\-opendir. \item[{\em start\_\-position}](input): Cookie that indicates the first object to be read during this readdir operation. This should be :\begin{itemize}
\item FSAL\_\-READDIR\_\-FROM\_\-BEGINNING for reading the content of the directory from the beginning.\item The end\_\-position parameter returned by the previous call to FSAL\_\-readdir. \end{itemize}
\item[{\em get\_\-attr\_\-mask}](input) Specify the set of attributes to be retrieved for directory entries. \item[{\em buffersize}](input) The size (in bytes) of the buffer where the direntries are to be stored. \item[{\em pdirent}](output) Adresse of the buffer where the direntries are to be stored. \item[{\em end\_\-position}](output) Cookie that indicates the current position in the directory. \item[{\em nb\_\-entries}](output) Pointer to the number of entries read during the call. \item[{\em end\_\-of\_\-dir}](output) Pointer to a boolean that indicates if the end of dir has been reached during the call.\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]Major error codes :\begin{itemize}
\item ERR\_\-FSAL\_\-NO\_\-ERROR (no error)\item ERR\_\-FSAL\_\-FAULT (a NULL pointer was passed as mandatory argument)\item Other error codes can be returned : ERR\_\-FSAL\_\-IO, ...\end{itemize}
\end{Desc}


\begin{Desc}
\item[{\bf Todo}]: does handle provide mounted\_\-on\_\-fileid ? 

: test returned status\end{Desc}


Definition at line 117 of file fsal\_\-dirs.c.

References FSAL\_\-str2name(), hpss2fsal\_\-attributes(), hpss2fsal\_\-error(), hpss2fsal\_\-type(), hpss\-Handle2fsal\-Attributes(), and Take\-Token\-FSCall().