<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>File System Abstraction Layer (HPSS) library: fsal_ioctl.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>fsal_ioctl.c</h1><a href="fsal__ioctl_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment"> * vim:expandtab:shiftwidth=8:tabstop=8:</span>
00003 <span class="comment"> */</span>
00004 
00027 <span class="preprocessor">#include "fsal.h"</span>
00028 <span class="preprocessor">#include "fsal_internal.h"</span>
00029 <span class="preprocessor">#include "fsal_convert.h"</span>
00030 
00031 <span class="preprocessor">#include &lt;stdarg.h&gt;</span>
00032 
00033 
00034 <span class="comment">/* Defines the type of attribute  */</span>
00035 <span class="keyword">typedef</span> <span class="keyword">enum</span> named_attr_action_t { NAMEDATTR_GET = 1, NAMEDATTR_SET = 2 };
00036 
00037 <span class="keyword">typedef</span> <span class="keyword">struct </span>fsal_named_attr__ {
00038   
00039     <span class="comment">/* attribute name */</span>
00040     <span class="keywordtype">char</span> * attrName;
00041     
00042     <span class="comment">/* function for handling the attribute */</span>
00043 <span class="comment">/*    fsal_status_t (*handleFunc)(named_attr_action_t,char *,char *,fsal_mdsize_t,int);*/</span>
00044 
00045 } fsal_named_attr_t;
00046 
00047 
00048 <span class="comment">/* Fonction for handling COS attribute */</span>
00049 
00050 <span class="comment">/*static fsal_status_t HandleAttrCos( named_attr_action_t action,</span>
00051 <span class="comment">                                    char * attrName, char * attrValue,</span>
00052 <span class="comment">                                    fsal_mdsize_t  buffer_len, int flag );</span>
00053 <span class="comment">*/</span>
00054 
00055 <span class="comment">/* Fonction for handling ReadCount and WriteCount attributes */</span>
00056 <span class="comment">/*</span>
00057 <span class="comment">static fsal_status_t HandleAttrRWcount( named_attr_action_t action,</span>
00058 <span class="comment">                                        char * attrName, char * attrValue,</span>
00059 <span class="comment">                                        fsal_mdsize_t  buffer_len, int flag );</span>
00060 <span class="comment">*/</span>
00061 
00062 
00063 <span class="comment">/* Named attributes list */</span>
00064 <span class="comment">/*</span>
00065 <span class="comment">static fsal_named_attr_t  named_attrs[] =</span>
00066 <span class="comment">{  </span>
00067 <span class="comment">  "COS", HandleAttrCos,0,</span>
00068 <span class="comment">  "ReadCount",  HandleAttrRWcount,1,</span>
00069 <span class="comment">  "WriteCount", HandleAttrRWcount,2,</span>
00070 <span class="comment">*/</span>  
00071   <span class="comment">/* end of the list */</span>
00072 <span class="comment">/*  NULL,NULL  </span>
00073 <span class="comment">};</span>
00074 <span class="comment">*/</span>
00075     
00076     
00077 <span class="comment">/* named attributes count */</span>
00078 <span class="preprocessor">#define FSAL_NB_NAMED_ATTRS 3</span>
00079 <span class="preprocessor"></span>
00080     
00081     
<a name="l00086"></a><a class="code" href="fsal__ioctl_8c.html#a4">00086</a> fsal_status_t <a class="code" href="fsal__ioctl_8c.html#a4">FSAL_ioctl</a>(
00087     fsal_handle_t * objecthandle,  <span class="comment">/* IN */</span>
00088     <span class="keywordtype">int</span>           action_id,       <span class="comment">/* IN */</span>
00089     ...  <span class="comment">/* function specific arguments */</span>
00090 ){
00091   
00092 <span class="comment">/*   va_list ioctl_args;*/</span>
00093    
00094   <span class="keywordflow">switch</span>(action_id){
00095     
00096     <span class="keywordflow">case</span> FSAL_IOCTL_GETATTR :
00097       
00100       Return(ERR_FSAL_ATTRNOTSUPP ,0 , INDEX_FSAL_ioctl);      
00101       <span class="keywordflow">break</span>;
00102     
00103     <span class="keywordflow">case</span> FSAL_IOCTL_SETATTR :
00104       
00105        <span class="comment">/* No specific attributes */</span>
00106        Return(ERR_FSAL_ATTRNOTSUPP ,0 , INDEX_FSAL_ioctl);      
00107       <span class="keywordflow">break</span>;
00108 
00109     <span class="keywordflow">case</span> FSAL_IOCTL_GET_ATTRCNT :
00110       
00111        <span class="comment">/* return the number of named attributes */</span>
00112       
00113 <span class="comment">/*       va_start( ioctl_args, action_id );*/</span>
00114        
00115        
00116       
00117       
00118        Return(ERR_FSAL_ATTRNOTSUPP ,0 , INDEX_FSAL_ioctl);      
00119       <span class="keywordflow">break</span>;
00120 
00121     <span class="keywordflow">case</span> FSAL_IOCTL_GET_ATTRNAME :
00122       
00123        <span class="comment">/* No specific attributes */</span>
00124        Return(ERR_FSAL_ATTRNOTSUPP ,0 , INDEX_FSAL_ioctl);      
00125       <span class="keywordflow">break</span>;
00126       
00127                 
00128     <span class="keywordflow">default</span>:   
00129       Return(ERR_FSAL_INVAL ,0 , INDEX_FSAL_ioctl);
00130   }
00131 
00132 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Mar 20 16:09:24 2007 for File System Abstraction Layer (HPSS) library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
