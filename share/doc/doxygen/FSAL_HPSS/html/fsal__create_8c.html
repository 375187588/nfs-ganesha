<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>File System Abstraction Layer (HPSS) library: fsal_create.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>fsal_create.c File Reference</h1>Filesystem objects creation functions.  
<a href="#_details">More...</a>
<p>
<code>#include &quot;fsal.h&quot;</code><br>
<code>#include &quot;fsal_internal.h&quot;</code><br>
<code>#include &quot;fsal_convert.h&quot;</code><br>
<code>#include &quot;fsal_common.h&quot;</code><br>
<code>#include &quot;HPSSclapiExt/hpssclapiext.h&quot;</code><br>

<p>
<a href="fsal__create_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">fsal_status_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__create_8c.html#b32064718b92ea123ea5cc7a6ff7cacd">FSAL_create</a> (fsal_handle_t *parent_directory_handle, fsal_name_t *p_filename, fsal_op_context_t *p_context, fsal_accessmode_t accessmode, fsal_handle_t *object_handle, fsal_attrib_list_t *object_attributes)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">fsal_status_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__create_8c.html#8d7790c659b715e2e87bc57595a2cd71">FSAL_mkdir</a> (fsal_handle_t *parent_directory_handle, fsal_name_t *p_dirname, fsal_op_context_t *p_context, fsal_accessmode_t accessmode, fsal_handle_t *object_handle, fsal_attrib_list_t *object_attributes)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">fsal_status_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__create_8c.html#b835d0f160323a78d0512a5254e9c109">FSAL_link</a> (fsal_handle_t *target_handle, fsal_handle_t *dir_handle, fsal_name_t *p_link_name, fsal_op_context_t *p_context, fsal_attrib_list_t *attributes)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">fsal_status_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__create_8c.html#344a6fd2ad23cc03509f7e7f3bf1fd1c">FSAL_mknode</a> (fsal_handle_t *parentdir_handle, fsal_name_t *p_node_name, fsal_op_context_t *p_context, fsal_accessmode_t accessmode, fsal_nodetype_t nodetype, fsal_dev_t *dev, fsal_handle_t *p_object_handle, fsal_attrib_list_t *node_attributes)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Filesystem objects creation functions. 
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd></dd></dl>
<dl class="rcs" compact><dt><b>Author</b></dt><dd>leibovic </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd></dd></dl>
<dl class="rcs" compact><dt><b>Date</b></dt><dd>2006/01/24 13:45:36 </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd></dd></dl>
<dl class="rcs" compact><dt><b>Revision</b></dt><dd>1.18 </dd></dl>

<p>Definition in file <a class="el" href="fsal__create_8c-source.html">fsal_create.c</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="b32064718b92ea123ea5cc7a6ff7cacd"></a><!-- doxytag: member="fsal_create.c::FSAL_create" ref="b32064718b92ea123ea5cc7a6ff7cacd" args="(fsal_handle_t *parent_directory_handle, fsal_name_t *p_filename, fsal_op_context_t *p_context, fsal_accessmode_t accessmode, fsal_handle_t *object_handle, fsal_attrib_list_t *object_attributes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsal_status_t FSAL_create           </td>
          <td>(</td>
          <td class="paramtype">fsal_handle_t *&nbsp;</td>
          <td class="paramname"> <em>parent_directory_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_name_t *&nbsp;</td>
          <td class="paramname"> <em>p_filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_op_context_t *&nbsp;</td>
          <td class="paramname"> <em>p_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_accessmode_t&nbsp;</td>
          <td class="paramname"> <em>accessmode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_handle_t *&nbsp;</td>
          <td class="paramname"> <em>object_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_attrib_list_t *&nbsp;</td>
          <td class="paramname"> <em>object_attributes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
FSAL_create: Create a regular file.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parent_directory_handle</em>&nbsp;</td><td>(input): Handle of the parent directory where the file is to be created. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_filename</em>&nbsp;</td><td>(input): Pointer to the name of the file to be created. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cred</em>&nbsp;</td><td>(input): Authentication context for the operation (user, export...). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>accessmode</em>&nbsp;</td><td>(input): Mode for the file to be created. (the umask defined into the FSAL configuration file will be applied on it). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>object_handle</em>&nbsp;</td><td>(output): Pointer to the handle of the created file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>object_attributes</em>&nbsp;</td><td>(optionnal input/output): The postop attributes of the created file. As input, it defines the attributes that the caller wants to retrieve (by positioning flags into this structure) and the output is built considering this input (it fills the structure according to the flags it contains). Can be NULL.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Major error codes :<ul>
<li>ERR_FSAL_NO_ERROR (no error)</li><li>ERR_FSAL_STALE (parent_directory_handle does not address an existing object)</li><li>ERR_FSAL_FAULT (a NULL pointer was passed as mandatory argument)</li><li>Other error codes can be returned : ERR_FSAL_ACCESS, ERR_FSAL_EXIST, ERR_FSAL_IO, ...</li></ul>
</dd></dl>
NB: if getting postop attributes failed, the function does not return an error but the FSAL_ATTR_RDATTR_ERR bit is set in the object_attributes-&gt;asked_attributes field. 
<p>Definition at line <a class="el" href="fsal__create_8c-source.html#l00062">62</a> of file <a class="el" href="fsal__create_8c-source.html">fsal_create.c</a>.</p>

<p>References <a class="el" href="fsal__convert_8c-source.html#l00304">fsal2unix_mode()</a>, <a class="el" href="fsal__convert_8c-source.html#l00631">hpss2fsal_attributes()</a>, <a class="el" href="fsal__convert_8c-source.html#l00038">hpss2fsal_error()</a>, and <a class="el" href="fsal__internal_8c-source.html#l00268">TakeTokenFSCall()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b835d0f160323a78d0512a5254e9c109"></a><!-- doxytag: member="fsal_create.c::FSAL_link" ref="b835d0f160323a78d0512a5254e9c109" args="(fsal_handle_t *target_handle, fsal_handle_t *dir_handle, fsal_name_t *p_link_name, fsal_op_context_t *p_context, fsal_attrib_list_t *attributes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsal_status_t FSAL_link           </td>
          <td>(</td>
          <td class="paramtype">fsal_handle_t *&nbsp;</td>
          <td class="paramname"> <em>target_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_handle_t *&nbsp;</td>
          <td class="paramname"> <em>dir_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_name_t *&nbsp;</td>
          <td class="paramname"> <em>p_link_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_op_context_t *&nbsp;</td>
          <td class="paramname"> <em>p_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_attrib_list_t *&nbsp;</td>
          <td class="paramname"> <em>attributes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
FSAL_link: Create a hardlink.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>target_handle</em>&nbsp;</td><td>(input): Handle of the target object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dir_handle</em>&nbsp;</td><td>(input): Pointer to the directory handle where the hardlink is to be created. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_link_name</em>&nbsp;</td><td>(input): Pointer to the name of the hardlink to be created. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cred</em>&nbsp;</td><td>(input): Authentication context for the operation (user,...). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>accessmode</em>&nbsp;</td><td>(input): Mode for the directory to be created. (the umask defined into the FSAL configuration file will be applied on it). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>attributes</em>&nbsp;</td><td>(optionnal input/output): The post_operation attributes of the linked object. As input, it defines the attributes that the caller wants to retrieve (by positioning flags into this structure) and the output is built considering this input (it fills the structure according to the flags it contains). May be NULL.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Major error codes :<ul>
<li>ERR_FSAL_NO_ERROR (no error)</li><li>ERR_FSAL_STALE (target_handle or dir_handle does not address an existing object)</li><li>ERR_FSAL_FAULT (a NULL pointer was passed as mandatory argument)</li><li>Other error codes can be returned : ERR_FSAL_ACCESS, ERR_FSAL_EXIST, ERR_FSAL_IO, ...</li></ul>
</dd></dl>
NB: if getting postop attributes failed, the function does not return an error but the FSAL_ATTR_RDATTR_ERR bit is set in the attributes-&gt;asked_attributes field. 
<p>Definition at line <a class="el" href="fsal__create_8c-source.html#l00363">363</a> of file <a class="el" href="fsal__create_8c-source.html">fsal_create.c</a>.</p>

<p>References <a class="el" href="fsal__attrs_8c-source.html#l00044">FSAL_getattrs()</a>, <a class="el" href="fsal__convert_8c-source.html#l00038">hpss2fsal_error()</a>, and <a class="el" href="fsal__internal_8c-source.html#l00268">TakeTokenFSCall()</a>.</p>

</div>
</div><p>
<a class="anchor" name="8d7790c659b715e2e87bc57595a2cd71"></a><!-- doxytag: member="fsal_create.c::FSAL_mkdir" ref="8d7790c659b715e2e87bc57595a2cd71" args="(fsal_handle_t *parent_directory_handle, fsal_name_t *p_dirname, fsal_op_context_t *p_context, fsal_accessmode_t accessmode, fsal_handle_t *object_handle, fsal_attrib_list_t *object_attributes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsal_status_t FSAL_mkdir           </td>
          <td>(</td>
          <td class="paramtype">fsal_handle_t *&nbsp;</td>
          <td class="paramname"> <em>parent_directory_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_name_t *&nbsp;</td>
          <td class="paramname"> <em>p_dirname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_op_context_t *&nbsp;</td>
          <td class="paramname"> <em>p_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_accessmode_t&nbsp;</td>
          <td class="paramname"> <em>accessmode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_handle_t *&nbsp;</td>
          <td class="paramname"> <em>object_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_attrib_list_t *&nbsp;</td>
          <td class="paramname"> <em>object_attributes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
FSAL_mkdir: Create a directory.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parent_directory_handle</em>&nbsp;</td><td>(input): Handle of the parent directory where the subdirectory is to be created. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_dirname</em>&nbsp;</td><td>(input): Pointer to the name of the directory to be created. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cred</em>&nbsp;</td><td>(input): Authentication context for the operation (user,...). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>accessmode</em>&nbsp;</td><td>(input): Mode for the directory to be created. (the umask defined into the FSAL configuration file will be applied on it). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>object_handle</em>&nbsp;</td><td>(output): Pointer to the handle of the created directory. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>object_attributes</em>&nbsp;</td><td>(optionnal input/output): The attributes of the created directory. As input, it defines the attributes that the caller wants to retrieve (by positioning flags into this structure) and the output is built considering this input (it fills the structure according to the flags it contains). May be NULL.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Major error codes :<ul>
<li>ERR_FSAL_NO_ERROR (no error)</li><li>ERR_FSAL_STALE (parent_directory_handle does not address an existing object)</li><li>ERR_FSAL_FAULT (a NULL pointer was passed as mandatory argument)</li><li>Other error codes can be returned : ERR_FSAL_ACCESS, ERR_FSAL_EXIST, ERR_FSAL_IO, ...</li></ul>
</dd></dl>
NB: if getting postop attributes failed, the function does not return an error but the FSAL_ATTR_RDATTR_ERR bit is set in the object_attributes-&gt;asked_attributes field. 
<p>Definition at line <a class="el" href="fsal__create_8c-source.html#l00232">232</a> of file <a class="el" href="fsal__create_8c-source.html">fsal_create.c</a>.</p>

<p>References <a class="el" href="fsal__convert_8c-source.html#l00304">fsal2unix_mode()</a>, <a class="el" href="fsal__convert_8c-source.html#l00631">hpss2fsal_attributes()</a>, <a class="el" href="fsal__convert_8c-source.html#l00038">hpss2fsal_error()</a>, and <a class="el" href="fsal__internal_8c-source.html#l00268">TakeTokenFSCall()</a>.</p>

</div>
</div><p>
<a class="anchor" name="344a6fd2ad23cc03509f7e7f3bf1fd1c"></a><!-- doxytag: member="fsal_create.c::FSAL_mknode" ref="344a6fd2ad23cc03509f7e7f3bf1fd1c" args="(fsal_handle_t *parentdir_handle, fsal_name_t *p_node_name, fsal_op_context_t *p_context, fsal_accessmode_t accessmode, fsal_nodetype_t nodetype, fsal_dev_t *dev, fsal_handle_t *p_object_handle, fsal_attrib_list_t *node_attributes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsal_status_t FSAL_mknode           </td>
          <td>(</td>
          <td class="paramtype">fsal_handle_t *&nbsp;</td>
          <td class="paramname"> <em>parentdir_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_name_t *&nbsp;</td>
          <td class="paramname"> <em>p_node_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_op_context_t *&nbsp;</td>
          <td class="paramname"> <em>p_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_accessmode_t&nbsp;</td>
          <td class="paramname"> <em>accessmode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_nodetype_t&nbsp;</td>
          <td class="paramname"> <em>nodetype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_dev_t *&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_handle_t *&nbsp;</td>
          <td class="paramname"> <em>p_object_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_attrib_list_t *&nbsp;</td>
          <td class="paramname"> <em>node_attributes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
FSAL_mknode: Create a special object in the filesystem. Not supported upon HPSS.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>ERR_FSAL_NOTSUPP. </dd></dl>

<p>Definition at line <a class="el" href="fsal__create_8c-source.html#l00453">453</a> of file <a class="el" href="fsal__create_8c-source.html">fsal_create.c</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Mar 31 14:37:19 2009 for File System Abstraction Layer (HPSS) library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
