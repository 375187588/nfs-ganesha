<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>File System Abstraction Layer (HPSS) library: fsal_convert.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>fsal_convert.c File Reference</h1>
<p>HPSS-FSAL type translation functions.  
<a href="#_details">More...</a></p>
<code>#include &quot;fsal_convert.h&quot;</code><br/>
<code>#include &quot;fsal_internal.h&quot;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;hpss_errno.h&gt;</code><br/>

<p><a href="fsal__convert_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a29bc465820d0719bc24cb339e75806d0"></a><!-- doxytag: member="fsal_convert.c::MAX_2" ref="a29bc465820d0719bc24cb339e75806d0" args="(x, y)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MAX_2</b>(x, y)&nbsp;&nbsp;&nbsp;( (x) &gt; (y) ? (x) : (y) )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae28623bae2af7d233caa8038601aa853"></a><!-- doxytag: member="fsal_convert.c::MAX_3" ref="ae28623bae2af7d233caa8038601aa853" args="(x, y, z)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MAX_3</b>(x, y, z)&nbsp;&nbsp;&nbsp;( (x) &gt; (y) ? MAX_2((x),(z)) : MAX_2((y),(z)) )</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__convert_8c.html#a6348179c6dd9f68021108a1e7b1b53bc">hpss2fsal_error</a> (int hpss_errorcode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__convert_8c.html#aa85a0a90dbf019ac770cbdc2c4b59ca2">fsal2hpss_testperm</a> (fsal_accessflags_t testperm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__convert_8c.html#a835aedeac0e6677dcef16b69e42e2cde">fsal2hpss_openflags</a> (fsal_openflags_t fsal_flags, int *p_hpss_flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">fsal_nodetype_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__convert_8c.html#a111704e087414214b69f8876316c5ca9">hpss2fsal_type</a> (unsigned32 hpss_type_in)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">fsal_time_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__convert_8c.html#a300abfc1218fa0f2814a0d6ab513a71c">hpss2fsal_time</a> (timestamp_sec_t tsec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">fsal_u64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__convert_8c.html#a1720b0c9b09fd3abc1b5384937d9c7f1">hpss2fsal_64</a> (u_signed64 hpss_size_in)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">u_signed64&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__convert_8c.html#a3be6f72cf25b694659cd9bd268ba2eee">fsal2hpss_64</a> (fsal_u64_t fsal_size_in)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">fsal_fsid_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__convert_8c.html#ac54c0723f79f51a9516feb8d7ccfc0d8">hpss2fsal_fsid</a> (u_signed64 hpss_fsid_in)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">fsal_accessmode_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__convert_8c.html#adcccec129d19a0f7a97aeb76420caf4e">hpss2fsal_mode</a> (unsigned32 uid_bit, unsigned32 gid_bit, unsigned32 sticky_bit, unsigned32 user_perms, unsigned32 group_perms, unsigned32 other_perms)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__convert_8c.html#a11565e39b6627a2e811d25b168eb7658">fsal2hpss_mode</a> (fsal_accessmode_t fsal_mode, unsigned32 *uid_bit, unsigned32 *gid_bit, unsigned32 *sticky_bit, unsigned32 *user_perms, unsigned32 *group_perms, unsigned32 *other_perms)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">fsal_status_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__convert_8c.html#aa38d336547d49c8dc635f4a0b473fbe5">hpss2fsal_attributes</a> (ns_ObjHandle_t *p_hpss_handle_in, hpss_Attrs_t *p_hpss_attr_in, fsal_attrib_list_t *p_fsalattr_out)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">fsal_status_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__convert_8c.html#af1b20dd7b00c695d3da12699a8ab4a93">hpssHandle2fsalAttributes</a> (ns_ObjHandle_t *p_hpsshandle_in, fsal_attrib_list_t *p_fsalattr_out)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">fsal_status_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__convert_8c.html#afbbd36d1e250d2ce9728eb6694ce408e">fsal2hpss_attribset</a> (hpssfsal_handle_t *p_fsal_handle, fsal_attrib_list_t *p_attrib_set, hpss_fileattrbits_t *p_hpss_attrmask, hpss_Attrs_t *p_hpss_attrs)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>HPSS-FSAL type translation functions. </p>
<dl class="author"><dt><b>Author:</b></dt><dd></dd></dl>
<dl class="rcs"><dt><b>Author</b></dt><dd>leibovic </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd></dd></dl>
<dl class="rcs"><dt><b>Date</b></dt><dd>2006/02/08 12:46:59 </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd></dd></dl>
<dl class="rcs"><dt><b>Revision</b></dt><dd>1.32 </dd></dl>

<p>Definition in file <a class="el" href="fsal__convert_8c_source.html">fsal_convert.c</a>.</p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a3be6f72cf25b694659cd9bd268ba2eee"></a><!-- doxytag: member="fsal_convert.c::fsal2hpss_64" ref="a3be6f72cf25b694659cd9bd268ba2eee" args="(fsal_u64_t fsal_size_in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u_signed64 fsal2hpss_64 </td>
          <td>(</td>
          <td class="paramtype">fsal_u64_t&nbsp;</td>
          <td class="paramname"> <em>fsal_size_in</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>fsal2hpss_64: Convert fsal_u64_t type to HPSS u_signed64 type.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fsal_size_in</em>&nbsp;</td><td>(input): The FSAL 64 bits number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- The HPSS 64 bits number. </dd></dl>

<p>Definition at line <a class="el" href="fsal__convert_8c_source.html#l00389">389</a> of file <a class="el" href="fsal__convert_8c_source.html">fsal_convert.c</a>.</p>

<p>Referenced by <a class="el" href="fsal__convert_8c_source.html#l00882">fsal2hpss_attribset()</a>, and <a class="el" href="fsal__truncate_8c_source.html#l00051">HPSSFSAL_truncate()</a>.</p>

</div>
</div>
<a class="anchor" id="afbbd36d1e250d2ce9728eb6694ce408e"></a><!-- doxytag: member="fsal_convert.c::fsal2hpss_attribset" ref="afbbd36d1e250d2ce9728eb6694ce408e" args="(hpssfsal_handle_t *p_fsal_handle, fsal_attrib_list_t *p_attrib_set, hpss_fileattrbits_t *p_hpss_attrmask, hpss_Attrs_t *p_hpss_attrs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsal_status_t fsal2hpss_attribset </td>
          <td>(</td>
          <td class="paramtype">hpssfsal_handle_t *&nbsp;</td>
          <td class="paramname"> <em>p_fsal_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_attrib_list_t *&nbsp;</td>
          <td class="paramname"> <em>p_attrib_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hpss_fileattrbits_t *&nbsp;</td>
          <td class="paramname"> <em>p_hpss_attrmask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hpss_Attrs_t *&nbsp;</td>
          <td class="paramname"> <em>p_hpss_attrs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>fsal2hpss_attribset: Converts an fsal attrib list to a hpss attrib list and values to be used in Setattr.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p_fsal_handle</em>&nbsp;</td><td>(input): Pointer to the FSAL object handle. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_attrib_set</em>&nbsp;</td><td>(input): Pointer to the FSAL attributes to be set. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_hpss_attrmask</em>&nbsp;</td><td>(output): Pointer to the HPSS attribute list associated to the FSAL asked_attributes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_hpss_attrs</em>&nbsp;</td><td>(output): Pointer to the HPSS attribute values associated to input attributes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Major error codes:<ul>
<li>ERR_FSAL_NO_ERROR: no error.</li>
<li>ERR_FSAL_FAULT: NULL pointer passed as parameter.</li>
<li>ERR_FSAL_ATTRNOTSUPP: Some of the asked attributes are not supported.</li>
<li>ERR_FSAL_INVAL: Some of the asked attributes are read-only.</li>
<li>ERR_FSAL_SERVERFAULT: Unexpected error. </li>
</ul>
</dd></dl>

<p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>: Define some constants for settable and supported attributes. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd>ACL management </dd></dl>
</p>

<p>Definition at line <a class="el" href="fsal__convert_8c_source.html#l00882">882</a> of file <a class="el" href="fsal__convert_8c_source.html">fsal_convert.c</a>.</p>

<p>References <a class="el" href="fsal__convert_8c_source.html#l00389">fsal2hpss_64()</a>, and <a class="el" href="fsal__convert_8c_source.html#l00505">fsal2hpss_mode()</a>.</p>

<p>Referenced by <a class="el" href="fsal__attrs_8c_source.html#l00125">HPSSFSAL_setattrs()</a>.</p>

</div>
</div>
<a class="anchor" id="a11565e39b6627a2e811d25b168eb7658"></a><!-- doxytag: member="fsal_convert.c::fsal2hpss_mode" ref="a11565e39b6627a2e811d25b168eb7658" args="(fsal_accessmode_t fsal_mode, unsigned32 *uid_bit, unsigned32 *gid_bit, unsigned32 *sticky_bit, unsigned32 *user_perms, unsigned32 *group_perms, unsigned32 *other_perms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsal2hpss_mode </td>
          <td>(</td>
          <td class="paramtype">fsal_accessmode_t&nbsp;</td>
          <td class="paramname"> <em>fsal_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned32 *&nbsp;</td>
          <td class="paramname"> <em>uid_bit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned32 *&nbsp;</td>
          <td class="paramname"> <em>gid_bit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned32 *&nbsp;</td>
          <td class="paramname"> <em>sticky_bit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned32 *&nbsp;</td>
          <td class="paramname"> <em>user_perms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned32 *&nbsp;</td>
          <td class="paramname"> <em>group_perms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned32 *&nbsp;</td>
          <td class="paramname"> <em>other_perms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>fsal2hpss_mode: converts FSAL mode to HPSS mode.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fsal_mode</em>&nbsp;</td><td>(input): The fsal mode to be translated. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uid_bit</em>&nbsp;</td><td>(output): The uid_bit field to be set in HPSS object attributes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gid_bit</em>&nbsp;</td><td>(output): The gid_bit field to be set in HPSS object attributes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sticky_bit</em>&nbsp;</td><td>(output): The sticky_bit field to be set in HPSS object attributes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_perms</em>&nbsp;</td><td>(output): The user_perms field to be set in HPSS object attributes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>group_perms</em>&nbsp;</td><td>(output): The group_perms field to be set in HPSS object attributes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>other_perms</em>&nbsp;</td><td>(output): The other_perms field to be set in HPSS object attributes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing. </dd></dl>

<p>Definition at line <a class="el" href="fsal__convert_8c_source.html#l00505">505</a> of file <a class="el" href="fsal__convert_8c_source.html">fsal_convert.c</a>.</p>

<p>Referenced by <a class="el" href="fsal__convert_8c_source.html#l00882">fsal2hpss_attribset()</a>.</p>

</div>
</div>
<a class="anchor" id="a835aedeac0e6677dcef16b69e42e2cde"></a><!-- doxytag: member="fsal_convert.c::fsal2hpss_openflags" ref="a835aedeac0e6677dcef16b69e42e2cde" args="(fsal_openflags_t fsal_flags, int *p_hpss_flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fsal2hpss_openflags </td>
          <td>(</td>
          <td class="paramtype">fsal_openflags_t&nbsp;</td>
          <td class="paramname"> <em>fsal_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>p_hpss_flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>fsal2hpss_openflags: Convert FSAL open flags to (HPSS) Posix open flags.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fsal_flags</em>&nbsp;</td><td>(input): The FSAL open flags to be translated. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_hpss_flags</em>&nbsp;</td><td>(output): Pointer to the HPSS open flags.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- ERR_FSAL_NO_ERROR (no error).<ul>
<li>ERR_FSAL_FAULT (p_hpss_flags is a NULL pointer).</li>
<li>ERR_FSAL_INVAL (invalid or incompatible input flags). </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="fsal__convert_8c_source.html#l00252">252</a> of file <a class="el" href="fsal__convert_8c_source.html">fsal_convert.c</a>.</p>

<p>Referenced by <a class="el" href="fsal__fileop_8c_source.html#l00121">HPSSFSAL_open()</a>.</p>

</div>
</div>
<a class="anchor" id="aa85a0a90dbf019ac770cbdc2c4b59ca2"></a><!-- doxytag: member="fsal_convert.c::fsal2hpss_testperm" ref="aa85a0a90dbf019ac770cbdc2c4b59ca2" args="(fsal_accessflags_t testperm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fsal2hpss_testperm </td>
          <td>(</td>
          <td class="paramtype">fsal_accessflags_t&nbsp;</td>
          <td class="paramname"> <em>testperm</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>fsal2hpss_testperm: Convert FSAL permission flags to (HPSS) Posix permission flags.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>testperm</em>&nbsp;</td><td>(input): The FSAL permission flags to be tested.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The HPSS permission flags to be tested. </dd></dl>

<p>Definition at line <a class="el" href="fsal__convert_8c_source.html#l00221">221</a> of file <a class="el" href="fsal__convert_8c_source.html">fsal_convert.c</a>.</p>

<p>Referenced by <a class="el" href="fsal__access_8c_source.html#l00058">HPSSFSAL_access()</a>.</p>

</div>
</div>
<a class="anchor" id="a1720b0c9b09fd3abc1b5384937d9c7f1"></a><!-- doxytag: member="fsal_convert.c::hpss2fsal_64" ref="a1720b0c9b09fd3abc1b5384937d9c7f1" args="(u_signed64 hpss_size_in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsal_u64_t hpss2fsal_64 </td>
          <td>(</td>
          <td class="paramtype">u_signed64&nbsp;</td>
          <td class="paramname"> <em>hpss_size_in</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>hpss2fsal_64: Convert HPSS u_signed64 type to fsal_u64_t type.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hpss_size_in</em>&nbsp;</td><td>(input): The HPSS 64 bits number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- The FSAL 64 bits number. </dd></dl>

<p>Definition at line <a class="el" href="fsal__convert_8c_source.html#l00371">371</a> of file <a class="el" href="fsal__convert_8c_source.html">fsal_convert.c</a>.</p>

<p>Referenced by <a class="el" href="fsal__convert_8c_source.html#l00602">hpss2fsal_attributes()</a>.</p>

</div>
</div>
<a class="anchor" id="aa38d336547d49c8dc635f4a0b473fbe5"></a><!-- doxytag: member="fsal_convert.c::hpss2fsal_attributes" ref="aa38d336547d49c8dc635f4a0b473fbe5" args="(ns_ObjHandle_t *p_hpss_handle_in, hpss_Attrs_t *p_hpss_attr_in, fsal_attrib_list_t *p_fsalattr_out)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsal_status_t hpss2fsal_attributes </td>
          <td>(</td>
          <td class="paramtype">ns_ObjHandle_t *&nbsp;</td>
          <td class="paramname"> <em>p_hpss_handle_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hpss_Attrs_t *&nbsp;</td>
          <td class="paramname"> <em>p_hpss_attr_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_attrib_list_t *&nbsp;</td>
          <td class="paramname"> <em>p_fsalattr_out</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>hpss2fsal_attributes: Fills an FSAL attributes structure with the info provided by the hpss handle and the hpss attributes of an object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p_hpss_handle_in</em>&nbsp;</td><td>(input): Pointer to the HPSS NS object handle. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_hpss_attr_in</em>&nbsp;</td><td>(input): Pointer to the HPSS attributes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_fsalattr_out</em>&nbsp;</td><td>(input/output): Pointer to the FSAL attributes. As input, it defines the attributes that the caller wants to retrieve (by positioning flags into this structure) and the output is built considering this input (it fills the structure according to the flags it contains). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_cred</em>&nbsp;</td><td>(input) HPSS Credential.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Major error codes:<ul>
<li>ERR_FSAL_NO_ERROR: no error.</li>
<li>ERR_FSAL_FAULT: NULL pointer passed as input parameter.</li>
<li>ERR_FSAL_ATTRNOTSUPP: One of the asked attributes is not supported.</li>
<li>ERR_FSAL_SERVERFAULT: Unexpected error. </li>
</ul>
</dd></dl>

<p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>: This doesn't convert ACLs for the moment. </dd></dl>
</p>

<p>Definition at line <a class="el" href="fsal__convert_8c_source.html#l00602">602</a> of file <a class="el" href="fsal__convert_8c_source.html">fsal_convert.c</a>.</p>

<p>References <a class="el" href="fsal__convert_8c_source.html#l00371">hpss2fsal_64()</a>, <a class="el" href="fsal__convert_8c_source.html#l00408">hpss2fsal_fsid()</a>, <a class="el" href="fsal__convert_8c_source.html#l00439">hpss2fsal_mode()</a>, <a class="el" href="fsal__convert_8c_source.html#l00350">hpss2fsal_time()</a>, and <a class="el" href="fsal__convert_8c_source.html#l00319">hpss2fsal_type()</a>.</p>

<p>Referenced by <a class="el" href="fsal__create_8c_source.html#l00062">HPSSFSAL_create()</a>, <a class="el" href="fsal__attrs_8c_source.html#l00046">HPSSFSAL_getattrs()</a>, <a class="el" href="fsal__lookup_8c_source.html#l00060">HPSSFSAL_lookup()</a>, <a class="el" href="fsal__lookup_8c_source.html#l00220">HPSSFSAL_lookupJunction()</a>, <a class="el" href="fsal__create_8c_source.html#l00216">HPSSFSAL_mkdir()</a>, <a class="el" href="fsal__fileop_8c_source.html#l00121">HPSSFSAL_open()</a>, <a class="el" href="fsal__dirs_8c_source.html#l00115">HPSSFSAL_readdir()</a>, <a class="el" href="fsal__attrs_8c_source.html#l00125">HPSSFSAL_setattrs()</a>, and <a class="el" href="fsal__symlinks_8c_source.html#l00155">HPSSFSAL_symlink()</a>.</p>

</div>
</div>
<a class="anchor" id="a6348179c6dd9f68021108a1e7b1b53bc"></a><!-- doxytag: member="fsal_convert.c::hpss2fsal_error" ref="a6348179c6dd9f68021108a1e7b1b53bc" args="(int hpss_errorcode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hpss2fsal_error </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>hpss_errorcode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>hpss2fsal_error : Convert HPSS error codes to FSAL error codes.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hpss_errorcode</em>&nbsp;</td><td>(input): The error code returned from HPSS.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The FSAL error code associated to hpss_errorcode. </dd></dl>

<p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>: The EBADF error also happens when file is opened for reading, and we try writting in it. In this case, we return ERR_FSAL_NOT_OPENED, but it doesn't seems to be a correct error translation. </dd></dl>
<dl class="warning"><dt><b>Warning:</b></dt><dd>AIX returns EEXIST where BSD uses ENOTEMPTY; We want ENOTEMPTY to be interpreted anyway on AIX plateforms. Thus, we explicitely write its value (87).</dd></dl>
</p>

<p>Definition at line <a class="el" href="fsal__convert_8c_source.html#l00038">38</a> of file <a class="el" href="fsal__convert_8c_source.html">fsal_convert.c</a>.</p>

<p>Referenced by <a class="el" href="fsal__access_8c_source.html#l00058">HPSSFSAL_access()</a>, <a class="el" href="fsal__fileop_8c_source.html#l00495">HPSSFSAL_close()</a>, <a class="el" href="fsal__create_8c_source.html#l00062">HPSSFSAL_create()</a>, <a class="el" href="fsal__fsinfo_8c_source.html#l00082">HPSSFSAL_dynamic_fsinfo()</a>, <a class="el" href="fsal__attrs_8c_source.html#l00046">HPSSFSAL_getattrs()</a>, <a class="el" href="fsal__xattrs_8c_source.html#l00766">HPSSFSAL_GetXAttrValueById()</a>, <a class="el" href="fsal__xattrs_8c_source.html#l00950">HPSSFSAL_GetXAttrValueByName()</a>, <a class="el" href="fsal__create_8c_source.html#l00333">HPSSFSAL_link()</a>, <a class="el" href="fsal__lookup_8c_source.html#l00060">HPSSFSAL_lookup()</a>, <a class="el" href="fsal__lookup_8c_source.html#l00220">HPSSFSAL_lookupJunction()</a>, <a class="el" href="fsal__create_8c_source.html#l00216">HPSSFSAL_mkdir()</a>, <a class="el" href="fsal__fileop_8c_source.html#l00121">HPSSFSAL_open()</a>, <a class="el" href="fsal__rcp_8c_source.html#l00057">HPSSFSAL_rcp()</a>, <a class="el" href="fsal__fileop_8c_source.html#l00240">HPSSFSAL_read()</a>, <a class="el" href="fsal__dirs_8c_source.html#l00115">HPSSFSAL_readdir()</a>, <a class="el" href="fsal__symlinks_8c_source.html#l00054">HPSSFSAL_readlink()</a>, <a class="el" href="fsal__rename_8c_source.html#l00066">HPSSFSAL_rename()</a>, <a class="el" href="fsal__attrs_8c_source.html#l00125">HPSSFSAL_setattrs()</a>, <a class="el" href="fsal__symlinks_8c_source.html#l00155">HPSSFSAL_symlink()</a>, <a class="el" href="fsal__truncate_8c_source.html#l00051">HPSSFSAL_truncate()</a>, <a class="el" href="fsal__unlink_8c_source.html#l00051">HPSSFSAL_unlink()</a>, and <a class="el" href="fsal__fileop_8c_source.html#l00374">HPSSFSAL_write()</a>.</p>

</div>
</div>
<a class="anchor" id="ac54c0723f79f51a9516feb8d7ccfc0d8"></a><!-- doxytag: member="fsal_convert.c::hpss2fsal_fsid" ref="ac54c0723f79f51a9516feb8d7ccfc0d8" args="(u_signed64 hpss_fsid_in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsal_fsid_t hpss2fsal_fsid </td>
          <td>(</td>
          <td class="paramtype">u_signed64&nbsp;</td>
          <td class="paramname"> <em>hpss_fsid_in</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>hpss2fsal_fsid: Convert HPSS fsid type to FSAL fsid type.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hpss_fsid_in</em>&nbsp;</td><td>(input): The HPSS fsid to be translated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- The FSAL fsid associated to hpss_fsid_in. </dd></dl>

<p>Definition at line <a class="el" href="fsal__convert_8c_source.html#l00408">408</a> of file <a class="el" href="fsal__convert_8c_source.html">fsal_convert.c</a>.</p>

<p>Referenced by <a class="el" href="fsal__convert_8c_source.html#l00602">hpss2fsal_attributes()</a>.</p>

</div>
</div>
<a class="anchor" id="adcccec129d19a0f7a97aeb76420caf4e"></a><!-- doxytag: member="fsal_convert.c::hpss2fsal_mode" ref="adcccec129d19a0f7a97aeb76420caf4e" args="(unsigned32 uid_bit, unsigned32 gid_bit, unsigned32 sticky_bit, unsigned32 user_perms, unsigned32 group_perms, unsigned32 other_perms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsal_accessmode_t hpss2fsal_mode </td>
          <td>(</td>
          <td class="paramtype">unsigned32&nbsp;</td>
          <td class="paramname"> <em>uid_bit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned32&nbsp;</td>
          <td class="paramname"> <em>gid_bit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned32&nbsp;</td>
          <td class="paramname"> <em>sticky_bit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned32&nbsp;</td>
          <td class="paramname"> <em>user_perms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned32&nbsp;</td>
          <td class="paramname"> <em>group_perms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned32&nbsp;</td>
          <td class="paramname"> <em>other_perms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>hpss2fsal_mode: Convert HPSS mode to FSAL mode.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>uid_bit</em>&nbsp;</td><td>(input): The uid_bit field from HPSS object attributes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gid_bit</em>&nbsp;</td><td>(input): The gid_bit field from HPSS object attributes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sticky_bit</em>&nbsp;</td><td>(input): The sticky_bit field from HPSS object attributes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_perms</em>&nbsp;</td><td>(input): The user_perms field from HPSS object attributes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>group_perms</em>&nbsp;</td><td>(input): The group_perms field from HPSS object attributes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>other_perms</em>&nbsp;</td><td>(input): The other_perms field from HPSS object attributes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The FSAL mode associated to input parameters. </dd></dl>

<p>Definition at line <a class="el" href="fsal__convert_8c_source.html#l00439">439</a> of file <a class="el" href="fsal__convert_8c_source.html">fsal_convert.c</a>.</p>

<p>Referenced by <a class="el" href="fsal__convert_8c_source.html#l00602">hpss2fsal_attributes()</a>.</p>

</div>
</div>
<a class="anchor" id="a300abfc1218fa0f2814a0d6ab513a71c"></a><!-- doxytag: member="fsal_convert.c::hpss2fsal_time" ref="a300abfc1218fa0f2814a0d6ab513a71c" args="(timestamp_sec_t tsec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsal_time_t hpss2fsal_time </td>
          <td>(</td>
          <td class="paramtype">timestamp_sec_t&nbsp;</td>
          <td class="paramname"> <em>tsec</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>hpss2fsal_time: Convert HPSS time structure (timestamp_sec_t) to FSAL time type (fsal_time_t). </p>

<p>Definition at line <a class="el" href="fsal__convert_8c_source.html#l00350">350</a> of file <a class="el" href="fsal__convert_8c_source.html">fsal_convert.c</a>.</p>

<p>Referenced by <a class="el" href="fsal__convert_8c_source.html#l00602">hpss2fsal_attributes()</a>.</p>

</div>
</div>
<a class="anchor" id="a111704e087414214b69f8876316c5ca9"></a><!-- doxytag: member="fsal_convert.c::hpss2fsal_type" ref="a111704e087414214b69f8876316c5ca9" args="(unsigned32 hpss_type_in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsal_nodetype_t hpss2fsal_type </td>
          <td>(</td>
          <td class="paramtype">unsigned32&nbsp;</td>
          <td class="paramname"> <em>hpss_type_in</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>hpss2fsal_type: Convert HPSS NS object type to FSAL node type.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hpss_type_in</em>&nbsp;</td><td>(input): The HPSS NS object type from NSObjHandle.Type.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- The FSAL node type associated to hpss_type_in.<ul>
<li>-1 if the input type is unknown. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="fsal__convert_8c_source.html#l00319">319</a> of file <a class="el" href="fsal__convert_8c_source.html">fsal_convert.c</a>.</p>

<p>Referenced by <a class="el" href="fsal__convert_8c_source.html#l00602">hpss2fsal_attributes()</a>, <a class="el" href="fsal__tools_8c_source.html#l00439">HPSSFSAL_ExpandHandle()</a>, <a class="el" href="fsal__lookup_8c_source.html#l00060">HPSSFSAL_lookup()</a>, <a class="el" href="fsal__lookup_8c_source.html#l00220">HPSSFSAL_lookupJunction()</a>, <a class="el" href="fsal__dirs_8c_source.html#l00115">HPSSFSAL_readdir()</a>, and <a class="el" href="fsal__convert_8c_source.html#l00816">hpssHandle2fsalAttributes()</a>.</p>

</div>
</div>
<a class="anchor" id="af1b20dd7b00c695d3da12699a8ab4a93"></a><!-- doxytag: member="fsal_convert.c::hpssHandle2fsalAttributes" ref="af1b20dd7b00c695d3da12699a8ab4a93" args="(ns_ObjHandle_t *p_hpsshandle_in, fsal_attrib_list_t *p_fsalattr_out)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsal_status_t hpssHandle2fsalAttributes </td>
          <td>(</td>
          <td class="paramtype">ns_ObjHandle_t *&nbsp;</td>
          <td class="paramname"> <em>p_hpsshandle_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fsal_attrib_list_t *&nbsp;</td>
          <td class="paramname"> <em>p_fsalattr_out</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>hpssHandle2fsalAttributes: Fills an FSAL attributes structure with the info provided (only) by the hpss handle of an object.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p_hpsshandle_in</em>&nbsp;</td><td>(input): Pointer to the HPSS NS object handle. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_fsalattr_out</em>&nbsp;</td><td>(input/output): Pointer to the FSAL attributes. As input, it defines the attributes that the caller wants to retrieve (by positioning flags into this structure) and the output is built considering this input (it fills the structure according to the flags it contains).</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Major error codes:<ul>
<li>ERR_FSAL_NO_ERROR: no error.</li>
<li>ERR_FSAL_FAULT: NULL pointer passed as input parameter.</li>
<li>ERR_FSAL_ATTRNOTSUPP: One of the asked attributes is not supported.</li>
<li>ERR_FSAL_SERVERFAULT: Unexpected error. </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="fsal__convert_8c_source.html#l00816">816</a> of file <a class="el" href="fsal__convert_8c_source.html">fsal_convert.c</a>.</p>

<p>References <a class="el" href="fsal__convert_8c_source.html#l00319">hpss2fsal_type()</a>.</p>

<p>Referenced by <a class="el" href="fsal__dirs_8c_source.html#l00115">HPSSFSAL_readdir()</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 15 Sep 2010 for File System Abstraction Layer (HPSS) library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
