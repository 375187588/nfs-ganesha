<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>File System Abstraction Layer (HPSS) library: fsal_init.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>fsal_init.c File Reference</h1>Initialization functions. <a href="#_details">More...</a>
<p>
<code>#include "fsal.h"</code><br>
<code>#include "fsal_internal.h"</code><br>
<code>#include "fsal_common.h"</code><br>
<code>#include "HPSSclapiExt/hpssclapiext.h"</code><br>

<p>
<a href="fsal__init_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SET_BITMAP_PARAM</b>(api_cfg, p_init_info, _field)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SET_INTEGER_PARAM</b>(api_cfg, p_init_info, _field)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>SET_STRING_PARAM</b>(api_cfg, p_init_info, _field)</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">fsal_status_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsal__init_8c.html#a7">FSAL_Init</a> (fsal_parameter_t *init_info)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Initialization functions. 
<p>
<dl compact><dt><b>Author:</b></dt><dd><dl compact><dt><b>Author</b></dt><dd>leibovic </dd></dl>
</dd></dl>
<dl compact><dt><b>Date:</b></dt><dd><dl compact><dt><b>Date</b></dt><dd>2006/01/24 13:45:37 </dd></dl>
</dd></dl>
<dl compact><dt><b>Version:</b></dt><dd><dl compact><dt><b>Revision</b></dt><dd>1.20 </dd></dl>
</dd></dl>

<p>
Definition in file <a class="el" href="fsal__init_8c-source.html">fsal_init.c</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="fsal_init.c::SET_BITMAP_PARAM"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define SET_BITMAP_PARAM          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">api_cfg,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>p_init_info,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>_field&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">switch</span>( (p_init_info)-&gt;behaviors._field ){                \
      <span class="keywordflow">case</span> FSAL_INIT_FORCE_VALUE :                            \
        <span class="comment">/* force the value in any case */</span>                     \
        api_cfg._field = (p_init_info)-&gt;hpss_config._field;   \
        <span class="keywordflow">break</span>;                                                \
      <span class="keywordflow">case</span> FSAL_INIT_MAX_LIMIT :                              \
        <span class="comment">/* remove the flags not specified by user (AND) */</span>    \
        api_cfg._field &amp;= (p_init_info)-&gt;hpss_config._field;  \
        <span class="keywordflow">break</span>;                                                \
      <span class="keywordflow">case</span> FSAL_INIT_MIN_LIMIT :                              \
        <span class="comment">/* add the flags specified by user (OR) */</span>            \
        api_cfg._field |= (p_init_info)-&gt;hpss_config._field;  \
        <span class="keywordflow">break</span>;                                                \
    <span class="comment">/* In the other cases, we keep the default value. */</span>      \
    }                                                         \
</pre></div>
<p>
Definition at line <a class="el" href="fsal__init_8c-source.html#l00083">83</a> of file <a class="el" href="fsal__init_8c-source.html">fsal_init.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="fsal_init.c::SET_INTEGER_PARAM"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define SET_INTEGER_PARAM          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">api_cfg,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>p_init_info,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>_field&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">switch</span>( (p_init_info)-&gt;behaviors._field ){                    \
    <span class="keywordflow">case</span> FSAL_INIT_FORCE_VALUE :                                  \
        <span class="comment">/* force the value in any case */</span>                         \
        api_cfg._field = (p_init_info)-&gt;hpss_config._field;       \
        <span class="keywordflow">break</span>;                                                \
    <span class="keywordflow">case</span> FSAL_INIT_MAX_LIMIT :                                    \
      <span class="comment">/* check the higher limit */</span>                                \
      <span class="keywordflow">if</span> ( api_cfg._field &gt; (p_init_info)-&gt;hpss_config._field )   \
        api_cfg._field = (p_init_info)-&gt;hpss_config._field ;      \
        <span class="keywordflow">break</span>;                                                \
    <span class="keywordflow">case</span> FSAL_INIT_MIN_LIMIT :                                    \
      <span class="comment">/* check the lower limit */</span>                                 \
      <span class="keywordflow">if</span> ( api_cfg._field &lt; (p_init_info)-&gt;hpss_config._field )   \
        api_cfg._field = (p_init_info)-&gt;hpss_config._field ;      \
        <span class="keywordflow">break</span>;                                                \
    <span class="comment">/* In the other cases, we keep the default value. */</span>          \
    }                                                             \
</pre></div>
<p>
Definition at line <a class="el" href="fsal__init_8c-source.html#l00101">101</a> of file <a class="el" href="fsal__init_8c-source.html">fsal_init.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="fsal_init.c::SET_STRING_PARAM"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define SET_STRING_PARAM          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">api_cfg,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>p_init_info,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>_field&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">switch</span>( (p_init_info)-&gt;behaviors._field ){                    \
    <span class="keywordflow">case</span> FSAL_INIT_FORCE_VALUE :                                  \
      <span class="comment">/* force the value in any case */</span>                           \
      strcpy(api_cfg._field,(p_init_info)-&gt;hpss_config._field);   \
      <span class="keywordflow">break</span>;                                                \
    <span class="comment">/* In the other cases, we keep the default value. */</span>          \
    }                                                             \
</pre></div>
<p>
Definition at line <a class="el" href="fsal__init_8c-source.html#l00121">121</a> of file <a class="el" href="fsal__init_8c-source.html">fsal_init.c</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a7" doxytag="fsal_init.c::FSAL_Init"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">fsal_status_t FSAL_Init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">fsal_parameter_t *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>init_info</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
FSAL_Init : Initializes the FileSystem Abstraction Layer.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>init_info</em>&nbsp;</td><td>(input, fsal_parameter_t *) : Pointer to a structure that contains all initialization parameters for the FSAL. Specifically, it contains settings about the filesystem on which the FSAL is based, security settings, logging policy and outputs, and other general FSAL options.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Major error codes : ERR_FSAL_NO_ERROR (initialisation OK) ERR_FSAL_FAULT (init_info pointer is null) ERR_FSAL_SERVERFAULT (misc FSAL error) ERR_FSAL_ALREADY_INIT (The FS is already initialized) ERR_FSAL_BAD_INIT (FS specific init error, minor error code gives the reason for this error.) ERR_FSAL_SEC_INIT (Security context init error). </dd></dl>

<p>
Definition at line <a class="el" href="fsal__init_8c-source.html#l00254">254</a> of file <a class="el" href="fsal__init_8c-source.html">fsal_init.c</a>.
<p>
References <a class="el" href="fsal__internal_8c-source.html#l00242">fsal_internal_SetCredentialLifetime()</a>, and <a class="el" href="fsal__internal_8c-source.html#l00257">fsal_internal_SetReturnInconsistentDirent()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Wed Apr 9 08:24:43 2008 for File System Abstraction Layer (HPSS) library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
