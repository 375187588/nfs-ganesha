<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Daemon Main: nfs_dupreq.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>nfs_dupreq.c File Reference</h1><code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;sys/types.h&gt;</code><br>
<code>#include &lt;ctype.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;dirent.h&gt;</code><br>
<code>#include &lt;netdb.h&gt;</code><br>
<code>#include &lt;netinet/in.h&gt;</code><br>
<code>#include &lt;arpa/inet.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;pthread.h&gt;</code><br>
<code>#include &lt;fcntl.h&gt;</code><br>
<code>#include &lt;sys/file.h&gt;</code><br>
<code>#include &lt;pwd.h&gt;</code><br>
<code>#include &lt;grp.h&gt;</code><br>
<code>#include &lt;rpc/rpc.h&gt;</code><br>
<code>#include &lt;rpc/svc.h&gt;</code><br>
<code>#include &lt;rpc/pmap_clnt.h&gt;</code><br>
<code>#include "LRU_List.h"</code><br>
<code>#include "HashData.h"</code><br>
<code>#include "HashTable.h"</code><br>
<code>#include "log_functions.h"</code><br>
<code>#include "nfs_core.h"</code><br>
<code>#include "nfs23.h"</code><br>
<code>#include "nfs4.h"</code><br>
<code>#include "fsal.h"</code><br>
<code>#include "stuff_alloc.h"</code><br>
<code>#include "nfs_tools.h"</code><br>
<code>#include "nfs_exports.h"</code><br>
<code>#include "nfs_file_handle.h"</code><br>
<code>#include "nfs_dupreq.h"</code><br>

<p>
<a href="nfs__dupreq_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a7">get_rpc_xid</a> (struct svc_req *reqp)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a8">print_entry_dupreq</a> (LRU_data_t data, char *str)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a9">clean_entry_dupreq</a> (LRU_entry_t *pentry, void *addparam)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a10">dupreq_value_hash_func</a> (hash_parameter_t *p_hparam, hash_buffer_t *buffclef)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a11">dupreq_rbt_hash_func</a> (hash_parameter_t *p_hparam, hash_buffer_t *buffclef)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a12">compare_xid</a> (hash_buffer_t *buff1, hash_buffer_t *buff2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a13">display_xid</a> (hash_buffer_t *pbuff, char *str)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a14">nfs_Init_dupreq</a> (nfs_rpc_dupreq_parameter_t param)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a15">nfs_dupreq_add</a> (long xid, struct svc_req *ptr_req, nfs_res_t *p_res_nfs, LRU_list_t *lru_dupreq, dupreq_entry_t **p_dupreq_pool)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">nfs_res_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a16">nfs_dupreq_get</a> (long xid, int *pstatus)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a17">nfs_dupreq_gc_function</a> (LRU_entry_t *pentry, void *addparam)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a18">nfs_dupreq_get_stats</a> (hash_stat_t *phstat)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">nfs_parameter_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a0">nfs_param</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">nfs_function_desc_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a1">nfs2_func_desc</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">nfs_function_desc_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a2">nfs3_func_desc</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">nfs_function_desc_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a3">nfs4_func_desc</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">nfs_function_desc_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a4">mnt1_func_desc</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">nfs_function_desc_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a5">mnt3_func_desc</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">hash_table_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs__dupreq_8c.html#a6">ht_dupreq</a></td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a9" doxytag="nfs_dupreq.c::clean_entry_dupreq"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int clean_entry_dupreq           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LRU_entry_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>pentry</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>addparam</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
clean_entry_dupreq: cleans an entry in the dupreq cache.<p>
cleans an entry in the dupreq cache.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pentry</em>&nbsp;</td><td>[INOUT] entry to be cleaned. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addparam</em>&nbsp;</td><td>[IN] additional parameter used for cleaning.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if ok, other values mean an error. </dd></dl>

<p>
Definition at line <a class="el" href="nfs__dupreq_8c-source.html#l00223">223</a> of file <a class="el" href="nfs__dupreq_8c-source.html">nfs_dupreq.c</a>.
<p>
References <a class="el" href="nfs__dupreq_8c-source.html#l00136">ht_dupreq</a>, <a class="el" href="nfs__worker__thread_8c-source.html#l00215">mnt1_func_desc</a>, <a class="el" href="nfs__worker__thread_8c-source.html#l00225">mnt3_func_desc</a>, <a class="el" href="nfs__worker__thread_8c-source.html#l00160">nfs2_func_desc</a>, <a class="el" href="nfs__worker__thread_8c-source.html#l00182">nfs3_func_desc</a>, <a class="el" href="nfs__worker__thread_8c-source.html#l00209">nfs4_func_desc</a>, and <a class="el" href="nfs__init_8c-source.html#l00130">nfs_param</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="nfs_dupreq.c::compare_xid"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int compare_xid           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hash_buffer_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>buff1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>hash_buffer_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>buff2</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
compare_xid: compares the xid stored in the key buffers.<p>
compare the xid stored in the key buffers. This function is to be used as 'compare_key' field in the hashtable storing the nfs duplicated requests.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buff1</em>&nbsp;</td><td>[IN] first key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buff2</em>&nbsp;</td><td>[IN] second key</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if keys are identifical, 1 if they are different. </dd></dl>

<p>
Definition at line <a class="el" href="nfs__dupreq_8c-source.html#l00360">360</a> of file <a class="el" href="nfs__dupreq_8c-source.html">nfs_dupreq.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="nfs_dupreq.c::display_xid"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int display_xid           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hash_buffer_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>pbuff</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>str</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
display_xid: displays the xid stored in the buffer.<p>
displays the xid stored in the buffer. This function is to be used as 'key_to_str' field in the hashtable storing the nfs duplicated requests.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buff1</em>&nbsp;</td><td>[IN] buffer to display </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buff2</em>&nbsp;</td><td>[OUT] output string</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>number of character written. </dd></dl>

<p>
Definition at line <a class="el" href="nfs__dupreq_8c-source.html#l00380">380</a> of file <a class="el" href="nfs__dupreq_8c-source.html">nfs_dupreq.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="nfs_dupreq.c::dupreq_rbt_hash_func"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned long dupreq_rbt_hash_func           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hash_parameter_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>p_hparam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>hash_buffer_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffclef</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
dupreq_rbt_hash_func: computes the rbt value for the entry in dupreq cache.<p>
Computes the rbt value for the entry in dupreq cache. In fact, it just use the Xid itself (which is an unsigned integer) as the rbt value. This function is called internal in the HasTable_* function<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hparam</em>&nbsp;</td><td>[IN] hash table parameter. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffcleff[in]</em>&nbsp;</td><td>pointer to the hash key buffer</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the computed rbt value.</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>HashTable_Init </dd></dl>

<p>
Definition at line <a class="el" href="nfs__dupreq_8c-source.html#l00341">341</a> of file <a class="el" href="nfs__dupreq_8c-source.html">nfs_dupreq.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="nfs_dupreq.c::dupreq_value_hash_func"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned long dupreq_value_hash_func           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hash_parameter_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>p_hparam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>hash_buffer_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>buffclef</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
dupreq_rbt_hash_func: computes the hash value for the entry in dupreq cache.<p>
Computes the hash value for the entry in dupreq cache. In fact, it just use the Xid modulo the hash array size. This function is called internal in the HasTable_* function<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hparam</em>&nbsp;</td><td>[IN] hash table parameter. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffcleff[in]</em>&nbsp;</td><td>pointer to the hash key buffer</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the computed hash value.</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>HashTable_Init </dd></dl>

<p>
Definition at line <a class="el" href="nfs__dupreq_8c-source.html#l00320">320</a> of file <a class="el" href="nfs__dupreq_8c-source.html">nfs_dupreq.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="nfs_dupreq.c::get_rpc_xid"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned int get_rpc_xid           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct svc_req *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>reqp</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
get_rpc_xid: extract the transfer Id from a RPC request.<p>
RPC Xid is used for RPC Reply cache. With UDP connection, the xid is in an opaque structure stored in xprt-&gt;xp_p2, but with TCP connection, the xid is in another opaque structure stored in xprt-&gt;xp_p1. xp_p2 and xp_p1 are mutually exclusive. The opaque structure are well defined in ONC RPC protocol definitions, and used internally by the ONC layers. Since I need to know the xid the structures are defined here.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>reqp</em>&nbsp;</td><td>A pointer to the request to be examined.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the found xid. </dd></dl>

<p>
Definition at line <a class="el" href="nfs__dupreq_8c-source.html#l00154">154</a> of file <a class="el" href="nfs__dupreq_8c-source.html">nfs_dupreq.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="nfs_dupreq.c::nfs_dupreq_add"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int nfs_dupreq_add           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">long&nbsp;</td>
          <td class="mdname" nowrap> <em>xid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct svc_req *&nbsp;</td>
          <td class="mdname" nowrap> <em>ptr_req</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>nfs_res_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>p_res_nfs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>LRU_list_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>lru_dupreq</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dupreq_entry_t **&nbsp;</td>
          <td class="mdname" nowrap> <em>p_dupreq_pool</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
nfs_dupreq_add: adds an entry in the duplicate requests cache.<p>
Adds an entry in the duplicate requests cache.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>xid</em>&nbsp;</td><td>[IN] the transfer id to be used as key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pnfsreq</em>&nbsp;</td><td>[IN] the request pointer to cache</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>DUPREQ_SUCCESS if successfull<br>
. <p>
DUPREQ_INSERT_MALLOC_ERROR if an error occured during the insertion process. </dd></dl>

<p>
Definition at line <a class="el" href="nfs__dupreq_8c-source.html#l00424">424</a> of file <a class="el" href="nfs__dupreq_8c-source.html">nfs_dupreq.c</a>.
<p>
References <a class="el" href="nfs__dupreq_8c-source.html#l00136">ht_dupreq</a>, and <a class="el" href="nfs__init_8c-source.html#l00130">nfs_param</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="nfs_dupreq.c::nfs_dupreq_gc_function"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int nfs_dupreq_gc_function           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LRU_entry_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>pentry</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>addparam</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
nfs_dupreq_gc_function: Tests is an entry in dupreq cache is to be set invalid (has expired).<p>
Tests is an entry in dupreq cache is to be set invalid (has expired).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pentry</em>&nbsp;</td><td>[IN] pointer to the entry to test</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>1 if entry must be set invalid, 0 if not.</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>LRU_invalidate_by_function <p>
LRU_gc_invalid </dd></dl>

<p>
Definition at line <a class="el" href="nfs__dupreq_8c-source.html#l00539">539</a> of file <a class="el" href="nfs__dupreq_8c-source.html">nfs_dupreq.c</a>.
<p>
References <a class="el" href="nfs__init_8c-source.html#l00130">nfs_param</a>.
<p>
Referenced by <a class="el" href="nfs__worker__thread_8c-source.html#l00773">worker_thread()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="nfs_dupreq.c::nfs_dupreq_get"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">nfs_res_t nfs_dupreq_get           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">long&nbsp;</td>
          <td class="mdname" nowrap> <em>xid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>pstatus</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
nfs_dupreq_get: Tries to get a duplicated requests for dupreq cache<p>
Tries to get a duplicated requests for dupreq cache.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>xid</em>&nbsp;</td><td>[IN] the transfer id we are looking for </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pstatus</em>&nbsp;</td><td>[OUT] the pointer to the status for the operation</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the result previously set if *pstatus == DUPREQ_SUCCESS </dd></dl>

<p>
Definition at line <a class="el" href="nfs__dupreq_8c-source.html#l00498">498</a> of file <a class="el" href="nfs__dupreq_8c-source.html">nfs_dupreq.c</a>.
<p>
References <a class="el" href="nfs__dupreq_8c-source.html#l00136">ht_dupreq</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="nfs_dupreq.c::nfs_dupreq_get_stats"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void nfs_dupreq_get_stats           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">hash_stat_t *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>phstat</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
nfs_dupreq_get_stats: gets the hash table statistics for the duplicate requests.<p>
Gets the hash table statistics for the duplicate requests.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>phstat</em>&nbsp;</td><td>[OUT] pointer to the resulting stats.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing (void function)</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>HashTable_GetStats </dd></dl>

<p>
Definition at line <a class="el" href="nfs__dupreq_8c-source.html#l00566">566</a> of file <a class="el" href="nfs__dupreq_8c-source.html">nfs_dupreq.c</a>.
<p>
References <a class="el" href="nfs__dupreq_8c-source.html#l00136">ht_dupreq</a>.
<p>
Referenced by <a class="el" href="nfs__stats__thread_8c-source.html#l00104">stats_thread()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="nfs_dupreq.c::nfs_Init_dupreq"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int nfs_Init_dupreq           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">nfs_rpc_dupreq_parameter_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>param</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
nfs_Init_dupreq: Init the hashtable and LRU for duplicate request cache<p>
Perform all the required initialization for hashtable and LRU for duplicate request cache<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>param</em>&nbsp;</td><td>[IN] parameter used to init the duplicate request cache</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if successful, -1 otherwise </dd></dl>

<p>
Definition at line <a class="el" href="nfs__dupreq_8c-source.html#l00398">398</a> of file <a class="el" href="nfs__dupreq_8c-source.html">nfs_dupreq.c</a>.
<p>
References <a class="el" href="nfs__dupreq_8c-source.html#l00136">ht_dupreq</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="nfs_dupreq.c::print_entry_dupreq"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int print_entry_dupreq           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">LRU_data_t&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>str</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
print_entry_dupreq: prints an entry in the LRU list.<p>
prints an entry in the LRU list.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>[IN] data stored in a LRU entry to be printed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>str</em>&nbsp;</td><td>[OUT] string used to store the result.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if ok, other values mean an error. </dd></dl>

<p>
Definition at line <a class="el" href="nfs__dupreq_8c-source.html#l00204">204</a> of file <a class="el" href="nfs__dupreq_8c-source.html">nfs_dupreq.c</a>.    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a6" doxytag="nfs_dupreq.c::ht_dupreq"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">hash_table_t* <a class="el" href="nfs__worker__thread_8c.html#a5">ht_dupreq</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="nfs__dupreq_8c-source.html#l00136">136</a> of file <a class="el" href="nfs__dupreq_8c-source.html">nfs_dupreq.c</a>.
<p>
Referenced by <a class="el" href="nfs__dupreq_8c-source.html#l00223">clean_entry_dupreq()</a>, <a class="el" href="nfs__dupreq_8c-source.html#l00424">nfs_dupreq_add()</a>, <a class="el" href="nfs__dupreq_8c-source.html#l00498">nfs_dupreq_get()</a>, <a class="el" href="nfs__dupreq_8c-source.html#l00566">nfs_dupreq_get_stats()</a>, and <a class="el" href="nfs__dupreq_8c-source.html#l00398">nfs_Init_dupreq()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="nfs_dupreq.c::mnt1_func_desc"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">nfs_function_desc_t <a class="el" href="nfs__worker__thread_8c.html#a15">mnt1_func_desc</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="nfs__worker__thread_8c-source.html#l00215">215</a> of file <a class="el" href="nfs__worker__thread_8c-source.html">nfs_worker_thread.c</a>.
<p>
Referenced by <a class="el" href="nfs__dupreq_8c-source.html#l00223">clean_entry_dupreq()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="nfs_dupreq.c::mnt3_func_desc"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">nfs_function_desc_t <a class="el" href="nfs__worker__thread_8c.html#a16">mnt3_func_desc</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="nfs__worker__thread_8c-source.html#l00225">225</a> of file <a class="el" href="nfs__worker__thread_8c-source.html">nfs_worker_thread.c</a>.
<p>
Referenced by <a class="el" href="nfs__dupreq_8c-source.html#l00223">clean_entry_dupreq()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="nfs_dupreq.c::nfs2_func_desc"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">nfs_function_desc_t <a class="el" href="nfs__worker__thread_8c.html#a12">nfs2_func_desc</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="nfs__worker__thread_8c-source.html#l00160">160</a> of file <a class="el" href="nfs__worker__thread_8c-source.html">nfs_worker_thread.c</a>.
<p>
Referenced by <a class="el" href="nfs__dupreq_8c-source.html#l00223">clean_entry_dupreq()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="nfs_dupreq.c::nfs3_func_desc"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">nfs_function_desc_t <a class="el" href="nfs__worker__thread_8c.html#a13">nfs3_func_desc</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="nfs__worker__thread_8c-source.html#l00182">182</a> of file <a class="el" href="nfs__worker__thread_8c-source.html">nfs_worker_thread.c</a>.
<p>
Referenced by <a class="el" href="nfs__dupreq_8c-source.html#l00223">clean_entry_dupreq()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="nfs_dupreq.c::nfs4_func_desc"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">nfs_function_desc_t <a class="el" href="nfs__worker__thread_8c.html#a14">nfs4_func_desc</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="nfs__worker__thread_8c-source.html#l00209">209</a> of file <a class="el" href="nfs__worker__thread_8c-source.html">nfs_worker_thread.c</a>.
<p>
Referenced by <a class="el" href="nfs__dupreq_8c-source.html#l00223">clean_entry_dupreq()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="nfs_dupreq.c::nfs_param"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">nfs_parameter_t <a class="el" href="nfs__worker__thread_8c.html#a3">nfs_param</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="nfs__init_8c-source.html#l00130">130</a> of file <a class="el" href="nfs__init_8c-source.html">nfs_init.c</a>.
<p>
Referenced by <a class="el" href="nfs__dupreq_8c-source.html#l00223">clean_entry_dupreq()</a>, <a class="el" href="nfs__file__content__gc__thread_8c-source.html#l00197">file_content_gc_thread()</a>, <a class="el" href="fuse__binding_8c-source.html#l00175">ganefuse_main()</a>, <a class="el" href="nfs__main_8c-source.html#l00173">main()</a>, <a class="el" href="nfs__dupreq_8c-source.html#l00424">nfs_dupreq_add()</a>, <a class="el" href="nfs__dupreq_8c-source.html#l00539">nfs_dupreq_gc_function()</a>, <a class="el" href="nfs__file__content__flush__thread_8c-source.html#l00144">nfs_file_content_flush_thread()</a>, <a class="el" href="nfs__rpc__dispatcher__thread_8c-source.html#l01231">nfs_Init_request_data()</a>, <a class="el" href="nfs__rpc__dispatcher__thread_8c-source.html#l00336">nfs_Init_svc()</a>, <a class="el" href="nfs__worker__thread_8c-source.html#l00718">nfs_Init_worker_data()</a>, <a class="el" href="nfs__init_8c-source.html#l00860">nfs_reset_stats()</a>, <a class="el" href="nfs__rpc__dispatcher__thread_8c-source.html#l00826">nfs_rpc_getreq()</a>, <a class="el" href="nfs__init_8c-source.html#l01387">nfs_start()</a>, <a class="el" href="nfs__rpc__dispatcher__thread_8c-source.html#l01190">rpc_dispatcher_thread()</a>, <a class="el" href="nfs__rpc__tcp__socket__manager__thread_8c-source.html#l00163">rpc_tcp_socket_manager_thread()</a>, <a class="el" href="nfs__stats__snmp_8c-source.html#l01137">stats_snmp()</a>, <a class="el" href="nfs__stats__thread_8c-source.html#l00104">stats_thread()</a>, and <a class="el" href="nfs__worker__thread_8c-source.html#l00773">worker_thread()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Wed Apr 9 08:24:26 2008 for Daemon Main by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
