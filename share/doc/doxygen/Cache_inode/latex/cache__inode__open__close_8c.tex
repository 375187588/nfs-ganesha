\section{cache\_\-inode\_\-open\_\-close.c File Reference}
\label{cache__inode__open__close_8c}\index{cache\_\-inode\_\-open\_\-close.c@{cache\_\-inode\_\-open\_\-close.c}}


Removes an entry of any type.  
{\ttfamily \#include \char`\"{}fsal.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}LRU\_\-List.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}log\_\-macros.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}HashData.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}HashTable.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}cache\_\-inode.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}cache\_\-content.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}stuff\_\-alloc.h\char`\"{}}\par
{\ttfamily \#include $<$unistd.h$>$}\par
{\ttfamily \#include $<$string.h$>$}\par
{\ttfamily \#include $<$sys/types.h$>$}\par
{\ttfamily \#include $<$sys/stat.h$>$}\par
{\ttfamily \#include $<$sys/param.h$>$}\par
{\ttfamily \#include $<$time.h$>$}\par
{\ttfamily \#include $<$pthread.h$>$}\par
{\ttfamily \#include $<$strings.h$>$}\par
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
cache\_\-inode\_\-status\_\-t {\bf cache\_\-inode\_\-open} (cache\_\-entry\_\-t $\ast$pentry, cache\_\-inode\_\-client\_\-t $\ast$pclient, fsal\_\-openflags\_\-t openflags, fsal\_\-op\_\-context\_\-t $\ast$pcontext, cache\_\-inode\_\-status\_\-t $\ast$pstatus)
\item 
cache\_\-inode\_\-status\_\-t {\bf cache\_\-inode\_\-open\_\-by\_\-name} (cache\_\-entry\_\-t $\ast$pentry\_\-dir, fsal\_\-name\_\-t $\ast$pname, cache\_\-entry\_\-t $\ast$pentry\_\-file, cache\_\-inode\_\-client\_\-t $\ast$pclient, fsal\_\-openflags\_\-t openflags, fsal\_\-op\_\-context\_\-t $\ast$pcontext, cache\_\-inode\_\-status\_\-t $\ast$pstatus)
\item 
cache\_\-inode\_\-status\_\-t {\bf cache\_\-inode\_\-close} (cache\_\-entry\_\-t $\ast$pentry, cache\_\-inode\_\-client\_\-t $\ast$pclient, cache\_\-inode\_\-status\_\-t $\ast$pstatus)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Removes an entry of any type. vim:expandtab:shiftwidth=8:tabstop=8:

Copyright CEA/DAM/DIF (2008) contributeur : Philippe DENIEL {\tt philippe.deniel@cea.fr} Thomas LEIBOVICI {\tt thomas.leibovici@cea.fr}

This program is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License along with this library; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301 USA

-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/

\begin{DoxyAuthor}{Author}

\end{DoxyAuthor}
Author}
deniel \begin{DoxyDate}{Date}

\end{DoxyDate}
Date}
2005/11/28 17:02:27 \begin{DoxyVersion}{Version}

\end{DoxyVersion}
Revision}
1.20 \doxyref{cache\_\-inode\_\-rdwr.c}{p.}{cache__inode__rdwr_8c} : performs an IO on a REGULAR\_\-FILE. 

Definition in file {\bf cache\_\-inode\_\-open\_\-close.c}.

\subsection{Function Documentation}
\index{cache\_\-inode\_\-open\_\-close.c@{cache\_\-inode\_\-open\_\-close.c}!cache\_\-inode\_\-close@{cache\_\-inode\_\-close}}
\index{cache\_\-inode\_\-close@{cache\_\-inode\_\-close}!cache_inode_open_close.c@{cache\_\-inode\_\-open\_\-close.c}}
\subsubsection[{cache\_\-inode\_\-close}]{\setlength{\rightskip}{0pt plus 5cm}cache\_\-inode\_\-status\_\-t cache\_\-inode\_\-close (cache\_\-entry\_\-t $\ast$ {\em pentry}, \/  cache\_\-inode\_\-client\_\-t $\ast$ {\em pclient}, \/  cache\_\-inode\_\-status\_\-t $\ast$ {\em pstatus})}\label{cache__inode__open__close_8c_a3f70ec6864ce18da78b14e3c481f6251}
cache\_\-inode\_\-close: closes the local fd in the FSAL.

Closes the local fd in the FSAL.

No lock management is done in this layer: the related pentry in the cache inode layer is locked and will prevent from concurent accesses.


\begin{DoxyParams}{Parameters}
\item[{\em pentry}][IN] entry in file content layer whose content is to be accessed. \item[{\em pclient}][IN] ressource allocated by the client for the nfs management.  [OUT] returned status.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
CACHE\_\-CONTENT\_\-SUCCESS is successful . 
\end{DoxyReturn}


Definition at line 382 of file cache\_\-inode\_\-open\_\-close.c.\index{cache\_\-inode\_\-open\_\-close.c@{cache\_\-inode\_\-open\_\-close.c}!cache\_\-inode\_\-open@{cache\_\-inode\_\-open}}
\index{cache\_\-inode\_\-open@{cache\_\-inode\_\-open}!cache_inode_open_close.c@{cache\_\-inode\_\-open\_\-close.c}}
\subsubsection[{cache\_\-inode\_\-open}]{\setlength{\rightskip}{0pt plus 5cm}cache\_\-inode\_\-status\_\-t cache\_\-inode\_\-open (cache\_\-entry\_\-t $\ast$ {\em pentry}, \/  cache\_\-inode\_\-client\_\-t $\ast$ {\em pclient}, \/  fsal\_\-openflags\_\-t {\em openflags}, \/  fsal\_\-op\_\-context\_\-t $\ast$ {\em pcontext}, \/  cache\_\-inode\_\-status\_\-t $\ast$ {\em pstatus})}\label{cache__inode__open__close_8c_a50d5e1eefb6a51a23240d9f4c1be2b3a}
cache\_\-content\_\-open: opens the local fd on the cache.

Opens the fd on the FSAL


\begin{DoxyParams}{Parameters}
\item[{\em pentry}][IN] entry in file content layer whose content is to be accessed. \item[{\em pclient}][IN] ressource allocated by the client for the nfs management. \item[{\em openflags}][IN] flags to be used to open the file \item[{\em pcontent}][IN] FSAL operation context  [OUT] returned status.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
CACHE\_\-CONTENT\_\-SUCCESS is successful . 
\end{DoxyReturn}


Definition at line 78 of file cache\_\-inode\_\-open\_\-close.c.\index{cache\_\-inode\_\-open\_\-close.c@{cache\_\-inode\_\-open\_\-close.c}!cache\_\-inode\_\-open\_\-by\_\-name@{cache\_\-inode\_\-open\_\-by\_\-name}}
\index{cache\_\-inode\_\-open\_\-by\_\-name@{cache\_\-inode\_\-open\_\-by\_\-name}!cache_inode_open_close.c@{cache\_\-inode\_\-open\_\-close.c}}
\subsubsection[{cache\_\-inode\_\-open\_\-by\_\-name}]{\setlength{\rightskip}{0pt plus 5cm}cache\_\-inode\_\-status\_\-t cache\_\-inode\_\-open\_\-by\_\-name (cache\_\-entry\_\-t $\ast$ {\em pentry\_\-dir}, \/  fsal\_\-name\_\-t $\ast$ {\em pname}, \/  cache\_\-entry\_\-t $\ast$ {\em pentry\_\-file}, \/  cache\_\-inode\_\-client\_\-t $\ast$ {\em pclient}, \/  fsal\_\-openflags\_\-t {\em openflags}, \/  fsal\_\-op\_\-context\_\-t $\ast$ {\em pcontext}, \/  cache\_\-inode\_\-status\_\-t $\ast$ {\em pstatus})}\label{cache__inode__open__close_8c_af7acbb59e22da2c113281f7f6a0f9846}
cache\_\-content\_\-open: opens the local fd on the cache.

Opens the fd on the FSAL


\begin{DoxyParams}{Parameters}
\item[{\em pentry\_\-dir}][IN] parent entry for the file \item[{\em pname}][IN] name of the file to be opened in the parent directory \item[{\em pentry\_\-file}][IN] file entry to be opened \item[{\em pclient}][IN] ressource allocated by the client for the nfs management. \item[{\em openflags}][IN] flags to be used to open the file \item[{\em pcontent}][IN] FSAL operation context  [OUT] returned status.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
CACHE\_\-CONTENT\_\-SUCCESS is successful . 
\end{DoxyReturn}


Definition at line 188 of file cache\_\-inode\_\-open\_\-close.c.