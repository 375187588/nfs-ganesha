\section{client-gss.c File Reference}
\label{client-gss_8c}\index{client-gss.c@{client-gss.c}}
{\tt \#include $<$sys/time.h$>$}\par
{\tt \#include $<$sys/param.h$>$}\par
{\tt \#include $<$stdlib.h$>$}\par
{\tt \#include $<$stdio.h$>$}\par
{\tt \#include $<$string.h$>$}\par
{\tt \#include $<$ctype.h$>$}\par
{\tt \#include $<$unistd.h$>$}\par
{\tt \#include $<$fcntl.h$>$}\par
{\tt \#include $<$errno.h$>$}\par
{\tt \#include $<$signal.h$>$}\par
{\tt \#include $<$sys/socket.h$>$}\par
{\tt \#include $<$netdb.h$>$}\par
{\tt \#include $<$netinet/in.h$>$}\par
{\tt \#include $<$netinet/tcp.h$>$}\par
{\tt \#include $<$gssapi/gssapi.h$>$}\par
{\tt \#include $<$gssapi/gssapi\_\-generic.h$>$}\par
\subsection*{Defines}
\begin{CompactItemize}
\item 
\#define {\bf TOKEN\_\-NOOP}\ (1$<$$<$0)
\item 
\#define {\bf TOKEN\_\-CONTEXT}\ (1$<$$<$1)
\item 
\#define {\bf TOKEN\_\-DATA}\ (1$<$$<$2)
\item 
\#define {\bf TOKEN\_\-MIC}\ (1$<$$<$3)
\item 
\#define {\bf TOKEN\_\-CONTEXT\_\-NEXT}\ (1$<$$<$4)
\item 
\#define {\bf TOKEN\_\-WRAPPED}\ (1$<$$<$5)
\item 
\#define {\bf TOKEN\_\-ENCRYPTED}\ (1$<$$<$6)
\item 
\#define {\bf TOKEN\_\-SEND\_\-MIC}\ (1$<$$<$7)
\item 
\#define {\bf KRB5OID}\ \char`\"{}1.2.840.113554.1.2.2\char`\"{}
\item 
\#define {\bf LENMSG}\ 256
\item 
\#define {\bf Traduire\-Adresse}(adresse, dest)
\item 
\#define {\bf SNAME\_\-DEFAUT}\ \char`\"{}toto\char`\"{}
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
void {\bf sperror\_\-gss} (char $\ast$str, OM\_\-uint32 major, OM\_\-uint32 minor)
\item 
int {\bf write\_\-tok} (int s, gss\_\-buffer\_\-t tok)
\item 
int {\bf read\_\-tok} (int s, gss\_\-buffer\_\-t tok)
\item 
int {\bf Creer\-Socket} (unsigned int adresse, unsigned short port)
\item 
int {\bf negociation\_\-client} (int sockfd, char $\ast$service\_\-name, gss\_\-OID oid)
\item 
int {\bf main} (int argc, char $\ast$argv[$\,$])
\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
char {\bf rcsid} [$\,$] = \char`\"{}\$Id: client-gss.c,v 1.1 2005/04/13 13:45:49 deniel Exp \$\char`\"{}
\item 
gss\_\-OID\_\-desc {\bf krb5oid}
\item 
char {\bf options} [$\,$] = \char`\"{}hd:P:M:S:\char`\"{}
\item 
char {\bf utilisation} [$\,$]
\item 
OM\_\-uint32 {\bf deleg\_\-flag} = 0
\item 
gss\_\-ctx\_\-id\_\-t {\bf gss\_\-context}
\item 
gss\_\-OID {\bf g\_\-mech\-Oid}
\item 
char {\bf sname} [256]
\end{CompactItemize}


\subsection{Define Documentation}
\index{client-gss.c@{client-gss.c}!KRB5OID@{KRB5OID}}
\index{KRB5OID@{KRB5OID}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define KRB5OID\ \char`\"{}1.2.840.113554.1.2.2\char`\"{}}\label{client-gss_8c_a8}




Definition at line 48 of file client-gss.c.\index{client-gss.c@{client-gss.c}!LENMSG@{LENMSG}}
\index{LENMSG@{LENMSG}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define LENMSG\ 256}\label{client-gss_8c_a9}




Definition at line 54 of file client-gss.c.

Referenced by main().\index{client-gss.c@{client-gss.c}!SNAME_DEFAUT@{SNAME\_\-DEFAUT}}
\index{SNAME_DEFAUT@{SNAME\_\-DEFAUT}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define SNAME\_\-DEFAUT\ \char`\"{}toto\char`\"{}}\label{client-gss_8c_a11}




Definition at line 61 of file client-gss.c.

Referenced by main().\index{client-gss.c@{client-gss.c}!TOKEN_CONTEXT@{TOKEN\_\-CONTEXT}}
\index{TOKEN_CONTEXT@{TOKEN\_\-CONTEXT}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define TOKEN\_\-CONTEXT\ (1$<$$<$1)}\label{client-gss_8c_a1}




Definition at line 36 of file client-gss.c.

Referenced by negociation\_\-client(), and negociation\_\-server().\index{client-gss.c@{client-gss.c}!TOKEN_CONTEXT_NEXT@{TOKEN\_\-CONTEXT\_\-NEXT}}
\index{TOKEN_CONTEXT_NEXT@{TOKEN\_\-CONTEXT\_\-NEXT}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define TOKEN\_\-CONTEXT\_\-NEXT\ (1$<$$<$4)}\label{client-gss_8c_a4}




Definition at line 39 of file client-gss.c.

Referenced by negociation\_\-client().\index{client-gss.c@{client-gss.c}!TOKEN_DATA@{TOKEN\_\-DATA}}
\index{TOKEN_DATA@{TOKEN\_\-DATA}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define TOKEN\_\-DATA\ (1$<$$<$2)}\label{client-gss_8c_a2}




Definition at line 37 of file client-gss.c.

Referenced by send\_\-msg().\index{client-gss.c@{client-gss.c}!TOKEN_ENCRYPTED@{TOKEN\_\-ENCRYPTED}}
\index{TOKEN_ENCRYPTED@{TOKEN\_\-ENCRYPTED}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define TOKEN\_\-ENCRYPTED\ (1$<$$<$6)}\label{client-gss_8c_a6}




Definition at line 41 of file client-gss.c.

Referenced by send\_\-msg().\index{client-gss.c@{client-gss.c}!TOKEN_MIC@{TOKEN\_\-MIC}}
\index{TOKEN_MIC@{TOKEN\_\-MIC}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define TOKEN\_\-MIC\ (1$<$$<$3)}\label{client-gss_8c_a3}




Definition at line 38 of file client-gss.c.

Referenced by recv\_\-msg().\index{client-gss.c@{client-gss.c}!TOKEN_NOOP@{TOKEN\_\-NOOP}}
\index{TOKEN_NOOP@{TOKEN\_\-NOOP}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define TOKEN\_\-NOOP\ (1$<$$<$0)}\label{client-gss_8c_a0}




Definition at line 35 of file client-gss.c.

Referenced by negociation\_\-client().\index{client-gss.c@{client-gss.c}!TOKEN_SEND_MIC@{TOKEN\_\-SEND\_\-MIC}}
\index{TOKEN_SEND_MIC@{TOKEN\_\-SEND\_\-MIC}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define TOKEN\_\-SEND\_\-MIC\ (1$<$$<$7)}\label{client-gss_8c_a7}




Definition at line 42 of file client-gss.c.\index{client-gss.c@{client-gss.c}!TOKEN_WRAPPED@{TOKEN\_\-WRAPPED}}
\index{TOKEN_WRAPPED@{TOKEN\_\-WRAPPED}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define TOKEN\_\-WRAPPED\ (1$<$$<$5)}\label{client-gss_8c_a5}




Definition at line 40 of file client-gss.c.

Referenced by send\_\-msg().\index{client-gss.c@{client-gss.c}!TraduireAdresse@{TraduireAdresse}}
\index{TraduireAdresse@{TraduireAdresse}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define Traduire\-Adresse(adresse, dest)}\label{client-gss_8c_a10}


{\bf Value:}

\footnotesize\begin{verbatim}sprintf( dest, "%d.%d.%d.%d",                   \
                  ( ntohl( adresse ) & 0xFF000000 ) >> 24, \
                  ( ntohl( adresse ) & 0x00FF0000 ) >> 16, \
                  ( ntohl( adresse ) & 0x0000FF00 ) >> 8,  \
                  ( ntohl( adresse ) & 0x000000FF ) )
\end{verbatim}\normalsize 


Definition at line 55 of file client-gss.c.

Referenced by main().

\subsection{Function Documentation}
\index{client-gss.c@{client-gss.c}!CreerSocket@{CreerSocket}}
\index{CreerSocket@{CreerSocket}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Creer\-Socket (unsigned int {\em adresse}, unsigned short {\em port})}\label{client-gss_8c_a23}




Definition at line 86 of file client-gss.c.

Referenced by main().\index{client-gss.c@{client-gss.c}!main@{main}}
\index{main@{main}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int main (int {\em argc}, char $\ast$ {\em argv}[$\,$])}\label{client-gss_8c_a25}




Definition at line 242 of file client-gss.c.

References Creer\-Socket(), g\_\-mech\-Oid, LENMSG, negociation\_\-client(), options, sname, SNAME\_\-DEFAUT, Traduire\-Adresse, and utilisation.\index{client-gss.c@{client-gss.c}!negociation_client@{negociation\_\-client}}
\index{negociation_client@{negociation\_\-client}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int negociation\_\-client (int {\em sockfd}, char $\ast$ {\em service\_\-name}, gss\_\-OID {\em oid})}\label{client-gss_8c_a24}




Definition at line 120 of file client-gss.c.

References deleg\_\-flag, gss\_\-context, recv\_\-token(), send\_\-token(), sperror\_\-gss(), TOKEN\_\-CONTEXT, TOKEN\_\-CONTEXT\_\-NEXT, and TOKEN\_\-NOOP.

Referenced by main().\index{client-gss.c@{client-gss.c}!read_tok@{read\_\-tok}}
\index{read_tok@{read\_\-tok}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int read\_\-tok (int {\em s}, gss\_\-buffer\_\-t {\em tok})}\label{client-gss_8c_a22}


\index{client-gss.c@{client-gss.c}!sperror_gss@{sperror\_\-gss}}
\index{sperror_gss@{sperror\_\-gss}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void sperror\_\-gss (char $\ast$ {\em str}, OM\_\-uint32 {\em major}, OM\_\-uint32 {\em minor})}\label{client-gss_8c_a20}




Definition at line 80 of file tools-gss.c.\index{client-gss.c@{client-gss.c}!write_tok@{write\_\-tok}}
\index{write_tok@{write\_\-tok}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int write\_\-tok (int {\em s}, gss\_\-buffer\_\-t {\em tok})}\label{client-gss_8c_a21}




\subsection{Variable Documentation}
\index{client-gss.c@{client-gss.c}!deleg_flag@{deleg\_\-flag}}
\index{deleg_flag@{deleg\_\-flag}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}OM\_\-uint32 {\bf deleg\_\-flag} = 0}\label{client-gss_8c_a16}




Definition at line 77 of file client-gss.c.

Referenced by negociation\_\-client().\index{client-gss.c@{client-gss.c}!g_mechOid@{g\_\-mechOid}}
\index{g_mechOid@{g\_\-mechOid}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}gss\_\-OID {\bf g\_\-mech\-Oid}}\label{client-gss_8c_a18}




Definition at line 79 of file client-gss.c.

Referenced by main().\index{client-gss.c@{client-gss.c}!gss_context@{gss\_\-context}}
\index{gss_context@{gss\_\-context}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}gss\_\-ctx\_\-id\_\-t {\bf gss\_\-context}}\label{client-gss_8c_a17}




Definition at line 78 of file client-gss.c.

Referenced by negociation\_\-client().\index{client-gss.c@{client-gss.c}!krb5oid@{krb5oid}}
\index{krb5oid@{krb5oid}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}gss\_\-OID\_\-desc {\bf krb5oid}}\label{client-gss_8c_a13}


{\bf Initial value:}

\footnotesize\begin{verbatim} {
        20, KRB5OID
}
\end{verbatim}\normalsize 


Definition at line 50 of file client-gss.c.\index{client-gss.c@{client-gss.c}!options@{options}}
\index{options@{options}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char {\bf options}[$\,$] = \char`\"{}hd:P:M:S:\char`\"{}}\label{client-gss_8c_a14}




Definition at line 64 of file client-gss.c.

Referenced by main().\index{client-gss.c@{client-gss.c}!rcsid@{rcsid}}
\index{rcsid@{rcsid}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char {\bf rcsid}[$\,$] = \char`\"{}\$Id: client-gss.c,v 1.1 2005/04/13 13:45:49 deniel Exp \$\char`\"{}}\label{client-gss_8c_a12}




Definition at line 14 of file client-gss.c.\index{client-gss.c@{client-gss.c}!sname@{sname}}
\index{sname@{sname}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char {\bf sname}[256]}\label{client-gss_8c_a19}




Definition at line 80 of file client-gss.c.

Referenced by main().\index{client-gss.c@{client-gss.c}!utilisation@{utilisation}}
\index{utilisation@{utilisation}!client-gss.c@{client-gss.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char {\bf utilisation}[$\,$]}\label{client-gss_8c_a15}


{\bf Initial value:}

\footnotesize\begin{verbatim}
"Utilisation: %s [-hdPM] message\n"
"\t[-h]                   affiche cet aide en ligbe\n"
"\t[-d <machine>]         indique la machine serveur\n"
"\t[-P <port ou service>] le port ou le service ou le daemon ecoute\n"
"\t[-M <Mecanisme Auth>]  le mecanisme utilise par ls GSS-API\n" 
"\t[-S <Mecanisme Auth>]  le service utilise par ls GSS-API\n"
\end{verbatim}\normalsize 


Definition at line 67 of file client-gss.c.

Referenced by main().