\section{rpcsec\_\-gss\_\-server.c File Reference}
\label{rpcsec__gss__server_8c}\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
{\tt \#include $<$stdio.h$>$}\par
{\tt \#include $<$unistd.h$>$}\par
{\tt \#include $<$stdlib.h$>$}\par
{\tt \#include $<$string.h$>$}\par
{\tt \#include $<$sys/errno.h$>$}\par
{\tt \#include $<$sys/param.h$>$}\par
{\tt \#include $<$sys/types.h$>$}\par
{\tt \#include $<$sys/socket.h$>$}\par
{\tt \#include $<$netdb.h$>$}\par
{\tt \#include $<$netinet/in.h$>$}\par
{\tt \#include $<$netinet/tcp.h$>$}\par
{\tt \#include \char`\"{}Rpc.h\char`\"{}}\par
{\tt \#include \char`\"{}Pmap\_\-clnt.h\char`\"{}}\par
{\tt \#include \char`\"{}gssapi/gssapi.h\char`\"{}}\par
\subsection*{Classes}
\begin{CompactItemize}
\item 
struct {\bf Svc\_\-rpc\_\-gss\_\-data}
\end{CompactItemize}
\subsection*{Defines}
\begin{CompactItemize}
\item 
\#define {\bf LOGFILE\_\-DEFAUT}\ \char`\"{}./toto-{\bf server}.log\char`\"{}
\item 
\#define {\bf Traduire\-Adresse}(adresse, dest)
\item 
\#define {\bf TIMEOUT\_\-SEC}\ 25
\item 
\#define {\bf DEFAULT\_\-RPC\_\-SERVICE}\ 300400
\item 
\#define {\bf RECV\_\-SIZE}\ 2048
\item 
\#define {\bf SEND\_\-SIZE}\ 2048
\item 
\#define {\bf V1}\ 1
\item 
\#define {\bf PROC\_\-NULL}\ 0
\item 
\#define {\bf PROC\_\-PLUS1}\ 1
\item 
\#define {\bf DEFAULT\_\-MECHANISM}\ \char`\"{}kerberos\_\-v5\char`\"{}
\item 
\#define {\bf DEFAULT\_\-PRINCIPAL}\ \char`\"{}toto@trekking.bruyeres.s\char`\"{}
\item 
\#define {\bf SVCAUTH\_\-PRIVATE}(auth)\ ((struct {\bf Svc\_\-rpc\_\-gss\_\-data} $\ast$)(auth) $\rightarrow$ svc\_\-ah\_\-private)
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
void {\bf rpc\_\-log\_\-status} (char $\ast$m, OM\_\-uint32 maj\_\-stat, OM\_\-uint32 min\_\-stat)
\item 
void {\bf dispatch} (struct Svc\_\-req $\ast$ptr\_\-req, SVCXPRT $\ast$ptr\_\-svc)
\item 
{\bf main} (int argc, char $\ast$argv[$\,$])
\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
char {\bf options} [$\,$] = \char`\"{}h\-L:N:s:S:M:\char`\"{}
\item 
char {\bf utilisation} [$\,$]
\item 
unsigned int {\bf rpc\_\-service\_\-num} = DEFAULT\_\-RPC\_\-SERVICE
\end{CompactItemize}


\subsection{Define Documentation}
\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!DEFAULT_MECHANISM@{DEFAULT\_\-MECHANISM}}
\index{DEFAULT_MECHANISM@{DEFAULT\_\-MECHANISM}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define DEFAULT\_\-MECHANISM\ \char`\"{}kerberos\_\-v5\char`\"{}}\label{rpcsec__gss__server_8c_a9}




Definition at line 46 of file rpcsec\_\-gss\_\-server.c.\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!DEFAULT_PRINCIPAL@{DEFAULT\_\-PRINCIPAL}}
\index{DEFAULT_PRINCIPAL@{DEFAULT\_\-PRINCIPAL}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define DEFAULT\_\-PRINCIPAL\ \char`\"{}toto@trekking.bruyeres.s\char`\"{}}\label{rpcsec__gss__server_8c_a10}




Definition at line 47 of file rpcsec\_\-gss\_\-server.c.\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!DEFAULT_RPC_SERVICE@{DEFAULT\_\-RPC\_\-SERVICE}}
\index{DEFAULT_RPC_SERVICE@{DEFAULT\_\-RPC\_\-SERVICE}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define DEFAULT\_\-RPC\_\-SERVICE\ 300400}\label{rpcsec__gss__server_8c_a3}




Definition at line 39 of file rpcsec\_\-gss\_\-server.c.\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!LOGFILE_DEFAUT@{LOGFILE\_\-DEFAUT}}
\index{LOGFILE_DEFAUT@{LOGFILE\_\-DEFAUT}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define LOGFILE\_\-DEFAUT\ \char`\"{}./toto-{\bf server}.log\char`\"{}}\label{rpcsec__gss__server_8c_a0}




Definition at line 31 of file rpcsec\_\-gss\_\-server.c.\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!PROC_NULL@{PROC\_\-NULL}}
\index{PROC_NULL@{PROC\_\-NULL}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define PROC\_\-NULL\ 0}\label{rpcsec__gss__server_8c_a7}




Definition at line 43 of file rpcsec\_\-gss\_\-server.c.\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!PROC_PLUS1@{PROC\_\-PLUS1}}
\index{PROC_PLUS1@{PROC\_\-PLUS1}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define PROC\_\-PLUS1\ 1}\label{rpcsec__gss__server_8c_a8}




Definition at line 44 of file rpcsec\_\-gss\_\-server.c.\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!RECV_SIZE@{RECV\_\-SIZE}}
\index{RECV_SIZE@{RECV\_\-SIZE}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define RECV\_\-SIZE\ 2048}\label{rpcsec__gss__server_8c_a4}




Definition at line 40 of file rpcsec\_\-gss\_\-server.c.\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!SEND_SIZE@{SEND\_\-SIZE}}
\index{SEND_SIZE@{SEND\_\-SIZE}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define SEND\_\-SIZE\ 2048}\label{rpcsec__gss__server_8c_a5}




Definition at line 41 of file rpcsec\_\-gss\_\-server.c.\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!SVCAUTH_PRIVATE@{SVCAUTH\_\-PRIVATE}}
\index{SVCAUTH_PRIVATE@{SVCAUTH\_\-PRIVATE}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define SVCAUTH\_\-PRIVATE(auth)\ ((struct {\bf Svc\_\-rpc\_\-gss\_\-data} $\ast$)(auth) $\rightarrow$ svc\_\-ah\_\-private)}\label{rpcsec__gss__server_8c_a11}




Definition at line 78 of file rpcsec\_\-gss\_\-server.c.

Referenced by dispatch().\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!TIMEOUT_SEC@{TIMEOUT\_\-SEC}}
\index{TIMEOUT_SEC@{TIMEOUT\_\-SEC}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define TIMEOUT\_\-SEC\ 25}\label{rpcsec__gss__server_8c_a2}




Definition at line 38 of file rpcsec\_\-gss\_\-server.c.\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!TraduireAdresse@{TraduireAdresse}}
\index{TraduireAdresse@{TraduireAdresse}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define Traduire\-Adresse(adresse, dest)}\label{rpcsec__gss__server_8c_a1}


{\bf Value:}

\footnotesize\begin{verbatim}sprintf( dest, "%d.%d.%d.%d",                   \
                  ( ntohl( adresse ) & 0xFF000000 ) >> 24, \
                  ( ntohl( adresse ) & 0x00FF0000 ) >> 16, \
                  ( ntohl( adresse ) & 0x0000FF00 ) >> 8,  \
                  ( ntohl( adresse ) & 0x000000FF ) )
\end{verbatim}\normalsize 


Definition at line 32 of file rpcsec\_\-gss\_\-server.c.\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!V1@{V1}}
\index{V1@{V1}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define V1\ 1}\label{rpcsec__gss__server_8c_a6}




Definition at line 42 of file rpcsec\_\-gss\_\-server.c.

\subsection{Function Documentation}
\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!dispatch@{dispatch}}
\index{dispatch@{dispatch}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void dispatch (struct Svc\_\-req $\ast$ {\em ptr\_\-req}, SVCXPRT $\ast$ {\em ptr\_\-svc})}\label{rpcsec__gss__server_8c_a17}




Definition at line 100 of file rpcsec\_\-gss\_\-server.c.

References Svc\_\-rpc\_\-gss\_\-data::client\_\-name, PROC\_\-NULL, PROC\_\-PLUS1, rpc\_\-log\_\-status(), Svc\_\-rpc\_\-gss\_\-data::sec, Svc\_\-sendreply(), SVCAUTH\_\-PRIVATE, Svcerr\_\-decode(), Svcerr\_\-weakauth(), Xdr\_\-int(), and Xdr\_\-void().\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!main@{main}}
\index{main@{main}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}main (int {\em argc}, char $\ast$ {\em argv}[$\,$])}\label{rpcsec__gss__server_8c_a18}




Definition at line 172 of file rpcsec\_\-gss\_\-server.c.

References DEFAULT\_\-MECHANISM, DEFAULT\_\-PRINCIPAL, dispatch(), LOGFILE\_\-DEFAUT, options, Pmap\_\-unset(), RECV\_\-SIZE, rpc\_\-service\_\-num, SEND\_\-SIZE, Svc\_\-register(), Svc\_\-run(), Svcauth\_\-gss\_\-tab\_\-creds\_\-alloc(), Svctcp\_\-create(), utilisation, and V1.\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!rpc_log_status@{rpc\_\-log\_\-status}}
\index{rpc_log_status@{rpc\_\-log\_\-status}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void rpc\_\-log\_\-status (char $\ast$ {\em m}, OM\_\-uint32 {\em maj\_\-stat}, OM\_\-uint32 {\em min\_\-stat})}\label{rpcsec__gss__server_8c_a16}




Definition at line 81 of file rpcsec\_\-gss\_\-server.c.

\subsection{Variable Documentation}
\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!options@{options}}
\index{options@{options}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char {\bf options}[$\,$] = \char`\"{}h\-L:N:s:S:M:\char`\"{}}\label{rpcsec__gss__server_8c_a12}




Definition at line 50 of file rpcsec\_\-gss\_\-server.c.\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!rpc_service_num@{rpc\_\-service\_\-num}}
\index{rpc_service_num@{rpc\_\-service\_\-num}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}unsigned int {\bf rpc\_\-service\_\-num} = DEFAULT\_\-RPC\_\-SERVICE}\label{rpcsec__gss__server_8c_a15}




Definition at line 64 of file rpcsec\_\-gss\_\-server.c.\index{rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}!utilisation@{utilisation}}
\index{utilisation@{utilisation}!rpcsec_gss_server.c@{rpcsec\_\-gss\_\-server.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char {\bf utilisation}[$\,$]}\label{rpcsec__gss__server_8c_a13}


{\bf Initial value:}

\footnotesize\begin{verbatim} 
"Utilisation: %s [-hLs] \n"
"\t[-h]                   affiche cet aide en ligne\n"
"\t[-L <logfile>]         indique le fichier de log\n"
"\t[-N <NivDebug>]        indique le niveau de debug pour les journaux\n" 
"\t[-s <service RPC>]     indique le port ou le service a utiliser\n" 
"\t[-S <service auth>]    indique le principal a utiliser\n"
"\t[-M <mechanism>]       indique le mecanisme a utiliser\n"
\end{verbatim}\normalsize 


Definition at line 53 of file rpcsec\_\-gss\_\-server.c.