<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>nfs-ganesha: nfs_file_handle.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nfs-ganesha&#160;<span id="projectnumber">1.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>nfs_file_handle.h</h1>  </div>
</div>
<div class="contents">
<a href="nfs__file__handle_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> *</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright CEA/DAM/DIF  (2008)</span>
<a name="l00005"></a>00005 <span class="comment"> * contributeur : Philippe DENIEL   philippe.deniel@cea.fr</span>
<a name="l00006"></a>00006 <span class="comment"> *                Thomas LEIBOVICI  thomas.leibovici@cea.fr</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00010"></a>00010 <span class="comment"> * modify it under the terms of the GNU Lesser General Public</span>
<a name="l00011"></a>00011 <span class="comment"> * License as published by the Free Software Foundation; either</span>
<a name="l00012"></a>00012 <span class="comment"> * version 3 of the License, or (at your option) any later version.</span>
<a name="l00013"></a>00013 <span class="comment"> * </span>
<a name="l00014"></a>00014 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00015"></a>00015 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00016"></a>00016 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00017"></a>00017 <span class="comment"> * Lesser General Public License for more details.</span>
<a name="l00018"></a>00018 <span class="comment"> * </span>
<a name="l00019"></a>00019 <span class="comment"> * You should have received a copy of the GNU Lesser General Public</span>
<a name="l00020"></a>00020 <span class="comment"> * License along with this library; if not, write to the Free Software</span>
<a name="l00021"></a>00021 <span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA</span>
<a name="l00022"></a>00022 <span class="comment"> * </span>
<a name="l00023"></a>00023 <span class="comment"> * ---------------------------------------</span>
<a name="l00024"></a>00024 <span class="comment"> */</span>
<a name="l00025"></a>00025 
<a name="l00037"></a>00037 <span class="preprocessor">#ifndef _NFS_FILE_HANDLE_H</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="preprocessor">#define _NFS_FILE_HANDLE_H</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;sys/param.h&gt;</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;dirent.h&gt;</span>             <span class="comment">/* for having MAXNAMLEN */</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &lt;netdb.h&gt;</span>              <span class="comment">/* for having MAXHOSTNAMELEN */</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="log_8h.html">log.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="nfs23_8h.html">nfs23.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#ifdef _USE_NLM</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="nlm4_8h.html">nlm4.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#endif</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>
<a name="l00052"></a>00052 <span class="comment">/*</span>
<a name="l00053"></a>00053 <span class="comment"> * Structure of the filehandle</span>
<a name="l00054"></a>00054 <span class="comment"> * these structures must be naturally aligned.  The xdr buffer from/to which</span>
<a name="l00055"></a>00055 <span class="comment"> * they come/go are 4 byte aligned.</span>
<a name="l00056"></a>00056 <span class="comment"> */</span>
<a name="l00057"></a>00057 
<a name="l00058"></a><a class="code" href="nfs__file__handle_8h.html#acb877f2e86d78dd1a6e67d2a4672c187">00058</a> <span class="preprocessor">#define ULTIMATE_ANSWER 0x42</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span>
<a name="l00060"></a><a class="code" href="nfs__file__handle_8h.html#a282540d0776076a4da4dc4ac5fb2f019">00060</a> <span class="preprocessor">#define GANESHA_FH_VERSION ULTIMATE_ANSWER - 1</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span>
<a name="l00062"></a>00062 <span class="comment">/* This must be exactly 32 bytes long, and aligned on 32 bits */</span>
<a name="l00063"></a><a class="code" href="structfile__handle__v2.html">00063</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structfile__handle__v2.html">file_handle_v2</a>
<a name="l00064"></a>00064 {
<a name="l00065"></a><a class="code" href="structfile__handle__v2.html#a0b91850b14c84b7a1d2c88cb0c9a534a">00065</a>   uint8_t <a class="code" href="structfile__handle__v2.html#a0b91850b14c84b7a1d2c88cb0c9a534a">fhversion</a>;    <span class="comment">/* set to 0x41 to separate from Linux knfsd len = 1 byte */</span>
<a name="l00066"></a><a class="code" href="structfile__handle__v2.html#a0ec3e2516638a6489d3046d115f93768">00066</a>   uint8_t <a class="code" href="structfile__handle__v2.html#a0ec3e2516638a6489d3046d115f93768">xattr_pos</a>;    <span class="comment">/* Used for xattr management                len = 1 byte  */</span>
<a name="l00067"></a><a class="code" href="structfile__handle__v2.html#a1f5f11ebb4688d834a96f90ade315083">00067</a>   uint16_t <a class="code" href="structfile__handle__v2.html#a1f5f11ebb4688d834a96f90ade315083">exportid</a>;    <span class="comment">/* must be correlated to exportlist_t::id   len = 2 bytes  */</span>
<a name="l00068"></a><a class="code" href="structfile__handle__v2.html#a43fa24b77c8fe1d2f91089703284c7d9">00068</a>   uint8_t <a class="code" href="structfile__handle__v2.html#a43fa24b77c8fe1d2f91089703284c7d9">fsopaque</a>[28]; <span class="comment">/* persistent part of FSAL handle, opaque   len = 28 bytes */</span>
<a name="l00069"></a>00069 } <a class="code" href="nfs__file__handle_8h.html#a4bf41c158804e0e57cb4d0677f10fd0f">file_handle_v2_t</a>;
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 <span class="comment">/* An NFSv2 handle of fixed size. use for allocations only.</span>
<a name="l00072"></a>00072 <span class="comment"> * there is no padding because v2 handles must be fixed size.</span>
<a name="l00073"></a>00073 <span class="comment"> */</span>
<a name="l00074"></a>00074 
<a name="l00075"></a><a class="code" href="structalloc__file__handle__v2.html">00075</a> <span class="keyword">struct </span><a class="code" href="structalloc__file__handle__v2.html">alloc_file_handle_v2</a> {
<a name="l00076"></a><a class="code" href="structalloc__file__handle__v2.html#a58682dc2ef434ab8b839aa1b4264ff8b">00076</a>         <span class="keyword">struct </span><a class="code" href="structfile__handle__v2.html">file_handle_v2</a> <a class="code" href="structalloc__file__handle__v2.html#a58682dc2ef434ab8b839aa1b4264ff8b">handle</a>;   <span class="comment">/* the real handle */</span>
<a name="l00077"></a>00077 };
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 <span class="comment">/* This is up to 64 bytes long, aligned on 32 bits */</span>
<a name="l00080"></a><a class="code" href="structfile__handle__v3.html">00080</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structfile__handle__v3.html">file_handle_v3</a>
<a name="l00081"></a>00081 {
<a name="l00082"></a><a class="code" href="structfile__handle__v3.html#a5f7c40822da4bcbff00131bcc9bc9b1b">00082</a>   uint8_t <a class="code" href="structfile__handle__v3.html#a5f7c40822da4bcbff00131bcc9bc9b1b">fhversion</a>;    <span class="comment">/* set to 0x41 to separate from Linux knfsd len = 1 byte */</span>
<a name="l00083"></a><a class="code" href="structfile__handle__v3.html#ad5294ddf155f111409fc4aed99e3b5eb">00083</a>   uint8_t <a class="code" href="structfile__handle__v3.html#ad5294ddf155f111409fc4aed99e3b5eb">xattr_pos</a>;    <span class="comment">/* Used for xattr management                len = 1  byte  */</span>
<a name="l00084"></a><a class="code" href="structfile__handle__v3.html#aa1c452711fd750ce6cd1ad8a0b063ec8">00084</a>   uint16_t <a class="code" href="structfile__handle__v3.html#aa1c452711fd750ce6cd1ad8a0b063ec8">exportid</a>;    <span class="comment">/* must be correlated to exportlist_t::id   len = 2 bytes   */</span>
<a name="l00085"></a><a class="code" href="structfile__handle__v3.html#a58af651be8d034cd874347538e3b3174">00085</a>   uint8_t <a class="code" href="structfile__handle__v3.html#a58af651be8d034cd874347538e3b3174">fs_len</a>;       <span class="comment">/* actual length of opaque handle           len = 1  byte */</span>
<a name="l00086"></a><a class="code" href="structfile__handle__v3.html#a8f5d4a11f487fcb3ef3087b577400d9c">00086</a>   uint8_t <a class="code" href="structfile__handle__v3.html#a8f5d4a11f487fcb3ef3087b577400d9c">fsopaque</a>[];   <span class="comment">/* persistent part of FSAL handle, opaque   len &lt;= 59 bytes  */</span>
<a name="l00087"></a>00087 } <a class="code" href="nfs__file__handle_8h.html#ada0e701388a70ae366dc788870ee4800">file_handle_v3_t</a>;
<a name="l00088"></a>00088 
<a name="l00089"></a>00089 <span class="comment">/* An NFSv3 handle of maximum size. use this for allocations, sizeof, and memset only.</span>
<a name="l00090"></a>00090 <span class="comment"> * the pad space is where the opaque handle expands into. pad is struct aligned</span>
<a name="l00091"></a>00091 <span class="comment"> */</span>
<a name="l00092"></a>00092 
<a name="l00093"></a><a class="code" href="structalloc__file__handle__v3.html">00093</a> <span class="keyword">struct </span><a class="code" href="structalloc__file__handle__v3.html">alloc_file_handle_v3</a> {
<a name="l00094"></a><a class="code" href="structalloc__file__handle__v3.html#ab46765c1aa689e114322dcbdf704fd01">00094</a>         <span class="keyword">struct </span><a class="code" href="structfile__handle__v3.html">file_handle_v3</a> <a class="code" href="structalloc__file__handle__v3.html#ab46765c1aa689e114322dcbdf704fd01">handle</a>;   <span class="comment">/* the real handle */</span>
<a name="l00095"></a><a class="code" href="structalloc__file__handle__v3.html#a6f559d21eefebbd1728da716e610b972">00095</a>         uint8_t <a class="code" href="structalloc__file__handle__v3.html#a6f559d21eefebbd1728da716e610b972">pad</a>[58];                        <span class="comment">/* pad to mandatory max 64 bytes */</span>
<a name="l00096"></a>00096 };
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 <span class="comment">/* nfs3_sizeof_handle</span>
<a name="l00099"></a>00099 <span class="comment"> * return the actual size of a handle based on the sized fsopaque</span>
<a name="l00100"></a>00100 <span class="comment"> */</span>
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> nfs3_sizeof_handle(<span class="keyword">struct</span> <a class="code" href="structfile__handle__v3.html">file_handle_v3</a> *hdl)
<a name="l00103"></a>00103 {
<a name="l00104"></a>00104         <span class="keywordflow">return</span> offsetof(<span class="keyword">struct</span> <a class="code" href="structfile__handle__v3.html">file_handle_v3</a>, <a class="code" href="structfile__handle__v3.html#a8f5d4a11f487fcb3ef3087b577400d9c">fsopaque</a>) + hdl-&gt;<a class="code" href="structfile__handle__v3.html#a58af651be8d034cd874347538e3b3174">fs_len</a>;
<a name="l00105"></a>00105 }
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 <span class="comment">/* This is up to 128 bytes, aligned on 32 bits</span>
<a name="l00108"></a>00108 <span class="comment"> */</span>
<a name="l00109"></a><a class="code" href="structfile__handle__v4.html">00109</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structfile__handle__v4.html">file_handle_v4</a>
<a name="l00110"></a>00110 {
<a name="l00111"></a><a class="code" href="structfile__handle__v4.html#ae6a0a02cdc9828888c0aae4e73361ac9">00111</a>   uint8_t <a class="code" href="structfile__handle__v4.html#ae6a0a02cdc9828888c0aae4e73361ac9">fhversion</a>;      <span class="comment">/* set to 0x41 to separate from Linux knfsd len = 1 byte */</span>
<a name="l00112"></a><a class="code" href="structfile__handle__v4.html#a2cb2790f0eda27f030b507981996da65">00112</a>   uint8_t <a class="code" href="structfile__handle__v4.html#a2cb2790f0eda27f030b507981996da65">xattr_pos</a>;      <span class="comment">/*                                          len = 1 byte    */</span>
<a name="l00113"></a><a class="code" href="structfile__handle__v4.html#ada08d7a937cf136824188f37bb679af5">00113</a>   uint16_t <a class="code" href="structfile__handle__v4.html#ada08d7a937cf136824188f37bb679af5">exportid</a>;      <span class="comment">/* must be correlated to exportlist_t::id   len = 2 bytes   */</span>
<a name="l00114"></a><a class="code" href="structfile__handle__v4.html#a376e0dd8ed85ecf7052e4a2318520116">00114</a>   <a class="code" href="extended__types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="structfile__handle__v4.html#a376e0dd8ed85ecf7052e4a2318520116">srvboot_time</a>;  <span class="comment">/* 0 if FH won&#39;t expire                     len = 4 bytes   */</span>
<a name="l00115"></a><a class="code" href="structfile__handle__v4.html#a9f82806e4515d3a38d4c5261b6f9ccc2">00115</a>   uint16_t <a class="code" href="structfile__handle__v4.html#a9f82806e4515d3a38d4c5261b6f9ccc2">pseudofs_id</a>;   <span class="comment">/* Id for the pseudo fs related to this fh  len = 2 bytes   */</span>
<a name="l00116"></a><a class="code" href="structfile__handle__v4.html#acb8c18edfc4d4b851d62e1a13619df34">00116</a>   uint16_t <a class="code" href="structfile__handle__v4.html#acb8c18edfc4d4b851d62e1a13619df34">refid</a>;         <span class="comment">/* used for referral                        len = 2 bytes   */</span>
<a name="l00117"></a><a class="code" href="structfile__handle__v4.html#adca09429c49f92e96d96d69f625b9977">00117</a>   uint8_t <a class="code" href="structfile__handle__v4.html#adca09429c49f92e96d96d69f625b9977">ds_flag</a>;        <span class="comment">/* TRUE if FH is a &#39;DS file handle&#39;         len = 1 byte    */</span>
<a name="l00118"></a><a class="code" href="structfile__handle__v4.html#a582649bffee8d511ddc746c141ff5681">00118</a>   uint8_t <a class="code" href="structfile__handle__v4.html#a582649bffee8d511ddc746c141ff5681">pseudofs_flag</a>;  <span class="comment">/* TRUE if FH is within pseudofs            len = 1 byte    */</span>
<a name="l00119"></a><a class="code" href="structfile__handle__v4.html#a4ebfc1746d3a770908cb6b2b51f2a409">00119</a>   uint8_t <a class="code" href="structfile__handle__v4.html#a4ebfc1746d3a770908cb6b2b51f2a409">fs_len</a>;         <span class="comment">/* actual length of opaque handle           len = 1  byte */</span>
<a name="l00120"></a><a class="code" href="structfile__handle__v4.html#aa85d4714d1e45f5d824fde492a58fd25">00120</a>   uint8_t <a class="code" href="structfile__handle__v4.html#aa85d4714d1e45f5d824fde492a58fd25">fsopaque</a>[];     <span class="comment">/* persistent part of FSAL handle           len &lt;= 113 bytes */</span>
<a name="l00121"></a>00121 } <a class="code" href="nfs__file__handle_8h.html#a3a0bf8e6832584a66412c46565a11827">file_handle_v4_t</a>;
<a name="l00122"></a>00122 
<a name="l00123"></a>00123 <span class="comment">/* An NFSv4 handle of maximum size.  use for allocations, sizeof, and memset only</span>
<a name="l00124"></a>00124 <span class="comment"> * the pad space is where the opaque handle expands into. pad is struct aligned</span>
<a name="l00125"></a>00125 <span class="comment"> */</span>
<a name="l00126"></a><a class="code" href="structalloc__file__handle__v4.html">00126</a> <span class="keyword">struct </span><a class="code" href="structalloc__file__handle__v4.html">alloc_file_handle_v4</a> {
<a name="l00127"></a><a class="code" href="structalloc__file__handle__v4.html#ae54f5a019a413e76a906fbf02d9c71b2">00127</a>         <span class="keyword">struct </span><a class="code" href="structfile__handle__v4.html">file_handle_v4</a> <a class="code" href="structalloc__file__handle__v4.html#ae54f5a019a413e76a906fbf02d9c71b2">handle</a>;   <span class="comment">/* the real handle */</span>
<a name="l00128"></a><a class="code" href="structalloc__file__handle__v4.html#a155f2dc1dfd04e4adbe52014d2cd839c">00128</a>         uint8_t <a class="code" href="structalloc__file__handle__v4.html#a155f2dc1dfd04e4adbe52014d2cd839c">pad</a>[112];                       <span class="comment">/* pad to mandatory max 128 bytes */</span>
<a name="l00129"></a>00129 };
<a name="l00130"></a>00130 
<a name="l00131"></a>00131 <span class="comment">/* nfs4_sizeof_handle</span>
<a name="l00132"></a>00132 <span class="comment"> * return the actual size of a handle based on the sized fsopaque</span>
<a name="l00133"></a>00133 <span class="comment"> */</span>
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> nfs4_sizeof_handle(<span class="keyword">struct</span> <a class="code" href="structfile__handle__v4.html">file_handle_v4</a> *hdl)
<a name="l00136"></a>00136 {
<a name="l00137"></a>00137         <span class="keywordflow">return</span> offsetof(<span class="keyword">struct</span> <a class="code" href="structfile__handle__v4.html">file_handle_v4</a>, <a class="code" href="structfile__handle__v4.html#aa85d4714d1e45f5d824fde492a58fd25">fsopaque</a>) + hdl-&gt;<a class="code" href="structfile__handle__v4.html#a4ebfc1746d3a770908cb6b2b51f2a409">fs_len</a>;
<a name="l00138"></a>00138 }
<a name="l00139"></a>00139 
<a name="l00140"></a><a class="code" href="nfs__file__handle_8h.html#add3fa684cef3f27ade6bb43b7b22e7cf">00140</a> <span class="preprocessor">#define LEN_FH_STR 1024</span>
<a name="l00141"></a>00141 <span class="preprocessor"></span>
<a name="l00142"></a>00142 
<a name="l00143"></a>00143 <span class="comment">/* File handle translation utility */</span>
<a name="l00144"></a>00144 <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a7c04885ca0eec5af44ad719daaf0622f">nfs4_FhandleToFSAL</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh4,
<a name="l00145"></a>00145                        <span class="keyword">struct</span> <a class="code" href="structfsal__handle__desc.html">fsal_handle_desc</a> *fh_desc,
<a name="l00146"></a>00146                        <a class="code" href="structfsal__op__context____.html">fsal_op_context_t</a> * pcontext);
<a name="l00147"></a>00147 <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#ac4b3303a5e40600c415dab544800c996">nfs3_FhandleToFSAL</a>(<a class="code" href="structnfs__fh3.html">nfs_fh3</a> * pfh3,
<a name="l00148"></a>00148                        <span class="keyword">struct</span> <a class="code" href="structfsal__handle__desc.html">fsal_handle_desc</a> *fh_desc,
<a name="l00149"></a>00149                        <a class="code" href="structfsal__op__context____.html">fsal_op_context_t</a> * pcontext);
<a name="l00150"></a>00150 <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a86930f1fe49ff73de746cff184a31b05">nfs2_FhandleToFSAL</a>(<a class="code" href="nfs23_8h.html#a4122a54677d2f66ef8a8f564b6076db2">fhandle2</a> * pfh2,
<a name="l00151"></a>00151                        <span class="keyword">struct</span> <a class="code" href="structfsal__handle__desc.html">fsal_handle_desc</a> *fh_desc,
<a name="l00152"></a>00152                        <a class="code" href="structfsal__op__context____.html">fsal_op_context_t</a> * pcontext);
<a name="l00153"></a>00153 
<a name="l00154"></a>00154 <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a3c39bdd89b373290fb7050bf6faded41">nfs4_FSALToFhandle</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> *pfh4,
<a name="l00155"></a>00155                        <a class="code" href="structfsal__handle____.html">fsal_handle_t</a> *pfsalhandle,
<a name="l00156"></a>00156                        <a class="code" href="structcompoud__data.html" title="Compound data.">compound_data_t</a> *data);
<a name="l00157"></a>00157 <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a28ace18419e381b0bf3d17215e47f34f">nfs3_FSALToFhandle</a>(<a class="code" href="structnfs__fh3.html">nfs_fh3</a> * pfh3, <a class="code" href="structfsal__handle____.html">fsal_handle_t</a> * pfsalhandle,
<a name="l00158"></a>00158                        <a class="code" href="structexportlist____.html">exportlist_t</a> * pexport);
<a name="l00159"></a>00159 <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a474e4d9f932d603dc25c3f49a00edbe2">nfs2_FSALToFhandle</a>(<a class="code" href="nfs23_8h.html#a4122a54677d2f66ef8a8f564b6076db2">fhandle2</a> * pfh2, <a class="code" href="structfsal__handle____.html">fsal_handle_t</a> * pfsalhandle,
<a name="l00160"></a>00160                        <a class="code" href="structexportlist____.html">exportlist_t</a> * pexport);
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 <span class="comment">/* Extraction of export id from a file handle */</span>
<a name="l00163"></a>00163 <span class="keywordtype">short</span> <a class="code" href="nfs__file__handle_8h.html#a4e15ee51a5126d013954cb8ddf34b62b">nfs2_FhandleToExportId</a>(<a class="code" href="nfs23_8h.html#a4122a54677d2f66ef8a8f564b6076db2">fhandle2</a> * pfh2);
<a name="l00164"></a>00164 <span class="keywordtype">short</span> <a class="code" href="nfs__file__handle_8h.html#abd252dd5f6d20c1b81760f8b2185e35d">nfs4_FhandleToExportId</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh4);
<a name="l00165"></a>00165 <span class="keywordtype">short</span> <a class="code" href="nfs__file__handle_8h.html#a8453425f543449aa0b989e06731395f3">nfs3_FhandleToExportId</a>(<a class="code" href="structnfs__fh3.html">nfs_fh3</a> * pfh3);
<a name="l00166"></a>00166 
<a name="l00167"></a>00167 <span class="preprocessor">#ifdef _USE_NLM</span>
<a name="l00168"></a>00168 <span class="preprocessor"></span><span class="keywordtype">short</span> nlm4_FhandleToExportId(netobj * pfh3);
<a name="l00169"></a>00169 <span class="preprocessor">#endif</span>
<a name="l00170"></a>00170 <span class="preprocessor"></span>
<a name="l00171"></a>00171 <span class="comment">/* nfs3 validation */</span>
<a name="l00172"></a>00172 <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#adc271e9ca1c94dd6b2054546d51b5f54">nfs3_Is_Fh_Invalid</a>(<a class="code" href="structnfs__fh3.html">nfs_fh3</a> *pfh3);
<a name="l00173"></a>00173 
<a name="l00174"></a>00174 <span class="comment">/* NFSv4 specific FH related functions */</span>
<a name="l00175"></a>00175 <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#aea877e7eb396fbb3c64ff2eb789cf5fc">nfs4_Is_Fh_Empty</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh);
<a name="l00176"></a>00176 <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a342a0d49502947ec34dffa7b6b95f505">nfs4_Is_Fh_Xattr</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh);
<a name="l00177"></a>00177 <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a517dfc86532641b32ac7c178aeb30c46">nfs4_Is_Fh_Pseudo</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh);
<a name="l00178"></a>00178 <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a5dd8010e82ca42c8cfb5afd636426813">nfs4_Is_Fh_Expired</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh);
<a name="l00179"></a>00179 <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#ac9471373d4493abc215f5d8b86783764">nfs4_Is_Fh_Invalid</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh);
<a name="l00180"></a>00180 <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a9c76d0dc9e953967d9ea5946495623eb">nfs4_Is_Fh_Referral</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh);
<a name="l00181"></a>00181 <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#ad1854be7773575d29acecb8275dd7733">nfs4_Is_Fh_DSHandle</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * pfh);
<a name="l00182"></a>00182 
<a name="l00183"></a>00183 <span class="comment">/* This one is used to detect Xattr related FH */</span>
<a name="l00184"></a>00184 <span class="keywordtype">int</span> <a class="code" href="nfs__file__handle_8h.html#a668b574eeda3bc36c6b891636a37a82d">nfs3_Is_Fh_Xattr</a>(<a class="code" href="structnfs__fh3.html">nfs_fh3</a> * pfh);
<a name="l00185"></a>00185 
<a name="l00186"></a>00186 <span class="comment">/* File handle print function (;ostly use for debugging) */</span>
<a name="l00187"></a>00187 <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#abdd12d3a3c3582dcc1fafe33c7420afa">print_fhandle2</a>(<a class="code" href="log_8h.html#a80c77121778df3130d72817d3d1a9451">log_components_t</a> component, <a class="code" href="nfs23_8h.html#a4122a54677d2f66ef8a8f564b6076db2">fhandle2</a> *fh);
<a name="l00188"></a>00188 <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a8390da3337ec3c638c9e9e72186c1b71">print_fhandle3</a>(<a class="code" href="log_8h.html#a80c77121778df3130d72817d3d1a9451">log_components_t</a> component, <a class="code" href="structnfs__fh3.html">nfs_fh3</a> *fh);
<a name="l00189"></a>00189 <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#ae7e5192be8bc0297924f4bc4f1c0efe0">print_fhandle4</a>(<a class="code" href="log_8h.html#a80c77121778df3130d72817d3d1a9451">log_components_t</a> component, <a class="code" href="structnfs__fh4.html">nfs_fh4</a> *fh);
<a name="l00190"></a>00190 <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a966c226c749b60cf363d7a924b3ca5d6">print_fhandle_nlm</a>(<a class="code" href="log_8h.html#a80c77121778df3130d72817d3d1a9451">log_components_t</a> component, netobj *fh);
<a name="l00191"></a>00191 <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a3d381aeccd1e8570ce7e216bc912d2ea">print_buff</a>(<a class="code" href="log_8h.html#a80c77121778df3130d72817d3d1a9451">log_components_t</a> component, <span class="keywordtype">char</span> *buff, <span class="keywordtype">int</span> len);
<a name="l00192"></a>00192 <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a0b45a92580c15bfeb1a6570d875f0eec">LogCompoundFH</a>(<a class="code" href="structcompoud__data.html" title="Compound data.">compound_data_t</a> * data);
<a name="l00193"></a>00193 
<a name="l00194"></a>00194 <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a3a9c85d9f52b8bbdc1102925bcb320c1">sprint_fhandle2</a>(<span class="keywordtype">char</span> *str, <a class="code" href="nfs23_8h.html#a4122a54677d2f66ef8a8f564b6076db2">fhandle2</a> *fh);
<a name="l00195"></a>00195 <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#aacf77e57e01373c6e5bc261be964bb6e">sprint_fhandle3</a>(<span class="keywordtype">char</span> *str, <a class="code" href="structnfs__fh3.html">nfs_fh3</a> *fh);
<a name="l00196"></a>00196 <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#af7cf44dc64d6f08c15f6874adcbdd8de">sprint_fhandle4</a>(<span class="keywordtype">char</span> *str, <a class="code" href="structnfs__fh4.html">nfs_fh4</a> *fh);
<a name="l00197"></a>00197 <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a51bd36d3e7fcc63f7f12569d7fd28901">sprint_fhandle_nlm</a>(<span class="keywordtype">char</span> *str, netobj *fh);
<a name="l00198"></a>00198 <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a4fd593aa6e94740c4152538b3c956e3a">sprint_buff</a>(<span class="keywordtype">char</span> *str, <span class="keywordtype">char</span> *buff, <span class="keywordtype">int</span> len);
<a name="l00199"></a>00199 <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a5943b0ebcd28d76e5e84618e470942c6">sprint_mem</a>(<span class="keywordtype">char</span> *str, <span class="keywordtype">char</span> *buff, <span class="keywordtype">int</span> len);
<a name="l00200"></a>00200 
<a name="l00201"></a>00201 <span class="keywordtype">void</span> <a class="code" href="nfs__file__handle_8h.html#a03954b5fee52c62dbcdcbc85c8f08377">nfs4_sprint_fhandle</a>(<a class="code" href="structnfs__fh4.html">nfs_fh4</a> * fh4p, <span class="keywordtype">char</span> *outstr) ;
<a name="l00202"></a>00202 
<a name="l00203"></a><a class="code" href="nfs__file__handle_8h.html#abda2ec58bed0a9e13154c617b793398b">00203</a> <span class="preprocessor">#define LogHandleNFS4( label, fh4p )                        \</span>
<a name="l00204"></a>00204 <span class="preprocessor">  do {                                                      \</span>
<a name="l00205"></a>00205 <span class="preprocessor">    if(isFullDebug(COMPONENT_NFS_V4))                       \</span>
<a name="l00206"></a>00206 <span class="preprocessor">      {                                                     \</span>
<a name="l00207"></a>00207 <span class="preprocessor">        char str[LEN_FH_STR];                               \</span>
<a name="l00208"></a>00208 <span class="preprocessor">        sprint_fhandle4(str, fh4p);                         \</span>
<a name="l00209"></a>00209 <span class="preprocessor">        LogFullDebug(COMPONENT_NFS_V4, &quot;%s%s&quot;, label, str); \</span>
<a name="l00210"></a>00210 <span class="preprocessor">      }                                                     \</span>
<a name="l00211"></a>00211 <span class="preprocessor">  } while (0)</span>
<a name="l00212"></a>00212 <span class="preprocessor"></span>
<a name="l00213"></a>00213 <span class="preprocessor">#endif                          </span><span class="comment">/* _NFS_FILE_HANDLE_H */</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 21 2012 for nfs-ganesha by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
